import{j as e,f as Ge,h as le}from"./vendor-ui-DDe0YJcq.js";import{r as c,L as He,e as ue}from"./vendor-react-Dm5yKVFn.js";import{B as k}from"./button-BPDCRNZn.js";import{C as E,f as B,g as q,h as z,a as L,e as Ee,U as X,B as O,P as we,L as We,T as Ye,b as Ke,c as W,d as Y}from"./card-DMx00rkT.js";import{P as xe}from"./index-jHwNEBWd.js";import{c as ae,b as he,e as Z,X as ye,u as b,s as P}from"./main-Dqw_nRK_.js";import{A as ie,N as Qe,F as Xe}from"./Footer-DqVbtfmC.js";import{S as Ze}from"./SEO-BBAjk1Dc.js";import{I as U}from"./input-B3IvJBED.js";import{T as Je}from"./textarea-Cp0gT2yx.js";import{B as D,S as ce,a as oe,b as de,c as me,d as K,C as es}from"./select-ckUC9B5c.js";import{F as be}from"./file-text-CyLdlFz-.js";import{C as pe}from"./circle-check-big-CGRPdbyO.js";import{L as F}from"./loader-circle-BRY1vy7Y.js";import{U as Se,p as Q}from"./positions-BkzuRAb9.js";import{M as Le}from"./mail-C2IVz-W4.js";import{P as ss}from"./phone-CVu4dxen.js";import{L as as}from"./linkedin-Clm9cpK2.js";import{B as te}from"./building-2-BXZ4hfnh.js";import{A as Ce}from"./award-DBicwoKd.js";import{m as G,A as ts}from"./vendor-motion-xXdXH0r-.js";import{C as rs}from"./calendar-d49zy7uo.js";import{C as se}from"./clock-N4nfK3VF.js";import{C as ns}from"./circle-x-B7wI0d3E.js";import{C as ls}from"./circle-alert-Dbqh1IU0.js";import{S as Ie}from"./search-CJwhZxYQ.js";import{M as Fe}from"./map-pin-DqCUj9AN.js";import{C as is}from"./chevron-down-DpDVeVl4.js";import{L as ee}from"./label-B2ln1hT3.js";import{C as cs}from"./check-xom9-H9c.js";import{S as os}from"./shield-D-AmUPPO.js";import{L as re}from"./lock-ChxMYH3y.js";import{S as ds}from"./settings-bUXnPoRA.js";import"./vendor-query-H2NWpbgn.js";import"./index-BdQq_4o_.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=ae("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=ae("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=ae("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=ae("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function us(s,n=[]){let r=[];function d(o,m){const u=c.createContext(m);u.displayName=o+"Context";const h=r.length;r=[...r,m];const y=f=>{var I;const{scope:g,children:x,...p}=f,i=((I=g==null?void 0:g[s])==null?void 0:I[h])||u,v=c.useMemo(()=>p,Object.values(p));return e.jsx(i.Provider,{value:v,children:x})};y.displayName=o+"Provider";function N(f,g){var i;const x=((i=g==null?void 0:g[s])==null?void 0:i[h])||u,p=c.useContext(x);if(p)return p;if(m!==void 0)return m;throw new Error(`\`${f}\` must be used within \`${o}\``)}return[y,N]}const l=()=>{const o=r.map(m=>c.createContext(m));return function(u){const h=(u==null?void 0:u[s])||o;return c.useMemo(()=>({[`__scope${s}`]:{...u,[s]:h}}),[u,h])}};return l.scopeName=s,[d,xs(l,...n)]}function xs(...s){const n=s[0];if(s.length===1)return n;const r=()=>{const d=s.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(o){const m=d.reduce((u,{useScope:h,scopeName:y})=>{const f=h(o)[`__scope${y}`];return{...u,...f}},{});return c.useMemo(()=>({[`__scope${n.scopeName}`]:m}),[m])}};return r.scopeName=n.scopeName,r}var Te={exports:{}},Re={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H=c;function hs(s,n){return s===n&&(s!==0||1/s===1/n)||s!==s&&n!==n}var ps=typeof Object.is=="function"?Object.is:hs,js=H.useState,fs=H.useEffect,gs=H.useLayoutEffect,Ns=H.useDebugValue;function vs(s,n){var r=n(),d=js({inst:{value:r,getSnapshot:n}}),l=d[0].inst,o=d[1];return gs(function(){l.value=r,l.getSnapshot=n,ne(l)&&o({inst:l})},[s,r,n]),fs(function(){return ne(l)&&o({inst:l}),s(function(){ne(l)&&o({inst:l})})},[s]),Ns(r),r}function ne(s){var n=s.getSnapshot;s=s.value;try{var r=n();return!ps(s,r)}catch{return!0}}function ws(s,n){return n()}var ys=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ws:vs;Re.useSyncExternalStore=H.useSyncExternalStore!==void 0?H.useSyncExternalStore:ys;Te.exports=Re;var bs=Te.exports;function Ss(){return bs.useSyncExternalStore(Cs,()=>!0,()=>!1)}function Cs(){return()=>{}}var je="Avatar",[_s]=us(je),[ks,Ue]=_s(je),De=c.forwardRef((s,n)=>{const{__scopeAvatar:r,...d}=s,[l,o]=c.useState("idle");return e.jsx(ks,{scope:r,imageLoadingStatus:l,onImageLoadingStatusChange:o,children:e.jsx(xe.span,{...d,ref:n})})});De.displayName=je;var $e="AvatarImage",Me=c.forwardRef((s,n)=>{const{__scopeAvatar:r,src:d,onLoadingStatusChange:l=()=>{},...o}=s,m=Ue($e,r),u=Ps(d,o),h=Ge(y=>{l(y),m.onImageLoadingStatusChange(y)});return le(()=>{u!=="idle"&&h(u)},[u,h]),u==="loaded"?e.jsx(xe.img,{...o,ref:n,src:d}):null});Me.displayName=$e;var Be="AvatarFallback",qe=c.forwardRef((s,n)=>{const{__scopeAvatar:r,delayMs:d,...l}=s,o=Ue(Be,r),[m,u]=c.useState(d===void 0);return c.useEffect(()=>{if(d!==void 0){const h=window.setTimeout(()=>u(!0),d);return()=>window.clearTimeout(h)}},[d]),m&&o.imageLoadingStatus!=="loaded"?e.jsx(xe.span,{...l,ref:n}):null});qe.displayName=Be;function Pe(s,n){return s?n?(s.src!==n&&(s.src=n),s.complete&&s.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Ps(s,{referrerPolicy:n,crossOrigin:r}){const d=Ss(),l=c.useRef(null),o=d?(l.current||(l.current=new window.Image),l.current):null,[m,u]=c.useState(()=>Pe(o,s));return le(()=>{u(Pe(o,s))},[o,s]),le(()=>{const h=f=>()=>{u(f)};if(!o)return;const y=h("loaded"),N=h("error");return o.addEventListener("load",y),o.addEventListener("error",N),n&&(o.referrerPolicy=n),typeof r=="string"&&(o.crossOrigin=r),()=>{o.removeEventListener("load",y),o.removeEventListener("error",N)}},[o,r,n]),m}var ze=De,Ve=Me,Oe=qe;const fe=c.forwardRef(({className:s,...n},r)=>e.jsx(ze,{ref:r,className:he("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...n}));fe.displayName=ze.displayName;const ge=c.forwardRef(({className:s,...n},r)=>e.jsx(Ve,{ref:r,className:he("aspect-square h-full w-full",s),...n}));ge.displayName=Ve.displayName;const Ne=c.forwardRef(({className:s,...n},r)=>e.jsx(Oe,{ref:r,className:he("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...n}));Ne.displayName=Oe.displayName;const As=({profile:s,onProfileUpdate:n})=>{const{user:r}=Z(),[d,l]=c.useState(!1),[o,m]=c.useState(!1),[u,h]=c.useState(!1),[y,N]=c.useState(!1),[f,g]=c.useState(""),[x,p]=c.useState(""),[i,v]=c.useState({full_name:(s==null?void 0:s.full_name)||"",phone:(s==null?void 0:s.phone)||"",linkedin_url:(s==null?void 0:s.linkedin_url)||"",current_company:(s==null?void 0:s.current_company)||"",experience_years:(s==null?void 0:s.experience_years)||0,bio:(s==null?void 0:s.bio)||"",skills:(s==null?void 0:s.skills)||[],certifications:(s==null?void 0:s.certifications)||[]}),I=async()=>{if(r){m(!0);try{const{error:t}=await P.from("applicant_profiles").update({full_name:i.full_name||null,phone:i.phone||null,linkedin_url:i.linkedin_url||null,current_company:i.current_company||null,experience_years:i.experience_years,bio:i.bio||null,skills:i.skills,certifications:i.certifications}).eq("user_id",r.id);if(t)throw t;b.success("Profile updated successfully!"),l(!1),n()}catch(t){console.error("Error updating profile:",t),b.error(t.message||"Failed to update profile")}finally{m(!1)}}},S=async t=>{var A;const j=(A=t.target.files)==null?void 0:A[0];if(!j||!r)return;if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(j.type)){b.error("Please upload a PDF or Word document");return}if(j.size>10*1024*1024){b.error("File size must be less than 10MB");return}h(!0);try{const w=j.name.split(".").pop(),T=`profile-${r.id}-${Date.now()}.${w}`;s!=null&&s.resume_url&&await P.storage.from("resumes").remove([s.resume_url]);const{error:J}=await P.storage.from("resumes").upload(T,j,{upsert:!0});if(J)throw J;const{error:ve}=await P.from("applicant_profiles").update({resume_url:T}).eq("user_id",r.id);if(ve)throw ve;b.success("Resume uploaded successfully!"),n()}catch(w){console.error("Error uploading resume:",w),b.error("Failed to upload resume")}finally{h(!1)}},C=async()=>{if(!(!r||!(s!=null&&s.resume_url))){N(!0);try{await P.storage.from("resumes").remove([s.resume_url]);const{error:t}=await P.from("applicant_profiles").update({resume_url:null}).eq("user_id",r.id);if(t)throw t;b.success("Resume removed"),n()}catch(t){console.error("Error deleting resume:",t),b.error("Failed to remove resume")}finally{N(!1)}}},_=()=>{f.trim()&&!i.skills.includes(f.trim())&&(v(t=>({...t,skills:[...t.skills,f.trim()]})),g(""))},M=t=>{v(j=>({...j,skills:j.skills.filter(a=>a!==t)}))},R=()=>{x.trim()&&!i.certifications.includes(x.trim())&&(v(t=>({...t,certifications:[...t.certifications,x.trim()]})),p(""))},$=t=>{v(j=>({...j,certifications:j.certifications.filter(a=>a!==t)}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(E,{children:[e.jsxs(B,{children:[e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"w-5 h-5"}),"Resume"]}),e.jsx(z,{children:"Upload your resume to auto-fill job applications"})]}),e.jsx(L,{children:s!=null&&s.resume_url?e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/50 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(be,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium flex items-center gap-2",children:["Resume uploaded",e.jsx(pe,{className:"w-4 h-4 text-primary"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This will be used when you apply for jobs"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"file",id:"resume-replace",accept:".pdf,.doc,.docx",className:"hidden",onChange:S,disabled:u}),e.jsx("label",{htmlFor:"resume-replace",children:e.jsx(k,{variant:"outline",size:"sm",disabled:u,asChild:!0,children:e.jsx("span",{className:"cursor-pointer",children:u?e.jsx(F,{className:"w-4 h-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"w-4 h-4 mr-2"}),"Replace"]})})})}),e.jsx(k,{variant:"ghost",size:"sm",onClick:C,disabled:y,children:y?e.jsx(F,{className:"w-4 h-4 animate-spin"}):e.jsx(Ee,{className:"w-4 h-4 text-muted-foreground"})})]})]}):e.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-8 text-center",children:[e.jsx(ke,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"font-medium mb-1",children:"No resume uploaded"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Upload your resume to speed up job applications"}),e.jsx("input",{type:"file",id:"resume-upload",accept:".pdf,.doc,.docx",className:"hidden",onChange:S,disabled:u}),e.jsx("label",{htmlFor:"resume-upload",children:e.jsx(k,{disabled:u,asChild:!0,children:e.jsx("span",{className:"cursor-pointer",children:u?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"w-4 h-4 mr-2"}),"Upload Resume"]})})})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-3",children:"PDF or Word document, max 10MB"})]})})]}),e.jsxs(E,{children:[e.jsxs(B,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5"}),"Profile Information"]}),e.jsx(z,{children:"Keep your profile updated to get noticed by recruiters"})]}),d?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsxs(k,{onClick:I,disabled:o,children:[o?e.jsx(F,{className:"w-4 h-4 animate-spin"}):e.jsx(ms,{className:"w-4 h-4 mr-2"}),"Save"]})]}):e.jsx(k,{onClick:()=>l(!0),children:"Edit Profile"})]}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4"})," Full Name"]}),d?e.jsx(U,{value:i.full_name,onChange:t=>v(j=>({...j,full_name:t.target.value})),placeholder:"Your full name"}):e.jsx("p",{className:"text-foreground",children:(s==null?void 0:s.full_name)||"Not provided"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Le,{className:"w-4 h-4"})," Email"]}),e.jsx("p",{className:"text-foreground",children:s==null?void 0:s.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ss,{className:"w-4 h-4"})," Phone"]}),d?e.jsx(U,{value:i.phone,onChange:t=>v(j=>({...j,phone:t.target.value})),placeholder:"Your phone number"}):e.jsx("p",{className:"text-foreground",children:(s==null?void 0:s.phone)||"Not provided"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(as,{className:"w-4 h-4"})," LinkedIn"]}),d?e.jsx(U,{value:i.linkedin_url,onChange:t=>v(j=>({...j,linkedin_url:t.target.value})),placeholder:"https://linkedin.com/in/yourprofile"}):e.jsx("p",{className:"text-foreground",children:s!=null&&s.linkedin_url?e.jsx("a",{href:s.linkedin_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"View Profile"}):"Not provided"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4"})," Current Company"]}),d?e.jsx(U,{value:i.current_company,onChange:t=>v(j=>({...j,current_company:t.target.value})),placeholder:"Your current company"}):e.jsx("p",{className:"text-foreground",children:(s==null?void 0:s.current_company)||"Not provided"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4"})," Experience"]}),d?e.jsxs(ce,{value:i.experience_years.toString(),onValueChange:t=>v(j=>({...j,experience_years:parseInt(t)})),children:[e.jsx(oe,{children:e.jsx(de,{})}),e.jsx(me,{children:[0,1,2,3,4,5,6,7,8,9,10,15,20].map(t=>e.jsx(K,{value:t.toString(),children:t===0?"Fresh Graduate":`${t}+ years`},t))})]}):e.jsx("p",{className:"text-foreground",children:(s==null?void 0:s.experience_years)===0?"Fresh Graduate":`${s==null?void 0:s.experience_years}+ years`})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4"})," Bio"]}),d?e.jsx(Je,{value:i.bio,onChange:t=>v(j=>({...j,bio:t.target.value})),placeholder:"Tell us about yourself, your career goals, and what you're looking for...",rows:4}):e.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:(s==null?void 0:s.bio)||"No bio provided"})]})]})]}),e.jsxs(E,{children:[e.jsxs(B,{children:[e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"w-5 h-5"}),"Skills"]}),e.jsx(z,{children:"Add your technical and soft skills"})]}),e.jsxs(L,{children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[i.skills.map(t=>e.jsxs(O,{variant:"secondary",className:"text-sm py-1 px-3",children:[t,d&&e.jsx("button",{onClick:()=>M(t),className:"ml-2",children:e.jsx(ye,{className:"w-3 h-3"})})]},t)),i.skills.length===0&&!d&&e.jsx("p",{className:"text-muted-foreground",children:"No skills added yet"})]}),d&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(U,{value:f,onChange:t=>g(t.target.value),placeholder:"Add a skill (e.g., Python, Kubernetes)",onKeyPress:t=>t.key==="Enter"&&(t.preventDefault(),_())}),e.jsx(k,{type:"button",onClick:_,variant:"outline",children:e.jsx(we,{className:"w-4 h-4"})})]})]})]}),e.jsxs(E,{children:[e.jsxs(B,{children:[e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"w-5 h-5"}),"Certifications"]}),e.jsx(z,{children:"List your professional certifications"})]}),e.jsxs(L,{children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[i.certifications.map(t=>e.jsxs(O,{variant:"outline",className:"text-sm py-1 px-3",children:[t,d&&e.jsx("button",{onClick:()=>$(t),className:"ml-2",children:e.jsx(ye,{className:"w-3 h-3"})})]},t)),i.certifications.length===0&&!d&&e.jsx("p",{className:"text-muted-foreground",children:"No certifications added yet"})]}),d&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(U,{value:x,onChange:t=>p(t.target.value),placeholder:"Add a certification (e.g., AWS Solutions Architect)",onKeyPress:t=>t.key==="Enter"&&(t.preventDefault(),R())}),e.jsx(k,{type:"button",onClick:R,variant:"outline",children:e.jsx(we,{className:"w-4 h-4"})})]})]})]})]})},Ae=s=>{switch(s.toLowerCase()){case"pending":return{icon:se,color:"bg-yellow-500/10 text-yellow-600 border-yellow-500/30",label:"Under Review"};case"reviewed":return{icon:ls,color:"bg-blue-500/10 text-blue-600 border-blue-500/30",label:"Reviewed"};case"interviewed":return{icon:D,color:"bg-purple-500/10 text-purple-600 border-purple-500/30",label:"Interview Stage"};case"hired":return{icon:pe,color:"bg-green-500/10 text-green-600 border-green-500/30",label:"Hired!"};case"rejected":return{icon:ns,color:"bg-red-500/10 text-red-600 border-red-500/30",label:"Not Selected"};default:return{icon:se,color:"bg-muted text-muted-foreground",label:s}}},Es=({userId:s})=>{const[n,r]=c.useState([]),[d,l]=c.useState(!0);c.useEffect(()=>{o()},[s]);const o=async()=>{if(s)try{const{data:m,error:u}=await P.from("job_applications").select("*").eq("user_id",s).order("created_at",{ascending:!1});if(u)throw u;r(m||[])}catch(m){console.error("Error fetching applications:",m),b.error("Failed to load applications")}finally{l(!1)}};return d?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(F,{className:"w-8 h-8 animate-spin text-primary"})}):n.length===0?e.jsx(E,{children:e.jsxs(L,{className:"py-12 text-center",children:[e.jsx(D,{className:"w-16 h-16 mx-auto text-muted-foreground/50 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Applications Yet"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"You haven't applied to any positions yet. Browse our open positions and start your journey!"}),e.jsx(He,{to:"/careers",children:e.jsxs(k,{children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Browse Open Positions"]})})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h2",{className:"text-xl font-semibold",children:["Your Applications (",n.length,")"]})}),e.jsx("div",{className:"grid gap-4",children:n.map((m,u)=>{const h=Ae(m.status),y=h.icon;return e.jsx(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:u*.1},children:e.jsx(E,{className:"hover:shadow-md transition-shadow",children:e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:e.jsx(D,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold",children:m.position}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-2 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(rs,{className:"w-4 h-4"}),"Applied ",new Date(m.created_at).toLocaleDateString()]}),m.current_company&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(te,{className:"w-4 h-4"}),m.current_company]})]})]})]})}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(O,{variant:"outline",className:h.color,children:[e.jsx(y,{className:"w-4 h-4 mr-1"}),h.label]})})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-border",children:e.jsx("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:["pending","reviewed","interviewed","hired"].map((N,f)=>{const g=Ae(N),x=g.icon,p=["pending","reviewed","interviewed","hired"].indexOf(m.status.toLowerCase()),i=f<=p&&m.status.toLowerCase()!=="rejected",v=f===p;return e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium ${i?v?g.color:"bg-green-500/10 text-green-600":"bg-muted text-muted-foreground"}`,children:[e.jsx(x,{className:"w-3 h-3"}),g.label]}),f<3&&e.jsx("div",{className:`w-8 h-0.5 mx-1 ${f<p&&m.status.toLowerCase()!=="rejected"?"bg-green-500":"bg-muted"}`})]},N)})})})]})})},m.id)})})]})},Ls=({appliedPositions:s=[],onSavedJobsChange:n,pendingApplyPosition:r,onApplyComplete:d})=>{const l=ue(),{user:o}=Z(),[m,u]=c.useState(""),[h,y]=c.useState("all"),[N,f]=c.useState("all"),[g,x]=c.useState(null),[p,i]=c.useState([]),[v,I]=c.useState(null),S=[...new Set(Q.map(a=>a.department))],C=[...new Set(Q.map(a=>a.type))];c.useEffect(()=>{o&&_()},[o]),c.useEffect(()=>{r&&(x(r),setTimeout(()=>{const a=document.getElementById(`position-${r}`);a&&a.scrollIntoView({behavior:"smooth",block:"center"})},300))},[r]);const _=async()=>{if(o)try{const{data:a,error:A}=await P.from("saved_jobs").select("position_id").eq("user_id",o.id);if(A)throw A;i((a==null?void 0:a.map(w=>w.position_id))||[])}catch(a){console.error("Error fetching saved jobs:",a)}},M=async(a,A)=>{if(A.stopPropagation(),!o){b.info("Please sign in to save jobs");return}I(a.id);try{if(p.includes(a.id)){const{error:w}=await P.from("saved_jobs").delete().eq("user_id",o.id).eq("position_id",a.id);if(w)throw w;i(T=>T.filter(J=>J!==a.id)),b.success("Job removed from saved list")}else{const{error:w}=await P.from("saved_jobs").insert({user_id:o.id,position_id:a.id,position_title:a.title});if(w)throw w;i(T=>[...T,a.id]),b.success("Job saved for later")}n==null||n()}catch(w){console.error("Error toggling saved job:",w),b.error("Failed to update saved jobs")}finally{I(null)}},R=Q.filter(a=>{const A=a.title.toLowerCase().includes(m.toLowerCase())||a.description.toLowerCase().includes(m.toLowerCase())||a.department.toLowerCase().includes(m.toLowerCase()),w=h==="all"||a.department===h,T=N==="all"||a.type===N;return A&&w&&T}),$=a=>{sessionStorage.setItem("applyPositionId",a),l("/careers")},t=a=>s.includes(a),j=a=>p.includes(a);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(E,{children:e.jsx(L,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ie,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(U,{placeholder:"Search positions...",value:m,onChange:a=>u(a.target.value),className:"pl-10"})]}),e.jsxs(ce,{value:h,onValueChange:y,children:[e.jsx(oe,{className:"w-full md:w-[180px]",children:e.jsx(de,{placeholder:"Department"})}),e.jsxs(me,{children:[e.jsx(K,{value:"all",children:"All Departments"}),S.map(a=>e.jsx(K,{value:a,children:a},a))]})]}),e.jsxs(ce,{value:N,onValueChange:f,children:[e.jsx(oe,{className:"w-full md:w-[150px]",children:e.jsx(de,{placeholder:"Type"})}),e.jsxs(me,{children:[e.jsx(K,{value:"all",children:"All Types"}),C.map(a=>e.jsx(K,{value:a,children:a},a))]})]})]})})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",R.length," of ",Q.length," positions"]}),p.length>0&&e.jsxs(O,{variant:"secondary",children:[e.jsx(V,{className:"w-3 h-3 mr-1 fill-current"}),p.length," saved"]})]}),e.jsx("div",{className:"space-y-4",children:R.length===0?e.jsx(E,{children:e.jsxs(L,{className:"py-12 text-center",children:[e.jsx(D,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No positions found"}),e.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search or filters"})]})}):R.map((a,A)=>e.jsx(G.div,{id:`position-${a.id}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:A*.05},children:e.jsx(E,{className:`overflow-hidden hover:shadow-md transition-shadow ${r===a.id?"ring-2 ring-primary":""}`,children:e.jsxs(L,{className:"p-0",children:[e.jsx("div",{className:"p-4 cursor-pointer",onClick:()=>x(g===a.id?null:a.id),children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg shrink-0",children:e.jsx(D,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"font-semibold text-lg",children:a.title}),t(a.id)&&e.jsxs(O,{variant:"secondary",className:"bg-primary/10 text-primary",children:[e.jsx(pe,{className:"w-3 h-3 mr-1"}),"Applied"]}),j(a.id)&&!t(a.id)&&e.jsxs(O,{variant:"secondary",className:"bg-accent text-accent-foreground",children:[e.jsx(V,{className:"w-3 h-3 mr-1 fill-current"}),"Saved"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-1 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(te,{className:"w-3.5 h-3.5"}),a.department]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Fe,{className:"w-3.5 h-3.5"}),a.location]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(se,{className:"w-3.5 h-3.5"}),a.type]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2 line-clamp-2",children:a.description})]})]})}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx(k,{size:"icon",variant:"ghost",onClick:w=>M(a,w),disabled:v===a.id,className:"shrink-0",children:v===a.id?e.jsx(F,{className:"w-5 h-5 animate-spin"}):e.jsx(V,{className:`w-5 h-5 ${j(a.id)?"fill-primary text-primary":"text-muted-foreground"}`})}),!t(a.id)&&e.jsxs(k,{size:"sm",onClick:w=>{w.stopPropagation(),$(a.id)},children:["Apply Now",e.jsx(ie,{className:"w-4 h-4 ml-1"})]}),e.jsx(k,{variant:"ghost",size:"icon",children:g===a.id?e.jsx(es,{className:"w-5 h-5"}):e.jsx(is,{className:"w-5 h-5"})})]})]})}),e.jsx(ts,{children:g===a.id&&e.jsx(G.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:e.jsxs("div",{className:"px-4 pb-4 border-t pt-4 bg-muted/30",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-primary rounded-full"}),"Responsibilities"]}),e.jsx("ul",{className:"space-y-2",children:a.responsibilities.map((w,T)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[e.jsx("span",{className:"text-primary mt-1.5",children:"•"}),e.jsx("span",{children:w})]},T))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-primary rounded-full"}),"Requirements"]}),e.jsx("ul",{className:"space-y-2",children:a.requirements.map((w,T)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[e.jsx("span",{className:"text-primary mt-1.5",children:"•"}),e.jsx("span",{children:w})]},T))})]})]}),!t(a.id)&&e.jsxs("div",{className:"mt-6 pt-4 border-t flex justify-end gap-2",children:[e.jsxs(k,{variant:"outline",onClick:w=>M(a,w),disabled:v===a.id,children:[v===a.id?e.jsx(F,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(V,{className:`w-4 h-4 mr-2 ${j(a.id)?"fill-current":""}`}),j(a.id)?"Saved":"Save for Later"]}),e.jsxs(k,{onClick:()=>$(a.id),children:["Apply for this Position",e.jsx(ie,{className:"w-4 h-4 ml-2"})]})]})]})})})]})})},a.id))})]})},Is=({profile:s,onProfileUpdate:n})=>{const{user:r,updatePassword:d}=Z(),[l,o]=c.useState(!1),[m,u]=c.useState(!1),[h,y]=c.useState(""),[N,f]=c.useState(""),[g,x]=c.useState(""),[p,i]=c.useState(""),v=C=>C?C.split(" ").map(_=>_[0]).join("").toUpperCase().slice(0,2):"U",I=async C=>{var R;const _=(R=C.target.files)==null?void 0:R[0];if(!_||!r)return;if(!["image/jpeg","image/png","image/gif","image/webp"].includes(_.type)){b.error("Please upload a valid image file (JPEG, PNG, GIF, or WebP)");return}if(_.size>2*1024*1024){b.error("Image size must be less than 2MB");return}o(!0);try{const $=_.name.split(".").pop(),t=`${r.id}-${Date.now()}.${$}`,{error:j}=await P.storage.from("avatars").upload(t,_,{upsert:!0});if(j){if(j.message.includes("bucket")){b.error("Avatar storage is being set up. Please try again later.");return}throw j}const{data:a}=P.storage.from("avatars").getPublicUrl(t),{error:A}=await P.from("applicant_profiles").update({avatar_url:a.publicUrl}).eq("user_id",r.id);if(A)throw A;b.success("Profile picture updated!"),n()}catch($){console.error("Error uploading avatar:",$),b.error("Failed to upload profile picture")}finally{o(!1)}},S=async C=>{if(C.preventDefault(),i(""),N.length<6){i("Password must be at least 6 characters");return}if(N!==g){i("Passwords do not match");return}u(!0);try{const{error:_}=await d(N);if(_)throw _;b.success("Password updated successfully!"),y(""),f(""),x("")}catch(_){console.error("Error changing password:",_),i(_.message||"Failed to update password")}finally{u(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(E,{children:[e.jsxs(B,{children:[e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"w-5 h-5"}),"Profile Picture"]}),e.jsx(z,{children:"Upload a profile picture to personalize your account"})]}),e.jsx(L,{children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(fe,{className:"w-24 h-24 border-4 border-background shadow-lg",children:[e.jsx(ge,{src:(s==null?void 0:s.avatar_url)||void 0,alt:(s==null?void 0:s.full_name)||"Profile"}),e.jsx(Ne,{className:"text-2xl bg-primary/10 text-primary",children:v(s==null?void 0:s.full_name)})]}),l&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/80 rounded-full",children:e.jsx(F,{className:"w-6 h-6 animate-spin text-primary"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"file",id:"avatar-upload",accept:"image/jpeg,image/png,image/gif,image/webp",className:"hidden",onChange:I,disabled:l}),e.jsx("label",{htmlFor:"avatar-upload",children:e.jsx(k,{variant:"outline",disabled:l,asChild:!0,children:e.jsx("span",{className:"cursor-pointer",children:l?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_e,{className:"w-4 h-4 mr-2"}),"Upload New Picture"]})})})}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"JPEG, PNG, GIF or WebP. Max 2MB."})]})]})})]}),e.jsxs(E,{children:[e.jsxs(B,{children:[e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5"}),"Account Information"]}),e.jsx(z,{children:"Your account details and email address"})]}),e.jsx(L,{className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{className:"text-muted-foreground",children:"Email Address"}),e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted/50 rounded-lg",children:[e.jsx(Le,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:r==null?void 0:r.email}),e.jsx(cs,{className:"w-4 h-4 text-primary ml-auto"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This is the email associated with your account"})]}),(s==null?void 0:s.full_name)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{className:"text-muted-foreground",children:"Full Name"}),e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted/50 rounded-lg",children:[e.jsx(X,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:s.full_name})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"You can update your name in the Profile tab"})]})]})})]}),e.jsxs(E,{children:[e.jsxs(B,{children:[e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(os,{className:"w-5 h-5"}),"Change Password"]}),e.jsx(z,{children:"Update your password to keep your account secure"})]}),e.jsx(L,{children:e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"new-password",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(re,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(U,{id:"new-password",type:"password",placeholder:"Enter new password",value:N,onChange:C=>f(C.target.value),className:"pl-10",minLength:6})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"confirm-password",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(re,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(U,{id:"confirm-password",type:"password",placeholder:"Confirm new password",value:g,onChange:C=>x(C.target.value),className:"pl-10",minLength:6})]})]}),p&&e.jsx("p",{className:"text-sm text-destructive",children:p}),e.jsx(k,{type:"submit",disabled:m||!N||!g,children:m?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Update Password"]})})]})})]})]})},Fs=({onJobRemoved:s})=>{const n=ue(),{user:r}=Z(),[d,l]=c.useState([]),[o,m]=c.useState(!0),[u,h]=c.useState(null);c.useEffect(()=>{r&&y()},[r]);const y=async()=>{if(r)try{const{data:x,error:p}=await P.from("saved_jobs").select("*").eq("user_id",r.id).order("created_at",{ascending:!1});if(p)throw p;l(x||[])}catch(x){console.error("Error fetching saved jobs:",x),b.error("Failed to load saved jobs")}finally{m(!1)}},N=async(x,p)=>{if(r){h(x);try{const{error:i}=await P.from("saved_jobs").delete().eq("id",x).eq("user_id",r.id);if(i)throw i;l(v=>v.filter(I=>I.id!==x)),b.success("Job removed from saved list"),s==null||s()}catch(i){console.error("Error removing saved job:",i),b.error("Failed to remove job")}finally{h(null)}}},f=x=>{sessionStorage.setItem("applyPositionId",x),n("/careers")},g=x=>Q.find(p=>p.id===x);return o?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(F,{className:"w-8 h-8 animate-spin text-primary"})}):d.length===0?e.jsx(E,{children:e.jsxs(L,{className:"py-12 text-center",children:[e.jsx(V,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No Saved Jobs"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Save jobs you're interested in to review them later"}),e.jsx(k,{variant:"outline",onClick:()=>n("/applicant/dashboard"),children:"Browse Open Positions"})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[d.length," saved job",d.length!==1?"s":""]})}),d.map((x,p)=>{const i=g(x.position_id);return e.jsx(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:p*.05},children:e.jsx(E,{className:"overflow-hidden hover:shadow-md transition-shadow",children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg shrink-0",children:e.jsx(D,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"font-semibold text-lg",children:(i==null?void 0:i.title)||x.position_title}),e.jsxs(O,{variant:"secondary",className:"bg-accent text-accent-foreground",children:[e.jsx(V,{className:"w-3 h-3 mr-1 fill-current"}),"Saved"]})]}),i&&e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-1 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(te,{className:"w-3.5 h-3.5"}),i.department]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Fe,{className:"w-3.5 h-3.5"}),i.location]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(se,{className:"w-3.5 h-3.5"}),i.type]})]}),i&&e.jsx("p",{className:"text-sm text-muted-foreground mt-2 line-clamp-2",children:i.description}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Saved on ",new Date(x.created_at).toLocaleDateString()]})]})]})}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsxs(k,{size:"sm",onClick:()=>f(x.position_id),children:["Apply Now",e.jsx(ie,{className:"w-4 h-4 ml-1"})]}),e.jsx(k,{size:"sm",variant:"ghost",onClick:()=>N(x.id,x.position_id),disabled:u===x.id,children:u===x.id?e.jsx(F,{className:"w-4 h-4 animate-spin"}):e.jsx(Ee,{className:"w-4 h-4 text-muted-foreground"})})]})]})})})},x.id)})]})},pa=()=>{const{user:s,isLoading:n,signOut:r}=Z(),d=ue(),[l,o]=c.useState(null),[m,u]=c.useState(!0),[h,y]=c.useState("positions"),[N,f]=c.useState([]),[g,x]=c.useState(null);c.useEffect(()=>{if(!n&&!s){d("/applicant/login");return}if(s){p(),i();const S=sessionStorage.getItem("applyPositionId");S&&(sessionStorage.removeItem("applyPositionId"),x(S),y("positions"))}},[s,n,d]);const p=async()=>{if(s)try{const{data:S,error:C}=await P.from("applicant_profiles").select("*").eq("user_id",s.id).maybeSingle();if(C)throw C;S&&o(S)}catch(S){console.error("Error fetching profile:",S),b.error("Failed to load profile")}finally{u(!1)}},i=async()=>{if(s)try{const{data:S,error:C}=await P.from("job_applications").select("position").eq("user_id",s.id);if(C)throw C;if(S){const _=S.map(M=>M.position);f(_)}}catch(S){console.error("Error fetching applied positions:",S)}},v=async()=>{await r(),d("/"),b.success("Signed out successfully")},I=S=>S?S.split(" ").map(C=>C[0]).join("").toUpperCase().slice(0,2):"U";return n||m?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsx(F,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsxs(e.Fragment,{children:[e.jsx(Ze,{title:"Dashboard | InfraWeave Careers",description:"Manage your profile, track your job applications, and explore new opportunities at InfraWeave."}),e.jsx(Qe,{}),e.jsx("main",{className:"min-h-screen bg-gradient-to-b from-muted/50 to-background pt-24 pb-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(fe,{className:"w-16 h-16 border-4 border-background shadow-lg",children:[e.jsx(ge,{src:(l==null?void 0:l.avatar_url)||void 0,alt:(l==null?void 0:l.full_name)||"Profile"}),e.jsx(Ne,{className:"text-xl bg-primary/10 text-primary",children:I(l==null?void 0:l.full_name)})]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-heading font-bold",children:["Welcome",l!=null&&l.full_name?`, ${l.full_name.split(" ")[0]}`:"","!"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Explore opportunities, manage your profile, and track your applications"})]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs(k,{variant:"ghost",onClick:v,children:[e.jsx(We,{className:"w-4 h-4 mr-2"}),"Sign Out"]})})]}),e.jsx(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsxs(Ye,{value:h,onValueChange:y,className:"space-y-6",children:[e.jsxs(Ke,{className:"grid w-full max-w-3xl grid-cols-5",children:[e.jsxs(W,{value:"positions",className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Open Positions"}),e.jsx("span",{className:"sm:hidden",children:"Jobs"})]}),e.jsxs(W,{value:"saved",className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Saved Jobs"}),e.jsx("span",{className:"sm:hidden",children:"Saved"})]}),e.jsxs(W,{value:"applications",className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"My Applications"}),e.jsx("span",{className:"sm:hidden",children:"Applied"})]}),e.jsxs(W,{value:"profile",className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4"}),"Profile"]}),e.jsxs(W,{value:"settings",className:"flex items-center gap-2",children:[e.jsx(ds,{className:"w-4 h-4"}),"Account"]})]}),e.jsx(Y,{value:"positions",className:"space-y-6",children:e.jsx(Ls,{appliedPositions:N,pendingApplyPosition:g,onApplyComplete:()=>{x(null),i()}})}),e.jsx(Y,{value:"saved",className:"space-y-6",children:e.jsx(Fs,{})}),e.jsx(Y,{value:"applications",className:"space-y-6",children:e.jsx(Es,{userId:(s==null?void 0:s.id)||""})}),e.jsx(Y,{value:"profile",className:"space-y-6",children:e.jsx(As,{profile:l,onProfileUpdate:p})}),e.jsx(Y,{value:"settings",className:"space-y-6",children:e.jsx(Is,{profile:l,onProfileUpdate:p})})]})})]})}),e.jsx(Xe,{})]})};export{pa as default};
