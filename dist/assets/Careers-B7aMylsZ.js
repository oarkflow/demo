import{j as e,y as ce,n as We,o as qe,u as de,W as Ge,c as Je,p as He,e as Qe,z as Ke,T as Xe,D as Ze,q as me,O as es,A as ss}from"./vendor-ui-CpQN7H5M.js";import{r as i,c as as}from"./vendor-react-CQIth8Kl.js";import{A as ts,N as rs,F as ls}from"./Footer-CdOyjzzR.js";import{S as is}from"./SEO-BPJxlSoJ.js";import{B as b,b as pe}from"./button-CpBzeEQ0.js";import{I as Y}from"./input-BvpCOY1F.js";import{S as X,a as Z,b as ee,c as se,d as j,C as os,e as Q,f as K,B as le,g as ie,h as ns}from"./checkbox-DFLMVGql.js";import{c as cs,e as te,u as S,a as F,s as B}from"./main-BXfqrH9P.js";import{u as ds,F as ms,a as O,b as M,c as E,d as $,e as U,U as ps,t as xs,p as V}from"./form-Cg9yGfDM.js";import{D as xe,a as ue,b as he,c as fe,T as us}from"./dialog-i4oc1fV3.js";import{m as hs}from"./useSessionAuth-QlyJJc2o.js";import{M as ge}from"./mail-DX6x6hP_.js";import{L as fs}from"./lock-BSGn8-Zg.js";import{E as gs}from"./eye-off-DQYk_lE-.js";import{E as js}from"./eye-CaKvc9yT.js";import{L as ae}from"./loader-circle-Cl6Hqmbi.js";import{o as je,s as v,l as ys}from"./types-BnTeS-Hg.js";import{P as Ns}from"./phone-input-KOCereJG.js";import{F as oe}from"./file-text-CnmCZ1q0.js";import{C as q}from"./circle-check-big-DzpQYR6B.js";import{C as ye}from"./clock-C97bwv_T.js";import{m as J,A as vs}from"./vendor-motion-CyuYf4lN.js";import{S as ws}from"./search-BzTKENqz.js";import{B as bs}from"./building-2-DSefXDJN.js";import{M as As}from"./map-pin-D096jbWx.js";import{C as Ss}from"./chevron-down-BHFknFvi.js";import"./linkedin-65FstijN.js";import"./index-BdQq_4o_.js";import"./check-D3tCyYQw.js";import"./vendor-query-CbH48mXO.js";import"./label-9KhT8XQk.js";import"./index-BNAWCwOb.js";import"./popover-w-gTwDwW.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=cs("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),Cs=je({email:v().email("Please enter a valid email"),password:v().min(6,"Password must be at least 6 characters")}),Ds=({open:s,onOpenChange:r,redirectPath:l="/applicant/dashboard",positionId:n})=>{const[o,h]=i.useState(""),[m,y]=i.useState(""),[f,x]=i.useState(!1),[p,w]=i.useState(!1),[D,P]=i.useState(!1),{signIn:R,signUp:k}=te(),T=async N=>{N.preventDefault(),P(!0);try{const A=Cs.safeParse({email:o,password:m});if(!A.success){S.error(A.error.errors[0].message),P(!1);return}if(n&&sessionStorage.setItem("applyPositionId",n),p){const{error:c}=await k(o,m);if(c)throw c;S.success("Account created! You can now sign in."),w(!1),y("")}else{const{error:c}=await R(o,m);if(c)throw c;hs(),S.success("Welcome back!"),r(!1),l!==window.location.pathname?window.location.href=l:window.location.reload()}}catch(A){console.error("Auth error:",A),S.error(A.message||"An error occurred")}finally{P(!1)}};return e.jsx(xe,{open:s,onOpenChange:r,children:e.jsxs(ue,{className:"sm:max-w-md",children:[e.jsxs(he,{children:[e.jsx(fe,{className:"text-center text-2xl font-heading",children:p?"Create Your Account":"Sign In to Apply"}),e.jsx("p",{className:"text-center text-muted-foreground mt-2",children:p?"Join our talent network and find your next opportunity":"Sign in to apply for positions and track your applications"})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(ge,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx(Y,{type:"email",placeholder:"you@example.com",value:o,onChange:N=>h(N.target.value),className:"pl-10 h-12",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx(Y,{type:f?"text":"password",placeholder:"••••••••",value:m,onChange:N=>y(N.target.value),className:"pl-10 pr-10 h-12",required:!0}),e.jsx("button",{type:"button",onClick:()=>x(!f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:f?e.jsx(gs,{className:"w-5 h-5"}):e.jsx(js,{className:"w-5 h-5"})})]})]}),e.jsx(b,{type:"submit",className:"w-full h-12",disabled:D,children:D?e.jsx(ae,{className:"w-5 h-5 animate-spin"}):p?"Create Account":"Sign In"})]}),e.jsx("div",{className:"text-center text-sm",children:p?e.jsxs(e.Fragment,{children:["Already have an account?"," ",e.jsx("button",{onClick:()=>w(!1),className:"text-primary hover:underline font-medium",children:"Sign in"})]}):e.jsxs(e.Fragment,{children:["Don't have an account?"," ",e.jsx("button",{onClick:()=>w(!0),className:"text-primary hover:underline font-medium",children:"Create one"})]})}),p&&e.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"By creating an account, you agree to receive our newsletter and updates about job opportunities."})]})]})})};var Ne="AlertDialog",[Ps]=Je(Ne,[ce]),C=ce(),ve=s=>{const{__scopeAlertDialog:r,...l}=s,n=C(r);return e.jsx(We,{...n,...l,modal:!0})};ve.displayName=Ne;var ks="AlertDialogTrigger",_s=i.forwardRef((s,r)=>{const{__scopeAlertDialog:l,...n}=s,o=C(l);return e.jsx(ss,{...o,...n,ref:r})});_s.displayName=ks;var Is="AlertDialogPortal",we=s=>{const{__scopeAlertDialog:r,...l}=s,n=C(r);return e.jsx(qe,{...n,...l})};we.displayName=Is;var Es="AlertDialogOverlay",be=i.forwardRef((s,r)=>{const{__scopeAlertDialog:l,...n}=s,o=C(l);return e.jsx(es,{...o,...n,ref:r})});be.displayName=Es;var z="AlertDialogContent",[Fs,Rs]=Ps(z),Ts=Ke("AlertDialogContent"),Ae=i.forwardRef((s,r)=>{const{__scopeAlertDialog:l,children:n,...o}=s,h=C(l),m=i.useRef(null),y=de(r,m),f=i.useRef(null);return e.jsx(Ge,{contentName:z,titleName:Se,docsSlug:"alert-dialog",children:e.jsx(Fs,{scope:l,cancelRef:f,children:e.jsxs(He,{role:"alertdialog",...h,...o,ref:y,onOpenAutoFocus:Qe(o.onOpenAutoFocus,x=>{var p;x.preventDefault(),(p=f.current)==null||p.focus({preventScroll:!0})}),onPointerDownOutside:x=>x.preventDefault(),onInteractOutside:x=>x.preventDefault(),children:[e.jsx(Ts,{children:n}),e.jsx(Os,{contentRef:m})]})})})});Ae.displayName=z;var Se="AlertDialogTitle",Ce=i.forwardRef((s,r)=>{const{__scopeAlertDialog:l,...n}=s,o=C(l);return e.jsx(Xe,{...o,...n,ref:r})});Ce.displayName=Se;var De="AlertDialogDescription",Pe=i.forwardRef((s,r)=>{const{__scopeAlertDialog:l,...n}=s,o=C(l);return e.jsx(Ze,{...o,...n,ref:r})});Pe.displayName=De;var Ls="AlertDialogAction",ke=i.forwardRef((s,r)=>{const{__scopeAlertDialog:l,...n}=s,o=C(l);return e.jsx(me,{...o,...n,ref:r})});ke.displayName=Ls;var _e="AlertDialogCancel",Ie=i.forwardRef((s,r)=>{const{__scopeAlertDialog:l,...n}=s,{cancelRef:o}=Rs(_e,l),h=C(l),m=de(r,o);return e.jsx(me,{...h,...n,ref:m})});Ie.displayName=_e;var Os=({contentRef:s})=>{const r=`\`${z}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${z}\` by passing a \`${De}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${z}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return i.useEffect(()=>{var n;document.getElementById((n=s.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(r)},[r,s]),null},Ms=ve,$s=we,Ee=be,Fe=Ae,Re=ke,Te=Ie,Le=Ce,Oe=Pe;const Us=Ms,Ys=$s,Me=i.forwardRef(({className:s,...r},l)=>e.jsx(Ee,{className:F("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r,ref:l}));Me.displayName=Ee.displayName;const $e=i.forwardRef(({className:s,...r},l)=>e.jsxs(Ys,{children:[e.jsx(Me,{}),e.jsx(Fe,{ref:l,className:F("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r})]}));$e.displayName=Fe.displayName;const Ue=({className:s,...r})=>e.jsx("div",{className:F("flex flex-col space-y-2 text-center sm:text-left",s),...r});Ue.displayName="AlertDialogHeader";const Ye=({className:s,...r})=>e.jsx("div",{className:F("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...r});Ye.displayName="AlertDialogFooter";const Ve=i.forwardRef(({className:s,...r},l)=>e.jsx(Le,{ref:l,className:F("text-lg font-semibold",s),...r}));Ve.displayName=Le.displayName;const Be=i.forwardRef(({className:s,...r},l)=>e.jsx(Oe,{ref:l,className:F("text-sm text-muted-foreground",s),...r}));Be.displayName=Oe.displayName;const ze=i.forwardRef(({className:s,...r},l)=>e.jsx(Re,{ref:l,className:F(pe(),s),...r}));ze.displayName=Re.displayName;const Vs=i.forwardRef(({className:s,...r},l)=>e.jsx(Te,{ref:l,className:F(pe({variant:"outline"}),"mt-2 sm:mt-0",s),...r}));Vs.displayName=Te.displayName;const Bs=je({fullName:v().min(2,"Name must be at least 2 characters").max(100,"Name is too long"),email:v().email("Please enter a valid email"),phone:v().min(10,"Please enter a valid phone number"),position:v().min(1,"Please select a position"),positionId:v().min(1,"Position ID is required"),experienceYears:v().min(1,"Please select your experience"),currentCompany:v().optional(),linkedinUrl:v().url("Please enter a valid URL").optional().or(ys("")),coverLetter:v().max(2e3,"Cover letter is too long").optional()}),zs=({position:s,open:r,onOpenChange:l,onSuccess:n})=>{const{user:o}=te(),[h,m]=i.useState(null),[y,f]=i.useState(null),[x,p]=i.useState(!1),[w,D]=i.useState(!1),[P,R]=i.useState(!0),[k,T]=i.useState(!1),[N,A]=i.useState(""),c=ds({resolver:xs(Bs),defaultValues:{fullName:"",email:(o==null?void 0:o.email)||"",phone:"",position:(s==null?void 0:s.title)||"",positionId:(s==null?void 0:s.id)||"",experienceYears:"",currentCompany:"",linkedinUrl:"",coverLetter:""}});i.useEffect(()=>{o&&r&&s&&(c.setValue("position",s.title),c.setValue("positionId",s.id),c.setValue("email",o.email||""),G())},[o,r,s]),i.useEffect(()=>{r||(m(null),p(!1),f(null),R(!0))},[r]);const G=async()=>{if(o){R(!0);try{const{data:a,error:d}=await B.from("applicant_profiles").select("*").eq("user_id",o.id).maybeSingle();if(d)throw d;a&&(a.full_name&&c.setValue("fullName",a.full_name),a.phone&&c.setValue("phone",a.phone),a.linkedin_url&&c.setValue("linkedinUrl",a.linkedin_url),a.current_company&&c.setValue("currentCompany",a.current_company),a.experience_years!==null&&a.experience_years!==void 0&&c.setValue("experienceYears",a.experience_years.toString()),a.resume_url&&(f(a.resume_url),p(!0)))}catch(a){console.error("Error fetching profile:",a)}finally{R(!1)}}},W=a=>{var _;const d=(_=a.target.files)==null?void 0:_[0];if(d){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(d.type)){S.error("Please upload a PDF or Word document");return}if(d.size>10*1024*1024){S.error("File size must be less than 10MB");return}m(d),p(!1)}},H=async a=>{if(!h&&!x){S.error("Please upload your resume");return}D(!0);try{let d;if(x&&y){const L=`${a.positionId}-${Date.now()}-${a.fullName.replace(/\s+/g,"-").toLowerCase()}-profile`,{error:t}=await B.storage.from("resumes").copy(y,L);d=t?y:L}else if(h){const L=h.name.split(".").pop();d=`${a.positionId}-${Date.now()}-${a.fullName.replace(/\s+/g,"-").toLowerCase()}.${L}`;const{error:t}=await B.storage.from("resumes").upload(d,h);if(t)throw t}else{S.error("Please upload your resume"),D(!1);return}const{error:_}=await B.from("job_applications").insert({full_name:a.fullName,email:a.email,phone:a.phone,position:`${a.position} (${a.positionId})`,experience_years:parseInt(a.experienceYears),current_company:a.currentCompany||null,linkedin_url:a.linkedinUrl||null,cover_letter:a.coverLetter||null,resume_url:d,user_id:o==null?void 0:o.id});if(_)throw _;await B.functions.invoke("send-notification",{body:{type:"job_application",data:{fullName:a.fullName,email:a.email,phone:a.phone,position:`${a.position} (${a.positionId})`,experienceYears:a.experienceYears,currentCompany:a.currentCompany,linkedinUrl:a.linkedinUrl}}}),A(a.position),l(!1),T(!0)}catch(d){console.error("Error submitting application:",d),S.error("Failed to submit application. Please try again.")}finally{D(!1)}};return s?e.jsxs(e.Fragment,{children:[e.jsx(xe,{open:r,onOpenChange:l,children:e.jsxs(ue,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(he,{children:e.jsxs(fe,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(oe,{className:"w-5 h-5 text-primary"})}),"Apply for ",s.title]})}),P?e.jsx("div",{className:"py-12 flex items-center justify-center",children:e.jsx(ae,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsx(ms,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(H),className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(O,{control:c.control,name:"fullName",render:({field:a})=>e.jsxs(M,{children:[e.jsx(E,{children:"Full Name *"}),e.jsx($,{children:e.jsx(Y,{placeholder:"Your full name",...a})}),e.jsx(U,{})]})}),e.jsx(O,{control:c.control,name:"email",render:({field:a})=>e.jsxs(M,{children:[e.jsx(E,{children:"Email *"}),e.jsx($,{children:e.jsx(Y,{type:"email",placeholder:"you@example.com",...a,disabled:!0})}),e.jsx(U,{})]})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(O,{control:c.control,name:"phone",render:({field:a})=>e.jsxs(M,{children:[e.jsx(E,{children:"Phone Number *"}),e.jsx($,{children:e.jsx(Ns,{value:a.value,onChange:a.onChange,defaultCountry:"NP"})}),e.jsx(U,{})]})}),e.jsx(O,{control:c.control,name:"experienceYears",render:({field:a})=>e.jsxs(M,{children:[e.jsx(E,{children:"Years of Experience *"}),e.jsxs(X,{onValueChange:a.onChange,value:a.value,children:[e.jsx($,{children:e.jsx(Z,{children:e.jsx(ee,{placeholder:"Select experience"})})}),e.jsxs(se,{children:[e.jsx(j,{value:"0",children:"Fresher (0 years)"}),e.jsx(j,{value:"1",children:"1 year"}),e.jsx(j,{value:"2",children:"2 years"}),e.jsx(j,{value:"3",children:"3 years"}),e.jsx(j,{value:"4",children:"4 years"}),e.jsx(j,{value:"5",children:"5+ years"}),e.jsx(j,{value:"7",children:"7+ years"}),e.jsx(j,{value:"10",children:"10+ years"})]})]}),e.jsx(U,{})]})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(O,{control:c.control,name:"currentCompany",render:({field:a})=>e.jsxs(M,{children:[e.jsx(E,{children:"Current Company"}),e.jsx($,{children:e.jsx(Y,{placeholder:"Your current employer",...a})}),e.jsx(U,{})]})}),e.jsx(O,{control:c.control,name:"linkedinUrl",render:({field:a})=>e.jsxs(M,{children:[e.jsx(E,{children:"LinkedIn Profile"}),e.jsx($,{children:e.jsx(Y,{placeholder:"https://linkedin.com/in/yourprofile",...a})}),e.jsx(U,{})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(E,{children:"Resume *"}),y&&e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50 border",children:[e.jsx(os,{id:"useProfileResume",checked:x,onCheckedChange:a=>{p(a),a&&m(null)}}),e.jsxs("label",{htmlFor:"useProfileResume",className:"text-sm flex items-center gap-2 cursor-pointer flex-1",children:[e.jsx(oe,{className:"w-4 h-4 text-primary"}),"Use resume from my profile"]}),x&&e.jsx(q,{className:"w-4 h-4 text-primary"})]}),!x&&e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center hover:border-primary/50 transition-colors",children:[e.jsx("input",{type:"file",accept:".pdf,.doc,.docx",onChange:W,className:"hidden",id:"resume-upload-modal"}),e.jsxs("label",{htmlFor:"resume-upload-modal",className:"cursor-pointer",children:[e.jsx(ps,{className:"w-10 h-10 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:h?e.jsx("span",{className:"text-primary font-medium",children:h.name}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-primary font-medium",children:"Click to upload"})," or drag and drop"]})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"PDF or Word (max 10MB)"})]})]})]}),e.jsx(O,{control:c.control,name:"coverLetter",render:({field:a})=>e.jsxs(M,{children:[e.jsx(E,{children:"Cover Letter (Optional)"}),e.jsx($,{children:e.jsx(us,{placeholder:"Tell us why you're interested in this role and what makes you a great fit...",className:"min-h-[100px]",...a})}),e.jsx(U,{})]})}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[e.jsx(b,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(b,{type:"submit",disabled:w,children:w?e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"w-4 h-4 mr-2 animate-spin"}),"Submitting..."]}):"Submit Application"})]})]})})]})}),e.jsx(Us,{open:k,onOpenChange:T,children:e.jsxs($e,{className:"sm:max-w-md",children:[e.jsxs(Ue,{children:[e.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-primary/10",children:e.jsx(q,{className:"h-8 w-8 text-primary"})}),e.jsx(Ve,{className:"text-center text-2xl",children:"Application Submitted!"}),e.jsxs(Be,{className:"text-center",children:["Your application for ",e.jsx("span",{className:"font-semibold text-foreground",children:N})," has been successfully submitted."]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsx("h4",{className:"font-semibold text-sm text-center",children:"What happens next?"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/50",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-full shrink-0",children:e.jsx(ge,{className:"w-4 h-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Confirmation Email"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"You'll receive an email confirmation shortly at your registered email address."})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/50",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-full shrink-0",children:e.jsx(ye,{className:"w-4 h-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Review Timeline"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Our team will review your application within ",e.jsx("span",{className:"font-semibold",children:"5-7 business days"}),"."]})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/50",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-full shrink-0",children:e.jsx(ts,{className:"w-4 h-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Next Steps"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"If shortlisted, you'll be contacted for an initial screening interview."})]})]})]})]}),e.jsx(Ye,{className:"sm:justify-center",children:e.jsx(ze,{onClick:()=>{T(!1),n()},className:"w-full sm:w-auto",children:"Got it, thanks!"})})]})})]}):null},Aa=()=>{const{user:s}=te(),r=as(),[l,n]=i.useState(null),[o,h]=i.useState(""),[m,y]=i.useState("all"),[f,x]=i.useState("all"),[p,w]=i.useState(!1),[D,P]=i.useState(null),[R,k]=i.useState(!1),[T,N]=i.useState(null),[A,c]=i.useState([]),G=async()=>{if(!s){c([]);return}try{const{data:t,error:u}=await B.from("job_applications").select("position").eq("user_id",s.id);if(u)throw u;if(t){const g=t.map(I=>{const re=I.position.match(/\(([^)]+)\)$/);return re?re[1]:I.position});c(g)}}catch(t){console.error("Error fetching applied positions:",t)}};i.useEffect(()=>{G()},[s]),i.useEffect(()=>{if(s){const t=sessionStorage.getItem("applyPositionId");if(t){sessionStorage.removeItem("applyPositionId");const u=V.find(g=>g.id===t);u&&(N(u),k(!0))}}},[s]);const W=t=>A.includes(t),H=[...new Set(V.map(t=>t.department))],a=[...new Set(V.map(t=>t.type))],d=V.filter(t=>{const u=t.title.toLowerCase().includes(o.toLowerCase())||t.description.toLowerCase().includes(o.toLowerCase())||t.department.toLowerCase().includes(o.toLowerCase()),g=m==="all"||t.department===m,I=f==="all"||t.type===f;return u&&g&&I}),_=t=>{if(!s)P(t),w(!0);else{const u=V.find(g=>g.id===t);u&&(N(u),k(!0))}},L=()=>{k(!1),N(null),G()};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(is,{title:"Careers at InfraWeave Solutions | Open Positions in Nepal",description:"Join our team of infrastructure experts. Explore career opportunities in network engineering, DevOps, cloud architecture, and cybersecurity at InfraWeave Solutions Nepal.",keywords:"InfraWeave careers, network engineer jobs Nepal, DevOps jobs Kathmandu, cloud architect positions, IT jobs Nepal",image:"/og-careers.jpg"}),e.jsx(rs,{}),e.jsxs("main",{className:"pt-24 lg:pt-32 pb-20",children:[e.jsx("section",{className:"container mx-auto px-6 mb-16",children:e.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-4xl mx-auto",children:[e.jsx("span",{className:"inline-block px-4 py-2 rounded-full bg-primary/10 text-primary text-sm font-medium mb-6",children:"Join Our Team"}),e.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold mb-6",children:["Build the Future of"," ",e.jsx("span",{className:"text-secondary",children:"Infrastructure"})]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto mb-8",children:"Join a team of passionate engineers solving complex infrastructure challenges for enterprises worldwide. We're looking for talented individuals to help us shape the future of network and cloud infrastructure."}),!s&&e.jsxs(b,{size:"lg",onClick:()=>{P(null),w(!0)},className:"gap-2",children:[e.jsx(ne,{className:"w-5 h-5"}),"Sign In to Apply"]}),s&&e.jsx(b,{size:"lg",onClick:()=>r("/applicant/dashboard"),className:"gap-2",children:"Go to Dashboard"})]})}),e.jsx("section",{className:"container mx-auto px-6 mb-20",children:e.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{title:"Cutting-Edge Technology",description:"Work with the latest in network automation, cloud platforms, and security technologies."},{title:"Growth Opportunities",description:"Continuous learning through certifications, training, and hands-on experience with enterprise clients."},{title:"Collaborative Culture",description:"Join a team that values innovation, knowledge sharing, and professional development."}].map((t,u)=>e.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:u*.1},className:"bg-card rounded-xl p-6 border border-border",children:[e.jsx("h3",{className:"text-xl font-semibold mb-3",children:t.title}),e.jsx("p",{className:"text-muted-foreground",children:t.description})]},u))})}),e.jsxs("section",{className:"container mx-auto px-6",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-8",children:"Open Positions"}),e.jsx(Q,{className:"mb-8 max-w-5xl mx-auto",children:e.jsx(K,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ws,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(Y,{placeholder:"Search positions...",value:o,onChange:t=>h(t.target.value),className:"pl-10"})]}),e.jsxs(X,{value:m,onValueChange:y,children:[e.jsx(Z,{className:"w-full md:w-[180px]",children:e.jsx(ee,{placeholder:"Department"})}),e.jsxs(se,{children:[e.jsx(j,{value:"all",children:"All Departments"}),H.map(t=>e.jsx(j,{value:t,children:t},t))]})]}),e.jsxs(X,{value:f,onValueChange:x,children:[e.jsx(Z,{className:"w-full md:w-[150px]",children:e.jsx(ee,{placeholder:"Type"})}),e.jsxs(se,{children:[e.jsx(j,{value:"all",children:"All Types"}),a.map(t=>e.jsx(j,{value:t,children:t},t))]})]})]})})}),e.jsx("div",{className:"max-w-5xl mx-auto mb-6",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",d.length," of ",V.length," positions"]})}),e.jsx("div",{className:"space-y-4 max-w-5xl mx-auto",children:d.length===0?e.jsx(Q,{children:e.jsxs(K,{className:"py-12 text-center",children:[e.jsx(le,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No positions found"}),e.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search or filters"})]})}):d.map((t,u)=>e.jsx(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:u*.05},children:e.jsx(Q,{className:"overflow-hidden hover:shadow-md transition-shadow",children:e.jsxs(K,{className:"p-0",children:[e.jsx("div",{className:"p-6 cursor-pointer hover:bg-muted/30 transition-colors",onClick:()=>n(l===t.id?null:t.id),children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg shrink-0",children:e.jsx(le,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[e.jsx("h3",{className:"font-semibold text-lg",children:t.title}),e.jsx(ie,{variant:"outline",className:"font-mono text-xs",children:t.id}),W(t.id)&&e.jsxs(ie,{className:"bg-primary/10 text-primary border-primary/20 hover:bg-primary/10",children:[e.jsx(q,{className:"w-3 h-3 mr-1"}),"Applied"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(bs,{className:"w-3.5 h-3.5"}),t.department]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(As,{className:"w-3.5 h-3.5"}),t.location]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ye,{className:"w-3.5 h-3.5"}),t.type]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2 line-clamp-2",children:t.description})]})]})}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[W(t.id)?e.jsxs(b,{size:"sm",variant:"outline",disabled:!0,className:"cursor-not-allowed",children:[e.jsx(q,{className:"w-4 h-4 mr-1 text-primary"}),"Applied"]}):e.jsx(b,{size:"sm",onClick:g=>{g.stopPropagation(),_(t.id)},children:s?"Apply Now":e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"w-4 h-4 mr-1"}),"Apply"]})}),e.jsx(b,{variant:"ghost",size:"icon",children:l===t.id?e.jsx(ns,{className:"w-5 h-5"}):e.jsx(Ss,{className:"w-5 h-5"})})]})]})}),e.jsx(vs,{children:l===t.id&&e.jsx(J.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:e.jsxs("div",{className:"px-6 pb-6 border-t pt-4 bg-muted/30",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-primary rounded-full"}),"Responsibilities"]}),e.jsx("ul",{className:"space-y-2",children:t.responsibilities.map((g,I)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[e.jsx("span",{className:"text-primary mt-1.5",children:"•"}),e.jsx("span",{children:g})]},I))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-primary rounded-full"}),"Requirements"]}),e.jsx("ul",{className:"space-y-2",children:t.requirements.map((g,I)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[e.jsx("span",{className:"text-primary mt-1.5",children:"•"}),e.jsx("span",{children:g})]},I))})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t flex justify-end",children:W(t.id)?e.jsxs(b,{variant:"outline",disabled:!0,className:"cursor-not-allowed",children:[e.jsx(q,{className:"w-4 h-4 mr-2 text-primary"}),"Already Applied"]}):e.jsx(b,{onClick:()=>_(t.id),children:s?"Apply for this Position":"Sign In to Apply"})})]})})})]})})},t.id))})]})]}),e.jsx(ls,{}),e.jsx(Ds,{open:p,onOpenChange:w,positionId:D,redirectPath:"/careers"}),e.jsx(zs,{position:T,open:R,onOpenChange:k,onSuccess:L})]})};export{Aa as default};
