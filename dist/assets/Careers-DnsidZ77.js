import{j as e,y as ce,n as We,o as qe,u as de,W as Ge,c as Je,p as He,e as Qe,z as Ke,T as Xe,D as Ze,q as me,O as es,A as ss}from"./vendor-ui--gC2EbFs.js";import{r as i,c as as}from"./vendor-react-BKlpBF4k.js";import{A as ts,N as rs,F as ls}from"./Footer-qqPHEfWH.js";import{S as is}from"./SEO-DkrNIxUx.js";import{B as b,b as pe}from"./button-BGexsc1Z.js";import{I as $}from"./input-2Qusnpvj.js";import{S as X,a as Z,b as ee,c as se,d as j,C as os,e as Q,f as K,B as le,g as ie,h as ns}from"./checkbox-MCBRKF5Y.js";import{c as cs,e as te,u as S,a as E,s as B}from"./main-BJksuSgA.js";import{u as ds,F as ms,a as T,b as L,c as I,d as O,e as M,U as ps,t as xs,p as V}from"./form-HMG2lF0w.js";import{D as xe,a as ue,b as he,c as fe,T as us}from"./dialog-CyfFgSnW.js";import{m as hs}from"./useSessionAuth-DPfuQBuh.js";import{M as ge}from"./mail-Dq2eRyuU.js";import{L as fs}from"./lock-B5hkHWNR.js";import{E as gs}from"./eye-off-VXDTZL5-.js";import{E as js}from"./eye-D46cVTuP.js";import{L as ae}from"./loader-circle-2-EN6opG.js";import{o as je,s as v,l as ys}from"./types-KBJzO2d1.js";import{P as Ns}from"./phone-input-CIyga_M4.js";import{F as oe}from"./file-text-C9xtyKp0.js";import{C as q}from"./circle-check-big-BlLtF1-z.js";import{C as ye}from"./clock-P6_-i9uM.js";import{m as J,A as vs}from"./vendor-motion-DpAY1mMN.js";import{S as ws}from"./search-BEhK9lj9.js";import{B as bs}from"./building-2-DTcxvgHq.js";import{M as As}from"./map-pin-2GsZjYDs.js";import{C as Ss}from"./chevron-down-DROOaVXA.js";import"./linkedin-rD6aTwyb.js";import"./index-BdQq_4o_.js";import"./check-CBeTEWwJ.js";import"./vendor-query-CpApZjIr.js";import"./label-CnbrxAqo.js";import"./index-CId5GkVU.js";import"./popover-DTzroaSP.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=cs("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),Cs=je({email:v().email("Please enter a valid email"),password:v().min(6,"Password must be at least 6 characters")}),Ds=({open:t,onOpenChange:r,redirectPath:l="/applicant/dashboard",positionId:c})=>{const[o,u]=i.useState(""),[m,y]=i.useState(""),[h,p]=i.useState(!1),[f,w]=i.useState(!1),[D,P]=i.useState(!1),{signIn:F,signUp:k}=te(),R=async N=>{N.preventDefault(),P(!0);try{const A=Cs.safeParse({email:o,password:m});if(!A.success){S.error(A.error.errors[0].message),P(!1);return}if(c&&sessionStorage.setItem("applyPositionId",c),f){const{error:n}=await k(o,m);if(n)throw n;S.success("Account created! You can now sign in."),w(!1),y("")}else{const{error:n}=await F(o,m);if(n)throw n;hs(),S.success("Welcome back!"),r(!1),l!==window.location.pathname?window.location.href=l:window.location.reload()}}catch(A){console.error("Auth error:",A),S.error(A.message||"An error occurred")}finally{P(!1)}};return e.jsx(xe,{open:t,onOpenChange:r,children:e.jsxs(ue,{className:"sm:max-w-md",children:[e.jsxs(he,{children:[e.jsx(fe,{className:"text-center text-2xl font-heading",children:f?"Create Your Account":"Sign In to Apply"}),e.jsx("p",{className:"text-center text-muted-foreground mt-2",children:f?"Join our talent network and find your next opportunity":"Sign in to apply for positions and track your applications"})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(ge,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx($,{type:"email",placeholder:"you@example.com",value:o,onChange:N=>u(N.target.value),className:"pl-10 h-12",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx($,{type:h?"text":"password",placeholder:"••••••••",value:m,onChange:N=>y(N.target.value),className:"pl-10 pr-10 h-12",required:!0}),e.jsx("button",{type:"button",onClick:()=>p(!h),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:h?e.jsx(gs,{className:"w-5 h-5"}):e.jsx(js,{className:"w-5 h-5"})})]})]}),e.jsx(b,{type:"submit",className:"w-full h-12",disabled:D,children:D?e.jsx(ae,{className:"w-5 h-5 animate-spin"}):f?"Create Account":"Sign In"})]}),e.jsx("div",{className:"text-center text-sm",children:f?e.jsxs(e.Fragment,{children:["Already have an account?"," ",e.jsx("button",{onClick:()=>w(!1),className:"text-primary hover:underline font-medium",children:"Sign in"})]}):e.jsxs(e.Fragment,{children:["Don't have an account?"," ",e.jsx("button",{onClick:()=>w(!0),className:"text-primary hover:underline font-medium",children:"Create one"})]})}),f&&e.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"By creating an account, you agree to receive our newsletter and updates about job opportunities."})]})]})})};var Ne="AlertDialog",[Ps]=Je(Ne,[ce]),C=ce(),ve=t=>{const{__scopeAlertDialog:r,...l}=t,c=C(r);return e.jsx(We,{...c,...l,modal:!0})};ve.displayName=Ne;var ks="AlertDialogTrigger",_s=i.forwardRef((t,r)=>{const{__scopeAlertDialog:l,...c}=t,o=C(l);return e.jsx(ss,{...o,...c,ref:r})});_s.displayName=ks;var Is="AlertDialogPortal",we=t=>{const{__scopeAlertDialog:r,...l}=t,c=C(r);return e.jsx(qe,{...c,...l})};we.displayName=Is;var Es="AlertDialogOverlay",be=i.forwardRef((t,r)=>{const{__scopeAlertDialog:l,...c}=t,o=C(l);return e.jsx(es,{...o,...c,ref:r})});be.displayName=Es;var z="AlertDialogContent",[Fs,Rs]=Ps(z),Ts=Ke("AlertDialogContent"),Ae=i.forwardRef((t,r)=>{const{__scopeAlertDialog:l,children:c,...o}=t,u=C(l),m=i.useRef(null),y=de(r,m),h=i.useRef(null);return e.jsx(Ge,{contentName:z,titleName:Se,docsSlug:"alert-dialog",children:e.jsx(Fs,{scope:l,cancelRef:h,children:e.jsxs(He,{role:"alertdialog",...u,...o,ref:y,onOpenAutoFocus:Qe(o.onOpenAutoFocus,p=>{p.preventDefault(),h.current?.focus({preventScroll:!0})}),onPointerDownOutside:p=>p.preventDefault(),onInteractOutside:p=>p.preventDefault(),children:[e.jsx(Ts,{children:c}),e.jsx(Os,{contentRef:m})]})})})});Ae.displayName=z;var Se="AlertDialogTitle",Ce=i.forwardRef((t,r)=>{const{__scopeAlertDialog:l,...c}=t,o=C(l);return e.jsx(Xe,{...o,...c,ref:r})});Ce.displayName=Se;var De="AlertDialogDescription",Pe=i.forwardRef((t,r)=>{const{__scopeAlertDialog:l,...c}=t,o=C(l);return e.jsx(Ze,{...o,...c,ref:r})});Pe.displayName=De;var Ls="AlertDialogAction",ke=i.forwardRef((t,r)=>{const{__scopeAlertDialog:l,...c}=t,o=C(l);return e.jsx(me,{...o,...c,ref:r})});ke.displayName=Ls;var _e="AlertDialogCancel",Ie=i.forwardRef((t,r)=>{const{__scopeAlertDialog:l,...c}=t,{cancelRef:o}=Rs(_e,l),u=C(l),m=de(r,o);return e.jsx(me,{...u,...c,ref:m})});Ie.displayName=_e;var Os=({contentRef:t})=>{const r=`\`${z}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${z}\` by passing a \`${De}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${z}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return i.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(r)},[r,t]),null},Ms=ve,$s=we,Ee=be,Fe=Ae,Re=ke,Te=Ie,Le=Ce,Oe=Pe;const Us=Ms,Ys=$s,Me=i.forwardRef(({className:t,...r},l)=>e.jsx(Ee,{className:E("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r,ref:l}));Me.displayName=Ee.displayName;const $e=i.forwardRef(({className:t,...r},l)=>e.jsxs(Ys,{children:[e.jsx(Me,{}),e.jsx(Fe,{ref:l,className:E("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r})]}));$e.displayName=Fe.displayName;const Ue=({className:t,...r})=>e.jsx("div",{className:E("flex flex-col space-y-2 text-center sm:text-left",t),...r});Ue.displayName="AlertDialogHeader";const Ye=({className:t,...r})=>e.jsx("div",{className:E("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r});Ye.displayName="AlertDialogFooter";const Ve=i.forwardRef(({className:t,...r},l)=>e.jsx(Le,{ref:l,className:E("text-lg font-semibold",t),...r}));Ve.displayName=Le.displayName;const Be=i.forwardRef(({className:t,...r},l)=>e.jsx(Oe,{ref:l,className:E("text-sm text-muted-foreground",t),...r}));Be.displayName=Oe.displayName;const ze=i.forwardRef(({className:t,...r},l)=>e.jsx(Re,{ref:l,className:E(pe(),t),...r}));ze.displayName=Re.displayName;const Vs=i.forwardRef(({className:t,...r},l)=>e.jsx(Te,{ref:l,className:E(pe({variant:"outline"}),"mt-2 sm:mt-0",t),...r}));Vs.displayName=Te.displayName;const Bs=je({fullName:v().min(2,"Name must be at least 2 characters").max(100,"Name is too long"),email:v().email("Please enter a valid email"),phone:v().min(10,"Please enter a valid phone number"),position:v().min(1,"Please select a position"),positionId:v().min(1,"Position ID is required"),experienceYears:v().min(1,"Please select your experience"),currentCompany:v().optional(),linkedinUrl:v().url("Please enter a valid URL").optional().or(ys("")),coverLetter:v().max(2e3,"Cover letter is too long").optional()}),zs=({position:t,open:r,onOpenChange:l,onSuccess:c})=>{const{user:o}=te(),[u,m]=i.useState(null),[y,h]=i.useState(null),[p,f]=i.useState(!1),[w,D]=i.useState(!1),[P,F]=i.useState(!0),[k,R]=i.useState(!1),[N,A]=i.useState(""),n=ds({resolver:xs(Bs),defaultValues:{fullName:"",email:o?.email||"",phone:"",position:t?.title||"",positionId:t?.id||"",experienceYears:"",currentCompany:"",linkedinUrl:"",coverLetter:""}});i.useEffect(()=>{o&&r&&t&&(n.setValue("position",t.title),n.setValue("positionId",t.id),n.setValue("email",o.email||""),G())},[o,r,t]),i.useEffect(()=>{r||(m(null),f(!1),h(null),F(!0))},[r]);const G=async()=>{if(o){F(!0);try{const{data:s,error:d}=await B.from("applicant_profiles").select("*").eq("user_id",o.id).maybeSingle();if(d)throw d;s&&(s.full_name&&n.setValue("fullName",s.full_name),s.phone&&n.setValue("phone",s.phone),s.linkedin_url&&n.setValue("linkedinUrl",s.linkedin_url),s.current_company&&n.setValue("currentCompany",s.current_company),s.experience_years!==null&&s.experience_years!==void 0&&n.setValue("experienceYears",s.experience_years.toString()),s.resume_url&&(h(s.resume_url),f(!0)))}catch(s){console.error("Error fetching profile:",s)}finally{F(!1)}}},W=s=>{const d=s.target.files?.[0];if(d){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(d.type)){S.error("Please upload a PDF or Word document");return}if(d.size>10*1024*1024){S.error("File size must be less than 10MB");return}m(d),f(!1)}},H=async s=>{if(!u&&!p){S.error("Please upload your resume");return}D(!0);try{let d;if(p&&y){const Y=`${s.positionId}-${Date.now()}-${s.fullName.replace(/\s+/g,"-").toLowerCase()}-profile`,{error:a}=await B.storage.from("resumes").copy(y,Y);d=a?y:Y}else if(u){const Y=u.name.split(".").pop();d=`${s.positionId}-${Date.now()}-${s.fullName.replace(/\s+/g,"-").toLowerCase()}.${Y}`;const{error:a}=await B.storage.from("resumes").upload(d,u);if(a)throw a}else{S.error("Please upload your resume"),D(!1);return}const{error:U}=await B.from("job_applications").insert({full_name:s.fullName,email:s.email,phone:s.phone,position:`${s.position} (${s.positionId})`,experience_years:parseInt(s.experienceYears),current_company:s.currentCompany||null,linkedin_url:s.linkedinUrl||null,cover_letter:s.coverLetter||null,resume_url:d,user_id:o?.id});if(U)throw U;await B.functions.invoke("send-notification",{body:{type:"job_application",data:{fullName:s.fullName,email:s.email,phone:s.phone,position:`${s.position} (${s.positionId})`,experienceYears:s.experienceYears,currentCompany:s.currentCompany,linkedinUrl:s.linkedinUrl}}}),A(s.position),l(!1),R(!0)}catch(d){console.error("Error submitting application:",d),S.error("Failed to submit application. Please try again.")}finally{D(!1)}};return t?e.jsxs(e.Fragment,{children:[e.jsx(xe,{open:r,onOpenChange:l,children:e.jsxs(ue,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(he,{children:e.jsxs(fe,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(oe,{className:"w-5 h-5 text-primary"})}),"Apply for ",t.title]})}),P?e.jsx("div",{className:"py-12 flex items-center justify-center",children:e.jsx(ae,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsx(ms,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(H),className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(T,{control:n.control,name:"fullName",render:({field:s})=>e.jsxs(L,{children:[e.jsx(I,{children:"Full Name *"}),e.jsx(O,{children:e.jsx($,{placeholder:"Your full name",...s})}),e.jsx(M,{})]})}),e.jsx(T,{control:n.control,name:"email",render:({field:s})=>e.jsxs(L,{children:[e.jsx(I,{children:"Email *"}),e.jsx(O,{children:e.jsx($,{type:"email",placeholder:"you@example.com",...s,disabled:!0})}),e.jsx(M,{})]})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(T,{control:n.control,name:"phone",render:({field:s})=>e.jsxs(L,{children:[e.jsx(I,{children:"Phone Number *"}),e.jsx(O,{children:e.jsx(Ns,{value:s.value,onChange:s.onChange,defaultCountry:"NP"})}),e.jsx(M,{})]})}),e.jsx(T,{control:n.control,name:"experienceYears",render:({field:s})=>e.jsxs(L,{children:[e.jsx(I,{children:"Years of Experience *"}),e.jsxs(X,{onValueChange:s.onChange,value:s.value,children:[e.jsx(O,{children:e.jsx(Z,{children:e.jsx(ee,{placeholder:"Select experience"})})}),e.jsxs(se,{children:[e.jsx(j,{value:"0",children:"Fresher (0 years)"}),e.jsx(j,{value:"1",children:"1 year"}),e.jsx(j,{value:"2",children:"2 years"}),e.jsx(j,{value:"3",children:"3 years"}),e.jsx(j,{value:"4",children:"4 years"}),e.jsx(j,{value:"5",children:"5+ years"}),e.jsx(j,{value:"7",children:"7+ years"}),e.jsx(j,{value:"10",children:"10+ years"})]})]}),e.jsx(M,{})]})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(T,{control:n.control,name:"currentCompany",render:({field:s})=>e.jsxs(L,{children:[e.jsx(I,{children:"Current Company"}),e.jsx(O,{children:e.jsx($,{placeholder:"Your current employer",...s})}),e.jsx(M,{})]})}),e.jsx(T,{control:n.control,name:"linkedinUrl",render:({field:s})=>e.jsxs(L,{children:[e.jsx(I,{children:"LinkedIn Profile"}),e.jsx(O,{children:e.jsx($,{placeholder:"https://linkedin.com/in/yourprofile",...s})}),e.jsx(M,{})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(I,{children:"Resume *"}),y&&e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50 border",children:[e.jsx(os,{id:"useProfileResume",checked:p,onCheckedChange:s=>{f(s),s&&m(null)}}),e.jsxs("label",{htmlFor:"useProfileResume",className:"text-sm flex items-center gap-2 cursor-pointer flex-1",children:[e.jsx(oe,{className:"w-4 h-4 text-primary"}),"Use resume from my profile"]}),p&&e.jsx(q,{className:"w-4 h-4 text-primary"})]}),!p&&e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center hover:border-primary/50 transition-colors",children:[e.jsx("input",{type:"file",accept:".pdf,.doc,.docx",onChange:W,className:"hidden",id:"resume-upload-modal"}),e.jsxs("label",{htmlFor:"resume-upload-modal",className:"cursor-pointer",children:[e.jsx(ps,{className:"w-10 h-10 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:u?e.jsx("span",{className:"text-primary font-medium",children:u.name}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-primary font-medium",children:"Click to upload"})," or drag and drop"]})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"PDF or Word (max 10MB)"})]})]})]}),e.jsx(T,{control:n.control,name:"coverLetter",render:({field:s})=>e.jsxs(L,{children:[e.jsx(I,{children:"Cover Letter (Optional)"}),e.jsx(O,{children:e.jsx(us,{placeholder:"Tell us why you're interested in this role and what makes you a great fit...",className:"min-h-[100px]",...s})}),e.jsx(M,{})]})}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[e.jsx(b,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(b,{type:"submit",disabled:w,children:w?e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"w-4 h-4 mr-2 animate-spin"}),"Submitting..."]}):"Submit Application"})]})]})})]})}),e.jsx(Us,{open:k,onOpenChange:R,children:e.jsxs($e,{className:"sm:max-w-md",children:[e.jsxs(Ue,{children:[e.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-primary/10",children:e.jsx(q,{className:"h-8 w-8 text-primary"})}),e.jsx(Ve,{className:"text-center text-2xl",children:"Application Submitted!"}),e.jsxs(Be,{className:"text-center",children:["Your application for ",e.jsx("span",{className:"font-semibold text-foreground",children:N})," has been successfully submitted."]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsx("h4",{className:"font-semibold text-sm text-center",children:"What happens next?"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/50",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-full shrink-0",children:e.jsx(ge,{className:"w-4 h-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Confirmation Email"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"You'll receive an email confirmation shortly at your registered email address."})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/50",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-full shrink-0",children:e.jsx(ye,{className:"w-4 h-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Review Timeline"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Our team will review your application within ",e.jsx("span",{className:"font-semibold",children:"5-7 business days"}),"."]})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/50",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-full shrink-0",children:e.jsx(ts,{className:"w-4 h-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Next Steps"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"If shortlisted, you'll be contacted for an initial screening interview."})]})]})]})]}),e.jsx(Ye,{className:"sm:justify-center",children:e.jsx(ze,{onClick:()=>{R(!1),c()},className:"w-full sm:w-auto",children:"Got it, thanks!"})})]})})]}):null},Aa=()=>{const{user:t}=te(),r=as(),[l,c]=i.useState(null),[o,u]=i.useState(""),[m,y]=i.useState("all"),[h,p]=i.useState("all"),[f,w]=i.useState(!1),[D,P]=i.useState(null),[F,k]=i.useState(!1),[R,N]=i.useState(null),[A,n]=i.useState([]),G=async()=>{if(!t){n([]);return}try{const{data:a,error:x}=await B.from("job_applications").select("position").eq("user_id",t.id);if(x)throw x;if(a){const g=a.map(_=>{const re=_.position.match(/\(([^)]+)\)$/);return re?re[1]:_.position});n(g)}}catch(a){console.error("Error fetching applied positions:",a)}};i.useEffect(()=>{G()},[t]),i.useEffect(()=>{if(t){const a=sessionStorage.getItem("applyPositionId");if(a){sessionStorage.removeItem("applyPositionId");const x=V.find(g=>g.id===a);x&&(N(x),k(!0))}}},[t]);const W=a=>A.includes(a),H=[...new Set(V.map(a=>a.department))],s=[...new Set(V.map(a=>a.type))],d=V.filter(a=>{const x=a.title.toLowerCase().includes(o.toLowerCase())||a.description.toLowerCase().includes(o.toLowerCase())||a.department.toLowerCase().includes(o.toLowerCase()),g=m==="all"||a.department===m,_=h==="all"||a.type===h;return x&&g&&_}),U=a=>{if(!t)P(a),w(!0);else{const x=V.find(g=>g.id===a);x&&(N(x),k(!0))}},Y=()=>{k(!1),N(null),G()};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(is,{title:"Careers at InfraWeave Solutions | Open Positions in Nepal",description:"Join our team of infrastructure experts. Explore career opportunities in network engineering, DevOps, cloud architecture, and cybersecurity at InfraWeave Solutions Nepal.",keywords:"InfraWeave careers, network engineer jobs Nepal, DevOps jobs Kathmandu, cloud architect positions, IT jobs Nepal",image:"/og-careers.jpg"}),e.jsx(rs,{}),e.jsxs("main",{className:"pt-24 lg:pt-32 pb-20",children:[e.jsx("section",{className:"container mx-auto px-6 mb-16",children:e.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-4xl mx-auto",children:[e.jsx("span",{className:"inline-block px-4 py-2 rounded-full bg-primary/10 text-primary text-sm font-medium mb-6",children:"Join Our Team"}),e.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold mb-6",children:["Build the Future of"," ",e.jsx("span",{className:"text-secondary",children:"Infrastructure"})]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto mb-8",children:"Join a team of passionate engineers solving complex infrastructure challenges for enterprises worldwide. We're looking for talented individuals to help us shape the future of network and cloud infrastructure."}),!t&&e.jsxs(b,{size:"lg",onClick:()=>{P(null),w(!0)},className:"gap-2",children:[e.jsx(ne,{className:"w-5 h-5"}),"Sign In to Apply"]}),t&&e.jsx(b,{size:"lg",onClick:()=>r("/applicant/dashboard"),className:"gap-2",children:"Go to Dashboard"})]})}),e.jsx("section",{className:"container mx-auto px-6 mb-20",children:e.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{title:"Cutting-Edge Technology",description:"Work with the latest in network automation, cloud platforms, and security technologies."},{title:"Growth Opportunities",description:"Continuous learning through certifications, training, and hands-on experience with enterprise clients."},{title:"Collaborative Culture",description:"Join a team that values innovation, knowledge sharing, and professional development."}].map((a,x)=>e.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:x*.1},className:"bg-card rounded-xl p-6 border border-border",children:[e.jsx("h3",{className:"text-xl font-semibold mb-3",children:a.title}),e.jsx("p",{className:"text-muted-foreground",children:a.description})]},x))})}),e.jsxs("section",{className:"container mx-auto px-6",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-8",children:"Open Positions"}),e.jsx(Q,{className:"mb-8 max-w-5xl mx-auto",children:e.jsx(K,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ws,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx($,{placeholder:"Search positions...",value:o,onChange:a=>u(a.target.value),className:"pl-10"})]}),e.jsxs(X,{value:m,onValueChange:y,children:[e.jsx(Z,{className:"w-full md:w-[180px]",children:e.jsx(ee,{placeholder:"Department"})}),e.jsxs(se,{children:[e.jsx(j,{value:"all",children:"All Departments"}),H.map(a=>e.jsx(j,{value:a,children:a},a))]})]}),e.jsxs(X,{value:h,onValueChange:p,children:[e.jsx(Z,{className:"w-full md:w-[150px]",children:e.jsx(ee,{placeholder:"Type"})}),e.jsxs(se,{children:[e.jsx(j,{value:"all",children:"All Types"}),s.map(a=>e.jsx(j,{value:a,children:a},a))]})]})]})})}),e.jsx("div",{className:"max-w-5xl mx-auto mb-6",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",d.length," of ",V.length," positions"]})}),e.jsx("div",{className:"space-y-4 max-w-5xl mx-auto",children:d.length===0?e.jsx(Q,{children:e.jsxs(K,{className:"py-12 text-center",children:[e.jsx(le,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No positions found"}),e.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search or filters"})]})}):d.map((a,x)=>e.jsx(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:x*.05},children:e.jsx(Q,{className:"overflow-hidden hover:shadow-md transition-shadow",children:e.jsxs(K,{className:"p-0",children:[e.jsx("div",{className:"p-6 cursor-pointer hover:bg-muted/30 transition-colors",onClick:()=>c(l===a.id?null:a.id),children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg shrink-0",children:e.jsx(le,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[e.jsx("h3",{className:"font-semibold text-lg",children:a.title}),e.jsx(ie,{variant:"outline",className:"font-mono text-xs",children:a.id}),W(a.id)&&e.jsxs(ie,{className:"bg-primary/10 text-primary border-primary/20 hover:bg-primary/10",children:[e.jsx(q,{className:"w-3 h-3 mr-1"}),"Applied"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(bs,{className:"w-3.5 h-3.5"}),a.department]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(As,{className:"w-3.5 h-3.5"}),a.location]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ye,{className:"w-3.5 h-3.5"}),a.type]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2 line-clamp-2",children:a.description})]})]})}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[W(a.id)?e.jsxs(b,{size:"sm",variant:"outline",disabled:!0,className:"cursor-not-allowed",children:[e.jsx(q,{className:"w-4 h-4 mr-1 text-primary"}),"Applied"]}):e.jsx(b,{size:"sm",onClick:g=>{g.stopPropagation(),U(a.id)},children:t?"Apply Now":e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"w-4 h-4 mr-1"}),"Apply"]})}),e.jsx(b,{variant:"ghost",size:"icon",children:l===a.id?e.jsx(ns,{className:"w-5 h-5"}):e.jsx(Ss,{className:"w-5 h-5"})})]})]})}),e.jsx(vs,{children:l===a.id&&e.jsx(J.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:e.jsxs("div",{className:"px-6 pb-6 border-t pt-4 bg-muted/30",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-primary rounded-full"}),"Responsibilities"]}),e.jsx("ul",{className:"space-y-2",children:a.responsibilities.map((g,_)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[e.jsx("span",{className:"text-primary mt-1.5",children:"•"}),e.jsx("span",{children:g})]},_))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-primary rounded-full"}),"Requirements"]}),e.jsx("ul",{className:"space-y-2",children:a.requirements.map((g,_)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[e.jsx("span",{className:"text-primary mt-1.5",children:"•"}),e.jsx("span",{children:g})]},_))})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t flex justify-end",children:W(a.id)?e.jsxs(b,{variant:"outline",disabled:!0,className:"cursor-not-allowed",children:[e.jsx(q,{className:"w-4 h-4 mr-2 text-primary"}),"Already Applied"]}):e.jsx(b,{onClick:()=>U(a.id),children:t?"Apply for this Position":"Sign In to Apply"})})]})})})]})})},a.id))})]})]}),e.jsx(ls,{}),e.jsx(Ds,{open:f,onOpenChange:w,positionId:D,redirectPath:"/careers"}),e.jsx(zs,{position:R,open:F,onOpenChange:k,onSuccess:Y})]})};export{Aa as default};
