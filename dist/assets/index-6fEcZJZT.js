var zw=e=>{throw TypeError(e)};var Mp=(e,s,r)=>s.has(e)||zw("Cannot "+r);var U=(e,s,r)=>(Mp(e,s,"read from private field"),r?r.call(e):s.get(e)),De=(e,s,r)=>s.has(e)?zw("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(e):s.set(e,r),ge=(e,s,r,n)=>(Mp(e,s,"write to private field"),n?n.call(e,r):s.set(e,r),r),tt=(e,s,r)=>(Mp(e,s,"access private method"),r);var uh=(e,s,r,n)=>({set _(a){ge(e,s,a,r)},get _(){return U(e,s,n)}});function JP(e,s){for(var r=0;r<s.length;r++){const n=s[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();function F1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $1={exports:{}},yf={},U1={exports:{}},it={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ru=Symbol.for("react.element"),XP=Symbol.for("react.portal"),eR=Symbol.for("react.fragment"),tR=Symbol.for("react.strict_mode"),sR=Symbol.for("react.profiler"),rR=Symbol.for("react.provider"),nR=Symbol.for("react.context"),aR=Symbol.for("react.forward_ref"),iR=Symbol.for("react.suspense"),oR=Symbol.for("react.memo"),lR=Symbol.for("react.lazy"),qw=Symbol.iterator;function cR(e){return e===null||typeof e!="object"?null:(e=qw&&e[qw]||e["@@iterator"],typeof e=="function"?e:null)}var B1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z1=Object.assign,q1={};function Uc(e,s,r){this.props=e,this.context=s,this.refs=q1,this.updater=r||B1}Uc.prototype.isReactComponent={};Uc.prototype.setState=function(e,s){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,s,"setState")};Uc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function W1(){}W1.prototype=Uc.prototype;function hy(e,s,r){this.props=e,this.context=s,this.refs=q1,this.updater=r||B1}var my=hy.prototype=new W1;my.constructor=hy;z1(my,Uc.prototype);my.isPureReactComponent=!0;var Ww=Array.isArray,V1=Object.prototype.hasOwnProperty,fy={current:null},H1={key:!0,ref:!0,__self:!0,__source:!0};function K1(e,s,r){var n,a={},i=null,o=null;if(s!=null)for(n in s.ref!==void 0&&(o=s.ref),s.key!==void 0&&(i=""+s.key),s)V1.call(s,n)&&!H1.hasOwnProperty(n)&&(a[n]=s[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Ru,type:e,key:i,ref:o,props:a,_owner:fy.current}}function dR(e,s){return{$$typeof:Ru,type:e.type,key:s,ref:e.ref,props:e.props,_owner:e._owner}}function py(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ru}function uR(e){var s={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return s[r]})}var Vw=/\/+/g;function Lp(e,s){return typeof e=="object"&&e!==null&&e.key!=null?uR(""+e.key):s.toString(36)}function Vh(e,s,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ru:case XP:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+Lp(o,0):n,Ww(a)?(r="",e!=null&&(r=e.replace(Vw,"$&/")+"/"),Vh(a,s,r,"",function(d){return d})):a!=null&&(py(a)&&(a=dR(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Vw,"$&/")+"/")+e)),s.push(a)),1;if(o=0,n=n===""?".":n+":",Ww(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Lp(i,l);o+=Vh(i,s,r,c,a)}else if(c=cR(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Lp(i,l++),o+=Vh(i,s,r,c,a);else if(i==="object")throw s=String(e),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return o}function hh(e,s,r){if(e==null)return e;var n=[],a=0;return Vh(e,n,"","",function(i){return s.call(r,i,a++)}),n}function hR(e){if(e._status===-1){var s=e._result;s=s(),s.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=s)}if(e._status===1)return e._result.default;throw e._result}var dr={current:null},Hh={transition:null},mR={ReactCurrentDispatcher:dr,ReactCurrentBatchConfig:Hh,ReactCurrentOwner:fy};function G1(){throw Error("act(...) is not supported in production builds of React.")}it.Children={map:hh,forEach:function(e,s,r){hh(e,function(){s.apply(this,arguments)},r)},count:function(e){var s=0;return hh(e,function(){s++}),s},toArray:function(e){return hh(e,function(s){return s})||[]},only:function(e){if(!py(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};it.Component=Uc;it.Fragment=eR;it.Profiler=sR;it.PureComponent=hy;it.StrictMode=tR;it.Suspense=iR;it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mR;it.act=G1;it.cloneElement=function(e,s,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=z1({},e.props),a=e.key,i=e.ref,o=e._owner;if(s!=null){if(s.ref!==void 0&&(i=s.ref,o=fy.current),s.key!==void 0&&(a=""+s.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in s)V1.call(s,c)&&!H1.hasOwnProperty(c)&&(n[c]=s[c]===void 0&&l!==void 0?l[c]:s[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:Ru,type:e.type,key:a,ref:i,props:n,_owner:o}};it.createContext=function(e){return e={$$typeof:nR,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:rR,_context:e},e.Consumer=e};it.createElement=K1;it.createFactory=function(e){var s=K1.bind(null,e);return s.type=e,s};it.createRef=function(){return{current:null}};it.forwardRef=function(e){return{$$typeof:aR,render:e}};it.isValidElement=py;it.lazy=function(e){return{$$typeof:lR,_payload:{_status:-1,_result:e},_init:hR}};it.memo=function(e,s){return{$$typeof:oR,type:e,compare:s===void 0?null:s}};it.startTransition=function(e){var s=Hh.transition;Hh.transition={};try{e()}finally{Hh.transition=s}};it.unstable_act=G1;it.useCallback=function(e,s){return dr.current.useCallback(e,s)};it.useContext=function(e){return dr.current.useContext(e)};it.useDebugValue=function(){};it.useDeferredValue=function(e){return dr.current.useDeferredValue(e)};it.useEffect=function(e,s){return dr.current.useEffect(e,s)};it.useId=function(){return dr.current.useId()};it.useImperativeHandle=function(e,s,r){return dr.current.useImperativeHandle(e,s,r)};it.useInsertionEffect=function(e,s){return dr.current.useInsertionEffect(e,s)};it.useLayoutEffect=function(e,s){return dr.current.useLayoutEffect(e,s)};it.useMemo=function(e,s){return dr.current.useMemo(e,s)};it.useReducer=function(e,s,r){return dr.current.useReducer(e,s,r)};it.useRef=function(e){return dr.current.useRef(e)};it.useState=function(e){return dr.current.useState(e)};it.useSyncExternalStore=function(e,s,r){return dr.current.useSyncExternalStore(e,s,r)};it.useTransition=function(){return dr.current.useTransition()};it.version="18.3.1";U1.exports=it;var f=U1.exports;const le=F1(f),jf=JP({__proto__:null,default:le},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fR=f,pR=Symbol.for("react.element"),xR=Symbol.for("react.fragment"),gR=Object.prototype.hasOwnProperty,vR=fR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yR={key:!0,ref:!0,__self:!0,__source:!0};function Y1(e,s,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),s.key!==void 0&&(i=""+s.key),s.ref!==void 0&&(o=s.ref);for(n in s)gR.call(s,n)&&!yR.hasOwnProperty(n)&&(a[n]=s[n]);if(e&&e.defaultProps)for(n in s=e.defaultProps,s)a[n]===void 0&&(a[n]=s[n]);return{$$typeof:pR,type:e,key:i,ref:o,props:a,_owner:vR.current}}yf.Fragment=xR;yf.jsx=Y1;yf.jsxs=Y1;$1.exports=yf;var t=$1.exports,Q1={exports:{}},Kr={},Z1={exports:{}},J1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function s(D,q){var re=D.length;D.push(q);e:for(;0<re;){var S=re-1>>>1,R=D[S];if(0<a(R,q))D[S]=q,D[re]=R,re=S;else break e}}function r(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var q=D[0],re=D.pop();if(re!==q){D[0]=re;e:for(var S=0,R=D.length,te=R>>>1;S<te;){var Q=2*(S+1)-1,Y=D[Q],oe=Q+1,X=D[oe];if(0>a(Y,re))oe<R&&0>a(X,Y)?(D[S]=X,D[oe]=re,S=oe):(D[S]=Y,D[Q]=re,S=Q);else if(oe<R&&0>a(X,re))D[S]=X,D[oe]=re,S=oe;else break e}}return q}function a(D,q){var re=D.sortIndex-q.sortIndex;return re!==0?re:D.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,m=null,h=3,p=!1,g=!1,x=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(D){for(var q=r(d);q!==null;){if(q.callback===null)n(d);else if(q.startTime<=D)n(d),q.sortIndex=q.expirationTime,s(c,q);else break;q=r(d)}}function b(D){if(x=!1,w(D),!g)if(r(c)!==null)g=!0,ee(N);else{var q=r(d);q!==null&&K(b,q.startTime-D)}}function N(D,q){g=!1,x&&(x=!1,y(E),E=-1),p=!0;var re=h;try{for(w(q),m=r(c);m!==null&&(!(m.expirationTime>q)||D&&!L());){var S=m.callback;if(typeof S=="function"){m.callback=null,h=m.priorityLevel;var R=S(m.expirationTime<=q);q=e.unstable_now(),typeof R=="function"?m.callback=R:m===r(c)&&n(c),w(q)}else n(c);m=r(c)}if(m!==null)var te=!0;else{var Q=r(d);Q!==null&&K(b,Q.startTime-q),te=!1}return te}finally{m=null,h=re,p=!1}}var _=!1,C=null,E=-1,k=5,A=-1;function L(){return!(e.unstable_now()-A<k)}function H(){if(C!==null){var D=e.unstable_now();A=D;var q=!0;try{q=C(!0,D)}finally{q?F():(_=!1,C=null)}}else _=!1}var F;if(typeof j=="function")F=function(){j(H)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,G=I.port2;I.port1.onmessage=H,F=function(){G.postMessage(null)}}else F=function(){v(H,0)};function ee(D){C=D,_||(_=!0,F())}function K(D,q){E=v(function(){D(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,ee(N))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(D){switch(h){case 1:case 2:case 3:var q=3;break;default:q=h}var re=h;h=q;try{return D()}finally{h=re}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,q){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var re=h;h=D;try{return q()}finally{h=re}},e.unstable_scheduleCallback=function(D,q,re){var S=e.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?S+re:S):re=S,D){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=re+R,D={id:u++,callback:q,priorityLevel:D,startTime:re,expirationTime:R,sortIndex:-1},re>S?(D.sortIndex=re,s(d,D),r(c)===null&&D===r(d)&&(x?(y(E),E=-1):x=!0,K(b,re-S))):(D.sortIndex=R,s(c,D),g||p||(g=!0,ee(N))),D},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(D){var q=h;return function(){var re=h;h=q;try{return D.apply(this,arguments)}finally{h=re}}}})(J1);Z1.exports=J1;var jR=Z1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wR=f,Mr=jR;function ue(e){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var X1=new Set,qd={};function el(e,s){xc(e,s),xc(e+"Capture",s)}function xc(e,s){for(qd[e]=s,e=0;e<s.length;e++)X1.add(s[e])}var Da=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ng=Object.prototype.hasOwnProperty,bR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hw={},Kw={};function NR(e){return ng.call(Kw,e)?!0:ng.call(Hw,e)?!1:bR.test(e)?Kw[e]=!0:(Hw[e]=!0,!1)}function CR(e,s,r,n){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _R(e,s,r,n){if(s===null||typeof s>"u"||CR(e,s,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function ur(e,s,r,n,a,i,o){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=s,this.sanitizeURL=i,this.removeEmptyString=o}var zs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){zs[e]=new ur(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var s=e[0];zs[s]=new ur(s,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){zs[e]=new ur(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){zs[e]=new ur(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){zs[e]=new ur(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){zs[e]=new ur(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){zs[e]=new ur(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){zs[e]=new ur(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){zs[e]=new ur(e,5,!1,e.toLowerCase(),null,!1,!1)});var xy=/[\-:]([a-z])/g;function gy(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var s=e.replace(xy,gy);zs[s]=new ur(s,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var s=e.replace(xy,gy);zs[s]=new ur(s,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var s=e.replace(xy,gy);zs[s]=new ur(s,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){zs[e]=new ur(e,1,!1,e.toLowerCase(),null,!1,!1)});zs.xlinkHref=new ur("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){zs[e]=new ur(e,1,!1,e.toLowerCase(),null,!0,!0)});function vy(e,s,r,n){var a=zs.hasOwnProperty(s)?zs[s]:null;(a!==null?a.type!==0:n||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(_R(s,r,a,n)&&(r=null),n||a===null?NR(s)&&(r===null?e.removeAttribute(s):e.setAttribute(s,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(s=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(s):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,s,r):e.setAttribute(s,r))))}var qa=wR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mh=Symbol.for("react.element"),Rl=Symbol.for("react.portal"),Il=Symbol.for("react.fragment"),yy=Symbol.for("react.strict_mode"),ag=Symbol.for("react.profiler"),eC=Symbol.for("react.provider"),tC=Symbol.for("react.context"),jy=Symbol.for("react.forward_ref"),ig=Symbol.for("react.suspense"),og=Symbol.for("react.suspense_list"),wy=Symbol.for("react.memo"),oi=Symbol.for("react.lazy"),sC=Symbol.for("react.offscreen"),Gw=Symbol.iterator;function id(e){return e===null||typeof e!="object"?null:(e=Gw&&e[Gw]||e["@@iterator"],typeof e=="function"?e:null)}var rs=Object.assign,Fp;function jd(e){if(Fp===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);Fp=s&&s[1]||""}return`
`+Fp+e}var $p=!1;function Up(e,s){if(!e||$p)return"";$p=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(d){var n=d}Reflect.construct(e,[],s)}else{try{s.call()}catch(d){n=d}e.call(s.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{$p=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?jd(e):""}function SR(e){switch(e.tag){case 5:return jd(e.type);case 16:return jd("Lazy");case 13:return jd("Suspense");case 19:return jd("SuspenseList");case 0:case 2:case 15:return e=Up(e.type,!1),e;case 11:return e=Up(e.type.render,!1),e;case 1:return e=Up(e.type,!0),e;default:return""}}function lg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Il:return"Fragment";case Rl:return"Portal";case ag:return"Profiler";case yy:return"StrictMode";case ig:return"Suspense";case og:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case tC:return(e.displayName||"Context")+".Consumer";case eC:return(e._context.displayName||"Context")+".Provider";case jy:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case wy:return s=e.displayName||null,s!==null?s:lg(e.type)||"Memo";case oi:s=e._payload,e=e._init;try{return lg(e(s))}catch{}}return null}function kR(e){var s=e.type;switch(e.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=s.render,e=e.displayName||e.name||"",s.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lg(s);case 8:return s===yy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Bi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function rC(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ER(e){var s=rC(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),n=""+e[s];if(!e.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,s,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function fh(e){e._valueTracker||(e._valueTracker=ER(e))}function nC(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var r=s.getValue(),n="";return e&&(n=rC(e)?e.checked?"true":"false":e.value),e=n,e!==r?(s.setValue(e),!0):!1}function mm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function cg(e,s){var r=s.checked;return rs({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Yw(e,s){var r=s.defaultValue==null?"":s.defaultValue,n=s.checked!=null?s.checked:s.defaultChecked;r=Bi(s.value!=null?s.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function aC(e,s){s=s.checked,s!=null&&vy(e,"checked",s,!1)}function dg(e,s){aC(e,s);var r=Bi(s.value),n=s.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}s.hasOwnProperty("value")?ug(e,s.type,r):s.hasOwnProperty("defaultValue")&&ug(e,s.type,Bi(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(e.defaultChecked=!!s.defaultChecked)}function Qw(e,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var n=s.type;if(!(n!=="submit"&&n!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+e._wrapperState.initialValue,r||s===e.value||(e.value=s),e.defaultValue=s}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function ug(e,s,r){(s!=="number"||mm(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var wd=Array.isArray;function Hl(e,s,r,n){if(e=e.options,s){s={};for(var a=0;a<r.length;a++)s["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=s.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Bi(r),s=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}s!==null||e[a].disabled||(s=e[a])}s!==null&&(s.selected=!0)}}function hg(e,s){if(s.dangerouslySetInnerHTML!=null)throw Error(ue(91));return rs({},s,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Zw(e,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(ue(92));if(wd(r)){if(1<r.length)throw Error(ue(93));r=r[0]}s=r}s==null&&(s=""),r=s}e._wrapperState={initialValue:Bi(r)}}function iC(e,s){var r=Bi(s.value),n=Bi(s.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),s.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Jw(e){var s=e.textContent;s===e._wrapperState.initialValue&&s!==""&&s!==null&&(e.value=s)}function oC(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mg(e,s){return e==null||e==="http://www.w3.org/1999/xhtml"?oC(s):e==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ph,lC=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(s,r,n,a)})}:e}(function(e,s){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=s;else{for(ph=ph||document.createElement("div"),ph.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=ph.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;s.firstChild;)e.appendChild(s.firstChild)}});function Wd(e,s){if(s){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=s;return}}e.textContent=s}var Ad={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AR=["Webkit","ms","Moz","O"];Object.keys(Ad).forEach(function(e){AR.forEach(function(s){s=s+e.charAt(0).toUpperCase()+e.substring(1),Ad[s]=Ad[e]})});function cC(e,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||Ad.hasOwnProperty(e)&&Ad[e]?(""+s).trim():s+"px"}function dC(e,s){e=e.style;for(var r in s)if(s.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=cC(r,s[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var TR=rs({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fg(e,s){if(s){if(TR[e]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(ue(137,e));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(ue(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(ue(61))}if(s.style!=null&&typeof s.style!="object")throw Error(ue(62))}}function pg(e,s){if(e.indexOf("-")===-1)return typeof s.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xg=null;function by(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var gg=null,Kl=null,Gl=null;function Xw(e){if(e=Ou(e)){if(typeof gg!="function")throw Error(ue(280));var s=e.stateNode;s&&(s=_f(s),gg(e.stateNode,e.type,s))}}function uC(e){Kl?Gl?Gl.push(e):Gl=[e]:Kl=e}function hC(){if(Kl){var e=Kl,s=Gl;if(Gl=Kl=null,Xw(e),s)for(e=0;e<s.length;e++)Xw(s[e])}}function mC(e,s){return e(s)}function fC(){}var Bp=!1;function pC(e,s,r){if(Bp)return e(s,r);Bp=!0;try{return mC(e,s,r)}finally{Bp=!1,(Kl!==null||Gl!==null)&&(fC(),hC())}}function Vd(e,s){var r=e.stateNode;if(r===null)return null;var n=_f(r);if(n===null)return null;r=n[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ue(231,s,typeof r));return r}var vg=!1;if(Da)try{var od={};Object.defineProperty(od,"passive",{get:function(){vg=!0}}),window.addEventListener("test",od,od),window.removeEventListener("test",od,od)}catch{vg=!1}function PR(e,s,r,n,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{s.apply(r,d)}catch(u){this.onError(u)}}var Td=!1,fm=null,pm=!1,yg=null,RR={onError:function(e){Td=!0,fm=e}};function IR(e,s,r,n,a,i,o,l,c){Td=!1,fm=null,PR.apply(RR,arguments)}function DR(e,s,r,n,a,i,o,l,c){if(IR.apply(this,arguments),Td){if(Td){var d=fm;Td=!1,fm=null}else throw Error(ue(198));pm||(pm=!0,yg=d)}}function tl(e){var s=e,r=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,s.flags&4098&&(r=s.return),e=s.return;while(e)}return s.tag===3?r:null}function xC(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function e0(e){if(tl(e)!==e)throw Error(ue(188))}function OR(e){var s=e.alternate;if(!s){if(s=tl(e),s===null)throw Error(ue(188));return s!==e?null:e}for(var r=e,n=s;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return e0(a),e;if(i===n)return e0(a),s;i=i.sibling}throw Error(ue(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(ue(189))}}if(r.alternate!==n)throw Error(ue(190))}if(r.tag!==3)throw Error(ue(188));return r.stateNode.current===r?e:s}function gC(e){return e=OR(e),e!==null?vC(e):null}function vC(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var s=vC(e);if(s!==null)return s;e=e.sibling}return null}var yC=Mr.unstable_scheduleCallback,t0=Mr.unstable_cancelCallback,MR=Mr.unstable_shouldYield,LR=Mr.unstable_requestPaint,ms=Mr.unstable_now,FR=Mr.unstable_getCurrentPriorityLevel,Ny=Mr.unstable_ImmediatePriority,jC=Mr.unstable_UserBlockingPriority,xm=Mr.unstable_NormalPriority,$R=Mr.unstable_LowPriority,wC=Mr.unstable_IdlePriority,wf=null,sa=null;function UR(e){if(sa&&typeof sa.onCommitFiberRoot=="function")try{sa.onCommitFiberRoot(wf,e,void 0,(e.current.flags&128)===128)}catch{}}var An=Math.clz32?Math.clz32:qR,BR=Math.log,zR=Math.LN2;function qR(e){return e>>>=0,e===0?32:31-(BR(e)/zR|0)|0}var xh=64,gh=4194304;function bd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function gm(e,s){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=bd(l):(i&=o,i!==0&&(n=bd(i)))}else o=r&~a,o!==0?n=bd(o):i!==0&&(n=bd(i));if(n===0)return 0;if(s!==0&&s!==n&&!(s&a)&&(a=n&-n,i=s&-s,a>=i||a===16&&(i&4194240)!==0))return s;if(n&4&&(n|=r&16),s=e.entangledLanes,s!==0)for(e=e.entanglements,s&=n;0<s;)r=31-An(s),a=1<<r,n|=e[r],s&=~a;return n}function WR(e,s){switch(e){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VR(e,s){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-An(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=WR(l,s)):c<=s&&(e.expiredLanes|=l),i&=~l}}function jg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function bC(){var e=xh;return xh<<=1,!(xh&4194240)&&(xh=64),e}function zp(e){for(var s=[],r=0;31>r;r++)s.push(e);return s}function Iu(e,s,r){e.pendingLanes|=s,s!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,s=31-An(s),e[s]=r}function HR(e,s){var r=e.pendingLanes&~s;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=s,e.mutableReadLanes&=s,e.entangledLanes&=s,s=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-An(r),i=1<<a;s[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Cy(e,s){var r=e.entangledLanes|=s;for(e=e.entanglements;r;){var n=31-An(r),a=1<<n;a&s|e[n]&s&&(e[n]|=s),r&=~a}}var yt=0;function NC(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var CC,_y,_C,SC,kC,wg=!1,vh=[],Ei=null,Ai=null,Ti=null,Hd=new Map,Kd=new Map,ui=[],KR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function s0(e,s){switch(e){case"focusin":case"focusout":Ei=null;break;case"dragenter":case"dragleave":Ai=null;break;case"mouseover":case"mouseout":Ti=null;break;case"pointerover":case"pointerout":Hd.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kd.delete(s.pointerId)}}function ld(e,s,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:s,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},s!==null&&(s=Ou(s),s!==null&&_y(s)),e):(e.eventSystemFlags|=n,s=e.targetContainers,a!==null&&s.indexOf(a)===-1&&s.push(a),e)}function GR(e,s,r,n,a){switch(s){case"focusin":return Ei=ld(Ei,e,s,r,n,a),!0;case"dragenter":return Ai=ld(Ai,e,s,r,n,a),!0;case"mouseover":return Ti=ld(Ti,e,s,r,n,a),!0;case"pointerover":var i=a.pointerId;return Hd.set(i,ld(Hd.get(i)||null,e,s,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Kd.set(i,ld(Kd.get(i)||null,e,s,r,n,a)),!0}return!1}function EC(e){var s=vo(e.target);if(s!==null){var r=tl(s);if(r!==null){if(s=r.tag,s===13){if(s=xC(r),s!==null){e.blockedOn=s,kC(e.priority,function(){_C(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Kh(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var r=bg(e.domEventName,e.eventSystemFlags,s[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);xg=n,r.target.dispatchEvent(n),xg=null}else return s=Ou(r),s!==null&&_y(s),e.blockedOn=r,!1;s.shift()}return!0}function r0(e,s,r){Kh(e)&&r.delete(s)}function YR(){wg=!1,Ei!==null&&Kh(Ei)&&(Ei=null),Ai!==null&&Kh(Ai)&&(Ai=null),Ti!==null&&Kh(Ti)&&(Ti=null),Hd.forEach(r0),Kd.forEach(r0)}function cd(e,s){e.blockedOn===s&&(e.blockedOn=null,wg||(wg=!0,Mr.unstable_scheduleCallback(Mr.unstable_NormalPriority,YR)))}function Gd(e){function s(a){return cd(a,e)}if(0<vh.length){cd(vh[0],e);for(var r=1;r<vh.length;r++){var n=vh[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ei!==null&&cd(Ei,e),Ai!==null&&cd(Ai,e),Ti!==null&&cd(Ti,e),Hd.forEach(s),Kd.forEach(s),r=0;r<ui.length;r++)n=ui[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<ui.length&&(r=ui[0],r.blockedOn===null);)EC(r),r.blockedOn===null&&ui.shift()}var Yl=qa.ReactCurrentBatchConfig,vm=!0;function QR(e,s,r,n){var a=yt,i=Yl.transition;Yl.transition=null;try{yt=1,Sy(e,s,r,n)}finally{yt=a,Yl.transition=i}}function ZR(e,s,r,n){var a=yt,i=Yl.transition;Yl.transition=null;try{yt=4,Sy(e,s,r,n)}finally{yt=a,Yl.transition=i}}function Sy(e,s,r,n){if(vm){var a=bg(e,s,r,n);if(a===null)Jp(e,s,n,ym,r),s0(e,n);else if(GR(a,e,s,r,n))n.stopPropagation();else if(s0(e,n),s&4&&-1<KR.indexOf(e)){for(;a!==null;){var i=Ou(a);if(i!==null&&CC(i),i=bg(e,s,r,n),i===null&&Jp(e,s,n,ym,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else Jp(e,s,n,null,r)}}var ym=null;function bg(e,s,r,n){if(ym=null,e=by(n),e=vo(e),e!==null)if(s=tl(e),s===null)e=null;else if(r=s.tag,r===13){if(e=xC(s),e!==null)return e;e=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null);return ym=e,null}function AC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FR()){case Ny:return 1;case jC:return 4;case xm:case $R:return 16;case wC:return 536870912;default:return 16}default:return 16}}var Ni=null,ky=null,Gh=null;function TC(){if(Gh)return Gh;var e,s=ky,r=s.length,n,a="value"in Ni?Ni.value:Ni.textContent,i=a.length;for(e=0;e<r&&s[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&s[r-n]===a[i-n];n++);return Gh=a.slice(e,1<n?1-n:void 0)}function Yh(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function yh(){return!0}function n0(){return!1}function Gr(e){function s(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?yh:n0,this.isPropagationStopped=n0,this}return rs(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=yh)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=yh)},persist:function(){},isPersistent:yh}),s}var Bc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ey=Gr(Bc),Du=rs({},Bc,{view:0,detail:0}),JR=Gr(Du),qp,Wp,dd,bf=rs({},Du,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ay,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dd&&(dd&&e.type==="mousemove"?(qp=e.screenX-dd.screenX,Wp=e.screenY-dd.screenY):Wp=qp=0,dd=e),qp)},movementY:function(e){return"movementY"in e?e.movementY:Wp}}),a0=Gr(bf),XR=rs({},bf,{dataTransfer:0}),eI=Gr(XR),tI=rs({},Du,{relatedTarget:0}),Vp=Gr(tI),sI=rs({},Bc,{animationName:0,elapsedTime:0,pseudoElement:0}),rI=Gr(sI),nI=rs({},Bc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),aI=Gr(nI),iI=rs({},Bc,{data:0}),i0=Gr(iI),oI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dI(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=cI[e])?!!s[e]:!1}function Ay(){return dI}var uI=rs({},Du,{key:function(e){if(e.key){var s=oI[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=Yh(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lI[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ay,charCode:function(e){return e.type==="keypress"?Yh(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yh(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hI=Gr(uI),mI=rs({},bf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),o0=Gr(mI),fI=rs({},Du,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ay}),pI=Gr(fI),xI=rs({},Bc,{propertyName:0,elapsedTime:0,pseudoElement:0}),gI=Gr(xI),vI=rs({},bf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),yI=Gr(vI),jI=[9,13,27,32],Ty=Da&&"CompositionEvent"in window,Pd=null;Da&&"documentMode"in document&&(Pd=document.documentMode);var wI=Da&&"TextEvent"in window&&!Pd,PC=Da&&(!Ty||Pd&&8<Pd&&11>=Pd),l0=" ",c0=!1;function RC(e,s){switch(e){case"keyup":return jI.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function IC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Dl=!1;function bI(e,s){switch(e){case"compositionend":return IC(s);case"keypress":return s.which!==32?null:(c0=!0,l0);case"textInput":return e=s.data,e===l0&&c0?null:e;default:return null}}function NI(e,s){if(Dl)return e==="compositionend"||!Ty&&RC(e,s)?(e=TC(),Gh=ky=Ni=null,Dl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return PC&&s.locale!=="ko"?null:s.data;default:return null}}var CI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function d0(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!CI[e.type]:s==="textarea"}function DC(e,s,r,n){uC(n),s=jm(s,"onChange"),0<s.length&&(r=new Ey("onChange","change",null,r,n),e.push({event:r,listeners:s}))}var Rd=null,Yd=null;function _I(e){VC(e,0)}function Nf(e){var s=Ll(e);if(nC(s))return e}function SI(e,s){if(e==="change")return s}var OC=!1;if(Da){var Hp;if(Da){var Kp="oninput"in document;if(!Kp){var u0=document.createElement("div");u0.setAttribute("oninput","return;"),Kp=typeof u0.oninput=="function"}Hp=Kp}else Hp=!1;OC=Hp&&(!document.documentMode||9<document.documentMode)}function h0(){Rd&&(Rd.detachEvent("onpropertychange",MC),Yd=Rd=null)}function MC(e){if(e.propertyName==="value"&&Nf(Yd)){var s=[];DC(s,Yd,e,by(e)),pC(_I,s)}}function kI(e,s,r){e==="focusin"?(h0(),Rd=s,Yd=r,Rd.attachEvent("onpropertychange",MC)):e==="focusout"&&h0()}function EI(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Nf(Yd)}function AI(e,s){if(e==="click")return Nf(s)}function TI(e,s){if(e==="input"||e==="change")return Nf(s)}function PI(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var Dn=typeof Object.is=="function"?Object.is:PI;function Qd(e,s){if(Dn(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var r=Object.keys(e),n=Object.keys(s);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!ng.call(s,a)||!Dn(e[a],s[a]))return!1}return!0}function m0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function f0(e,s){var r=m0(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=s&&n>=s)return{node:r,offset:s-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=m0(r)}}function LC(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?LC(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function FC(){for(var e=window,s=mm();s instanceof e.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)e=s.contentWindow;else break;s=mm(e.document)}return s}function Py(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}function RI(e){var s=FC(),r=e.focusedElem,n=e.selectionRange;if(s!==r&&r&&r.ownerDocument&&LC(r.ownerDocument.documentElement,r)){if(n!==null&&Py(r)){if(s=n.start,e=n.end,e===void 0&&(e=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(e,r.value.length);else if(e=(s=r.ownerDocument||document)&&s.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=f0(r,i);var o=f0(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(s=s.createRange(),s.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(s),e.extend(o.node,o.offset)):(s.setEnd(o.node,o.offset),e.addRange(s)))}}for(s=[],e=r;e=e.parentNode;)e.nodeType===1&&s.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)e=s[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var II=Da&&"documentMode"in document&&11>=document.documentMode,Ol=null,Ng=null,Id=null,Cg=!1;function p0(e,s,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Cg||Ol==null||Ol!==mm(n)||(n=Ol,"selectionStart"in n&&Py(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Id&&Qd(Id,n)||(Id=n,n=jm(Ng,"onSelect"),0<n.length&&(s=new Ey("onSelect","select",null,s,r),e.push({event:s,listeners:n}),s.target=Ol)))}function jh(e,s){var r={};return r[e.toLowerCase()]=s.toLowerCase(),r["Webkit"+e]="webkit"+s,r["Moz"+e]="moz"+s,r}var Ml={animationend:jh("Animation","AnimationEnd"),animationiteration:jh("Animation","AnimationIteration"),animationstart:jh("Animation","AnimationStart"),transitionend:jh("Transition","TransitionEnd")},Gp={},$C={};Da&&($C=document.createElement("div").style,"AnimationEvent"in window||(delete Ml.animationend.animation,delete Ml.animationiteration.animation,delete Ml.animationstart.animation),"TransitionEvent"in window||delete Ml.transitionend.transition);function Cf(e){if(Gp[e])return Gp[e];if(!Ml[e])return e;var s=Ml[e],r;for(r in s)if(s.hasOwnProperty(r)&&r in $C)return Gp[e]=s[r];return e}var UC=Cf("animationend"),BC=Cf("animationiteration"),zC=Cf("animationstart"),qC=Cf("transitionend"),WC=new Map,x0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yi(e,s){WC.set(e,s),el(s,[e])}for(var Yp=0;Yp<x0.length;Yp++){var Qp=x0[Yp],DI=Qp.toLowerCase(),OI=Qp[0].toUpperCase()+Qp.slice(1);Yi(DI,"on"+OI)}Yi(UC,"onAnimationEnd");Yi(BC,"onAnimationIteration");Yi(zC,"onAnimationStart");Yi("dblclick","onDoubleClick");Yi("focusin","onFocus");Yi("focusout","onBlur");Yi(qC,"onTransitionEnd");xc("onMouseEnter",["mouseout","mouseover"]);xc("onMouseLeave",["mouseout","mouseover"]);xc("onPointerEnter",["pointerout","pointerover"]);xc("onPointerLeave",["pointerout","pointerover"]);el("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));el("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));el("onBeforeInput",["compositionend","keypress","textInput","paste"]);el("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));el("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));el("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nd));function g0(e,s,r){var n=e.type||"unknown-event";e.currentTarget=r,DR(n,s,void 0,e),e.currentTarget=null}function VC(e,s){s=(s&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(s)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;g0(a,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;g0(a,l,d),i=c}}}if(pm)throw e=yg,pm=!1,yg=null,e}function Mt(e,s){var r=s[Ag];r===void 0&&(r=s[Ag]=new Set);var n=e+"__bubble";r.has(n)||(HC(s,e,2,!1),r.add(n))}function Zp(e,s,r){var n=0;s&&(n|=4),HC(r,e,n,s)}var wh="_reactListening"+Math.random().toString(36).slice(2);function Zd(e){if(!e[wh]){e[wh]=!0,X1.forEach(function(r){r!=="selectionchange"&&(MI.has(r)||Zp(r,!1,e),Zp(r,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[wh]||(s[wh]=!0,Zp("selectionchange",!1,s))}}function HC(e,s,r,n){switch(AC(s)){case 1:var a=QR;break;case 4:a=ZR;break;default:a=Sy}r=a.bind(null,s,r,e),a=void 0,!vg||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(s,r,{capture:!0,passive:a}):e.addEventListener(s,r,!0):a!==void 0?e.addEventListener(s,r,{passive:a}):e.addEventListener(s,r,!1)}function Jp(e,s,r,n,a){var i=n;if(!(s&1)&&!(s&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=vo(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}pC(function(){var d=i,u=by(r),m=[];e:{var h=WC.get(e);if(h!==void 0){var p=Ey,g=e;switch(e){case"keypress":if(Yh(r)===0)break e;case"keydown":case"keyup":p=hI;break;case"focusin":g="focus",p=Vp;break;case"focusout":g="blur",p=Vp;break;case"beforeblur":case"afterblur":p=Vp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=a0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=eI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=pI;break;case UC:case BC:case zC:p=rI;break;case qC:p=gI;break;case"scroll":p=JR;break;case"wheel":p=yI;break;case"copy":case"cut":case"paste":p=aI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=o0}var x=(s&4)!==0,v=!x&&e==="scroll",y=x?h!==null?h+"Capture":null:h;x=[];for(var j=d,w;j!==null;){w=j;var b=w.stateNode;if(w.tag===5&&b!==null&&(w=b,y!==null&&(b=Vd(j,y),b!=null&&x.push(Jd(j,b,w)))),v)break;j=j.return}0<x.length&&(h=new p(h,g,null,r,u),m.push({event:h,listeners:x}))}}if(!(s&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&r!==xg&&(g=r.relatedTarget||r.fromElement)&&(vo(g)||g[Oa]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(g=r.relatedTarget||r.toElement,p=d,g=g?vo(g):null,g!==null&&(v=tl(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=d),p!==g)){if(x=a0,b="onMouseLeave",y="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(x=o0,b="onPointerLeave",y="onPointerEnter",j="pointer"),v=p==null?h:Ll(p),w=g==null?h:Ll(g),h=new x(b,j+"leave",p,r,u),h.target=v,h.relatedTarget=w,b=null,vo(u)===d&&(x=new x(y,j+"enter",g,r,u),x.target=w,x.relatedTarget=v,b=x),v=b,p&&g)t:{for(x=p,y=g,j=0,w=x;w;w=dl(w))j++;for(w=0,b=y;b;b=dl(b))w++;for(;0<j-w;)x=dl(x),j--;for(;0<w-j;)y=dl(y),w--;for(;j--;){if(x===y||y!==null&&x===y.alternate)break t;x=dl(x),y=dl(y)}x=null}else x=null;p!==null&&v0(m,h,p,x,!1),g!==null&&v!==null&&v0(m,v,g,x,!0)}}e:{if(h=d?Ll(d):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var N=SI;else if(d0(h))if(OC)N=TI;else{N=EI;var _=kI}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(N=AI);if(N&&(N=N(e,d))){DC(m,N,r,u);break e}_&&_(e,h,d),e==="focusout"&&(_=h._wrapperState)&&_.controlled&&h.type==="number"&&ug(h,"number",h.value)}switch(_=d?Ll(d):window,e){case"focusin":(d0(_)||_.contentEditable==="true")&&(Ol=_,Ng=d,Id=null);break;case"focusout":Id=Ng=Ol=null;break;case"mousedown":Cg=!0;break;case"contextmenu":case"mouseup":case"dragend":Cg=!1,p0(m,r,u);break;case"selectionchange":if(II)break;case"keydown":case"keyup":p0(m,r,u)}var C;if(Ty)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Dl?RC(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(PC&&r.locale!=="ko"&&(Dl||E!=="onCompositionStart"?E==="onCompositionEnd"&&Dl&&(C=TC()):(Ni=u,ky="value"in Ni?Ni.value:Ni.textContent,Dl=!0)),_=jm(d,E),0<_.length&&(E=new i0(E,e,null,r,u),m.push({event:E,listeners:_}),C?E.data=C:(C=IC(r),C!==null&&(E.data=C)))),(C=wI?bI(e,r):NI(e,r))&&(d=jm(d,"onBeforeInput"),0<d.length&&(u=new i0("onBeforeInput","beforeinput",null,r,u),m.push({event:u,listeners:d}),u.data=C))}VC(m,s)})}function Jd(e,s,r){return{instance:e,listener:s,currentTarget:r}}function jm(e,s){for(var r=s+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Vd(e,r),i!=null&&n.unshift(Jd(e,i,a)),i=Vd(e,s),i!=null&&n.push(Jd(e,i,a))),e=e.return}return n}function dl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function v0(e,s,r,n,a){for(var i=s._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,a?(c=Vd(r,i),c!=null&&o.unshift(Jd(r,c,l))):a||(c=Vd(r,i),c!=null&&o.push(Jd(r,c,l)))),r=r.return}o.length!==0&&e.push({event:s,listeners:o})}var LI=/\r\n?/g,FI=/\u0000|\uFFFD/g;function y0(e){return(typeof e=="string"?e:""+e).replace(LI,`
`).replace(FI,"")}function bh(e,s,r){if(s=y0(s),y0(e)!==s&&r)throw Error(ue(425))}function wm(){}var _g=null,Sg=null;function kg(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Eg=typeof setTimeout=="function"?setTimeout:void 0,$I=typeof clearTimeout=="function"?clearTimeout:void 0,j0=typeof Promise=="function"?Promise:void 0,UI=typeof queueMicrotask=="function"?queueMicrotask:typeof j0<"u"?function(e){return j0.resolve(null).then(e).catch(BI)}:Eg;function BI(e){setTimeout(function(){throw e})}function Xp(e,s){var r=s,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Gd(s);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Gd(s)}function Pi(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return e}function w0(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return e;s--}else r==="/$"&&s++}e=e.previousSibling}return null}var zc=Math.random().toString(36).slice(2),Xn="__reactFiber$"+zc,Xd="__reactProps$"+zc,Oa="__reactContainer$"+zc,Ag="__reactEvents$"+zc,zI="__reactListeners$"+zc,qI="__reactHandles$"+zc;function vo(e){var s=e[Xn];if(s)return s;for(var r=e.parentNode;r;){if(s=r[Oa]||r[Xn]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(e=w0(e);e!==null;){if(r=e[Xn])return r;e=w0(e)}return s}e=r,r=e.parentNode}return null}function Ou(e){return e=e[Xn]||e[Oa],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ll(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ue(33))}function _f(e){return e[Xd]||null}var Tg=[],Fl=-1;function Qi(e){return{current:e}}function Lt(e){0>Fl||(e.current=Tg[Fl],Tg[Fl]=null,Fl--)}function At(e,s){Fl++,Tg[Fl]=e.current,e.current=s}var zi={},Zs=Qi(zi),wr=Qi(!1),Do=zi;function gc(e,s){var r=e.type.contextTypes;if(!r)return zi;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===s)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=s[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),a}function br(e){return e=e.childContextTypes,e!=null}function bm(){Lt(wr),Lt(Zs)}function b0(e,s,r){if(Zs.current!==zi)throw Error(ue(168));At(Zs,s),At(wr,r)}function KC(e,s,r){var n=e.stateNode;if(s=s.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in s))throw Error(ue(108,kR(e)||"Unknown",a));return rs({},r,n)}function Nm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||zi,Do=Zs.current,At(Zs,e),At(wr,wr.current),!0}function N0(e,s,r){var n=e.stateNode;if(!n)throw Error(ue(169));r?(e=KC(e,s,Do),n.__reactInternalMemoizedMergedChildContext=e,Lt(wr),Lt(Zs),At(Zs,e)):Lt(wr),At(wr,r)}var Ca=null,Sf=!1,ex=!1;function GC(e){Ca===null?Ca=[e]:Ca.push(e)}function WI(e){Sf=!0,GC(e)}function Zi(){if(!ex&&Ca!==null){ex=!0;var e=0,s=yt;try{var r=Ca;for(yt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Ca=null,Sf=!1}catch(a){throw Ca!==null&&(Ca=Ca.slice(e+1)),yC(Ny,Zi),a}finally{yt=s,ex=!1}}return null}var $l=[],Ul=0,Cm=null,_m=0,Xr=[],en=0,Oo=null,Aa=1,Ta="";function uo(e,s){$l[Ul++]=_m,$l[Ul++]=Cm,Cm=e,_m=s}function YC(e,s,r){Xr[en++]=Aa,Xr[en++]=Ta,Xr[en++]=Oo,Oo=e;var n=Aa;e=Ta;var a=32-An(n)-1;n&=~(1<<a),r+=1;var i=32-An(s)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Aa=1<<32-An(s)+a|r<<a|n,Ta=i+e}else Aa=1<<i|r<<a|n,Ta=e}function Ry(e){e.return!==null&&(uo(e,1),YC(e,1,0))}function Iy(e){for(;e===Cm;)Cm=$l[--Ul],$l[Ul]=null,_m=$l[--Ul],$l[Ul]=null;for(;e===Oo;)Oo=Xr[--en],Xr[en]=null,Ta=Xr[--en],Xr[en]=null,Aa=Xr[--en],Xr[en]=null}var Ir=null,Rr=null,Ut=!1,kn=null;function QC(e,s){var r=tn(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=e,s=e.deletions,s===null?(e.deletions=[r],e.flags|=16):s.push(r)}function C0(e,s){switch(e.tag){case 5:var r=e.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(e.stateNode=s,Ir=e,Rr=Pi(s.firstChild),!0):!1;case 6:return s=e.pendingProps===""||s.nodeType!==3?null:s,s!==null?(e.stateNode=s,Ir=e,Rr=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=Oo!==null?{id:Aa,overflow:Ta}:null,e.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=tn(18,null,null,0),r.stateNode=s,r.return=e,e.child=r,Ir=e,Rr=null,!0):!1;default:return!1}}function Pg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Rg(e){if(Ut){var s=Rr;if(s){var r=s;if(!C0(e,s)){if(Pg(e))throw Error(ue(418));s=Pi(r.nextSibling);var n=Ir;s&&C0(e,s)?QC(n,r):(e.flags=e.flags&-4097|2,Ut=!1,Ir=e)}}else{if(Pg(e))throw Error(ue(418));e.flags=e.flags&-4097|2,Ut=!1,Ir=e}}}function _0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ir=e}function Nh(e){if(e!==Ir)return!1;if(!Ut)return _0(e),Ut=!0,!1;var s;if((s=e.tag!==3)&&!(s=e.tag!==5)&&(s=e.type,s=s!=="head"&&s!=="body"&&!kg(e.type,e.memoizedProps)),s&&(s=Rr)){if(Pg(e))throw ZC(),Error(ue(418));for(;s;)QC(e,s),s=Pi(s.nextSibling)}if(_0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ue(317));e:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(s===0){Rr=Pi(e.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}e=e.nextSibling}Rr=null}}else Rr=Ir?Pi(e.stateNode.nextSibling):null;return!0}function ZC(){for(var e=Rr;e;)e=Pi(e.nextSibling)}function vc(){Rr=Ir=null,Ut=!1}function Dy(e){kn===null?kn=[e]:kn.push(e)}var VI=qa.ReactCurrentBatchConfig;function ud(e,s,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ue(309));var n=r.stateNode}if(!n)throw Error(ue(147,e));var a=n,i=""+e;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===i?s.ref:(s=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},s._stringRef=i,s)}if(typeof e!="string")throw Error(ue(284));if(!r._owner)throw Error(ue(290,e))}return e}function Ch(e,s){throw e=Object.prototype.toString.call(s),Error(ue(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e))}function S0(e){var s=e._init;return s(e._payload)}function JC(e){function s(y,j){if(e){var w=y.deletions;w===null?(y.deletions=[j],y.flags|=16):w.push(j)}}function r(y,j){if(!e)return null;for(;j!==null;)s(y,j),j=j.sibling;return null}function n(y,j){for(y=new Map;j!==null;)j.key!==null?y.set(j.key,j):y.set(j.index,j),j=j.sibling;return y}function a(y,j){return y=Oi(y,j),y.index=0,y.sibling=null,y}function i(y,j,w){return y.index=w,e?(w=y.alternate,w!==null?(w=w.index,w<j?(y.flags|=2,j):w):(y.flags|=2,j)):(y.flags|=1048576,j)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,j,w,b){return j===null||j.tag!==6?(j=ox(w,y.mode,b),j.return=y,j):(j=a(j,w),j.return=y,j)}function c(y,j,w,b){var N=w.type;return N===Il?u(y,j,w.props.children,b,w.key):j!==null&&(j.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===oi&&S0(N)===j.type)?(b=a(j,w.props),b.ref=ud(y,j,w),b.return=y,b):(b=sm(w.type,w.key,w.props,null,y.mode,b),b.ref=ud(y,j,w),b.return=y,b)}function d(y,j,w,b){return j===null||j.tag!==4||j.stateNode.containerInfo!==w.containerInfo||j.stateNode.implementation!==w.implementation?(j=lx(w,y.mode,b),j.return=y,j):(j=a(j,w.children||[]),j.return=y,j)}function u(y,j,w,b,N){return j===null||j.tag!==7?(j=Io(w,y.mode,b,N),j.return=y,j):(j=a(j,w),j.return=y,j)}function m(y,j,w){if(typeof j=="string"&&j!==""||typeof j=="number")return j=ox(""+j,y.mode,w),j.return=y,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case mh:return w=sm(j.type,j.key,j.props,null,y.mode,w),w.ref=ud(y,null,j),w.return=y,w;case Rl:return j=lx(j,y.mode,w),j.return=y,j;case oi:var b=j._init;return m(y,b(j._payload),w)}if(wd(j)||id(j))return j=Io(j,y.mode,w,null),j.return=y,j;Ch(y,j)}return null}function h(y,j,w,b){var N=j!==null?j.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return N!==null?null:l(y,j,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case mh:return w.key===N?c(y,j,w,b):null;case Rl:return w.key===N?d(y,j,w,b):null;case oi:return N=w._init,h(y,j,N(w._payload),b)}if(wd(w)||id(w))return N!==null?null:u(y,j,w,b,null);Ch(y,w)}return null}function p(y,j,w,b,N){if(typeof b=="string"&&b!==""||typeof b=="number")return y=y.get(w)||null,l(j,y,""+b,N);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case mh:return y=y.get(b.key===null?w:b.key)||null,c(j,y,b,N);case Rl:return y=y.get(b.key===null?w:b.key)||null,d(j,y,b,N);case oi:var _=b._init;return p(y,j,w,_(b._payload),N)}if(wd(b)||id(b))return y=y.get(w)||null,u(j,y,b,N,null);Ch(j,b)}return null}function g(y,j,w,b){for(var N=null,_=null,C=j,E=j=0,k=null;C!==null&&E<w.length;E++){C.index>E?(k=C,C=null):k=C.sibling;var A=h(y,C,w[E],b);if(A===null){C===null&&(C=k);break}e&&C&&A.alternate===null&&s(y,C),j=i(A,j,E),_===null?N=A:_.sibling=A,_=A,C=k}if(E===w.length)return r(y,C),Ut&&uo(y,E),N;if(C===null){for(;E<w.length;E++)C=m(y,w[E],b),C!==null&&(j=i(C,j,E),_===null?N=C:_.sibling=C,_=C);return Ut&&uo(y,E),N}for(C=n(y,C);E<w.length;E++)k=p(C,y,E,w[E],b),k!==null&&(e&&k.alternate!==null&&C.delete(k.key===null?E:k.key),j=i(k,j,E),_===null?N=k:_.sibling=k,_=k);return e&&C.forEach(function(L){return s(y,L)}),Ut&&uo(y,E),N}function x(y,j,w,b){var N=id(w);if(typeof N!="function")throw Error(ue(150));if(w=N.call(w),w==null)throw Error(ue(151));for(var _=N=null,C=j,E=j=0,k=null,A=w.next();C!==null&&!A.done;E++,A=w.next()){C.index>E?(k=C,C=null):k=C.sibling;var L=h(y,C,A.value,b);if(L===null){C===null&&(C=k);break}e&&C&&L.alternate===null&&s(y,C),j=i(L,j,E),_===null?N=L:_.sibling=L,_=L,C=k}if(A.done)return r(y,C),Ut&&uo(y,E),N;if(C===null){for(;!A.done;E++,A=w.next())A=m(y,A.value,b),A!==null&&(j=i(A,j,E),_===null?N=A:_.sibling=A,_=A);return Ut&&uo(y,E),N}for(C=n(y,C);!A.done;E++,A=w.next())A=p(C,y,E,A.value,b),A!==null&&(e&&A.alternate!==null&&C.delete(A.key===null?E:A.key),j=i(A,j,E),_===null?N=A:_.sibling=A,_=A);return e&&C.forEach(function(H){return s(y,H)}),Ut&&uo(y,E),N}function v(y,j,w,b){if(typeof w=="object"&&w!==null&&w.type===Il&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case mh:e:{for(var N=w.key,_=j;_!==null;){if(_.key===N){if(N=w.type,N===Il){if(_.tag===7){r(y,_.sibling),j=a(_,w.props.children),j.return=y,y=j;break e}}else if(_.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===oi&&S0(N)===_.type){r(y,_.sibling),j=a(_,w.props),j.ref=ud(y,_,w),j.return=y,y=j;break e}r(y,_);break}else s(y,_);_=_.sibling}w.type===Il?(j=Io(w.props.children,y.mode,b,w.key),j.return=y,y=j):(b=sm(w.type,w.key,w.props,null,y.mode,b),b.ref=ud(y,j,w),b.return=y,y=b)}return o(y);case Rl:e:{for(_=w.key;j!==null;){if(j.key===_)if(j.tag===4&&j.stateNode.containerInfo===w.containerInfo&&j.stateNode.implementation===w.implementation){r(y,j.sibling),j=a(j,w.children||[]),j.return=y,y=j;break e}else{r(y,j);break}else s(y,j);j=j.sibling}j=lx(w,y.mode,b),j.return=y,y=j}return o(y);case oi:return _=w._init,v(y,j,_(w._payload),b)}if(wd(w))return g(y,j,w,b);if(id(w))return x(y,j,w,b);Ch(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,j!==null&&j.tag===6?(r(y,j.sibling),j=a(j,w),j.return=y,y=j):(r(y,j),j=ox(w,y.mode,b),j.return=y,y=j),o(y)):r(y,j)}return v}var yc=JC(!0),XC=JC(!1),Sm=Qi(null),km=null,Bl=null,Oy=null;function My(){Oy=Bl=km=null}function Ly(e){var s=Sm.current;Lt(Sm),e._currentValue=s}function Ig(e,s,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,n!==null&&(n.childLanes|=s)):n!==null&&(n.childLanes&s)!==s&&(n.childLanes|=s),e===r)break;e=e.return}}function Ql(e,s){km=e,Oy=Bl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&s&&(jr=!0),e.firstContext=null)}function an(e){var s=e._currentValue;if(Oy!==e)if(e={context:e,memoizedValue:s,next:null},Bl===null){if(km===null)throw Error(ue(308));Bl=e,km.dependencies={lanes:0,firstContext:e}}else Bl=Bl.next=e;return s}var yo=null;function Fy(e){yo===null?yo=[e]:yo.push(e)}function e_(e,s,r,n){var a=s.interleaved;return a===null?(r.next=r,Fy(s)):(r.next=a.next,a.next=r),s.interleaved=r,Ma(e,n)}function Ma(e,s){e.lanes|=s;var r=e.alternate;for(r!==null&&(r.lanes|=s),r=e,e=e.return;e!==null;)e.childLanes|=s,r=e.alternate,r!==null&&(r.childLanes|=s),r=e,e=e.return;return r.tag===3?r.stateNode:null}var li=!1;function $y(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function t_(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pa(e,s){return{eventTime:e,lane:s,tag:0,payload:null,callback:null,next:null}}function Ri(e,s,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ct&2){var a=n.pending;return a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s,Ma(e,r)}return a=n.interleaved,a===null?(s.next=s,Fy(n)):(s.next=a.next,a.next=s),n.interleaved=s,Ma(e,r)}function Qh(e,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var n=s.lanes;n&=e.pendingLanes,r|=n,s.lanes=r,Cy(e,r)}}function k0(e,s){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=s:i=i.next=s}else a=i=s;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=s:e.next=s,r.lastBaseUpdate=s}function Em(e,s,r,n){var a=e.updateQueue;li=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var m=a.baseState;o=0,u=d=c=null,l=i;do{var h=l.lane,p=l.eventTime;if((n&h)===h){u!==null&&(u=u.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,x=l;switch(h=s,p=r,x.tag){case 1:if(g=x.payload,typeof g=="function"){m=g.call(p,m,h);break e}m=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=x.payload,h=typeof g=="function"?g.call(p,m,h):g,h==null)break e;m=rs({},m,h);break e;case 2:li=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=p,c=m):u=u.next=p,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(u===null&&(c=m),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,s=a.shared.interleaved,s!==null){a=s;do o|=a.lane,a=a.next;while(a!==s)}else i===null&&(a.shared.lanes=0);Lo|=o,e.lanes=o,e.memoizedState=m}}function E0(e,s,r){if(e=s.effects,s.effects=null,e!==null)for(s=0;s<e.length;s++){var n=e[s],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(ue(191,a));a.call(n)}}}var Mu={},ra=Qi(Mu),eu=Qi(Mu),tu=Qi(Mu);function jo(e){if(e===Mu)throw Error(ue(174));return e}function Uy(e,s){switch(At(tu,s),At(eu,e),At(ra,Mu),e=s.nodeType,e){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:mg(null,"");break;default:e=e===8?s.parentNode:s,s=e.namespaceURI||null,e=e.tagName,s=mg(s,e)}Lt(ra),At(ra,s)}function jc(){Lt(ra),Lt(eu),Lt(tu)}function s_(e){jo(tu.current);var s=jo(ra.current),r=mg(s,e.type);s!==r&&(At(eu,e),At(ra,r))}function By(e){eu.current===e&&(Lt(ra),Lt(eu))}var Ht=Qi(0);function Am(e){for(var s=e;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var tx=[];function zy(){for(var e=0;e<tx.length;e++)tx[e]._workInProgressVersionPrimary=null;tx.length=0}var Zh=qa.ReactCurrentDispatcher,sx=qa.ReactCurrentBatchConfig,Mo=0,Yt=null,Ns=null,Ts=null,Tm=!1,Dd=!1,su=0,HI=0;function Hs(){throw Error(ue(321))}function qy(e,s){if(s===null)return!1;for(var r=0;r<s.length&&r<e.length;r++)if(!Dn(e[r],s[r]))return!1;return!0}function Wy(e,s,r,n,a,i){if(Mo=i,Yt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Zh.current=e===null||e.memoizedState===null?QI:ZI,e=r(n,a),Dd){i=0;do{if(Dd=!1,su=0,25<=i)throw Error(ue(301));i+=1,Ts=Ns=null,s.updateQueue=null,Zh.current=JI,e=r(n,a)}while(Dd)}if(Zh.current=Pm,s=Ns!==null&&Ns.next!==null,Mo=0,Ts=Ns=Yt=null,Tm=!1,s)throw Error(ue(300));return e}function Vy(){var e=su!==0;return su=0,e}function Yn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ts===null?Yt.memoizedState=Ts=e:Ts=Ts.next=e,Ts}function on(){if(Ns===null){var e=Yt.alternate;e=e!==null?e.memoizedState:null}else e=Ns.next;var s=Ts===null?Yt.memoizedState:Ts.next;if(s!==null)Ts=s,Ns=e;else{if(e===null)throw Error(ue(310));Ns=e,e={memoizedState:Ns.memoizedState,baseState:Ns.baseState,baseQueue:Ns.baseQueue,queue:Ns.queue,next:null},Ts===null?Yt.memoizedState=Ts=e:Ts=Ts.next=e}return Ts}function ru(e,s){return typeof s=="function"?s(e):s}function rx(e){var s=on(),r=s.queue;if(r===null)throw Error(ue(311));r.lastRenderedReducer=e;var n=Ns,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((Mo&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,o=n):c=c.next=m,Yt.lanes|=u,Lo|=u}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,Dn(n,s.memoizedState)||(jr=!0),s.memoizedState=n,s.baseState=o,s.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Yt.lanes|=i,Lo|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function nx(e){var s=on(),r=s.queue;if(r===null)throw Error(ue(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=s.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Dn(i,s.memoizedState)||(jr=!0),s.memoizedState=i,s.baseQueue===null&&(s.baseState=i),r.lastRenderedState=i}return[i,n]}function r_(){}function n_(e,s){var r=Yt,n=on(),a=s(),i=!Dn(n.memoizedState,a);if(i&&(n.memoizedState=a,jr=!0),n=n.queue,Hy(o_.bind(null,r,n,e),[e]),n.getSnapshot!==s||i||Ts!==null&&Ts.memoizedState.tag&1){if(r.flags|=2048,nu(9,i_.bind(null,r,n,a,s),void 0,null),Os===null)throw Error(ue(349));Mo&30||a_(r,s,a)}return a}function a_(e,s,r){e.flags|=16384,e={getSnapshot:s,value:r},s=Yt.updateQueue,s===null?(s={lastEffect:null,stores:null},Yt.updateQueue=s,s.stores=[e]):(r=s.stores,r===null?s.stores=[e]:r.push(e))}function i_(e,s,r,n){s.value=r,s.getSnapshot=n,l_(s)&&c_(e)}function o_(e,s,r){return r(function(){l_(s)&&c_(e)})}function l_(e){var s=e.getSnapshot;e=e.value;try{var r=s();return!Dn(e,r)}catch{return!0}}function c_(e){var s=Ma(e,1);s!==null&&Tn(s,e,1,-1)}function A0(e){var s=Yn();return typeof e=="function"&&(e=e()),s.memoizedState=s.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ru,lastRenderedState:e},s.queue=e,e=e.dispatch=YI.bind(null,Yt,e),[s.memoizedState,e]}function nu(e,s,r,n){return e={tag:e,create:s,destroy:r,deps:n,next:null},s=Yt.updateQueue,s===null?(s={lastEffect:null,stores:null},Yt.updateQueue=s,s.lastEffect=e.next=e):(r=s.lastEffect,r===null?s.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,s.lastEffect=e)),e}function d_(){return on().memoizedState}function Jh(e,s,r,n){var a=Yn();Yt.flags|=e,a.memoizedState=nu(1|s,r,void 0,n===void 0?null:n)}function kf(e,s,r,n){var a=on();n=n===void 0?null:n;var i=void 0;if(Ns!==null){var o=Ns.memoizedState;if(i=o.destroy,n!==null&&qy(n,o.deps)){a.memoizedState=nu(s,r,i,n);return}}Yt.flags|=e,a.memoizedState=nu(1|s,r,i,n)}function T0(e,s){return Jh(8390656,8,e,s)}function Hy(e,s){return kf(2048,8,e,s)}function u_(e,s){return kf(4,2,e,s)}function h_(e,s){return kf(4,4,e,s)}function m_(e,s){if(typeof s=="function")return e=e(),s(e),function(){s(null)};if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function f_(e,s,r){return r=r!=null?r.concat([e]):null,kf(4,4,m_.bind(null,s,e),r)}function Ky(){}function p_(e,s){var r=on();s=s===void 0?null:s;var n=r.memoizedState;return n!==null&&s!==null&&qy(s,n[1])?n[0]:(r.memoizedState=[e,s],e)}function x_(e,s){var r=on();s=s===void 0?null:s;var n=r.memoizedState;return n!==null&&s!==null&&qy(s,n[1])?n[0]:(e=e(),r.memoizedState=[e,s],e)}function g_(e,s,r){return Mo&21?(Dn(r,s)||(r=bC(),Yt.lanes|=r,Lo|=r,e.baseState=!0),s):(e.baseState&&(e.baseState=!1,jr=!0),e.memoizedState=r)}function KI(e,s){var r=yt;yt=r!==0&&4>r?r:4,e(!0);var n=sx.transition;sx.transition={};try{e(!1),s()}finally{yt=r,sx.transition=n}}function v_(){return on().memoizedState}function GI(e,s,r){var n=Di(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},y_(e))j_(s,r);else if(r=e_(e,s,r,n),r!==null){var a=ar();Tn(r,e,n,a),w_(r,s,n)}}function YI(e,s,r){var n=Di(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(y_(e))j_(s,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=s.lastRenderedReducer,i!==null))try{var o=s.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,Dn(l,o)){var c=s.interleaved;c===null?(a.next=a,Fy(s)):(a.next=c.next,c.next=a),s.interleaved=a;return}}catch{}finally{}r=e_(e,s,a,n),r!==null&&(a=ar(),Tn(r,e,n,a),w_(r,s,n))}}function y_(e){var s=e.alternate;return e===Yt||s!==null&&s===Yt}function j_(e,s){Dd=Tm=!0;var r=e.pending;r===null?s.next=s:(s.next=r.next,r.next=s),e.pending=s}function w_(e,s,r){if(r&4194240){var n=s.lanes;n&=e.pendingLanes,r|=n,s.lanes=r,Cy(e,r)}}var Pm={readContext:an,useCallback:Hs,useContext:Hs,useEffect:Hs,useImperativeHandle:Hs,useInsertionEffect:Hs,useLayoutEffect:Hs,useMemo:Hs,useReducer:Hs,useRef:Hs,useState:Hs,useDebugValue:Hs,useDeferredValue:Hs,useTransition:Hs,useMutableSource:Hs,useSyncExternalStore:Hs,useId:Hs,unstable_isNewReconciler:!1},QI={readContext:an,useCallback:function(e,s){return Yn().memoizedState=[e,s===void 0?null:s],e},useContext:an,useEffect:T0,useImperativeHandle:function(e,s,r){return r=r!=null?r.concat([e]):null,Jh(4194308,4,m_.bind(null,s,e),r)},useLayoutEffect:function(e,s){return Jh(4194308,4,e,s)},useInsertionEffect:function(e,s){return Jh(4,2,e,s)},useMemo:function(e,s){var r=Yn();return s=s===void 0?null:s,e=e(),r.memoizedState=[e,s],e},useReducer:function(e,s,r){var n=Yn();return s=r!==void 0?r(s):s,n.memoizedState=n.baseState=s,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},n.queue=e,e=e.dispatch=GI.bind(null,Yt,e),[n.memoizedState,e]},useRef:function(e){var s=Yn();return e={current:e},s.memoizedState=e},useState:A0,useDebugValue:Ky,useDeferredValue:function(e){return Yn().memoizedState=e},useTransition:function(){var e=A0(!1),s=e[0];return e=KI.bind(null,e[1]),Yn().memoizedState=e,[s,e]},useMutableSource:function(){},useSyncExternalStore:function(e,s,r){var n=Yt,a=Yn();if(Ut){if(r===void 0)throw Error(ue(407));r=r()}else{if(r=s(),Os===null)throw Error(ue(349));Mo&30||a_(n,s,r)}a.memoizedState=r;var i={value:r,getSnapshot:s};return a.queue=i,T0(o_.bind(null,n,i,e),[e]),n.flags|=2048,nu(9,i_.bind(null,n,i,r,s),void 0,null),r},useId:function(){var e=Yn(),s=Os.identifierPrefix;if(Ut){var r=Ta,n=Aa;r=(n&~(1<<32-An(n)-1)).toString(32)+r,s=":"+s+"R"+r,r=su++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=HI++,s=":"+s+"r"+r.toString(32)+":";return e.memoizedState=s},unstable_isNewReconciler:!1},ZI={readContext:an,useCallback:p_,useContext:an,useEffect:Hy,useImperativeHandle:f_,useInsertionEffect:u_,useLayoutEffect:h_,useMemo:x_,useReducer:rx,useRef:d_,useState:function(){return rx(ru)},useDebugValue:Ky,useDeferredValue:function(e){var s=on();return g_(s,Ns.memoizedState,e)},useTransition:function(){var e=rx(ru)[0],s=on().memoizedState;return[e,s]},useMutableSource:r_,useSyncExternalStore:n_,useId:v_,unstable_isNewReconciler:!1},JI={readContext:an,useCallback:p_,useContext:an,useEffect:Hy,useImperativeHandle:f_,useInsertionEffect:u_,useLayoutEffect:h_,useMemo:x_,useReducer:nx,useRef:d_,useState:function(){return nx(ru)},useDebugValue:Ky,useDeferredValue:function(e){var s=on();return Ns===null?s.memoizedState=e:g_(s,Ns.memoizedState,e)},useTransition:function(){var e=nx(ru)[0],s=on().memoizedState;return[e,s]},useMutableSource:r_,useSyncExternalStore:n_,useId:v_,unstable_isNewReconciler:!1};function wn(e,s){if(e&&e.defaultProps){s=rs({},s),e=e.defaultProps;for(var r in e)s[r]===void 0&&(s[r]=e[r]);return s}return s}function Dg(e,s,r,n){s=e.memoizedState,r=r(n,s),r=r==null?s:rs({},s,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ef={isMounted:function(e){return(e=e._reactInternals)?tl(e)===e:!1},enqueueSetState:function(e,s,r){e=e._reactInternals;var n=ar(),a=Di(e),i=Pa(n,a);i.payload=s,r!=null&&(i.callback=r),s=Ri(e,i,a),s!==null&&(Tn(s,e,a,n),Qh(s,e,a))},enqueueReplaceState:function(e,s,r){e=e._reactInternals;var n=ar(),a=Di(e),i=Pa(n,a);i.tag=1,i.payload=s,r!=null&&(i.callback=r),s=Ri(e,i,a),s!==null&&(Tn(s,e,a,n),Qh(s,e,a))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var r=ar(),n=Di(e),a=Pa(r,n);a.tag=2,s!=null&&(a.callback=s),s=Ri(e,a,n),s!==null&&(Tn(s,e,n,r),Qh(s,e,n))}};function P0(e,s,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):s.prototype&&s.prototype.isPureReactComponent?!Qd(r,n)||!Qd(a,i):!0}function b_(e,s,r){var n=!1,a=zi,i=s.contextType;return typeof i=="object"&&i!==null?i=an(i):(a=br(s)?Do:Zs.current,n=s.contextTypes,i=(n=n!=null)?gc(e,a):zi),s=new s(r,i),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ef,e.stateNode=s,s._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),s}function R0(e,s,r,n){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,n),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,n),s.state!==e&&Ef.enqueueReplaceState(s,s.state,null)}function Og(e,s,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},$y(e);var i=s.contextType;typeof i=="object"&&i!==null?a.context=an(i):(i=br(s)?Do:Zs.current,a.context=gc(e,i)),a.state=e.memoizedState,i=s.getDerivedStateFromProps,typeof i=="function"&&(Dg(e,s,i,r),a.state=e.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&Ef.enqueueReplaceState(a,a.state,null),Em(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function wc(e,s){try{var r="",n=s;do r+=SR(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:s,stack:a,digest:null}}function ax(e,s,r){return{value:e,source:null,stack:r??null,digest:s??null}}function Mg(e,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var XI=typeof WeakMap=="function"?WeakMap:Map;function N_(e,s,r){r=Pa(-1,r),r.tag=3,r.payload={element:null};var n=s.value;return r.callback=function(){Im||(Im=!0,Hg=n),Mg(e,s)},r}function C_(e,s,r){r=Pa(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=s.value;r.payload=function(){return n(a)},r.callback=function(){Mg(e,s)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Mg(e,s),typeof n!="function"&&(Ii===null?Ii=new Set([this]):Ii.add(this));var o=s.stack;this.componentDidCatch(s.value,{componentStack:o!==null?o:""})}),r}function I0(e,s,r){var n=e.pingCache;if(n===null){n=e.pingCache=new XI;var a=new Set;n.set(s,a)}else a=n.get(s),a===void 0&&(a=new Set,n.set(s,a));a.has(r)||(a.add(r),e=mD.bind(null,e,s,r),s.then(e,e))}function D0(e){do{var s;if((s=e.tag===13)&&(s=e.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return e;e=e.return}while(e!==null);return null}function O0(e,s,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===s?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=Pa(-1,1),s.tag=2,Ri(r,s,1))),r.lanes|=1),e)}var eD=qa.ReactCurrentOwner,jr=!1;function sr(e,s,r,n){s.child=e===null?XC(s,null,r,n):yc(s,e.child,r,n)}function M0(e,s,r,n,a){r=r.render;var i=s.ref;return Ql(s,a),n=Wy(e,s,r,n,i,a),r=Vy(),e!==null&&!jr?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a,La(e,s,a)):(Ut&&r&&Ry(s),s.flags|=1,sr(e,s,n,a),s.child)}function L0(e,s,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!tj(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=i,__(e,s,i,n,a)):(e=sm(r.type,null,n,s,s.mode,a),e.ref=s.ref,e.return=s,s.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Qd,r(o,n)&&e.ref===s.ref)return La(e,s,a)}return s.flags|=1,e=Oi(i,n),e.ref=s.ref,e.return=s,s.child=e}function __(e,s,r,n,a){if(e!==null){var i=e.memoizedProps;if(Qd(i,n)&&e.ref===s.ref)if(jr=!1,s.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(jr=!0);else return s.lanes=e.lanes,La(e,s,a)}return Lg(e,s,r,n,a)}function S_(e,s,r){var n=s.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},At(ql,Er),Er|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:e,cachePool:null,transitions:null},s.updateQueue=null,At(ql,Er),Er|=e,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,At(ql,Er),Er|=n}else i!==null?(n=i.baseLanes|r,s.memoizedState=null):n=r,At(ql,Er),Er|=n;return sr(e,s,a,r),s.child}function k_(e,s){var r=s.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function Lg(e,s,r,n,a){var i=br(r)?Do:Zs.current;return i=gc(s,i),Ql(s,a),r=Wy(e,s,r,n,i,a),n=Vy(),e!==null&&!jr?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a,La(e,s,a)):(Ut&&n&&Ry(s),s.flags|=1,sr(e,s,r,a),s.child)}function F0(e,s,r,n,a){if(br(r)){var i=!0;Nm(s)}else i=!1;if(Ql(s,a),s.stateNode===null)Xh(e,s),b_(s,r,n),Og(s,r,n,a),n=!0;else if(e===null){var o=s.stateNode,l=s.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=an(d):(d=br(r)?Do:Zs.current,d=gc(s,d));var u=r.getDerivedStateFromProps,m=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&R0(s,o,n,d),li=!1;var h=s.memoizedState;o.state=h,Em(s,n,o,a),c=s.memoizedState,l!==n||h!==c||wr.current||li?(typeof u=="function"&&(Dg(s,r,u,n),c=s.memoizedState),(l=li||P0(s,r,l,n,h,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(s.flags|=4194308)):(typeof o.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=n,s.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(s.flags|=4194308),n=!1)}else{o=s.stateNode,t_(e,s),l=s.memoizedProps,d=s.type===s.elementType?l:wn(s.type,l),o.props=d,m=s.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=an(c):(c=br(r)?Do:Zs.current,c=gc(s,c));var p=r.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||h!==c)&&R0(s,o,n,c),li=!1,h=s.memoizedState,o.state=h,Em(s,n,o,a);var g=s.memoizedState;l!==m||h!==g||wr.current||li?(typeof p=="function"&&(Dg(s,r,p,n),g=s.memoizedState),(d=li||P0(s,r,d,n,h,g,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,c)),typeof o.componentDidUpdate=="function"&&(s.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(s.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(s.flags|=1024),s.memoizedProps=n,s.memoizedState=g),o.props=n,o.state=g,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(s.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(s.flags|=1024),n=!1)}return Fg(e,s,r,n,i,a)}function Fg(e,s,r,n,a,i){k_(e,s);var o=(s.flags&128)!==0;if(!n&&!o)return a&&N0(s,r,!1),La(e,s,i);n=s.stateNode,eD.current=s;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return s.flags|=1,e!==null&&o?(s.child=yc(s,e.child,null,i),s.child=yc(s,null,l,i)):sr(e,s,l,i),s.memoizedState=n.state,a&&N0(s,r,!0),s.child}function E_(e){var s=e.stateNode;s.pendingContext?b0(e,s.pendingContext,s.pendingContext!==s.context):s.context&&b0(e,s.context,!1),Uy(e,s.containerInfo)}function $0(e,s,r,n,a){return vc(),Dy(a),s.flags|=256,sr(e,s,r,n),s.child}var $g={dehydrated:null,treeContext:null,retryLane:0};function Ug(e){return{baseLanes:e,cachePool:null,transitions:null}}function A_(e,s,r){var n=s.pendingProps,a=Ht.current,i=!1,o=(s.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,s.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),At(Ht,a&1),e===null)return Rg(s),e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(s.mode&1?e.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(o=n.children,e=n.fallback,i?(n=s.mode,i=s.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Pf(o,n,0,null),e=Io(e,n,r,null),i.return=s,e.return=s,i.sibling=e,s.child=i,s.child.memoizedState=Ug(r),s.memoizedState=$g,e):Gy(s,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return tD(e,s,o,n,l,a,r);if(i){i=n.fallback,o=s.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&s.child!==a?(n=s.child,n.childLanes=0,n.pendingProps=c,s.deletions=null):(n=Oi(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=Oi(l,i):(i=Io(i,o,r,null),i.flags|=2),i.return=s,n.return=s,n.sibling=i,s.child=n,n=i,i=s.child,o=e.child.memoizedState,o=o===null?Ug(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,s.memoizedState=$g,n}return i=e.child,e=i.sibling,n=Oi(i,{mode:"visible",children:n.children}),!(s.mode&1)&&(n.lanes=r),n.return=s,n.sibling=null,e!==null&&(r=s.deletions,r===null?(s.deletions=[e],s.flags|=16):r.push(e)),s.child=n,s.memoizedState=null,n}function Gy(e,s){return s=Pf({mode:"visible",children:s},e.mode,0,null),s.return=e,e.child=s}function _h(e,s,r,n){return n!==null&&Dy(n),yc(s,e.child,null,r),e=Gy(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function tD(e,s,r,n,a,i,o){if(r)return s.flags&256?(s.flags&=-257,n=ax(Error(ue(422))),_h(e,s,o,n)):s.memoizedState!==null?(s.child=e.child,s.flags|=128,null):(i=n.fallback,a=s.mode,n=Pf({mode:"visible",children:n.children},a,0,null),i=Io(i,a,o,null),i.flags|=2,n.return=s,i.return=s,n.sibling=i,s.child=n,s.mode&1&&yc(s,e.child,null,o),s.child.memoizedState=Ug(o),s.memoizedState=$g,i);if(!(s.mode&1))return _h(e,s,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(ue(419)),n=ax(i,n,void 0),_h(e,s,o,n)}if(l=(o&e.childLanes)!==0,jr||l){if(n=Os,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Ma(e,a),Tn(n,e,a,-1))}return ej(),n=ax(Error(ue(421))),_h(e,s,o,n)}return a.data==="$?"?(s.flags|=128,s.child=e.child,s=fD.bind(null,e),a._reactRetry=s,null):(e=i.treeContext,Rr=Pi(a.nextSibling),Ir=s,Ut=!0,kn=null,e!==null&&(Xr[en++]=Aa,Xr[en++]=Ta,Xr[en++]=Oo,Aa=e.id,Ta=e.overflow,Oo=s),s=Gy(s,n.children),s.flags|=4096,s)}function U0(e,s,r){e.lanes|=s;var n=e.alternate;n!==null&&(n.lanes|=s),Ig(e.return,s,r)}function ix(e,s,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=s,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function T_(e,s,r){var n=s.pendingProps,a=n.revealOrder,i=n.tail;if(sr(e,s,n.children,r),n=Ht.current,n&2)n=n&1|2,s.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&U0(e,r,s);else if(e.tag===19)U0(e,r,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break e;for(;e.sibling===null;){if(e.return===null||e.return===s)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(At(Ht,n),!(s.mode&1))s.memoizedState=null;else switch(a){case"forwards":for(r=s.child,a=null;r!==null;)e=r.alternate,e!==null&&Am(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=s.child,s.child=null):(a=r.sibling,r.sibling=null),ix(s,!1,a,r,i);break;case"backwards":for(r=null,a=s.child,s.child=null;a!==null;){if(e=a.alternate,e!==null&&Am(e)===null){s.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}ix(s,!0,r,null,i);break;case"together":ix(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Xh(e,s){!(s.mode&1)&&e!==null&&(e.alternate=null,s.alternate=null,s.flags|=2)}function La(e,s,r){if(e!==null&&(s.dependencies=e.dependencies),Lo|=s.lanes,!(r&s.childLanes))return null;if(e!==null&&s.child!==e.child)throw Error(ue(153));if(s.child!==null){for(e=s.child,r=Oi(e,e.pendingProps),s.child=r,r.return=s;e.sibling!==null;)e=e.sibling,r=r.sibling=Oi(e,e.pendingProps),r.return=s;r.sibling=null}return s.child}function sD(e,s,r){switch(s.tag){case 3:E_(s),vc();break;case 5:s_(s);break;case 1:br(s.type)&&Nm(s);break;case 4:Uy(s,s.stateNode.containerInfo);break;case 10:var n=s.type._context,a=s.memoizedProps.value;At(Sm,n._currentValue),n._currentValue=a;break;case 13:if(n=s.memoizedState,n!==null)return n.dehydrated!==null?(At(Ht,Ht.current&1),s.flags|=128,null):r&s.child.childLanes?A_(e,s,r):(At(Ht,Ht.current&1),e=La(e,s,r),e!==null?e.sibling:null);At(Ht,Ht.current&1);break;case 19:if(n=(r&s.childLanes)!==0,e.flags&128){if(n)return T_(e,s,r);s.flags|=128}if(a=s.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),At(Ht,Ht.current),n)break;return null;case 22:case 23:return s.lanes=0,S_(e,s,r)}return La(e,s,r)}var P_,Bg,R_,I_;P_=function(e,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Bg=function(){};R_=function(e,s,r,n){var a=e.memoizedProps;if(a!==n){e=s.stateNode,jo(ra.current);var i=null;switch(r){case"input":a=cg(e,a),n=cg(e,n),i=[];break;case"select":a=rs({},a,{value:void 0}),n=rs({},n,{value:void 0}),i=[];break;case"textarea":a=hg(e,a),n=hg(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=wm)}fg(r,n);var o;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(qd.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(qd.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Mt("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(s.updateQueue=d)&&(s.flags|=4)}};I_=function(e,s,r,n){r!==n&&(s.flags|=4)};function hd(e,s){if(!Ut)switch(e.tailMode){case"hidden":s=e.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ks(e){var s=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(s)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,s}function rD(e,s,r){var n=s.pendingProps;switch(Iy(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(s),null;case 1:return br(s.type)&&bm(),Ks(s),null;case 3:return n=s.stateNode,jc(),Lt(wr),Lt(Zs),zy(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Nh(s)?s.flags|=4:e===null||e.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,kn!==null&&(Yg(kn),kn=null))),Bg(e,s),Ks(s),null;case 5:By(s);var a=jo(tu.current);if(r=s.type,e!==null&&s.stateNode!=null)R_(e,s,r,n,a),e.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!n){if(s.stateNode===null)throw Error(ue(166));return Ks(s),null}if(e=jo(ra.current),Nh(s)){n=s.stateNode,r=s.type;var i=s.memoizedProps;switch(n[Xn]=s,n[Xd]=i,e=(s.mode&1)!==0,r){case"dialog":Mt("cancel",n),Mt("close",n);break;case"iframe":case"object":case"embed":Mt("load",n);break;case"video":case"audio":for(a=0;a<Nd.length;a++)Mt(Nd[a],n);break;case"source":Mt("error",n);break;case"img":case"image":case"link":Mt("error",n),Mt("load",n);break;case"details":Mt("toggle",n);break;case"input":Yw(n,i),Mt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Mt("invalid",n);break;case"textarea":Zw(n,i),Mt("invalid",n)}fg(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&bh(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&bh(n.textContent,l,e),a=["children",""+l]):qd.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Mt("scroll",n)}switch(r){case"input":fh(n),Qw(n,i,!0);break;case"textarea":fh(n),Jw(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=wm)}n=a,s.updateQueue=n,n!==null&&(s.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=oC(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Xn]=s,e[Xd]=n,P_(e,s,!1,!1),s.stateNode=e;e:{switch(o=pg(r,n),r){case"dialog":Mt("cancel",e),Mt("close",e),a=n;break;case"iframe":case"object":case"embed":Mt("load",e),a=n;break;case"video":case"audio":for(a=0;a<Nd.length;a++)Mt(Nd[a],e);a=n;break;case"source":Mt("error",e),a=n;break;case"img":case"image":case"link":Mt("error",e),Mt("load",e),a=n;break;case"details":Mt("toggle",e),a=n;break;case"input":Yw(e,n),a=cg(e,n),Mt("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=rs({},n,{value:void 0}),Mt("invalid",e);break;case"textarea":Zw(e,n),a=hg(e,n),Mt("invalid",e);break;default:a=n}fg(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?dC(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&lC(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Wd(e,c):typeof c=="number"&&Wd(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(qd.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Mt("scroll",e):c!=null&&vy(e,i,c,o))}switch(r){case"input":fh(e),Qw(e,n,!1);break;case"textarea":fh(e),Jw(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Bi(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Hl(e,!!n.multiple,i,!1):n.defaultValue!=null&&Hl(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=wm)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ks(s),null;case 6:if(e&&s.stateNode!=null)I_(e,s,e.memoizedProps,n);else{if(typeof n!="string"&&s.stateNode===null)throw Error(ue(166));if(r=jo(tu.current),jo(ra.current),Nh(s)){if(n=s.stateNode,r=s.memoizedProps,n[Xn]=s,(i=n.nodeValue!==r)&&(e=Ir,e!==null))switch(e.tag){case 3:bh(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&bh(n.nodeValue,r,(e.mode&1)!==0)}i&&(s.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Xn]=s,s.stateNode=n}return Ks(s),null;case 13:if(Lt(Ht),n=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ut&&Rr!==null&&s.mode&1&&!(s.flags&128))ZC(),vc(),s.flags|=98560,i=!1;else if(i=Nh(s),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(ue(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ue(317));i[Xn]=s}else vc(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Ks(s),i=!1}else kn!==null&&(Yg(kn),kn=null),i=!0;if(!i)return s.flags&65536?s:null}return s.flags&128?(s.lanes=r,s):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(s.child.flags|=8192,s.mode&1&&(e===null||Ht.current&1?_s===0&&(_s=3):ej())),s.updateQueue!==null&&(s.flags|=4),Ks(s),null);case 4:return jc(),Bg(e,s),e===null&&Zd(s.stateNode.containerInfo),Ks(s),null;case 10:return Ly(s.type._context),Ks(s),null;case 17:return br(s.type)&&bm(),Ks(s),null;case 19:if(Lt(Ht),i=s.memoizedState,i===null)return Ks(s),null;if(n=(s.flags&128)!==0,o=i.rendering,o===null)if(n)hd(i,!1);else{if(_s!==0||e!==null&&e.flags&128)for(e=s.child;e!==null;){if(o=Am(e),o!==null){for(s.flags|=128,hd(i,!1),n=o.updateQueue,n!==null&&(s.updateQueue=n,s.flags|=4),s.subtreeFlags=0,n=r,r=s.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return At(Ht,Ht.current&1|2),s.child}e=e.sibling}i.tail!==null&&ms()>bc&&(s.flags|=128,n=!0,hd(i,!1),s.lanes=4194304)}else{if(!n)if(e=Am(o),e!==null){if(s.flags|=128,n=!0,r=e.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),hd(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ut)return Ks(s),null}else 2*ms()-i.renderingStartTime>bc&&r!==1073741824&&(s.flags|=128,n=!0,hd(i,!1),s.lanes=4194304);i.isBackwards?(o.sibling=s.child,s.child=o):(r=i.last,r!==null?r.sibling=o:s.child=o,i.last=o)}return i.tail!==null?(s=i.tail,i.rendering=s,i.tail=s.sibling,i.renderingStartTime=ms(),s.sibling=null,r=Ht.current,At(Ht,n?r&1|2:r&1),s):(Ks(s),null);case 22:case 23:return Xy(),n=s.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(s.flags|=8192),n&&s.mode&1?Er&1073741824&&(Ks(s),s.subtreeFlags&6&&(s.flags|=8192)):Ks(s),null;case 24:return null;case 25:return null}throw Error(ue(156,s.tag))}function nD(e,s){switch(Iy(s),s.tag){case 1:return br(s.type)&&bm(),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return jc(),Lt(wr),Lt(Zs),zy(),e=s.flags,e&65536&&!(e&128)?(s.flags=e&-65537|128,s):null;case 5:return By(s),null;case 13:if(Lt(Ht),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(ue(340));vc()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return Lt(Ht),null;case 4:return jc(),null;case 10:return Ly(s.type._context),null;case 22:case 23:return Xy(),null;case 24:return null;default:return null}}var Sh=!1,Ys=!1,aD=typeof WeakSet=="function"?WeakSet:Set,_e=null;function zl(e,s){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){cs(e,s,n)}else r.current=null}function zg(e,s,r){try{r()}catch(n){cs(e,s,n)}}var B0=!1;function iD(e,s){if(_g=vm,e=FC(),Py(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,m=e,h=null;t:for(;;){for(var p;m!==r||a!==0&&m.nodeType!==3||(l=o+a),m!==i||n!==0&&m.nodeType!==3||(c=o+n),m.nodeType===3&&(o+=m.nodeValue.length),(p=m.firstChild)!==null;)h=m,m=p;for(;;){if(m===e)break t;if(h===r&&++d===a&&(l=o),h===i&&++u===n&&(c=o),(p=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Sg={focusedElem:e,selectionRange:r},vm=!1,_e=s;_e!==null;)if(s=_e,e=s.child,(s.subtreeFlags&1028)!==0&&e!==null)e.return=s,_e=e;else for(;_e!==null;){s=_e;try{var g=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var x=g.memoizedProps,v=g.memoizedState,y=s.stateNode,j=y.getSnapshotBeforeUpdate(s.elementType===s.type?x:wn(s.type,x),v);y.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var w=s.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ue(163))}}catch(b){cs(s,s.return,b)}if(e=s.sibling,e!==null){e.return=s.return,_e=e;break}_e=s.return}return g=B0,B0=!1,g}function Od(e,s,r){var n=s.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&zg(s,r,i)}a=a.next}while(a!==n)}}function Af(e,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==s)}}function qg(e){var s=e.ref;if(s!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof s=="function"?s(e):s.current=e}}function D_(e){var s=e.alternate;s!==null&&(e.alternate=null,D_(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&(delete s[Xn],delete s[Xd],delete s[Ag],delete s[zI],delete s[qI])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function O_(e){return e.tag===5||e.tag===3||e.tag===4}function z0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||O_(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wg(e,s,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(e,s):r.insertBefore(e,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(e,r)):(s=r,s.appendChild(e)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=wm));else if(n!==4&&(e=e.child,e!==null))for(Wg(e,s,r),e=e.sibling;e!==null;)Wg(e,s,r),e=e.sibling}function Vg(e,s,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,s?r.insertBefore(e,s):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Vg(e,s,r),e=e.sibling;e!==null;)Vg(e,s,r),e=e.sibling}var Fs=null,_n=!1;function ei(e,s,r){for(r=r.child;r!==null;)M_(e,s,r),r=r.sibling}function M_(e,s,r){if(sa&&typeof sa.onCommitFiberUnmount=="function")try{sa.onCommitFiberUnmount(wf,r)}catch{}switch(r.tag){case 5:Ys||zl(r,s);case 6:var n=Fs,a=_n;Fs=null,ei(e,s,r),Fs=n,_n=a,Fs!==null&&(_n?(e=Fs,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Fs.removeChild(r.stateNode));break;case 18:Fs!==null&&(_n?(e=Fs,r=r.stateNode,e.nodeType===8?Xp(e.parentNode,r):e.nodeType===1&&Xp(e,r),Gd(e)):Xp(Fs,r.stateNode));break;case 4:n=Fs,a=_n,Fs=r.stateNode.containerInfo,_n=!0,ei(e,s,r),Fs=n,_n=a;break;case 0:case 11:case 14:case 15:if(!Ys&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&zg(r,s,o),a=a.next}while(a!==n)}ei(e,s,r);break;case 1:if(!Ys&&(zl(r,s),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){cs(r,s,l)}ei(e,s,r);break;case 21:ei(e,s,r);break;case 22:r.mode&1?(Ys=(n=Ys)||r.memoizedState!==null,ei(e,s,r),Ys=n):ei(e,s,r);break;default:ei(e,s,r)}}function q0(e){var s=e.updateQueue;if(s!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new aD),s.forEach(function(n){var a=pD.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function gn(e,s){var r=s.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=s,l=o;e:for(;l!==null;){switch(l.tag){case 5:Fs=l.stateNode,_n=!1;break e;case 3:Fs=l.stateNode.containerInfo,_n=!0;break e;case 4:Fs=l.stateNode.containerInfo,_n=!0;break e}l=l.return}if(Fs===null)throw Error(ue(160));M_(i,o,a),Fs=null,_n=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){cs(a,s,d)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)L_(s,e),s=s.sibling}function L_(e,s){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gn(s,e),Gn(e),n&4){try{Od(3,e,e.return),Af(3,e)}catch(x){cs(e,e.return,x)}try{Od(5,e,e.return)}catch(x){cs(e,e.return,x)}}break;case 1:gn(s,e),Gn(e),n&512&&r!==null&&zl(r,r.return);break;case 5:if(gn(s,e),Gn(e),n&512&&r!==null&&zl(r,r.return),e.flags&32){var a=e.stateNode;try{Wd(a,"")}catch(x){cs(e,e.return,x)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&aC(a,i),pg(l,o);var d=pg(l,i);for(o=0;o<c.length;o+=2){var u=c[o],m=c[o+1];u==="style"?dC(a,m):u==="dangerouslySetInnerHTML"?lC(a,m):u==="children"?Wd(a,m):vy(a,u,m,d)}switch(l){case"input":dg(a,i);break;case"textarea":iC(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Hl(a,!!i.multiple,p,!1):h!==!!i.multiple&&(i.defaultValue!=null?Hl(a,!!i.multiple,i.defaultValue,!0):Hl(a,!!i.multiple,i.multiple?[]:"",!1))}a[Xd]=i}catch(x){cs(e,e.return,x)}}break;case 6:if(gn(s,e),Gn(e),n&4){if(e.stateNode===null)throw Error(ue(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(x){cs(e,e.return,x)}}break;case 3:if(gn(s,e),Gn(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Gd(s.containerInfo)}catch(x){cs(e,e.return,x)}break;case 4:gn(s,e),Gn(e);break;case 13:gn(s,e),Gn(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Zy=ms())),n&4&&q0(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Ys=(d=Ys)||u,gn(s,e),Ys=d):gn(s,e),Gn(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(_e=e,u=e.child;u!==null;){for(m=_e=u;_e!==null;){switch(h=_e,p=h.child,h.tag){case 0:case 11:case 14:case 15:Od(4,h,h.return);break;case 1:zl(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,r=h.return;try{s=n,g.props=s.memoizedProps,g.state=s.memoizedState,g.componentWillUnmount()}catch(x){cs(n,r,x)}}break;case 5:zl(h,h.return);break;case 22:if(h.memoizedState!==null){V0(m);continue}}p!==null?(p.return=h,_e=p):V0(m)}u=u.sibling}e:for(u=null,m=e;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=cC("display",o))}catch(x){cs(e,e.return,x)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(x){cs(e,e.return,x)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:gn(s,e),Gn(e),n&4&&q0(e);break;case 21:break;default:gn(s,e),Gn(e)}}function Gn(e){var s=e.flags;if(s&2){try{e:{for(var r=e.return;r!==null;){if(O_(r)){var n=r;break e}r=r.return}throw Error(ue(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Wd(a,""),n.flags&=-33);var i=z0(e);Vg(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=z0(e);Wg(e,l,o);break;default:throw Error(ue(161))}}catch(c){cs(e,e.return,c)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function oD(e,s,r){_e=e,F_(e)}function F_(e,s,r){for(var n=(e.mode&1)!==0;_e!==null;){var a=_e,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Sh;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Ys;l=Sh;var d=Ys;if(Sh=o,(Ys=c)&&!d)for(_e=a;_e!==null;)o=_e,c=o.child,o.tag===22&&o.memoizedState!==null?H0(a):c!==null?(c.return=o,_e=c):H0(a);for(;i!==null;)_e=i,F_(i),i=i.sibling;_e=a,Sh=l,Ys=d}W0(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,_e=i):W0(e)}}function W0(e){for(;_e!==null;){var s=_e;if(s.flags&8772){var r=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Ys||Af(5,s);break;case 1:var n=s.stateNode;if(s.flags&4&&!Ys)if(r===null)n.componentDidMount();else{var a=s.elementType===s.type?r.memoizedProps:wn(s.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=s.updateQueue;i!==null&&E0(s,i,n);break;case 3:var o=s.updateQueue;if(o!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}E0(s,o,r)}break;case 5:var l=s.stateNode;if(r===null&&s.flags&4){r=l;var c=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var d=s.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&Gd(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ue(163))}Ys||s.flags&512&&qg(s)}catch(h){cs(s,s.return,h)}}if(s===e){_e=null;break}if(r=s.sibling,r!==null){r.return=s.return,_e=r;break}_e=s.return}}function V0(e){for(;_e!==null;){var s=_e;if(s===e){_e=null;break}var r=s.sibling;if(r!==null){r.return=s.return,_e=r;break}_e=s.return}}function H0(e){for(;_e!==null;){var s=_e;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{Af(4,s)}catch(c){cs(s,r,c)}break;case 1:var n=s.stateNode;if(typeof n.componentDidMount=="function"){var a=s.return;try{n.componentDidMount()}catch(c){cs(s,a,c)}}var i=s.return;try{qg(s)}catch(c){cs(s,i,c)}break;case 5:var o=s.return;try{qg(s)}catch(c){cs(s,o,c)}}}catch(c){cs(s,s.return,c)}if(s===e){_e=null;break}var l=s.sibling;if(l!==null){l.return=s.return,_e=l;break}_e=s.return}}var lD=Math.ceil,Rm=qa.ReactCurrentDispatcher,Yy=qa.ReactCurrentOwner,sn=qa.ReactCurrentBatchConfig,ct=0,Os=null,vs=null,Us=0,Er=0,ql=Qi(0),_s=0,au=null,Lo=0,Tf=0,Qy=0,Md=null,vr=null,Zy=0,bc=1/0,ba=null,Im=!1,Hg=null,Ii=null,kh=!1,Ci=null,Dm=0,Ld=0,Kg=null,em=-1,tm=0;function ar(){return ct&6?ms():em!==-1?em:em=ms()}function Di(e){return e.mode&1?ct&2&&Us!==0?Us&-Us:VI.transition!==null?(tm===0&&(tm=bC()),tm):(e=yt,e!==0||(e=window.event,e=e===void 0?16:AC(e.type)),e):1}function Tn(e,s,r,n){if(50<Ld)throw Ld=0,Kg=null,Error(ue(185));Iu(e,r,n),(!(ct&2)||e!==Os)&&(e===Os&&(!(ct&2)&&(Tf|=r),_s===4&&hi(e,Us)),Nr(e,n),r===1&&ct===0&&!(s.mode&1)&&(bc=ms()+500,Sf&&Zi()))}function Nr(e,s){var r=e.callbackNode;VR(e,s);var n=gm(e,e===Os?Us:0);if(n===0)r!==null&&t0(r),e.callbackNode=null,e.callbackPriority=0;else if(s=n&-n,e.callbackPriority!==s){if(r!=null&&t0(r),s===1)e.tag===0?WI(K0.bind(null,e)):GC(K0.bind(null,e)),UI(function(){!(ct&6)&&Zi()}),r=null;else{switch(NC(n)){case 1:r=Ny;break;case 4:r=jC;break;case 16:r=xm;break;case 536870912:r=wC;break;default:r=xm}r=H_(r,$_.bind(null,e))}e.callbackPriority=s,e.callbackNode=r}}function $_(e,s){if(em=-1,tm=0,ct&6)throw Error(ue(327));var r=e.callbackNode;if(Zl()&&e.callbackNode!==r)return null;var n=gm(e,e===Os?Us:0);if(n===0)return null;if(n&30||n&e.expiredLanes||s)s=Om(e,n);else{s=n;var a=ct;ct|=2;var i=B_();(Os!==e||Us!==s)&&(ba=null,bc=ms()+500,Ro(e,s));do try{uD();break}catch(l){U_(e,l)}while(!0);My(),Rm.current=i,ct=a,vs!==null?s=0:(Os=null,Us=0,s=_s)}if(s!==0){if(s===2&&(a=jg(e),a!==0&&(n=a,s=Gg(e,a))),s===1)throw r=au,Ro(e,0),hi(e,n),Nr(e,ms()),r;if(s===6)hi(e,n);else{if(a=e.current.alternate,!(n&30)&&!cD(a)&&(s=Om(e,n),s===2&&(i=jg(e),i!==0&&(n=i,s=Gg(e,i))),s===1))throw r=au,Ro(e,0),hi(e,n),Nr(e,ms()),r;switch(e.finishedWork=a,e.finishedLanes=n,s){case 0:case 1:throw Error(ue(345));case 2:ho(e,vr,ba);break;case 3:if(hi(e,n),(n&130023424)===n&&(s=Zy+500-ms(),10<s)){if(gm(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){ar(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Eg(ho.bind(null,e,vr,ba),s);break}ho(e,vr,ba);break;case 4:if(hi(e,n),(n&4194240)===n)break;for(s=e.eventTimes,a=-1;0<n;){var o=31-An(n);i=1<<o,o=s[o],o>a&&(a=o),n&=~i}if(n=a,n=ms()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*lD(n/1960))-n,10<n){e.timeoutHandle=Eg(ho.bind(null,e,vr,ba),n);break}ho(e,vr,ba);break;case 5:ho(e,vr,ba);break;default:throw Error(ue(329))}}}return Nr(e,ms()),e.callbackNode===r?$_.bind(null,e):null}function Gg(e,s){var r=Md;return e.current.memoizedState.isDehydrated&&(Ro(e,s).flags|=256),e=Om(e,s),e!==2&&(s=vr,vr=r,s!==null&&Yg(s)),e}function Yg(e){vr===null?vr=e:vr.push.apply(vr,e)}function cD(e){for(var s=e;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Dn(i(),a))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function hi(e,s){for(s&=~Qy,s&=~Tf,e.suspendedLanes|=s,e.pingedLanes&=~s,e=e.expirationTimes;0<s;){var r=31-An(s),n=1<<r;e[r]=-1,s&=~n}}function K0(e){if(ct&6)throw Error(ue(327));Zl();var s=gm(e,0);if(!(s&1))return Nr(e,ms()),null;var r=Om(e,s);if(e.tag!==0&&r===2){var n=jg(e);n!==0&&(s=n,r=Gg(e,n))}if(r===1)throw r=au,Ro(e,0),hi(e,s),Nr(e,ms()),r;if(r===6)throw Error(ue(345));return e.finishedWork=e.current.alternate,e.finishedLanes=s,ho(e,vr,ba),Nr(e,ms()),null}function Jy(e,s){var r=ct;ct|=1;try{return e(s)}finally{ct=r,ct===0&&(bc=ms()+500,Sf&&Zi())}}function Fo(e){Ci!==null&&Ci.tag===0&&!(ct&6)&&Zl();var s=ct;ct|=1;var r=sn.transition,n=yt;try{if(sn.transition=null,yt=1,e)return e()}finally{yt=n,sn.transition=r,ct=s,!(ct&6)&&Zi()}}function Xy(){Er=ql.current,Lt(ql)}function Ro(e,s){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,$I(r)),vs!==null)for(r=vs.return;r!==null;){var n=r;switch(Iy(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&bm();break;case 3:jc(),Lt(wr),Lt(Zs),zy();break;case 5:By(n);break;case 4:jc();break;case 13:Lt(Ht);break;case 19:Lt(Ht);break;case 10:Ly(n.type._context);break;case 22:case 23:Xy()}r=r.return}if(Os=e,vs=e=Oi(e.current,null),Us=Er=s,_s=0,au=null,Qy=Tf=Lo=0,vr=Md=null,yo!==null){for(s=0;s<yo.length;s++)if(r=yo[s],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}yo=null}return e}function U_(e,s){do{var r=vs;try{if(My(),Zh.current=Pm,Tm){for(var n=Yt.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Tm=!1}if(Mo=0,Ts=Ns=Yt=null,Dd=!1,su=0,Yy.current=null,r===null||r.return===null){_s=1,au=s,vs=null;break}e:{var i=e,o=r.return,l=r,c=s;if(s=Us,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=D0(o);if(p!==null){p.flags&=-257,O0(p,o,l,i,s),p.mode&1&&I0(i,d,s),s=p,c=d;var g=s.updateQueue;if(g===null){var x=new Set;x.add(c),s.updateQueue=x}else g.add(c);break e}else{if(!(s&1)){I0(i,d,s),ej();break e}c=Error(ue(426))}}else if(Ut&&l.mode&1){var v=D0(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),O0(v,o,l,i,s),Dy(wc(c,l));break e}}i=c=wc(c,l),_s!==4&&(_s=2),Md===null?Md=[i]:Md.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,s&=-s,i.lanes|=s;var y=N_(i,c,s);k0(i,y);break e;case 1:l=c;var j=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof j.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ii===null||!Ii.has(w)))){i.flags|=65536,s&=-s,i.lanes|=s;var b=C_(i,l,s);k0(i,b);break e}}i=i.return}while(i!==null)}q_(r)}catch(N){s=N,vs===r&&r!==null&&(vs=r=r.return);continue}break}while(!0)}function B_(){var e=Rm.current;return Rm.current=Pm,e===null?Pm:e}function ej(){(_s===0||_s===3||_s===2)&&(_s=4),Os===null||!(Lo&268435455)&&!(Tf&268435455)||hi(Os,Us)}function Om(e,s){var r=ct;ct|=2;var n=B_();(Os!==e||Us!==s)&&(ba=null,Ro(e,s));do try{dD();break}catch(a){U_(e,a)}while(!0);if(My(),ct=r,Rm.current=n,vs!==null)throw Error(ue(261));return Os=null,Us=0,_s}function dD(){for(;vs!==null;)z_(vs)}function uD(){for(;vs!==null&&!MR();)z_(vs)}function z_(e){var s=V_(e.alternate,e,Er);e.memoizedProps=e.pendingProps,s===null?q_(e):vs=s,Yy.current=null}function q_(e){var s=e;do{var r=s.alternate;if(e=s.return,s.flags&32768){if(r=nD(r,s),r!==null){r.flags&=32767,vs=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{_s=6,vs=null;return}}else if(r=rD(r,s,Er),r!==null){vs=r;return}if(s=s.sibling,s!==null){vs=s;return}vs=s=e}while(s!==null);_s===0&&(_s=5)}function ho(e,s,r){var n=yt,a=sn.transition;try{sn.transition=null,yt=1,hD(e,s,r,n)}finally{sn.transition=a,yt=n}return null}function hD(e,s,r,n){do Zl();while(Ci!==null);if(ct&6)throw Error(ue(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ue(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(HR(e,i),e===Os&&(vs=Os=null,Us=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||kh||(kh=!0,H_(xm,function(){return Zl(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=sn.transition,sn.transition=null;var o=yt;yt=1;var l=ct;ct|=4,Yy.current=null,iD(e,r),L_(r,e),RI(Sg),vm=!!_g,Sg=_g=null,e.current=r,oD(r),LR(),ct=l,yt=o,sn.transition=i}else e.current=r;if(kh&&(kh=!1,Ci=e,Dm=a),i=e.pendingLanes,i===0&&(Ii=null),UR(r.stateNode),Nr(e,ms()),s!==null)for(n=e.onRecoverableError,r=0;r<s.length;r++)a=s[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Im)throw Im=!1,e=Hg,Hg=null,e;return Dm&1&&e.tag!==0&&Zl(),i=e.pendingLanes,i&1?e===Kg?Ld++:(Ld=0,Kg=e):Ld=0,Zi(),null}function Zl(){if(Ci!==null){var e=NC(Dm),s=sn.transition,r=yt;try{if(sn.transition=null,yt=16>e?16:e,Ci===null)var n=!1;else{if(e=Ci,Ci=null,Dm=0,ct&6)throw Error(ue(331));var a=ct;for(ct|=4,_e=e.current;_e!==null;){var i=_e,o=i.child;if(_e.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(_e=d;_e!==null;){var u=_e;switch(u.tag){case 0:case 11:case 15:Od(8,u,i)}var m=u.child;if(m!==null)m.return=u,_e=m;else for(;_e!==null;){u=_e;var h=u.sibling,p=u.return;if(D_(u),u===d){_e=null;break}if(h!==null){h.return=p,_e=h;break}_e=p}}}var g=i.alternate;if(g!==null){var x=g.child;if(x!==null){g.child=null;do{var v=x.sibling;x.sibling=null,x=v}while(x!==null)}}_e=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,_e=o;else e:for(;_e!==null;){if(i=_e,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Od(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,_e=y;break e}_e=i.return}}var j=e.current;for(_e=j;_e!==null;){o=_e;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,_e=w;else e:for(o=j;_e!==null;){if(l=_e,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Af(9,l)}}catch(N){cs(l,l.return,N)}if(l===o){_e=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,_e=b;break e}_e=l.return}}if(ct=a,Zi(),sa&&typeof sa.onPostCommitFiberRoot=="function")try{sa.onPostCommitFiberRoot(wf,e)}catch{}n=!0}return n}finally{yt=r,sn.transition=s}}return!1}function G0(e,s,r){s=wc(r,s),s=N_(e,s,1),e=Ri(e,s,1),s=ar(),e!==null&&(Iu(e,1,s),Nr(e,s))}function cs(e,s,r){if(e.tag===3)G0(e,e,r);else for(;s!==null;){if(s.tag===3){G0(s,e,r);break}else if(s.tag===1){var n=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ii===null||!Ii.has(n))){e=wc(r,e),e=C_(s,e,1),s=Ri(s,e,1),e=ar(),s!==null&&(Iu(s,1,e),Nr(s,e));break}}s=s.return}}function mD(e,s,r){var n=e.pingCache;n!==null&&n.delete(s),s=ar(),e.pingedLanes|=e.suspendedLanes&r,Os===e&&(Us&r)===r&&(_s===4||_s===3&&(Us&130023424)===Us&&500>ms()-Zy?Ro(e,0):Qy|=r),Nr(e,s)}function W_(e,s){s===0&&(e.mode&1?(s=gh,gh<<=1,!(gh&130023424)&&(gh=4194304)):s=1);var r=ar();e=Ma(e,s),e!==null&&(Iu(e,s,r),Nr(e,r))}function fD(e){var s=e.memoizedState,r=0;s!==null&&(r=s.retryLane),W_(e,r)}function pD(e,s){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ue(314))}n!==null&&n.delete(s),W_(e,r)}var V_;V_=function(e,s,r){if(e!==null)if(e.memoizedProps!==s.pendingProps||wr.current)jr=!0;else{if(!(e.lanes&r)&&!(s.flags&128))return jr=!1,sD(e,s,r);jr=!!(e.flags&131072)}else jr=!1,Ut&&s.flags&1048576&&YC(s,_m,s.index);switch(s.lanes=0,s.tag){case 2:var n=s.type;Xh(e,s),e=s.pendingProps;var a=gc(s,Zs.current);Ql(s,r),a=Wy(null,s,n,e,a,r);var i=Vy();return s.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,br(n)?(i=!0,Nm(s)):i=!1,s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,$y(s),a.updater=Ef,s.stateNode=a,a._reactInternals=s,Og(s,n,e,r),s=Fg(null,s,n,!0,i,r)):(s.tag=0,Ut&&i&&Ry(s),sr(null,s,a,r),s=s.child),s;case 16:n=s.elementType;e:{switch(Xh(e,s),e=s.pendingProps,a=n._init,n=a(n._payload),s.type=n,a=s.tag=gD(n),e=wn(n,e),a){case 0:s=Lg(null,s,n,e,r);break e;case 1:s=F0(null,s,n,e,r);break e;case 11:s=M0(null,s,n,e,r);break e;case 14:s=L0(null,s,n,wn(n.type,e),r);break e}throw Error(ue(306,n,""))}return s;case 0:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:wn(n,a),Lg(e,s,n,a,r);case 1:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:wn(n,a),F0(e,s,n,a,r);case 3:e:{if(E_(s),e===null)throw Error(ue(387));n=s.pendingProps,i=s.memoizedState,a=i.element,t_(e,s),Em(s,n,null,r);var o=s.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},s.updateQueue.baseState=i,s.memoizedState=i,s.flags&256){a=wc(Error(ue(423)),s),s=$0(e,s,n,r,a);break e}else if(n!==a){a=wc(Error(ue(424)),s),s=$0(e,s,n,r,a);break e}else for(Rr=Pi(s.stateNode.containerInfo.firstChild),Ir=s,Ut=!0,kn=null,r=XC(s,null,n,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(vc(),n===a){s=La(e,s,r);break e}sr(e,s,n,r)}s=s.child}return s;case 5:return s_(s),e===null&&Rg(s),n=s.type,a=s.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,kg(n,a)?o=null:i!==null&&kg(n,i)&&(s.flags|=32),k_(e,s),sr(e,s,o,r),s.child;case 6:return e===null&&Rg(s),null;case 13:return A_(e,s,r);case 4:return Uy(s,s.stateNode.containerInfo),n=s.pendingProps,e===null?s.child=yc(s,null,n,r):sr(e,s,n,r),s.child;case 11:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:wn(n,a),M0(e,s,n,a,r);case 7:return sr(e,s,s.pendingProps,r),s.child;case 8:return sr(e,s,s.pendingProps.children,r),s.child;case 12:return sr(e,s,s.pendingProps.children,r),s.child;case 10:e:{if(n=s.type._context,a=s.pendingProps,i=s.memoizedProps,o=a.value,At(Sm,n._currentValue),n._currentValue=o,i!==null)if(Dn(i.value,o)){if(i.children===a.children&&!wr.current){s=La(e,s,r);break e}}else for(i=s.child,i!==null&&(i.return=s);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Pa(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Ig(i.return,r,s),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===s.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ue(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Ig(o,r,s),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===s){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}sr(e,s,a.children,r),s=s.child}return s;case 9:return a=s.type,n=s.pendingProps.children,Ql(s,r),a=an(a),n=n(a),s.flags|=1,sr(e,s,n,r),s.child;case 14:return n=s.type,a=wn(n,s.pendingProps),a=wn(n.type,a),L0(e,s,n,a,r);case 15:return __(e,s,s.type,s.pendingProps,r);case 17:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:wn(n,a),Xh(e,s),s.tag=1,br(n)?(e=!0,Nm(s)):e=!1,Ql(s,r),b_(s,n,a),Og(s,n,a,r),Fg(null,s,n,!0,e,r);case 19:return T_(e,s,r);case 22:return S_(e,s,r)}throw Error(ue(156,s.tag))};function H_(e,s){return yC(e,s)}function xD(e,s,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tn(e,s,r,n){return new xD(e,s,r,n)}function tj(e){return e=e.prototype,!(!e||!e.isReactComponent)}function gD(e){if(typeof e=="function")return tj(e)?1:0;if(e!=null){if(e=e.$$typeof,e===jy)return 11;if(e===wy)return 14}return 2}function Oi(e,s){var r=e.alternate;return r===null?(r=tn(e.tag,s,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=s,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,s=e.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function sm(e,s,r,n,a,i){var o=2;if(n=e,typeof e=="function")tj(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Il:return Io(r.children,a,i,s);case yy:o=8,a|=8;break;case ag:return e=tn(12,r,s,a|2),e.elementType=ag,e.lanes=i,e;case ig:return e=tn(13,r,s,a),e.elementType=ig,e.lanes=i,e;case og:return e=tn(19,r,s,a),e.elementType=og,e.lanes=i,e;case sC:return Pf(r,a,i,s);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case eC:o=10;break e;case tC:o=9;break e;case jy:o=11;break e;case wy:o=14;break e;case oi:o=16,n=null;break e}throw Error(ue(130,e==null?e:typeof e,""))}return s=tn(o,r,s,a),s.elementType=e,s.type=n,s.lanes=i,s}function Io(e,s,r,n){return e=tn(7,e,n,s),e.lanes=r,e}function Pf(e,s,r,n){return e=tn(22,e,n,s),e.elementType=sC,e.lanes=r,e.stateNode={isHidden:!1},e}function ox(e,s,r){return e=tn(6,e,null,s),e.lanes=r,e}function lx(e,s,r){return s=tn(4,e.children!==null?e.children:[],e.key,s),s.lanes=r,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}function vD(e,s,r,n,a){this.tag=s,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zp(0),this.expirationTimes=zp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zp(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function sj(e,s,r,n,a,i,o,l,c){return e=new vD(e,s,r,l,c),s===1?(s=1,i===!0&&(s|=8)):s=0,i=tn(3,null,null,s),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},$y(i),e}function yD(e,s,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rl,key:n==null?null:""+n,children:e,containerInfo:s,implementation:r}}function K_(e){if(!e)return zi;e=e._reactInternals;e:{if(tl(e)!==e||e.tag!==1)throw Error(ue(170));var s=e;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(br(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(ue(171))}if(e.tag===1){var r=e.type;if(br(r))return KC(e,r,s)}return s}function G_(e,s,r,n,a,i,o,l,c){return e=sj(r,n,!0,e,a,i,o,l,c),e.context=K_(null),r=e.current,n=ar(),a=Di(r),i=Pa(n,a),i.callback=s??null,Ri(r,i,a),e.current.lanes=a,Iu(e,a,n),Nr(e,n),e}function Rf(e,s,r,n){var a=s.current,i=ar(),o=Di(a);return r=K_(r),s.context===null?s.context=r:s.pendingContext=r,s=Pa(i,o),s.payload={element:e},n=n===void 0?null:n,n!==null&&(s.callback=n),e=Ri(a,s,o),e!==null&&(Tn(e,a,o,i),Qh(e,a,o)),o}function Mm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Y0(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<s?r:s}}function rj(e,s){Y0(e,s),(e=e.alternate)&&Y0(e,s)}function jD(){return null}var Y_=typeof reportError=="function"?reportError:function(e){console.error(e)};function nj(e){this._internalRoot=e}If.prototype.render=nj.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(ue(409));Rf(e,s,null,null)};If.prototype.unmount=nj.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;Fo(function(){Rf(null,e,null,null)}),s[Oa]=null}};function If(e){this._internalRoot=e}If.prototype.unstable_scheduleHydration=function(e){if(e){var s=SC();e={blockedOn:null,target:e,priority:s};for(var r=0;r<ui.length&&s!==0&&s<ui[r].priority;r++);ui.splice(r,0,e),r===0&&EC(e)}};function aj(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Df(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Q0(){}function wD(e,s,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=Mm(o);i.call(d)}}var o=G_(s,n,e,0,null,!1,!1,"",Q0);return e._reactRootContainer=o,e[Oa]=o.current,Zd(e.nodeType===8?e.parentNode:e),Fo(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var d=Mm(c);l.call(d)}}var c=sj(e,0,!1,null,null,!1,!1,"",Q0);return e._reactRootContainer=c,e[Oa]=c.current,Zd(e.nodeType===8?e.parentNode:e),Fo(function(){Rf(s,c,r,n)}),c}function Of(e,s,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=Mm(o);l.call(c)}}Rf(s,o,e,a)}else o=wD(r,s,e,a,n);return Mm(o)}CC=function(e){switch(e.tag){case 3:var s=e.stateNode;if(s.current.memoizedState.isDehydrated){var r=bd(s.pendingLanes);r!==0&&(Cy(s,r|1),Nr(s,ms()),!(ct&6)&&(bc=ms()+500,Zi()))}break;case 13:Fo(function(){var n=Ma(e,1);if(n!==null){var a=ar();Tn(n,e,1,a)}}),rj(e,1)}};_y=function(e){if(e.tag===13){var s=Ma(e,134217728);if(s!==null){var r=ar();Tn(s,e,134217728,r)}rj(e,134217728)}};_C=function(e){if(e.tag===13){var s=Di(e),r=Ma(e,s);if(r!==null){var n=ar();Tn(r,e,s,n)}rj(e,s)}};SC=function(){return yt};kC=function(e,s){var r=yt;try{return yt=e,s()}finally{yt=r}};gg=function(e,s,r){switch(s){case"input":if(dg(e,r),s=r.name,r.type==="radio"&&s!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var n=r[s];if(n!==e&&n.form===e.form){var a=_f(n);if(!a)throw Error(ue(90));nC(n),dg(n,a)}}}break;case"textarea":iC(e,r);break;case"select":s=r.value,s!=null&&Hl(e,!!r.multiple,s,!1)}};mC=Jy;fC=Fo;var bD={usingClientEntryPoint:!1,Events:[Ou,Ll,_f,uC,hC,Jy]},md={findFiberByHostInstance:vo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ND={bundleType:md.bundleType,version:md.version,rendererPackageName:md.rendererPackageName,rendererConfig:md.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qa.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=gC(e),e===null?null:e.stateNode},findFiberByHostInstance:md.findFiberByHostInstance||jD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eh.isDisabled&&Eh.supportsFiber)try{wf=Eh.inject(ND),sa=Eh}catch{}}Kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bD;Kr.createPortal=function(e,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!aj(s))throw Error(ue(200));return yD(e,s,null,r)};Kr.createRoot=function(e,s){if(!aj(e))throw Error(ue(299));var r=!1,n="",a=Y_;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(n=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),s=sj(e,1,!1,null,null,r,!1,n,a),e[Oa]=s.current,Zd(e.nodeType===8?e.parentNode:e),new nj(s)};Kr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(ue(188)):(e=Object.keys(e).join(","),Error(ue(268,e)));return e=gC(s),e=e===null?null:e.stateNode,e};Kr.flushSync=function(e){return Fo(e)};Kr.hydrate=function(e,s,r){if(!Df(s))throw Error(ue(200));return Of(null,e,s,!0,r)};Kr.hydrateRoot=function(e,s,r){if(!aj(e))throw Error(ue(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=Y_;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),s=G_(s,null,e,1,r??null,a,!1,i,o),e[Oa]=s.current,Zd(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,a]:s.mutableSourceEagerHydrationData.push(r,a);return new If(s)};Kr.render=function(e,s,r){if(!Df(s))throw Error(ue(200));return Of(null,e,s,!1,r)};Kr.unmountComponentAtNode=function(e){if(!Df(e))throw Error(ue(40));return e._reactRootContainer?(Fo(function(){Of(null,null,e,!1,function(){e._reactRootContainer=null,e[Oa]=null})}),!0):!1};Kr.unstable_batchedUpdates=Jy;Kr.unstable_renderSubtreeIntoContainer=function(e,s,r,n){if(!Df(r))throw Error(ue(200));if(e==null||e._reactInternals===void 0)throw Error(ue(38));return Of(e,s,r,!1,n)};Kr.version="18.3.1-next-f1338f8080-20240426";function Q_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Q_)}catch(e){console.error(e)}}Q_(),Q1.exports=Kr;var sl=Q1.exports;const Z_=F1(sl);var J_,Z0=sl;J_=Z0.createRoot,Z0.hydrateRoot;const CD=1,_D=1e6;let cx=0;function SD(){return cx=(cx+1)%Number.MAX_SAFE_INTEGER,cx.toString()}const dx=new Map,J0=e=>{if(dx.has(e))return;const s=setTimeout(()=>{dx.delete(e),Fd({type:"REMOVE_TOAST",toastId:e})},_D);dx.set(e,s)},kD=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,CD)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===s.toast.id?{...r,...s.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=s;return r?J0(r):e.toasts.forEach(n=>{J0(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return s.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==s.toastId)}}},rm=[];let nm={toasts:[]};function Fd(e){nm=kD(nm,e),rm.forEach(s=>{s(nm)})}function ED({...e}){const s=SD(),r=a=>Fd({type:"UPDATE_TOAST",toast:{...a,id:s}}),n=()=>Fd({type:"DISMISS_TOAST",toastId:s});return Fd({type:"ADD_TOAST",toast:{...e,id:s,open:!0,onOpenChange:a=>{a||n()}}}),{id:s,dismiss:n,update:r}}function Ji(){const[e,s]=f.useState(nm);return f.useEffect(()=>(rm.push(s),()=>{const r=rm.indexOf(s);r>-1&&rm.splice(r,1)}),[e]),{...e,toast:ED,dismiss:r=>Fd({type:"DISMISS_TOAST",toastId:r})}}function de(e,s,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return s==null?void 0:s(a)}}function X0(e,s){if(typeof e=="function")return e(s);e!=null&&(e.current=s)}function la(...e){return s=>{let r=!1;const n=e.map(a=>{const i=X0(a,s);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():X0(e[a],null)}}}}function Ve(...e){return f.useCallback(la(...e),e)}function AD(e,s){const r=f.createContext(s),n=i=>{const{children:o,...l}=i,c=f.useMemo(()=>l,Object.values(l));return t.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function a(i){const o=f.useContext(r);if(o)return o;if(s!==void 0)return s;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,a]}function ks(e,s=[]){let r=[];function n(i,o){const l=f.createContext(o),c=r.length;r=[...r,o];const d=m=>{var y;const{scope:h,children:p,...g}=m,x=((y=h==null?void 0:h[e])==null?void 0:y[c])||l,v=f.useMemo(()=>g,Object.values(g));return t.jsx(x.Provider,{value:v,children:p})};d.displayName=i+"Provider";function u(m,h){var x;const p=((x=h==null?void 0:h[e])==null?void 0:x[c])||l,g=f.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=r.map(o=>f.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return f.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,TD(a,...s)]}function TD(...e){const s=e[0];if(e.length===1)return s;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const m=c(i)[`__scope${d}`];return{...l,...m}},{});return f.useMemo(()=>({[`__scope${s.scopeName}`]:o}),[o])}};return r.scopeName=s.scopeName,r}function $o(e){const s=PD(e),r=f.forwardRef((n,a)=>{const{children:i,...o}=n,l=f.Children.toArray(i),c=l.find(RD);if(c){const d=c.props.children,u=l.map(m=>m===c?f.Children.count(d)>1?f.Children.only(null):f.isValidElement(d)?d.props.children:null:m);return t.jsx(s,{...o,ref:a,children:f.isValidElement(d)?f.cloneElement(d,void 0,u):null})}return t.jsx(s,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}function PD(e){const s=f.forwardRef((r,n)=>{const{children:a,...i}=r;if(f.isValidElement(a)){const o=DD(a),l=ID(i,a.props);return a.type!==f.Fragment&&(l.ref=n?la(n,o):o),f.cloneElement(a,l)}return f.Children.count(a)>1?f.Children.only(null):null});return s.displayName=`${e}.SlotClone`,s}var X_=Symbol("radix.slottable");function eS(e){const s=({children:r})=>t.jsx(t.Fragment,{children:r});return s.displayName=`${e}.Slottable`,s.__radixId=X_,s}function RD(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===X_}function ID(e,s){const r={...s};for(const n in s){const a=e[n],i=s[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function DD(e){var n,a;let s=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?e.ref:(s=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Lu(e){const s=e+"CollectionProvider",[r,n]=ks(s),[a,i]=r(s,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:v,children:y}=x,j=le.useRef(null),w=le.useRef(new Map).current;return t.jsx(a,{scope:v,itemMap:w,collectionRef:j,children:y})};o.displayName=s;const l=e+"CollectionSlot",c=$o(l),d=le.forwardRef((x,v)=>{const{scope:y,children:j}=x,w=i(l,y),b=Ve(v,w.collectionRef);return t.jsx(c,{ref:b,children:j})});d.displayName=l;const u=e+"CollectionItemSlot",m="data-radix-collection-item",h=$o(u),p=le.forwardRef((x,v)=>{const{scope:y,children:j,...w}=x,b=le.useRef(null),N=Ve(v,b),_=i(u,y);return le.useEffect(()=>(_.itemMap.set(b,{ref:b,...w}),()=>void _.itemMap.delete(b))),t.jsx(h,{[m]:"",ref:N,children:j})});p.displayName=u;function g(x){const v=i(e+"CollectionConsumer",x);return le.useCallback(()=>{const j=v.collectionRef.current;if(!j)return[];const w=Array.from(j.querySelectorAll(`[${m}]`));return Array.from(v.itemMap.values()).sort((_,C)=>w.indexOf(_.ref.current)-w.indexOf(C.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:d,ItemSlot:p},g,n]}var OD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Se=OD.reduce((e,s)=>{const r=$o(`Primitive.${s}`),n=f.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${s}`,{...e,[s]:n}},{});function ij(e,s){e&&sl.flushSync(()=>e.dispatchEvent(s))}function ds(e){const s=f.useRef(e);return f.useEffect(()=>{s.current=e}),f.useMemo(()=>(...r)=>{var n;return(n=s.current)==null?void 0:n.call(s,...r)},[])}function MD(e,s=globalThis==null?void 0:globalThis.document){const r=ds(e);f.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return s.addEventListener("keydown",n,{capture:!0}),()=>s.removeEventListener("keydown",n,{capture:!0})},[r,s])}var LD="DismissableLayer",Qg="dismissableLayer.update",FD="dismissableLayer.pointerDownOutside",$D="dismissableLayer.focusOutside",eb,tS=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),rl=f.forwardRef((e,s)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,d=f.useContext(tS),[u,m]=f.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=f.useState({}),g=Ve(s,C=>m(C)),x=Array.from(d.layers),[v]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),y=x.indexOf(v),j=u?x.indexOf(u):-1,w=d.layersWithOutsidePointerEventsDisabled.size>0,b=j>=y,N=BD(C=>{const E=C.target,k=[...d.branches].some(A=>A.contains(E));!b||k||(a==null||a(C),o==null||o(C),C.defaultPrevented||l==null||l())},h),_=zD(C=>{const E=C.target;[...d.branches].some(A=>A.contains(E))||(i==null||i(C),o==null||o(C),C.defaultPrevented||l==null||l())},h);return MD(C=>{j===d.layers.size-1&&(n==null||n(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},h),f.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(eb=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),tb(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=eb)}},[u,h,r,d]),f.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),tb())},[u,d]),f.useEffect(()=>{const C=()=>p({});return document.addEventListener(Qg,C),()=>document.removeEventListener(Qg,C)},[]),t.jsx(Se.div,{...c,ref:g,style:{pointerEvents:w?b?"auto":"none":void 0,...e.style},onFocusCapture:de(e.onFocusCapture,_.onFocusCapture),onBlurCapture:de(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:de(e.onPointerDownCapture,N.onPointerDownCapture)})});rl.displayName=LD;var UD="DismissableLayerBranch",sS=f.forwardRef((e,s)=>{const r=f.useContext(tS),n=f.useRef(null),a=Ve(s,n);return f.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),t.jsx(Se.div,{...e,ref:a})});sS.displayName=UD;function BD(e,s=globalThis==null?void 0:globalThis.document){const r=ds(e),n=f.useRef(!1),a=f.useRef(()=>{});return f.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){rS(FD,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(s.removeEventListener("click",a.current),a.current=c,s.addEventListener("click",a.current,{once:!0})):c()}else s.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{s.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),s.removeEventListener("pointerdown",i),s.removeEventListener("click",a.current)}},[s,r]),{onPointerDownCapture:()=>n.current=!0}}function zD(e,s=globalThis==null?void 0:globalThis.document){const r=ds(e),n=f.useRef(!1);return f.useEffect(()=>{const a=i=>{i.target&&!n.current&&rS($D,r,{originalEvent:i},{discrete:!1})};return s.addEventListener("focusin",a),()=>s.removeEventListener("focusin",a)},[s,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function tb(){const e=new CustomEvent(Qg);document.dispatchEvent(e)}function rS(e,s,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});s&&a.addEventListener(e,s,{once:!0}),n?ij(a,i):a.dispatchEvent(i)}var qD=rl,WD=sS,hs=globalThis!=null&&globalThis.document?f.useLayoutEffect:()=>{},VD="Portal",qc=f.forwardRef((e,s)=>{var l;const{container:r,...n}=e,[a,i]=f.useState(!1);hs(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?Z_.createPortal(t.jsx(Se.div,{...n,ref:s}),o):null});qc.displayName=VD;function HD(e,s){return f.useReducer((r,n)=>s[r][n]??r,e)}var js=e=>{const{present:s,children:r}=e,n=KD(s),a=typeof r=="function"?r({present:n.isPresent}):f.Children.only(r),i=Ve(n.ref,GD(a));return typeof r=="function"||n.isPresent?f.cloneElement(a,{ref:i}):null};js.displayName="Presence";function KD(e){const[s,r]=f.useState(),n=f.useRef(null),a=f.useRef(e),i=f.useRef("none"),o=e?"mounted":"unmounted",[l,c]=HD(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const d=Ah(n.current);i.current=l==="mounted"?d:"none"},[l]),hs(()=>{const d=n.current,u=a.current;if(u!==e){const h=i.current,p=Ah(d);e?c("MOUNT"):p==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&h!==p?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),hs(()=>{if(s){let d;const u=s.ownerDocument.defaultView??window,m=p=>{const x=Ah(n.current).includes(CSS.escape(p.animationName));if(p.target===s&&x&&(c("ANIMATION_END"),!a.current)){const v=s.style.animationFillMode;s.style.animationFillMode="forwards",d=u.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=v)})}},h=p=>{p.target===s&&(i.current=Ah(n.current))};return s.addEventListener("animationstart",h),s.addEventListener("animationcancel",m),s.addEventListener("animationend",m),()=>{u.clearTimeout(d),s.removeEventListener("animationstart",h),s.removeEventListener("animationcancel",m),s.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[s,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:f.useCallback(d=>{n.current=d?getComputedStyle(d):null,r(d)},[])}}function Ah(e){return(e==null?void 0:e.animationName)||"none"}function GD(e){var n,a;let s=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?e.ref:(s=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var YD=jf[" useInsertionEffect ".trim().toString()]||hs;function _r({prop:e,defaultProp:s,onChange:r=()=>{},caller:n}){const[a,i,o]=QD({defaultProp:s,onChange:r}),l=e!==void 0,c=l?e:a;{const u=f.useRef(e!==void 0);f.useEffect(()=>{const m=u.current;m!==l&&console.warn(`${n} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,n])}const d=f.useCallback(u=>{var m;if(l){const h=ZD(u)?u(e):u;h!==e&&((m=o.current)==null||m.call(o,h))}else i(u)},[l,e,i,o]);return[c,d]}function QD({defaultProp:e,onChange:s}){const[r,n]=f.useState(e),a=f.useRef(r),i=f.useRef(s);return YD(()=>{i.current=s},[s]),f.useEffect(()=>{var o;a.current!==r&&((o=i.current)==null||o.call(i,r),a.current=r)},[r,a]),[r,n,i]}function ZD(e){return typeof e=="function"}var nS=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),JD="VisuallyHidden",Mf=f.forwardRef((e,s)=>t.jsx(Se.span,{...e,ref:s,style:{...nS,...e.style}}));Mf.displayName=JD;var XD=Mf,oj="ToastProvider",[lj,eO,tO]=Lu("Toast"),[aS]=ks("Toast",[tO]),[sO,Lf]=aS(oj),iS=e=>{const{__scopeToast:s,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=f.useState(null),[d,u]=f.useState(0),m=f.useRef(!1),h=f.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${oj}\`. Expected non-empty \`string\`.`),t.jsx(lj.Provider,{scope:s,children:t.jsx(sO,{scope:s,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:f.useCallback(()=>u(p=>p+1),[]),onToastRemove:f.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:h,children:o})})};iS.displayName=oj;var oS="ToastViewport",rO=["F8"],Zg="toast.viewportPause",Jg="toast.viewportResume",lS=f.forwardRef((e,s)=>{const{__scopeToast:r,hotkey:n=rO,label:a="Notifications ({hotkey})",...i}=e,o=Lf(oS,r),l=eO(r),c=f.useRef(null),d=f.useRef(null),u=f.useRef(null),m=f.useRef(null),h=Ve(s,m,o.onViewportChange),p=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;f.useEffect(()=>{const v=y=>{var w;n.length!==0&&n.every(b=>y[b]||y.code===b)&&((w=m.current)==null||w.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[n]),f.useEffect(()=>{const v=c.current,y=m.current;if(g&&v&&y){const j=()=>{if(!o.isClosePausedRef.current){const _=new CustomEvent(Zg);y.dispatchEvent(_),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const _=new CustomEvent(Jg);y.dispatchEvent(_),o.isClosePausedRef.current=!1}},b=_=>{!v.contains(_.relatedTarget)&&w()},N=()=>{v.contains(document.activeElement)||w()};return v.addEventListener("focusin",j),v.addEventListener("focusout",b),v.addEventListener("pointermove",j),v.addEventListener("pointerleave",N),window.addEventListener("blur",j),window.addEventListener("focus",w),()=>{v.removeEventListener("focusin",j),v.removeEventListener("focusout",b),v.removeEventListener("pointermove",j),v.removeEventListener("pointerleave",N),window.removeEventListener("blur",j),window.removeEventListener("focus",w)}}},[g,o.isClosePausedRef]);const x=f.useCallback(({tabbingDirection:v})=>{const j=l().map(w=>{const b=w.ref.current,N=[b,...xO(b)];return v==="forwards"?N:N.reverse()});return(v==="forwards"?j.reverse():j).flat()},[l]);return f.useEffect(()=>{const v=m.current;if(v){const y=j=>{var N,_,C;const w=j.altKey||j.ctrlKey||j.metaKey;if(j.key==="Tab"&&!w){const E=document.activeElement,k=j.shiftKey;if(j.target===v&&k){(N=d.current)==null||N.focus();return}const H=x({tabbingDirection:k?"backwards":"forwards"}),F=H.findIndex(I=>I===E);ux(H.slice(F+1))?j.preventDefault():k?(_=d.current)==null||_.focus():(C=u.current)==null||C.focus()}};return v.addEventListener("keydown",y),()=>v.removeEventListener("keydown",y)}},[l,x]),t.jsxs(WD,{ref:c,role:"region","aria-label":a.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&t.jsx(Xg,{ref:d,onFocusFromOutsideViewport:()=>{const v=x({tabbingDirection:"forwards"});ux(v)}}),t.jsx(lj.Slot,{scope:r,children:t.jsx(Se.ol,{tabIndex:-1,...i,ref:h})}),g&&t.jsx(Xg,{ref:u,onFocusFromOutsideViewport:()=>{const v=x({tabbingDirection:"backwards"});ux(v)}})]})});lS.displayName=oS;var cS="ToastFocusProxy",Xg=f.forwardRef((e,s)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,i=Lf(cS,r);return t.jsx(Mf,{tabIndex:0,...a,ref:s,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&n()}})});Xg.displayName=cS;var Fu="Toast",nO="toast.swipeStart",aO="toast.swipeMove",iO="toast.swipeCancel",oO="toast.swipeEnd",dS=f.forwardRef((e,s)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...o}=e,[l,c]=_r({prop:n,defaultProp:a??!0,onChange:i,caller:Fu});return t.jsx(js,{present:r||l,children:t.jsx(dO,{open:l,...o,ref:s,onClose:()=>c(!1),onPause:ds(e.onPause),onResume:ds(e.onResume),onSwipeStart:de(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:de(e.onSwipeMove,d=>{const{x:u,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:de(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:de(e.onSwipeEnd,d=>{const{x:u,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),c(!1)})})})});dS.displayName=Fu;var[lO,cO]=aS(Fu,{onClose(){}}),dO=f.forwardRef((e,s)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:m,onSwipeCancel:h,onSwipeEnd:p,...g}=e,x=Lf(Fu,r),[v,y]=f.useState(null),j=Ve(s,I=>y(I)),w=f.useRef(null),b=f.useRef(null),N=a||x.duration,_=f.useRef(0),C=f.useRef(N),E=f.useRef(0),{onToastAdd:k,onToastRemove:A}=x,L=ds(()=>{var G;(v==null?void 0:v.contains(document.activeElement))&&((G=x.viewport)==null||G.focus()),o()}),H=f.useCallback(I=>{!I||I===1/0||(window.clearTimeout(E.current),_.current=new Date().getTime(),E.current=window.setTimeout(L,I))},[L]);f.useEffect(()=>{const I=x.viewport;if(I){const G=()=>{H(C.current),d==null||d()},ee=()=>{const K=new Date().getTime()-_.current;C.current=C.current-K,window.clearTimeout(E.current),c==null||c()};return I.addEventListener(Zg,ee),I.addEventListener(Jg,G),()=>{I.removeEventListener(Zg,ee),I.removeEventListener(Jg,G)}}},[x.viewport,N,c,d,H]),f.useEffect(()=>{i&&!x.isClosePausedRef.current&&H(N)},[i,N,x.isClosePausedRef,H]),f.useEffect(()=>(k(),()=>A()),[k,A]);const F=f.useMemo(()=>v?gS(v):null,[v]);return x.viewport?t.jsxs(t.Fragment,{children:[F&&t.jsx(uO,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite",children:F}),t.jsx(lO,{scope:r,onClose:L,children:sl.createPortal(t.jsx(lj.ItemSlot,{scope:r,children:t.jsx(qD,{asChild:!0,onEscapeKeyDown:de(l,()=>{x.isFocusedToastEscapeKeyDownRef.current||L(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:t.jsx(Se.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":x.swipeDirection,...g,ref:j,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:de(e.onKeyDown,I=>{I.key==="Escape"&&(l==null||l(I.nativeEvent),I.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:de(e.onPointerDown,I=>{I.button===0&&(w.current={x:I.clientX,y:I.clientY})}),onPointerMove:de(e.onPointerMove,I=>{if(!w.current)return;const G=I.clientX-w.current.x,ee=I.clientY-w.current.y,K=!!b.current,D=["left","right"].includes(x.swipeDirection),q=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,re=D?q(0,G):0,S=D?0:q(0,ee),R=I.pointerType==="touch"?10:2,te={x:re,y:S},Q={originalEvent:I,delta:te};K?(b.current=te,Th(aO,m,Q,{discrete:!1})):sb(te,x.swipeDirection,R)?(b.current=te,Th(nO,u,Q,{discrete:!1}),I.target.setPointerCapture(I.pointerId)):(Math.abs(G)>R||Math.abs(ee)>R)&&(w.current=null)}),onPointerUp:de(e.onPointerUp,I=>{const G=b.current,ee=I.target;if(ee.hasPointerCapture(I.pointerId)&&ee.releasePointerCapture(I.pointerId),b.current=null,w.current=null,G){const K=I.currentTarget,D={originalEvent:I,delta:G};sb(G,x.swipeDirection,x.swipeThreshold)?Th(oO,p,D,{discrete:!0}):Th(iO,h,D,{discrete:!0}),K.addEventListener("click",q=>q.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),uO=e=>{const{__scopeToast:s,children:r,...n}=e,a=Lf(Fu,s),[i,o]=f.useState(!1),[l,c]=f.useState(!1);return fO(()=>o(!0)),f.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:t.jsx(qc,{asChild:!0,children:t.jsx(Mf,{...n,children:i&&t.jsxs(t.Fragment,{children:[a.label," ",r]})})})},hO="ToastTitle",uS=f.forwardRef((e,s)=>{const{__scopeToast:r,...n}=e;return t.jsx(Se.div,{...n,ref:s})});uS.displayName=hO;var mO="ToastDescription",hS=f.forwardRef((e,s)=>{const{__scopeToast:r,...n}=e;return t.jsx(Se.div,{...n,ref:s})});hS.displayName=mO;var mS="ToastAction",fS=f.forwardRef((e,s)=>{const{altText:r,...n}=e;return r.trim()?t.jsx(xS,{altText:r,asChild:!0,children:t.jsx(cj,{...n,ref:s})}):(console.error(`Invalid prop \`altText\` supplied to \`${mS}\`. Expected non-empty \`string\`.`),null)});fS.displayName=mS;var pS="ToastClose",cj=f.forwardRef((e,s)=>{const{__scopeToast:r,...n}=e,a=cO(pS,r);return t.jsx(xS,{asChild:!0,children:t.jsx(Se.button,{type:"button",...n,ref:s,onClick:de(e.onClick,a.onClose)})})});cj.displayName=pS;var xS=f.forwardRef((e,s)=>{const{__scopeToast:r,altText:n,...a}=e;return t.jsx(Se.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:s})});function gS(e){const s=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&s.push(n.textContent),pO(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&s.push(o)}else s.push(...gS(n))}}),s}function Th(e,s,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});s&&a.addEventListener(e,s,{once:!0}),n?ij(a,i):a.dispatchEvent(i)}var sb=(e,s,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),i=n>a;return s==="left"||s==="right"?i&&n>r:!i&&a>r};function fO(e=()=>{}){const s=ds(e);hs(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(s)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[s])}function pO(e){return e.nodeType===e.ELEMENT_NODE}function xO(e){const s=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)s.push(r.currentNode);return s}function ux(e){const s=document.activeElement;return e.some(r=>r===s?!0:(r.focus(),document.activeElement!==s))}var gO=iS,vS=lS,yS=dS,jS=uS,wS=hS,bS=fS,NS=cj;function CS(e){var s,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(s=0;s<a;s++)e[s]&&(r=CS(e[s]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function _S(){for(var e,s,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(s=CS(e))&&(n&&(n+=" "),n+=s);return n}const rb=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,nb=_S,$u=(e,s)=>r=>{var n;if((s==null?void 0:s.variants)==null)return nb(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=s,o=Object.keys(a).map(d=>{const u=r==null?void 0:r[d],m=i==null?void 0:i[d];if(u===null)return null;const h=rb(u)||rb(m);return a[d][h]}),l=r&&Object.entries(r).reduce((d,u)=>{let[m,h]=u;return h===void 0||(d[m]=h),d},{}),c=s==null||(n=s.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:m,className:h,...p}=u;return Object.entries(p).every(g=>{let[x,v]=g;return Array.isArray(v)?v.includes({...i,...l}[x]):{...i,...l}[x]===v})?[...d,m,h]:d},[]);return nb(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),SS=(...e)=>e.filter((s,r,n)=>!!s&&s.trim()!==""&&n.indexOf(s)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=f.forwardRef(({color:e="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},c)=>f.createElement("svg",{ref:c,...yO,width:s,height:s,stroke:e,strokeWidth:n?Number(r)*24/Number(s):r,className:SS("lucide",a),...l},[...o.map(([d,u])=>f.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=(e,s)=>{const r=f.forwardRef(({className:n,...a},i)=>f.createElement(jO,{ref:i,iconNode:s,className:SS(`lucide-${vO(e)}`,n),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=ie("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=ie("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=ie("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=ie("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=ie("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=ie("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=ie("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=ie("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=ie("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=ie("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=ie("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=ie("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=ie("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=ie("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=ie("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=ie("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ES=ie("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=ie("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=ie("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=ie("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=ie("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=ie("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=ie("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=ie("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=ie("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=ie("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=ie("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=ie("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=ie("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=ie("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=ie("FilePen",[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=ie("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=ie("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=ie("FileWarning",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=ie("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=ie("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=ie("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=ie("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bu=ie("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=ie("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=ie("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=ie("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=ie("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=ie("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=ie("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=ie("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=ie("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=ie("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=ie("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zu=ie("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=ie("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=ie("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=ie("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=ie("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=ie("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=ie("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=ie("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=ie("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=ie("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=ie("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=ie("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=ie("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=ie("SendHorizontal",[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zf=ie("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=ie("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=ie("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=ie("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=ie("ShieldOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=ie("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=ie("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=ie("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=ie("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=ie("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=ie("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=ie("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=ie("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=ie("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=ie("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=ie("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=ie("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=ie("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=ie("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=ie("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=ie("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=ie("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=ie("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qf=ie("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=ie("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=ie("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=ie("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=ie("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=ie("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=ie("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),mj="-",zO=e=>{const s=WO(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(mj);return l[0]===""&&l.length!==1&&l.shift(),FS(l,s)||qO(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},FS=(e,s)=>{var o;if(e.length===0)return s.classGroupId;const r=e[0],n=s.nextPart.get(r),a=n?FS(e.slice(1),n):void 0;if(a)return a;if(s.validators.length===0)return;const i=e.join(mj);return(o=s.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},db=/^\[(.+)\]$/,qO=e=>{if(db.test(e)){const s=db.exec(e)[1],r=s==null?void 0:s.substring(0,s.indexOf(":"));if(r)return"arbitrary.."+r}},WO=e=>{const{theme:s,prefix:r}=e,n={nextPart:new Map,validators:[]};return HO(Object.entries(e.classGroups),r).forEach(([i,o])=>{sv(o,n,i,s)}),n},sv=(e,s,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?s:ub(s,a);i.classGroupId=r;return}if(typeof a=="function"){if(VO(a)){sv(a(n),s,r,n);return}s.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{sv(o,ub(s,i),r,n)})})},ub=(e,s)=>{let r=e;return s.split(mj).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},VO=e=>e.isThemeGetter,HO=(e,s)=>s?e.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?s+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[s+o,l])):i);return[r,a]}):e,KO=e=>{if(e<1)return{get:()=>{},set:()=>{}};let s=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),s++,s>e&&(s=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},$S="!",GO=e=>{const{separator:s,experimentalParseClassName:r}=e,n=s.length===1,a=s[0],i=s.length,o=l=>{const c=[];let d=0,u=0,m;for(let v=0;v<l.length;v++){let y=l[v];if(d===0){if(y===a&&(n||l.slice(v,v+i)===s)){c.push(l.slice(u,v)),u=v+i;continue}if(y==="/"){m=v;continue}}y==="["?d++:y==="]"&&d--}const h=c.length===0?l:l.substring(u),p=h.startsWith($S),g=p?h.substring(1):h,x=m&&m>u?m-u:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:x}};return r?l=>r({className:l,parseClassName:o}):o},YO=e=>{if(e.length<=1)return e;const s=[];let r=[];return e.forEach(n=>{n[0]==="["?(s.push(...r.sort(),n),r=[]):r.push(n)}),s.push(...r.sort()),s},QO=e=>({cache:KO(e.cacheSize),parseClassName:GO(e),...zO(e)}),ZO=/\s+/,JO=(e,s)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=s,i=[],o=e.trim().split(ZO);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:u,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:p}=r(d);let g=!!p,x=n(g?h.substring(0,p):h);if(!x){if(!g){l=d+(l.length>0?" "+l:l);continue}if(x=n(h),!x){l=d+(l.length>0?" "+l:l);continue}g=!1}const v=YO(u).join(":"),y=m?v+$S:v,j=y+x;if(i.includes(j))continue;i.push(j);const w=a(x,g);for(let b=0;b<w.length;++b){const N=w[b];i.push(y+N)}l=d+(l.length>0?" "+l:l)}return l};function XO(){let e=0,s,r,n="";for(;e<arguments.length;)(s=arguments[e++])&&(r=US(s))&&(n&&(n+=" "),n+=r);return n}const US=e=>{if(typeof e=="string")return e;let s,r="";for(let n=0;n<e.length;n++)e[n]&&(s=US(e[n]))&&(r&&(r+=" "),r+=s);return r};function eM(e,...s){let r,n,a,i=o;function o(c){const d=s.reduce((u,m)=>m(u),e());return r=QO(d),n=r.cache.get,a=r.cache.set,i=l,l(c)}function l(c){const d=n(c);if(d)return d;const u=JO(c,r);return a(c,u),u}return function(){return i(XO.apply(null,arguments))}}const Ot=e=>{const s=r=>r[e]||[];return s.isThemeGetter=!0,s},BS=/^\[(?:([a-z-]+):)?(.+)\]$/i,tM=/^\d+\/\d+$/,sM=new Set(["px","full","screen"]),rM=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,nM=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,aM=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,iM=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,oM=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ya=e=>Jl(e)||sM.has(e)||tM.test(e),ti=e=>Vc(e,"length",pM),Jl=e=>!!e&&!Number.isNaN(Number(e)),mx=e=>Vc(e,"number",Jl),fd=e=>!!e&&Number.isInteger(Number(e)),lM=e=>e.endsWith("%")&&Jl(e.slice(0,-1)),Je=e=>BS.test(e),si=e=>rM.test(e),cM=new Set(["length","size","percentage"]),dM=e=>Vc(e,cM,zS),uM=e=>Vc(e,"position",zS),hM=new Set(["image","url"]),mM=e=>Vc(e,hM,gM),fM=e=>Vc(e,"",xM),pd=()=>!0,Vc=(e,s,r)=>{const n=BS.exec(e);return n?n[1]?typeof s=="string"?n[1]===s:s.has(n[1]):r(n[2]):!1},pM=e=>nM.test(e)&&!aM.test(e),zS=()=>!1,xM=e=>iM.test(e),gM=e=>oM.test(e),vM=()=>{const e=Ot("colors"),s=Ot("spacing"),r=Ot("blur"),n=Ot("brightness"),a=Ot("borderColor"),i=Ot("borderRadius"),o=Ot("borderSpacing"),l=Ot("borderWidth"),c=Ot("contrast"),d=Ot("grayscale"),u=Ot("hueRotate"),m=Ot("invert"),h=Ot("gap"),p=Ot("gradientColorStops"),g=Ot("gradientColorStopPositions"),x=Ot("inset"),v=Ot("margin"),y=Ot("opacity"),j=Ot("padding"),w=Ot("saturate"),b=Ot("scale"),N=Ot("sepia"),_=Ot("skew"),C=Ot("space"),E=Ot("translate"),k=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto",Je,s],H=()=>[Je,s],F=()=>["",ya,ti],I=()=>["auto",Jl,Je],G=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ee=()=>["solid","dashed","dotted","double","none"],K=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>["start","end","center","between","around","evenly","stretch"],q=()=>["","0",Je],re=()=>["auto","avoid","all","avoid-page","page","left","right","column"],S=()=>[Jl,Je];return{cacheSize:500,separator:":",theme:{colors:[pd],spacing:[ya,ti],blur:["none","",si,Je],brightness:S(),borderColor:[e],borderRadius:["none","","full",si,Je],borderSpacing:H(),borderWidth:F(),contrast:S(),grayscale:q(),hueRotate:S(),invert:q(),gap:H(),gradientColorStops:[e],gradientColorStopPositions:[lM,ti],inset:L(),margin:L(),opacity:S(),padding:H(),saturate:S(),scale:S(),sepia:q(),skew:S(),space:H(),translate:H()},classGroups:{aspect:[{aspect:["auto","square","video",Je]}],container:["container"],columns:[{columns:[si]}],"break-after":[{"break-after":re()}],"break-before":[{"break-before":re()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...G(),Je]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",fd,Je]}],basis:[{basis:L()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Je]}],grow:[{grow:q()}],shrink:[{shrink:q()}],order:[{order:["first","last","none",fd,Je]}],"grid-cols":[{"grid-cols":[pd]}],"col-start-end":[{col:["auto",{span:["full",fd,Je]},Je]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[pd]}],"row-start-end":[{row:["auto",{span:[fd,Je]},Je]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Je]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Je]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...D()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...D(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...D(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[j]}],px:[{px:[j]}],py:[{py:[j]}],ps:[{ps:[j]}],pe:[{pe:[j]}],pt:[{pt:[j]}],pr:[{pr:[j]}],pb:[{pb:[j]}],pl:[{pl:[j]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Je,s]}],"min-w":[{"min-w":[Je,s,"min","max","fit"]}],"max-w":[{"max-w":[Je,s,"none","full","min","max","fit","prose",{screen:[si]},si]}],h:[{h:[Je,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Je,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Je,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Je,s,"auto","min","max","fit"]}],"font-size":[{text:["base",si,ti]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",mx]}],"font-family":[{font:[pd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Je]}],"line-clamp":[{"line-clamp":["none",Jl,mx]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ya,Je]}],"list-image":[{"list-image":["none",Je]}],"list-style-type":[{list:["none","disc","decimal",Je]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ee(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ya,ti]}],"underline-offset":[{"underline-offset":["auto",ya,Je]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:H()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Je]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Je]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...G(),uM]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",dM]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},mM]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...ee(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:ee()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...ee()]}],"outline-offset":[{"outline-offset":[ya,Je]}],"outline-w":[{outline:[ya,ti]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:F()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[ya,ti]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",si,fM]}],"shadow-color":[{shadow:[pd]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...K(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":K()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",si,Je]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[m]}],saturate:[{saturate:[w]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Je]}],duration:[{duration:S()}],ease:[{ease:["linear","in","out","in-out",Je]}],delay:[{delay:S()}],animate:[{animate:["none","spin","ping","pulse","bounce",Je]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[fd,Je]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Je]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Je]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":H()}],"scroll-mx":[{"scroll-mx":H()}],"scroll-my":[{"scroll-my":H()}],"scroll-ms":[{"scroll-ms":H()}],"scroll-me":[{"scroll-me":H()}],"scroll-mt":[{"scroll-mt":H()}],"scroll-mr":[{"scroll-mr":H()}],"scroll-mb":[{"scroll-mb":H()}],"scroll-ml":[{"scroll-ml":H()}],"scroll-p":[{"scroll-p":H()}],"scroll-px":[{"scroll-px":H()}],"scroll-py":[{"scroll-py":H()}],"scroll-ps":[{"scroll-ps":H()}],"scroll-pe":[{"scroll-pe":H()}],"scroll-pt":[{"scroll-pt":H()}],"scroll-pr":[{"scroll-pr":H()}],"scroll-pb":[{"scroll-pb":H()}],"scroll-pl":[{"scroll-pl":H()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Je]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ya,ti,mx]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},yM=eM(vM);function J(...e){return yM(_S(e))}const jM=gO,qS=f.forwardRef(({className:e,...s},r)=>t.jsx(vS,{ref:r,className:J("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...s}));qS.displayName=vS.displayName;const wM=$u("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),WS=f.forwardRef(({className:e,variant:s,...r},n)=>t.jsx(yS,{ref:n,className:J(wM({variant:s}),e),...r}));WS.displayName=yS.displayName;const bM=f.forwardRef(({className:e,...s},r)=>t.jsx(bS,{ref:r,className:J("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...s}));bM.displayName=bS.displayName;const VS=f.forwardRef(({className:e,...s},r)=>t.jsx(NS,{ref:r,className:J("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...s,children:t.jsx(Ct,{className:"h-4 w-4"})}));VS.displayName=NS.displayName;const HS=f.forwardRef(({className:e,...s},r)=>t.jsx(jS,{ref:r,className:J("text-sm font-semibold",e),...s}));HS.displayName=jS.displayName;const KS=f.forwardRef(({className:e,...s},r)=>t.jsx(wS,{ref:r,className:J("text-sm opacity-90",e),...s}));KS.displayName=wS.displayName;function NM(){const{toasts:e}=Ji();return t.jsxs(jM,{children:[e.map(function({id:s,title:r,description:n,action:a,...i}){return t.jsxs(WS,{...i,children:[t.jsxs("div",{className:"grid gap-1",children:[r&&t.jsx(HS,{children:r}),n&&t.jsx(KS,{children:n})]}),a,t.jsx(VS,{})]},s)}),t.jsx(qS,{})]})}var Um=["light","dark"],fj="(prefers-color-scheme: dark)",CM=typeof window>"u",pj=f.createContext(void 0),_M={setTheme:e=>{},themes:[]},GS=()=>{var e;return(e=f.useContext(pj))!=null?e:_M},SM=e=>f.useContext(pj)?e.children:f.createElement(EM,{...e}),kM=["light","dark"],EM=({forcedTheme:e,disableTransitionOnChange:s=!1,enableSystem:r=!0,enableColorScheme:n=!0,storageKey:a="theme",themes:i=kM,defaultTheme:o=r?"system":"light",attribute:l="data-theme",value:c,children:d,nonce:u})=>{let[m,h]=f.useState(()=>hb(a,o)),[p,g]=f.useState(()=>hb(a)),x=c?Object.values(c):i,v=f.useCallback(b=>{let N=b;if(!N)return;b==="system"&&r&&(N=mb());let _=c?c[N]:N,C=s?TM():null,E=document.documentElement;if(l==="class"?(E.classList.remove(...x),_&&E.classList.add(_)):_?E.setAttribute(l,_):E.removeAttribute(l),n){let k=Um.includes(o)?o:null,A=Um.includes(N)?N:k;E.style.colorScheme=A}C==null||C()},[]),y=f.useCallback(b=>{let N=typeof b=="function"?b(b):b;h(N);try{localStorage.setItem(a,N)}catch{}},[e]),j=f.useCallback(b=>{let N=mb(b);g(N),m==="system"&&r&&!e&&v("system")},[m,e]);f.useEffect(()=>{let b=window.matchMedia(fj);return b.addListener(j),j(b),()=>b.removeListener(j)},[j]),f.useEffect(()=>{let b=N=>{if(N.key!==a)return;let _=N.newValue||o;y(_)};return window.addEventListener("storage",b),()=>window.removeEventListener("storage",b)},[y]),f.useEffect(()=>{v(e??m)},[e,m]);let w=f.useMemo(()=>({theme:m,setTheme:y,forcedTheme:e,resolvedTheme:m==="system"?p:m,themes:r?[...i,"system"]:i,systemTheme:r?p:void 0}),[m,y,e,p,r,i]);return f.createElement(pj.Provider,{value:w},f.createElement(AM,{forcedTheme:e,disableTransitionOnChange:s,enableSystem:r,enableColorScheme:n,storageKey:a,themes:i,defaultTheme:o,attribute:l,value:c,children:d,attrs:x,nonce:u}),d)},AM=f.memo(({forcedTheme:e,storageKey:s,attribute:r,enableSystem:n,enableColorScheme:a,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let d=i==="system",u=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(g=>`'${g}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,m=a?Um.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(g,x=!1,v=!0)=>{let y=o?o[g]:g,j=x?g+"|| ''":`'${y}'`,w="";return a&&v&&!x&&Um.includes(g)&&(w+=`d.style.colorScheme = '${g}';`),r==="class"?x||y?w+=`c.add(${j})`:w+="null":y&&(w+=`d[s](n,${j})`),w},p=e?`!function(){${u}${h(e)}}()`:n?`!function(){try{${u}var e=localStorage.getItem('${s}');if('system'===e||(!e&&${d})){var t='${fj}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}${d?"":"else{"+h(i,!1,!1)+"}"}${m}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${s}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}else{${h(i,!1,!1)};}${m}}catch(t){}}();`;return f.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})}),hb=(e,s)=>{if(CM)return;let r;try{r=localStorage.getItem(e)||void 0}catch{}return r||s},TM=()=>{let e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},mb=e=>(e||(e=window.matchMedia(fj)),e.matches?"dark":"light"),PM=e=>{switch(e){case"success":return DM;case"info":return MM;case"warning":return OM;case"error":return LM;default:return null}},RM=Array(12).fill(0),IM=({visible:e,className:s})=>le.createElement("div",{className:["sonner-loading-wrapper",s].filter(Boolean).join(" "),"data-visible":e},le.createElement("div",{className:"sonner-spinner"},RM.map((r,n)=>le.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),DM=le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},le.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),OM=le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},le.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),MM=le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},le.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),LM=le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},le.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),FM=le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},le.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),le.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),$M=()=>{let[e,s]=le.useState(document.hidden);return le.useEffect(()=>{let r=()=>{s(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},rv=1,UM=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let s=this.subscribers.indexOf(e);this.subscribers.splice(s,1)}),this.publish=e=>{this.subscribers.forEach(s=>s(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var s;let{message:r,...n}=e,a=typeof(e==null?void 0:e.id)=="number"||((s=e.id)==null?void 0:s.length)>0?e.id:rv++,i=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),i?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:r}),{...l,...e,id:a,dismissible:o,title:r}):l):this.addToast({title:r,...n,dismissible:o,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(s=>{this.subscribers.forEach(r=>r({id:s.id,dismiss:!0}))}),this.subscribers.forEach(s=>s({id:e,dismiss:!0})),e),this.message=(e,s)=>this.create({...s,message:e}),this.error=(e,s)=>this.create({...s,message:e,type:"error"}),this.success=(e,s)=>this.create({...s,type:"success",message:e}),this.info=(e,s)=>this.create({...s,type:"info",message:e}),this.warning=(e,s)=>this.create({...s,type:"warning",message:e}),this.loading=(e,s)=>this.create({...s,type:"loading",message:e}),this.promise=(e,s)=>{if(!s)return;let r;s.loading!==void 0&&(r=this.create({...s,promise:e,type:"loading",message:s.loading,description:typeof s.description!="function"?s.description:void 0}));let n=e instanceof Promise?e:e(),a=r!==void 0,i,o=n.then(async c=>{if(i=["resolve",c],le.isValidElement(c))a=!1,this.create({id:r,type:"default",message:c});else if(zM(c)&&!c.ok){a=!1;let d=typeof s.error=="function"?await s.error(`HTTP error! status: ${c.status}`):s.error,u=typeof s.description=="function"?await s.description(`HTTP error! status: ${c.status}`):s.description;this.create({id:r,type:"error",message:d,description:u})}else if(s.success!==void 0){a=!1;let d=typeof s.success=="function"?await s.success(c):s.success,u=typeof s.description=="function"?await s.description(c):s.description;this.create({id:r,type:"success",message:d,description:u})}}).catch(async c=>{if(i=["reject",c],s.error!==void 0){a=!1;let d=typeof s.error=="function"?await s.error(c):s.error,u=typeof s.description=="function"?await s.description(c):s.description;this.create({id:r,type:"error",message:d,description:u})}}).finally(()=>{var c;a&&(this.dismiss(r),r=void 0),(c=s.finally)==null||c.call(s)}),l=()=>new Promise((c,d)=>o.then(()=>i[0]==="reject"?d(i[1]):c(i[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,s)=>{let r=(s==null?void 0:s.id)||rv++;return this.create({jsx:e(r),id:r,...s}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},gr=new UM,BM=(e,s)=>{let r=(s==null?void 0:s.id)||rv++;return gr.addToast({title:e,...s,id:r}),r},zM=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",qM=BM,WM=()=>gr.toasts,VM=()=>gr.getActiveToasts(),z=Object.assign(qM,{success:gr.success,info:gr.info,warning:gr.warning,error:gr.error,custom:gr.custom,message:gr.message,promise:gr.promise,dismiss:gr.dismiss,loading:gr.loading},{getHistory:WM,getToasts:VM});function HM(e,{insertAt:s}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",s==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}HM(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Ph(e){return e.label!==void 0}var KM=3,GM="32px",YM="16px",fb=4e3,QM=356,ZM=14,JM=20,XM=200;function vn(...e){return e.filter(Boolean).join(" ")}function e5(e){let[s,r]=e.split("-"),n=[];return s&&n.push(s),r&&n.push(r),n}var t5=e=>{var s,r,n,a,i,o,l,c,d,u,m;let{invert:h,toast:p,unstyled:g,interacting:x,setHeights:v,visibleToasts:y,heights:j,index:w,toasts:b,expanded:N,removeToast:_,defaultRichColors:C,closeButton:E,style:k,cancelButtonStyle:A,actionButtonStyle:L,className:H="",descriptionClassName:F="",duration:I,position:G,gap:ee,loadingIcon:K,expandByDefault:D,classNames:q,icons:re,closeButtonAriaLabel:S="Close toast",pauseWhenPageIsHidden:R}=e,[te,Q]=le.useState(null),[Y,oe]=le.useState(null),[X,xe]=le.useState(!1),[ve,Ae]=le.useState(!1),[Be,et]=le.useState(!1),[as,Es]=le.useState(!1),[Qr,fr]=le.useState(!1),[be,ke]=le.useState(0),[jt,pt]=le.useState(0),Vn=le.useRef(p.duration||I||fb),xa=le.useRef(null),Hn=le.useRef(null),lh=w===0,Ne=w+1<=y,Me=p.type,Dt=p.dismissible!==!1,Kn=p.className||"",no=p.descriptionClassName||"",ao=le.useMemo(()=>j.findIndex(Ye=>Ye.toastId===p.id)||0,[j,p.id]),ch=le.useMemo(()=>{var Ye;return(Ye=p.closeButton)!=null?Ye:E},[p.closeButton,E]),nd=le.useMemo(()=>p.duration||I||fb,[p.duration,I]),cl=le.useRef(0),ga=le.useRef(0),ad=le.useRef(0),va=le.useRef(null),[dh,YP]=G.split("-"),Uw=le.useMemo(()=>j.reduce((Ye,wt,$t)=>$t>=ao?Ye:Ye+wt.height,0),[j,ao]),Bw=$M(),QP=p.invert||h,Op=Me==="loading";ga.current=le.useMemo(()=>ao*ee+Uw,[ao,Uw]),le.useEffect(()=>{Vn.current=nd},[nd]),le.useEffect(()=>{xe(!0)},[]),le.useEffect(()=>{let Ye=Hn.current;if(Ye){let wt=Ye.getBoundingClientRect().height;return pt(wt),v($t=>[{toastId:p.id,height:wt,position:p.position},...$t]),()=>v($t=>$t.filter(fn=>fn.toastId!==p.id))}},[v,p.id]),le.useLayoutEffect(()=>{if(!X)return;let Ye=Hn.current,wt=Ye.style.height;Ye.style.height="auto";let $t=Ye.getBoundingClientRect().height;Ye.style.height=wt,pt($t),v(fn=>fn.find(pn=>pn.toastId===p.id)?fn.map(pn=>pn.toastId===p.id?{...pn,height:$t}:pn):[{toastId:p.id,height:$t,position:p.position},...fn])},[X,p.title,p.description,v,p.id]);let Za=le.useCallback(()=>{Ae(!0),ke(ga.current),v(Ye=>Ye.filter(wt=>wt.toastId!==p.id)),setTimeout(()=>{_(p)},XM)},[p,_,v,ga]);le.useEffect(()=>{if(p.promise&&Me==="loading"||p.duration===1/0||p.type==="loading")return;let Ye;return N||x||R&&Bw?(()=>{if(ad.current<cl.current){let wt=new Date().getTime()-cl.current;Vn.current=Vn.current-wt}ad.current=new Date().getTime()})():Vn.current!==1/0&&(cl.current=new Date().getTime(),Ye=setTimeout(()=>{var wt;(wt=p.onAutoClose)==null||wt.call(p,p),Za()},Vn.current)),()=>clearTimeout(Ye)},[N,x,p,Me,R,Bw,Za]),le.useEffect(()=>{p.delete&&Za()},[Za,p.delete]);function ZP(){var Ye,wt,$t;return re!=null&&re.loading?le.createElement("div",{className:vn(q==null?void 0:q.loader,(Ye=p==null?void 0:p.classNames)==null?void 0:Ye.loader,"sonner-loader"),"data-visible":Me==="loading"},re.loading):K?le.createElement("div",{className:vn(q==null?void 0:q.loader,(wt=p==null?void 0:p.classNames)==null?void 0:wt.loader,"sonner-loader"),"data-visible":Me==="loading"},K):le.createElement(IM,{className:vn(q==null?void 0:q.loader,($t=p==null?void 0:p.classNames)==null?void 0:$t.loader),visible:Me==="loading"})}return le.createElement("li",{tabIndex:0,ref:Hn,className:vn(H,Kn,q==null?void 0:q.toast,(s=p==null?void 0:p.classNames)==null?void 0:s.toast,q==null?void 0:q.default,q==null?void 0:q[Me],(r=p==null?void 0:p.classNames)==null?void 0:r[Me]),"data-sonner-toast":"","data-rich-colors":(n=p.richColors)!=null?n:C,"data-styled":!(p.jsx||p.unstyled||g),"data-mounted":X,"data-promise":!!p.promise,"data-swiped":Qr,"data-removed":ve,"data-visible":Ne,"data-y-position":dh,"data-x-position":YP,"data-index":w,"data-front":lh,"data-swiping":Be,"data-dismissible":Dt,"data-type":Me,"data-invert":QP,"data-swipe-out":as,"data-swipe-direction":Y,"data-expanded":!!(N||D&&X),style:{"--index":w,"--toasts-before":w,"--z-index":b.length-w,"--offset":`${ve?be:ga.current}px`,"--initial-height":D?"auto":`${jt}px`,...k,...p.style},onDragEnd:()=>{et(!1),Q(null),va.current=null},onPointerDown:Ye=>{Op||!Dt||(xa.current=new Date,ke(ga.current),Ye.target.setPointerCapture(Ye.pointerId),Ye.target.tagName!=="BUTTON"&&(et(!0),va.current={x:Ye.clientX,y:Ye.clientY}))},onPointerUp:()=>{var Ye,wt,$t,fn;if(as||!Dt)return;va.current=null;let pn=Number(((Ye=Hn.current)==null?void 0:Ye.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ja=Number(((wt=Hn.current)==null?void 0:wt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),io=new Date().getTime()-(($t=xa.current)==null?void 0:$t.getTime()),xn=te==="x"?pn:Ja,Xa=Math.abs(xn)/io;if(Math.abs(xn)>=JM||Xa>.11){ke(ga.current),(fn=p.onDismiss)==null||fn.call(p,p),oe(te==="x"?pn>0?"right":"left":Ja>0?"down":"up"),Za(),Es(!0),fr(!1);return}et(!1),Q(null)},onPointerMove:Ye=>{var wt,$t,fn,pn;if(!va.current||!Dt||((wt=window.getSelection())==null?void 0:wt.toString().length)>0)return;let Ja=Ye.clientY-va.current.y,io=Ye.clientX-va.current.x,xn=($t=e.swipeDirections)!=null?$t:e5(G);!te&&(Math.abs(io)>1||Math.abs(Ja)>1)&&Q(Math.abs(io)>Math.abs(Ja)?"x":"y");let Xa={x:0,y:0};te==="y"?(xn.includes("top")||xn.includes("bottom"))&&(xn.includes("top")&&Ja<0||xn.includes("bottom")&&Ja>0)&&(Xa.y=Ja):te==="x"&&(xn.includes("left")||xn.includes("right"))&&(xn.includes("left")&&io<0||xn.includes("right")&&io>0)&&(Xa.x=io),(Math.abs(Xa.x)>0||Math.abs(Xa.y)>0)&&fr(!0),(fn=Hn.current)==null||fn.style.setProperty("--swipe-amount-x",`${Xa.x}px`),(pn=Hn.current)==null||pn.style.setProperty("--swipe-amount-y",`${Xa.y}px`)}},ch&&!p.jsx?le.createElement("button",{"aria-label":S,"data-disabled":Op,"data-close-button":!0,onClick:Op||!Dt?()=>{}:()=>{var Ye;Za(),(Ye=p.onDismiss)==null||Ye.call(p,p)},className:vn(q==null?void 0:q.closeButton,(a=p==null?void 0:p.classNames)==null?void 0:a.closeButton)},(i=re==null?void 0:re.close)!=null?i:FM):null,p.jsx||f.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:le.createElement(le.Fragment,null,Me||p.icon||p.promise?le.createElement("div",{"data-icon":"",className:vn(q==null?void 0:q.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||ZP():null,p.type!=="loading"?p.icon||(re==null?void 0:re[Me])||PM(Me):null):null,le.createElement("div",{"data-content":"",className:vn(q==null?void 0:q.content,(l=p==null?void 0:p.classNames)==null?void 0:l.content)},le.createElement("div",{"data-title":"",className:vn(q==null?void 0:q.title,(c=p==null?void 0:p.classNames)==null?void 0:c.title)},typeof p.title=="function"?p.title():p.title),p.description?le.createElement("div",{"data-description":"",className:vn(F,no,q==null?void 0:q.description,(d=p==null?void 0:p.classNames)==null?void 0:d.description)},typeof p.description=="function"?p.description():p.description):null),f.isValidElement(p.cancel)?p.cancel:p.cancel&&Ph(p.cancel)?le.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||A,onClick:Ye=>{var wt,$t;Ph(p.cancel)&&Dt&&(($t=(wt=p.cancel).onClick)==null||$t.call(wt,Ye),Za())},className:vn(q==null?void 0:q.cancelButton,(u=p==null?void 0:p.classNames)==null?void 0:u.cancelButton)},p.cancel.label):null,f.isValidElement(p.action)?p.action:p.action&&Ph(p.action)?le.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||L,onClick:Ye=>{var wt,$t;Ph(p.action)&&(($t=(wt=p.action).onClick)==null||$t.call(wt,Ye),!Ye.defaultPrevented&&Za())},className:vn(q==null?void 0:q.actionButton,(m=p==null?void 0:p.classNames)==null?void 0:m.actionButton)},p.action.label):null))};function pb(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function s5(e,s){let r={};return[e,s].forEach((n,a)=>{let i=a===1,o=i?"--mobile-offset":"--offset",l=i?YM:GM;function c(d){["top","right","bottom","left"].forEach(u=>{r[`${o}-${u}`]=typeof d=="number"?`${d}px`:d})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(d=>{n[d]===void 0?r[`${o}-${d}`]=l:r[`${o}-${d}`]=typeof n[d]=="number"?`${n[d]}px`:n[d]}):c(l)}),r}var r5=f.forwardRef(function(e,s){let{invert:r,position:n="bottom-right",hotkey:a=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:d,theme:u="light",richColors:m,duration:h,style:p,visibleToasts:g=KM,toastOptions:x,dir:v=pb(),gap:y=ZM,loadingIcon:j,icons:w,containerAriaLabel:b="Notifications",pauseWhenPageIsHidden:N}=e,[_,C]=le.useState([]),E=le.useMemo(()=>Array.from(new Set([n].concat(_.filter(R=>R.position).map(R=>R.position)))),[_,n]),[k,A]=le.useState([]),[L,H]=le.useState(!1),[F,I]=le.useState(!1),[G,ee]=le.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),K=le.useRef(null),D=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),q=le.useRef(null),re=le.useRef(!1),S=le.useCallback(R=>{C(te=>{var Q;return(Q=te.find(Y=>Y.id===R.id))!=null&&Q.delete||gr.dismiss(R.id),te.filter(({id:Y})=>Y!==R.id)})},[]);return le.useEffect(()=>gr.subscribe(R=>{if(R.dismiss){C(te=>te.map(Q=>Q.id===R.id?{...Q,delete:!0}:Q));return}setTimeout(()=>{Z_.flushSync(()=>{C(te=>{let Q=te.findIndex(Y=>Y.id===R.id);return Q!==-1?[...te.slice(0,Q),{...te[Q],...R},...te.slice(Q+1)]:[R,...te]})})})}),[]),le.useEffect(()=>{if(u!=="system"){ee(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ee("dark"):ee("light")),typeof window>"u")return;let R=window.matchMedia("(prefers-color-scheme: dark)");try{R.addEventListener("change",({matches:te})=>{ee(te?"dark":"light")})}catch{R.addListener(({matches:Q})=>{try{ee(Q?"dark":"light")}catch(Y){console.error(Y)}})}},[u]),le.useEffect(()=>{_.length<=1&&H(!1)},[_]),le.useEffect(()=>{let R=te=>{var Q,Y;a.every(oe=>te[oe]||te.code===oe)&&(H(!0),(Q=K.current)==null||Q.focus()),te.code==="Escape"&&(document.activeElement===K.current||(Y=K.current)!=null&&Y.contains(document.activeElement))&&H(!1)};return document.addEventListener("keydown",R),()=>document.removeEventListener("keydown",R)},[a]),le.useEffect(()=>{if(K.current)return()=>{q.current&&(q.current.focus({preventScroll:!0}),q.current=null,re.current=!1)}},[K.current]),le.createElement("section",{ref:s,"aria-label":`${b} ${D}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},E.map((R,te)=>{var Q;let[Y,oe]=R.split("-");return _.length?le.createElement("ol",{key:R,dir:v==="auto"?pb():v,tabIndex:-1,ref:K,className:l,"data-sonner-toaster":!0,"data-theme":G,"data-y-position":Y,"data-lifted":L&&_.length>1&&!i,"data-x-position":oe,style:{"--front-toast-height":`${((Q=k[0])==null?void 0:Q.height)||0}px`,"--width":`${QM}px`,"--gap":`${y}px`,...p,...s5(c,d)},onBlur:X=>{re.current&&!X.currentTarget.contains(X.relatedTarget)&&(re.current=!1,q.current&&(q.current.focus({preventScroll:!0}),q.current=null))},onFocus:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||re.current||(re.current=!0,q.current=X.relatedTarget)},onMouseEnter:()=>H(!0),onMouseMove:()=>H(!0),onMouseLeave:()=>{F||H(!1)},onDragEnd:()=>H(!1),onPointerDown:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||I(!0)},onPointerUp:()=>I(!1)},_.filter(X=>!X.position&&te===0||X.position===R).map((X,xe)=>{var ve,Ae;return le.createElement(t5,{key:X.id,icons:w,index:xe,toast:X,defaultRichColors:m,duration:(ve=x==null?void 0:x.duration)!=null?ve:h,className:x==null?void 0:x.className,descriptionClassName:x==null?void 0:x.descriptionClassName,invert:r,visibleToasts:g,closeButton:(Ae=x==null?void 0:x.closeButton)!=null?Ae:o,interacting:F,position:R,style:x==null?void 0:x.style,unstyled:x==null?void 0:x.unstyled,classNames:x==null?void 0:x.classNames,cancelButtonStyle:x==null?void 0:x.cancelButtonStyle,actionButtonStyle:x==null?void 0:x.actionButtonStyle,removeToast:S,toasts:_.filter(Be=>Be.position==X.position),heights:k.filter(Be=>Be.position==X.position),setHeights:A,expandByDefault:i,gap:y,loadingIcon:j,expanded:L,pauseWhenPageIsHidden:N,swipeDirections:e.swipeDirections})})):null}))});const n5=({...e})=>{const{theme:s="system"}=GS();return t.jsx(r5,{theme:s,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var a5=jf[" useId ".trim().toString()]||(()=>{}),i5=0;function Ss(e){const[s,r]=f.useState(a5());return hs(()=>{r(n=>n??String(i5++))},[e]),s?`radix-${s}`:""}const o5=["top","right","bottom","left"],Wi=Math.min,Ar=Math.max,Bm=Math.round,Rh=Math.floor,aa=e=>({x:e,y:e}),l5={left:"right",right:"left",bottom:"top",top:"bottom"},c5={start:"end",end:"start"};function nv(e,s,r){return Ar(e,Wi(s,r))}function Ua(e,s){return typeof e=="function"?e(s):e}function Ba(e){return e.split("-")[0]}function Hc(e){return e.split("-")[1]}function xj(e){return e==="x"?"y":"x"}function gj(e){return e==="y"?"height":"width"}const d5=new Set(["top","bottom"]);function ta(e){return d5.has(Ba(e))?"y":"x"}function vj(e){return xj(ta(e))}function u5(e,s,r){r===void 0&&(r=!1);const n=Hc(e),a=vj(e),i=gj(a);let o=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return s.reference[i]>s.floating[i]&&(o=zm(o)),[o,zm(o)]}function h5(e){const s=zm(e);return[av(e),s,av(s)]}function av(e){return e.replace(/start|end/g,s=>c5[s])}const xb=["left","right"],gb=["right","left"],m5=["top","bottom"],f5=["bottom","top"];function p5(e,s,r){switch(e){case"top":case"bottom":return r?s?gb:xb:s?xb:gb;case"left":case"right":return s?m5:f5;default:return[]}}function x5(e,s,r,n){const a=Hc(e);let i=p5(Ba(e),r==="start",n);return a&&(i=i.map(o=>o+"-"+a),s&&(i=i.concat(i.map(av)))),i}function zm(e){return e.replace(/left|right|bottom|top/g,s=>l5[s])}function g5(e){return{top:0,right:0,bottom:0,left:0,...e}}function YS(e){return typeof e!="number"?g5(e):{top:e,right:e,bottom:e,left:e}}function qm(e){const{x:s,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:s,right:s+n,bottom:r+a,x:s,y:r}}function vb(e,s,r){let{reference:n,floating:a}=e;const i=ta(s),o=vj(s),l=gj(o),c=Ba(s),d=i==="y",u=n.x+n.width/2-a.width/2,m=n.y+n.height/2-a.height/2,h=n[l]/2-a[l]/2;let p;switch(c){case"top":p={x:u,y:n.y-a.height};break;case"bottom":p={x:u,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:m};break;case"left":p={x:n.x-a.width,y:m};break;default:p={x:n.x,y:n.y}}switch(Hc(s)){case"start":p[o]-=h*(r&&d?-1:1);break;case"end":p[o]+=h*(r&&d?-1:1);break}return p}const v5=async(e,s,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(s));let d=await o.getElementRects({reference:e,floating:s,strategy:a}),{x:u,y:m}=vb(d,n,c),h=n,p={},g=0;for(let x=0;x<l.length;x++){const{name:v,fn:y}=l[x],{x:j,y:w,data:b,reset:N}=await y({x:u,y:m,initialPlacement:n,placement:h,strategy:a,middlewareData:p,rects:d,platform:o,elements:{reference:e,floating:s}});u=j??u,m=w??m,p={...p,[v]:{...p[v],...b}},N&&g<=50&&(g++,typeof N=="object"&&(N.placement&&(h=N.placement),N.rects&&(d=N.rects===!0?await o.getElementRects({reference:e,floating:s,strategy:a}):N.rects),{x:u,y:m}=vb(d,h,c)),x=-1)}return{x:u,y:m,placement:h,strategy:a,middlewareData:p}};async function iu(e,s){var r;s===void 0&&(s={});const{x:n,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:m="floating",altBoundary:h=!1,padding:p=0}=Ua(s,e),g=YS(p),v=l[h?m==="floating"?"reference":"floating":m],y=qm(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(v)))==null||r?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),j=m==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),b=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},N=qm(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:j,offsetParent:w,strategy:c}):j);return{top:(y.top-N.top+g.top)/b.y,bottom:(N.bottom-y.bottom+g.bottom)/b.y,left:(y.left-N.left+g.left)/b.x,right:(N.right-y.right+g.right)/b.x}}const y5=e=>({name:"arrow",options:e,async fn(s){const{x:r,y:n,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=s,{element:d,padding:u=0}=Ua(e,s)||{};if(d==null)return{};const m=YS(u),h={x:r,y:n},p=vj(a),g=gj(p),x=await o.getDimensions(d),v=p==="y",y=v?"top":"left",j=v?"bottom":"right",w=v?"clientHeight":"clientWidth",b=i.reference[g]+i.reference[p]-h[p]-i.floating[g],N=h[p]-i.reference[p],_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let C=_?_[w]:0;(!C||!await(o.isElement==null?void 0:o.isElement(_)))&&(C=l.floating[w]||i.floating[g]);const E=b/2-N/2,k=C/2-x[g]/2-1,A=Wi(m[y],k),L=Wi(m[j],k),H=A,F=C-x[g]-L,I=C/2-x[g]/2+E,G=nv(H,I,F),ee=!c.arrow&&Hc(a)!=null&&I!==G&&i.reference[g]/2-(I<H?A:L)-x[g]/2<0,K=ee?I<H?I-H:I-F:0;return{[p]:h[p]+K,data:{[p]:G,centerOffset:I-G-K,...ee&&{alignmentOffset:K}},reset:ee}}}),j5=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(s){var r,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=s,{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:x=!0,...v}=Ua(e,s);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const y=Ba(a),j=ta(l),w=Ba(l)===l,b=await(c.isRTL==null?void 0:c.isRTL(d.floating)),N=h||(w||!x?[zm(l)]:h5(l)),_=g!=="none";!h&&_&&N.push(...x5(l,x,g,b));const C=[l,...N],E=await iu(s,v),k=[];let A=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&k.push(E[y]),m){const I=u5(a,o,b);k.push(E[I[0]],E[I[1]])}if(A=[...A,{placement:a,overflows:k}],!k.every(I=>I<=0)){var L,H;const I=(((L=i.flip)==null?void 0:L.index)||0)+1,G=C[I];if(G&&(!(m==="alignment"?j!==ta(G):!1)||A.every(D=>ta(D.placement)===j?D.overflows[0]>0:!0)))return{data:{index:I,overflows:A},reset:{placement:G}};let ee=(H=A.filter(K=>K.overflows[0]<=0).sort((K,D)=>K.overflows[1]-D.overflows[1])[0])==null?void 0:H.placement;if(!ee)switch(p){case"bestFit":{var F;const K=(F=A.filter(D=>{if(_){const q=ta(D.placement);return q===j||q==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(q=>q>0).reduce((q,re)=>q+re,0)]).sort((D,q)=>D[1]-q[1])[0])==null?void 0:F[0];K&&(ee=K);break}case"initialPlacement":ee=l;break}if(a!==ee)return{reset:{placement:ee}}}return{}}}};function yb(e,s){return{top:e.top-s.height,right:e.right-s.width,bottom:e.bottom-s.height,left:e.left-s.width}}function jb(e){return o5.some(s=>e[s]>=0)}const w5=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(s){const{rects:r}=s,{strategy:n="referenceHidden",...a}=Ua(e,s);switch(n){case"referenceHidden":{const i=await iu(s,{...a,elementContext:"reference"}),o=yb(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:jb(o)}}}case"escaped":{const i=await iu(s,{...a,altBoundary:!0}),o=yb(i,r.floating);return{data:{escapedOffsets:o,escaped:jb(o)}}}default:return{}}}}},QS=new Set(["left","top"]);async function b5(e,s){const{placement:r,platform:n,elements:a}=e,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=Ba(r),l=Hc(r),c=ta(r)==="y",d=QS.has(o)?-1:1,u=i&&c?-1:1,m=Ua(s,e);let{mainAxis:h,crossAxis:p,alignmentAxis:g}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof g=="number"&&(p=l==="end"?g*-1:g),c?{x:p*u,y:h*d}:{x:h*d,y:p*u}}const N5=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(s){var r,n;const{x:a,y:i,placement:o,middlewareData:l}=s,c=await b5(s,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},C5=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(s){const{x:r,y:n,placement:a}=s,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:v=>{let{x:y,y:j}=v;return{x:y,y:j}}},...c}=Ua(e,s),d={x:r,y:n},u=await iu(s,c),m=ta(Ba(a)),h=xj(m);let p=d[h],g=d[m];if(i){const v=h==="y"?"top":"left",y=h==="y"?"bottom":"right",j=p+u[v],w=p-u[y];p=nv(j,p,w)}if(o){const v=m==="y"?"top":"left",y=m==="y"?"bottom":"right",j=g+u[v],w=g-u[y];g=nv(j,g,w)}const x=l.fn({...s,[h]:p,[m]:g});return{...x,data:{x:x.x-r,y:x.y-n,enabled:{[h]:i,[m]:o}}}}}},_5=function(e){return e===void 0&&(e={}),{options:e,fn(s){const{x:r,y:n,placement:a,rects:i,middlewareData:o}=s,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Ua(e,s),u={x:r,y:n},m=ta(a),h=xj(m);let p=u[h],g=u[m];const x=Ua(l,s),v=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(c){const w=h==="y"?"height":"width",b=i.reference[h]-i.floating[w]+v.mainAxis,N=i.reference[h]+i.reference[w]-v.mainAxis;p<b?p=b:p>N&&(p=N)}if(d){var y,j;const w=h==="y"?"width":"height",b=QS.has(Ba(a)),N=i.reference[m]-i.floating[w]+(b&&((y=o.offset)==null?void 0:y[m])||0)+(b?0:v.crossAxis),_=i.reference[m]+i.reference[w]+(b?0:((j=o.offset)==null?void 0:j[m])||0)-(b?v.crossAxis:0);g<N?g=N:g>_&&(g=_)}return{[h]:p,[m]:g}}}},S5=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(s){var r,n;const{placement:a,rects:i,platform:o,elements:l}=s,{apply:c=()=>{},...d}=Ua(e,s),u=await iu(s,d),m=Ba(a),h=Hc(a),p=ta(a)==="y",{width:g,height:x}=i.floating;let v,y;m==="top"||m==="bottom"?(v=m,y=h===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(y=m,v=h==="end"?"top":"bottom");const j=x-u.top-u.bottom,w=g-u.left-u.right,b=Wi(x-u[v],j),N=Wi(g-u[y],w),_=!s.middlewareData.shift;let C=b,E=N;if((r=s.middlewareData.shift)!=null&&r.enabled.x&&(E=w),(n=s.middlewareData.shift)!=null&&n.enabled.y&&(C=j),_&&!h){const A=Ar(u.left,0),L=Ar(u.right,0),H=Ar(u.top,0),F=Ar(u.bottom,0);p?E=g-2*(A!==0||L!==0?A+L:Ar(u.left,u.right)):C=x-2*(H!==0||F!==0?H+F:Ar(u.top,u.bottom))}await c({...s,availableWidth:E,availableHeight:C});const k=await o.getDimensions(l.floating);return g!==k.width||x!==k.height?{reset:{rects:!0}}:{}}}};function Wf(){return typeof window<"u"}function Kc(e){return ZS(e)?(e.nodeName||"").toLowerCase():"#document"}function Dr(e){var s;return(e==null||(s=e.ownerDocument)==null?void 0:s.defaultView)||window}function ha(e){var s;return(s=(ZS(e)?e.ownerDocument:e.document)||window.document)==null?void 0:s.documentElement}function ZS(e){return Wf()?e instanceof Node||e instanceof Dr(e).Node:!1}function Ln(e){return Wf()?e instanceof Element||e instanceof Dr(e).Element:!1}function da(e){return Wf()?e instanceof HTMLElement||e instanceof Dr(e).HTMLElement:!1}function wb(e){return!Wf()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Dr(e).ShadowRoot}const k5=new Set(["inline","contents"]);function Vu(e){const{overflow:s,overflowX:r,overflowY:n,display:a}=Fn(e);return/auto|scroll|overlay|hidden|clip/.test(s+n+r)&&!k5.has(a)}const E5=new Set(["table","td","th"]);function A5(e){return E5.has(Kc(e))}const T5=[":popover-open",":modal"];function Vf(e){return T5.some(s=>{try{return e.matches(s)}catch{return!1}})}const P5=["transform","translate","scale","rotate","perspective"],R5=["transform","translate","scale","rotate","perspective","filter"],I5=["paint","layout","strict","content"];function yj(e){const s=jj(),r=Ln(e)?Fn(e):e;return P5.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!s&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!s&&(r.filter?r.filter!=="none":!1)||R5.some(n=>(r.willChange||"").includes(n))||I5.some(n=>(r.contain||"").includes(n))}function D5(e){let s=Vi(e);for(;da(s)&&!Sc(s);){if(yj(s))return s;if(Vf(s))return null;s=Vi(s)}return null}function jj(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const O5=new Set(["html","body","#document"]);function Sc(e){return O5.has(Kc(e))}function Fn(e){return Dr(e).getComputedStyle(e)}function Hf(e){return Ln(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Vi(e){if(Kc(e)==="html")return e;const s=e.assignedSlot||e.parentNode||wb(e)&&e.host||ha(e);return wb(s)?s.host:s}function JS(e){const s=Vi(e);return Sc(s)?e.ownerDocument?e.ownerDocument.body:e.body:da(s)&&Vu(s)?s:JS(s)}function ou(e,s,r){var n;s===void 0&&(s=[]),r===void 0&&(r=!0);const a=JS(e),i=a===((n=e.ownerDocument)==null?void 0:n.body),o=Dr(a);if(i){const l=iv(o);return s.concat(o,o.visualViewport||[],Vu(a)?a:[],l&&r?ou(l):[])}return s.concat(a,ou(a,[],r))}function iv(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function XS(e){const s=Fn(e);let r=parseFloat(s.width)||0,n=parseFloat(s.height)||0;const a=da(e),i=a?e.offsetWidth:r,o=a?e.offsetHeight:n,l=Bm(r)!==i||Bm(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function wj(e){return Ln(e)?e:e.contextElement}function Xl(e){const s=wj(e);if(!da(s))return aa(1);const r=s.getBoundingClientRect(),{width:n,height:a,$:i}=XS(s);let o=(i?Bm(r.width):r.width)/n,l=(i?Bm(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const M5=aa(0);function ek(e){const s=Dr(e);return!jj()||!s.visualViewport?M5:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function L5(e,s,r){return s===void 0&&(s=!1),!r||s&&r!==Dr(e)?!1:s}function qo(e,s,r,n){s===void 0&&(s=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=wj(e);let o=aa(1);s&&(n?Ln(n)&&(o=Xl(n)):o=Xl(e));const l=L5(i,r,n)?ek(i):aa(0);let c=(a.left+l.x)/o.x,d=(a.top+l.y)/o.y,u=a.width/o.x,m=a.height/o.y;if(i){const h=Dr(i),p=n&&Ln(n)?Dr(n):n;let g=h,x=iv(g);for(;x&&n&&p!==g;){const v=Xl(x),y=x.getBoundingClientRect(),j=Fn(x),w=y.left+(x.clientLeft+parseFloat(j.paddingLeft))*v.x,b=y.top+(x.clientTop+parseFloat(j.paddingTop))*v.y;c*=v.x,d*=v.y,u*=v.x,m*=v.y,c+=w,d+=b,g=Dr(x),x=iv(g)}}return qm({width:u,height:m,x:c,y:d})}function Kf(e,s){const r=Hf(e).scrollLeft;return s?s.left+r:qo(ha(e)).left+r}function tk(e,s){const r=e.getBoundingClientRect(),n=r.left+s.scrollLeft-Kf(e,r),a=r.top+s.scrollTop;return{x:n,y:a}}function F5(e){let{elements:s,rect:r,offsetParent:n,strategy:a}=e;const i=a==="fixed",o=ha(n),l=s?Vf(s.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},d=aa(1);const u=aa(0),m=da(n);if((m||!m&&!i)&&((Kc(n)!=="body"||Vu(o))&&(c=Hf(n)),da(n))){const p=qo(n);d=Xl(n),u.x=p.x+n.clientLeft,u.y=p.y+n.clientTop}const h=o&&!m&&!i?tk(o,c):aa(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x+h.x,y:r.y*d.y-c.scrollTop*d.y+u.y+h.y}}function $5(e){return Array.from(e.getClientRects())}function U5(e){const s=ha(e),r=Hf(e),n=e.ownerDocument.body,a=Ar(s.scrollWidth,s.clientWidth,n.scrollWidth,n.clientWidth),i=Ar(s.scrollHeight,s.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+Kf(e);const l=-r.scrollTop;return Fn(n).direction==="rtl"&&(o+=Ar(s.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:l}}const bb=25;function B5(e,s){const r=Dr(e),n=ha(e),a=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const u=jj();(!u||u&&s==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}const d=Kf(n);if(d<=0){const u=n.ownerDocument,m=u.body,h=getComputedStyle(m),p=u.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,g=Math.abs(n.clientWidth-m.clientWidth-p);g<=bb&&(i-=g)}else d<=bb&&(i+=d);return{width:i,height:o,x:l,y:c}}const z5=new Set(["absolute","fixed"]);function q5(e,s){const r=qo(e,!0,s==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,i=da(e)?Xl(e):aa(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,d=n*i.y;return{width:o,height:l,x:c,y:d}}function Nb(e,s,r){let n;if(s==="viewport")n=B5(e,r);else if(s==="document")n=U5(ha(e));else if(Ln(s))n=q5(s,r);else{const a=ek(e);n={x:s.x-a.x,y:s.y-a.y,width:s.width,height:s.height}}return qm(n)}function sk(e,s){const r=Vi(e);return r===s||!Ln(r)||Sc(r)?!1:Fn(r).position==="fixed"||sk(r,s)}function W5(e,s){const r=s.get(e);if(r)return r;let n=ou(e,[],!1).filter(l=>Ln(l)&&Kc(l)!=="body"),a=null;const i=Fn(e).position==="fixed";let o=i?Vi(e):e;for(;Ln(o)&&!Sc(o);){const l=Fn(o),c=yj(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&z5.has(a.position)||Vu(o)&&!c&&sk(e,o))?n=n.filter(u=>u!==o):a=l,o=Vi(o)}return s.set(e,n),n}function V5(e){let{element:s,boundary:r,rootBoundary:n,strategy:a}=e;const o=[...r==="clippingAncestors"?Vf(s)?[]:W5(s,this._c):[].concat(r),n],l=o[0],c=o.reduce((d,u)=>{const m=Nb(s,u,a);return d.top=Ar(m.top,d.top),d.right=Wi(m.right,d.right),d.bottom=Wi(m.bottom,d.bottom),d.left=Ar(m.left,d.left),d},Nb(s,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function H5(e){const{width:s,height:r}=XS(e);return{width:s,height:r}}function K5(e,s,r){const n=da(s),a=ha(s),i=r==="fixed",o=qo(e,!0,i,s);let l={scrollLeft:0,scrollTop:0};const c=aa(0);function d(){c.x=Kf(a)}if(n||!n&&!i)if((Kc(s)!=="body"||Vu(a))&&(l=Hf(s)),n){const p=qo(s,!0,i,s);c.x=p.x+s.clientLeft,c.y=p.y+s.clientTop}else a&&d();i&&!n&&a&&d();const u=a&&!n&&!i?tk(a,l):aa(0),m=o.left+l.scrollLeft-c.x-u.x,h=o.top+l.scrollTop-c.y-u.y;return{x:m,y:h,width:o.width,height:o.height}}function fx(e){return Fn(e).position==="static"}function Cb(e,s){if(!da(e)||Fn(e).position==="fixed")return null;if(s)return s(e);let r=e.offsetParent;return ha(e)===r&&(r=r.ownerDocument.body),r}function rk(e,s){const r=Dr(e);if(Vf(e))return r;if(!da(e)){let a=Vi(e);for(;a&&!Sc(a);){if(Ln(a)&&!fx(a))return a;a=Vi(a)}return r}let n=Cb(e,s);for(;n&&A5(n)&&fx(n);)n=Cb(n,s);return n&&Sc(n)&&fx(n)&&!yj(n)?r:n||D5(e)||r}const G5=async function(e){const s=this.getOffsetParent||rk,r=this.getDimensions,n=await r(e.floating);return{reference:K5(e.reference,await s(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Y5(e){return Fn(e).direction==="rtl"}const Q5={convertOffsetParentRelativeRectToViewportRelativeRect:F5,getDocumentElement:ha,getClippingRect:V5,getOffsetParent:rk,getElementRects:G5,getClientRects:$5,getDimensions:H5,getScale:Xl,isElement:Ln,isRTL:Y5};function nk(e,s){return e.x===s.x&&e.y===s.y&&e.width===s.width&&e.height===s.height}function Z5(e,s){let r=null,n;const a=ha(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=e.getBoundingClientRect(),{left:u,top:m,width:h,height:p}=d;if(l||s(),!h||!p)return;const g=Rh(m),x=Rh(a.clientWidth-(u+h)),v=Rh(a.clientHeight-(m+p)),y=Rh(u),w={rootMargin:-g+"px "+-x+"px "+-v+"px "+-y+"px",threshold:Ar(0,Wi(1,c))||1};let b=!0;function N(_){const C=_[0].intersectionRatio;if(C!==c){if(!b)return o();C?o(!1,C):n=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!nk(d,e.getBoundingClientRect())&&o(),b=!1}try{r=new IntersectionObserver(N,{...w,root:a.ownerDocument})}catch{r=new IntersectionObserver(N,w)}r.observe(e)}return o(!0),i}function J5(e,s,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=wj(e),u=a||i?[...d?ou(d):[],...ou(s)]:[];u.forEach(y=>{a&&y.addEventListener("scroll",r,{passive:!0}),i&&y.addEventListener("resize",r)});const m=d&&l?Z5(d,r):null;let h=-1,p=null;o&&(p=new ResizeObserver(y=>{let[j]=y;j&&j.target===d&&p&&(p.unobserve(s),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(s)})),r()}),d&&!c&&p.observe(d),p.observe(s));let g,x=c?qo(e):null;c&&v();function v(){const y=qo(e);x&&!nk(x,y)&&r(),x=y,g=requestAnimationFrame(v)}return r(),()=>{var y;u.forEach(j=>{a&&j.removeEventListener("scroll",r),i&&j.removeEventListener("resize",r)}),m==null||m(),(y=p)==null||y.disconnect(),p=null,c&&cancelAnimationFrame(g)}}const X5=N5,e3=C5,t3=j5,s3=S5,r3=w5,_b=y5,n3=_5,a3=(e,s,r)=>{const n=new Map,a={platform:Q5,...r},i={...a.platform,_c:n};return v5(e,s,{...a,platform:i})};var i3=typeof document<"u",o3=function(){},am=i3?f.useLayoutEffect:o3;function Wm(e,s){if(e===s)return!0;if(typeof e!=typeof s)return!1;if(typeof e=="function"&&e.toString()===s.toString())return!0;let r,n,a;if(e&&s&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==s.length)return!1;for(n=r;n--!==0;)if(!Wm(e[n],s[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(s).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(s,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&e.$$typeof)&&!Wm(e[i],s[i]))return!1}return!0}return e!==e&&s!==s}function ak(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Sb(e,s){const r=ak(e);return Math.round(s*r)/r}function px(e){const s=f.useRef(e);return am(()=>{s.current=e}),s}function l3(e){e===void 0&&(e={});const{placement:s="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,m]=f.useState({x:0,y:0,strategy:r,placement:s,middlewareData:{},isPositioned:!1}),[h,p]=f.useState(n);Wm(h,n)||p(n);const[g,x]=f.useState(null),[v,y]=f.useState(null),j=f.useCallback(D=>{D!==_.current&&(_.current=D,x(D))},[]),w=f.useCallback(D=>{D!==C.current&&(C.current=D,y(D))},[]),b=i||g,N=o||v,_=f.useRef(null),C=f.useRef(null),E=f.useRef(u),k=c!=null,A=px(c),L=px(a),H=px(d),F=f.useCallback(()=>{if(!_.current||!C.current)return;const D={placement:s,strategy:r,middleware:h};L.current&&(D.platform=L.current),a3(_.current,C.current,D).then(q=>{const re={...q,isPositioned:H.current!==!1};I.current&&!Wm(E.current,re)&&(E.current=re,sl.flushSync(()=>{m(re)}))})},[h,s,r,L,H]);am(()=>{d===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,m(D=>({...D,isPositioned:!1})))},[d]);const I=f.useRef(!1);am(()=>(I.current=!0,()=>{I.current=!1}),[]),am(()=>{if(b&&(_.current=b),N&&(C.current=N),b&&N){if(A.current)return A.current(b,N,F);F()}},[b,N,F,A,k]);const G=f.useMemo(()=>({reference:_,floating:C,setReference:j,setFloating:w}),[j,w]),ee=f.useMemo(()=>({reference:b,floating:N}),[b,N]),K=f.useMemo(()=>{const D={position:r,left:0,top:0};if(!ee.floating)return D;const q=Sb(ee.floating,u.x),re=Sb(ee.floating,u.y);return l?{...D,transform:"translate("+q+"px, "+re+"px)",...ak(ee.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:q,top:re}},[r,l,ee.floating,u.x,u.y]);return f.useMemo(()=>({...u,update:F,refs:G,elements:ee,floatingStyles:K}),[u,F,G,ee,K])}const c3=e=>{function s(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&s(n)?n.current!=null?_b({element:n.current,padding:a}).fn(r):{}:n?_b({element:n,padding:a}).fn(r):{}}}},d3=(e,s)=>({...X5(e),options:[e,s]}),u3=(e,s)=>({...e3(e),options:[e,s]}),h3=(e,s)=>({...n3(e),options:[e,s]}),m3=(e,s)=>({...t3(e),options:[e,s]}),f3=(e,s)=>({...s3(e),options:[e,s]}),p3=(e,s)=>({...r3(e),options:[e,s]}),x3=(e,s)=>({...c3(e),options:[e,s]});var g3="Arrow",ik=f.forwardRef((e,s)=>{const{children:r,width:n=10,height:a=5,...i}=e;return t.jsx(Se.svg,{...i,ref:s,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:t.jsx("polygon",{points:"0,0 30,0 15,10"})})});ik.displayName=g3;var v3=ik;function Gf(e){const[s,r]=f.useState(void 0);return hs(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),s}var bj="Popper",[ok,Xi]=ks(bj),[y3,lk]=ok(bj),ck=e=>{const{__scopePopper:s,children:r}=e,[n,a]=f.useState(null);return t.jsx(y3,{scope:s,anchor:n,onAnchorChange:a,children:r})};ck.displayName=bj;var dk="PopperAnchor",uk=f.forwardRef((e,s)=>{const{__scopePopper:r,virtualRef:n,...a}=e,i=lk(dk,r),o=f.useRef(null),l=Ve(s,o),c=f.useRef(null);return f.useEffect(()=>{const d=c.current;c.current=(n==null?void 0:n.current)||o.current,d!==c.current&&i.onAnchorChange(c.current)}),n?null:t.jsx(Se.div,{...a,ref:l})});uk.displayName=dk;var Nj="PopperContent",[j3,w3]=ok(Nj),hk=f.forwardRef((e,s)=>{var X,xe,ve,Ae,Be,et;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:m="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:g,...x}=e,v=lk(Nj,r),[y,j]=f.useState(null),w=Ve(s,as=>j(as)),[b,N]=f.useState(null),_=Gf(b),C=(_==null?void 0:_.width)??0,E=(_==null?void 0:_.height)??0,k=n+(i!=="center"?"-"+i:""),A=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},L=Array.isArray(d)?d:[d],H=L.length>0,F={padding:A,boundary:L.filter(N3),altBoundary:H},{refs:I,floatingStyles:G,placement:ee,isPositioned:K,middlewareData:D}=l3({strategy:"fixed",placement:k,whileElementsMounted:(...as)=>J5(...as,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[d3({mainAxis:a+E,alignmentAxis:o}),c&&u3({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?h3():void 0,...F}),c&&m3({...F}),f3({...F,apply:({elements:as,rects:Es,availableWidth:Qr,availableHeight:fr})=>{const{width:be,height:ke}=Es.reference,jt=as.floating.style;jt.setProperty("--radix-popper-available-width",`${Qr}px`),jt.setProperty("--radix-popper-available-height",`${fr}px`),jt.setProperty("--radix-popper-anchor-width",`${be}px`),jt.setProperty("--radix-popper-anchor-height",`${ke}px`)}}),b&&x3({element:b,padding:l}),C3({arrowWidth:C,arrowHeight:E}),h&&p3({strategy:"referenceHidden",...F})]}),[q,re]=pk(ee),S=ds(g);hs(()=>{K&&(S==null||S())},[K,S]);const R=(X=D.arrow)==null?void 0:X.x,te=(xe=D.arrow)==null?void 0:xe.y,Q=((ve=D.arrow)==null?void 0:ve.centerOffset)!==0,[Y,oe]=f.useState();return hs(()=>{y&&oe(window.getComputedStyle(y).zIndex)},[y]),t.jsx("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:K?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Y,"--radix-popper-transform-origin":[(Ae=D.transformOrigin)==null?void 0:Ae.x,(Be=D.transformOrigin)==null?void 0:Be.y].join(" "),...((et=D.hide)==null?void 0:et.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:t.jsx(j3,{scope:r,placedSide:q,onArrowChange:N,arrowX:R,arrowY:te,shouldHideArrow:Q,children:t.jsx(Se.div,{"data-side":q,"data-align":re,...x,ref:w,style:{...x.style,animation:K?void 0:"none"}})})})});hk.displayName=Nj;var mk="PopperArrow",b3={top:"bottom",right:"left",bottom:"top",left:"right"},fk=f.forwardRef(function(s,r){const{__scopePopper:n,...a}=s,i=w3(mk,n),o=b3[i.placedSide];return t.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:t.jsx(v3,{...a,ref:r,style:{...a.style,display:"block"}})})});fk.displayName=mk;function N3(e){return e!==null}var C3=e=>({name:"transformOrigin",options:e,fn(s){var v,y,j;const{placement:r,rects:n,middlewareData:a}=s,o=((v=a.arrow)==null?void 0:v.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[d,u]=pk(r),m={start:"0%",center:"50%",end:"100%"}[u],h=(((y=a.arrow)==null?void 0:y.x)??0)+l/2,p=(((j=a.arrow)==null?void 0:j.y)??0)+c/2;let g="",x="";return d==="bottom"?(g=o?m:`${h}px`,x=`${-c}px`):d==="top"?(g=o?m:`${h}px`,x=`${n.floating.height+c}px`):d==="right"?(g=`${-c}px`,x=o?m:`${p}px`):d==="left"&&(g=`${n.floating.width+c}px`,x=o?m:`${p}px`),{data:{x:g,y:x}}}});function pk(e){const[s,r="center"]=e.split("-");return[s,r]}var Cj=ck,Hu=uk,Yf=hk,Qf=fk,[Zf]=ks("Tooltip",[Xi]),_j=Xi(),xk="TooltipProvider",_3=700,kb="tooltip.open",[S3,gk]=Zf(xk),vk=e=>{const{__scopeTooltip:s,delayDuration:r=_3,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=e,o=f.useRef(!0),l=f.useRef(!1),c=f.useRef(0);return f.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),t.jsx(S3,{scope:s,isOpenDelayedRef:o,delayDuration:r,onOpen:f.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:f.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:f.useCallback(d=>{l.current=d},[]),disableHoverableContent:a,children:i})};vk.displayName=xk;var yk="Tooltip",[uZ,Jf]=Zf(yk),ov="TooltipTrigger",k3=f.forwardRef((e,s)=>{const{__scopeTooltip:r,...n}=e,a=Jf(ov,r),i=gk(ov,r),o=_j(r),l=f.useRef(null),c=Ve(s,l,a.onTriggerChange),d=f.useRef(!1),u=f.useRef(!1),m=f.useCallback(()=>d.current=!1,[]);return f.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),t.jsx(Hu,{asChild:!0,...o,children:t.jsx(Se.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:de(e.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:de(e.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:de(e.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:de(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:de(e.onBlur,a.onClose),onClick:de(e.onClick,a.onClose)})})});k3.displayName=ov;var E3="TooltipPortal",[hZ,A3]=Zf(E3,{forceMount:void 0}),kc="TooltipContent",jk=f.forwardRef((e,s)=>{const r=A3(kc,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...i}=e,o=Jf(kc,e.__scopeTooltip);return t.jsx(js,{present:n||o.open,children:o.disableHoverableContent?t.jsx(wk,{side:a,...i,ref:s}):t.jsx(T3,{side:a,...i,ref:s})})}),T3=f.forwardRef((e,s)=>{const r=Jf(kc,e.__scopeTooltip),n=gk(kc,e.__scopeTooltip),a=f.useRef(null),i=Ve(s,a),[o,l]=f.useState(null),{trigger:c,onClose:d}=r,u=a.current,{onPointerInTransitChange:m}=n,h=f.useCallback(()=>{l(null),m(!1)},[m]),p=f.useCallback((g,x)=>{const v=g.currentTarget,y={x:g.clientX,y:g.clientY},j=O3(y,v.getBoundingClientRect()),w=M3(y,j),b=L3(x.getBoundingClientRect()),N=$3([...w,...b]);l(N),m(!0)},[m]);return f.useEffect(()=>()=>h(),[h]),f.useEffect(()=>{if(c&&u){const g=v=>p(v,u),x=v=>p(v,c);return c.addEventListener("pointerleave",g),u.addEventListener("pointerleave",x),()=>{c.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",x)}}},[c,u,p,h]),f.useEffect(()=>{if(o){const g=x=>{const v=x.target,y={x:x.clientX,y:x.clientY},j=(c==null?void 0:c.contains(v))||(u==null?void 0:u.contains(v)),w=!F3(y,o);j?h():w&&(h(),d())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,u,o,d,h]),t.jsx(wk,{...e,ref:i})}),[P3,R3]=Zf(yk,{isInside:!1}),I3=eS("TooltipContent"),wk=f.forwardRef((e,s)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=Jf(kc,r),d=_j(r),{onClose:u}=c;return f.useEffect(()=>(document.addEventListener(kb,u),()=>document.removeEventListener(kb,u)),[u]),f.useEffect(()=>{if(c.trigger){const m=h=>{const p=h.target;p!=null&&p.contains(c.trigger)&&u()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,u]),t.jsx(rl,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:m=>m.preventDefault(),onDismiss:u,children:t.jsxs(Yf,{"data-state":c.stateAttribute,...d,...l,ref:s,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[t.jsx(I3,{children:n}),t.jsx(P3,{scope:r,isInside:!0,children:t.jsx(XD,{id:c.contentId,role:"tooltip",children:a||n})})]})})});jk.displayName=kc;var bk="TooltipArrow",D3=f.forwardRef((e,s)=>{const{__scopeTooltip:r,...n}=e,a=_j(r);return R3(bk,r).isInside?null:t.jsx(Qf,{...a,...n,ref:s})});D3.displayName=bk;function O3(e,s){const r=Math.abs(s.top-e.y),n=Math.abs(s.bottom-e.y),a=Math.abs(s.right-e.x),i=Math.abs(s.left-e.x);switch(Math.min(r,n,a,i)){case i:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function M3(e,s,r=5){const n=[];switch(s){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function L3(e){const{top:s,right:r,bottom:n,left:a}=e;return[{x:a,y:s},{x:r,y:s},{x:r,y:n},{x:a,y:n}]}function F3(e,s){const{x:r,y:n}=e;let a=!1;for(let i=0,o=s.length-1;i<s.length;o=i++){const l=s[i],c=s[o],d=l.x,u=l.y,m=c.x,h=c.y;u>n!=h>n&&r<(m-d)*(n-u)/(h-u)+d&&(a=!a)}return a}function $3(e){const s=e.slice();return s.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),U3(s)}function U3(e){if(e.length<=1)return e.slice();const s=[];for(let n=0;n<e.length;n++){const a=e[n];for(;s.length>=2;){const i=s[s.length-1],o=s[s.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))s.pop();else break}s.push(a)}s.pop();const r=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),s.length===1&&r.length===1&&s[0].x===r[0].x&&s[0].y===r[0].y?s:s.concat(r)}var B3=vk,Nk=jk;const z3=B3,q3=f.forwardRef(({className:e,sideOffset:s=4,...r},n)=>t.jsx(Nk,{ref:n,sideOffset:s,className:J("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));q3.displayName=Nk.displayName;var Gc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},W3={setTimeout:(e,s)=>setTimeout(e,s),clearTimeout:e=>clearTimeout(e),setInterval:(e,s)=>setInterval(e,s),clearInterval:e=>clearInterval(e)},fi,uy,k1,V3=(k1=class{constructor(){De(this,fi,W3);De(this,uy,!1)}setTimeoutProvider(e){ge(this,fi,e)}setTimeout(e,s){return U(this,fi).setTimeout(e,s)}clearTimeout(e){U(this,fi).clearTimeout(e)}setInterval(e,s){return U(this,fi).setInterval(e,s)}clearInterval(e){U(this,fi).clearInterval(e)}},fi=new WeakMap,uy=new WeakMap,k1),wo=new V3;function H3(e){setTimeout(e,0)}var Wo=typeof window>"u"||"Deno"in globalThis;function rr(){}function K3(e,s){return typeof e=="function"?e(s):e}function lv(e){return typeof e=="number"&&e>=0&&e!==1/0}function Ck(e,s){return Math.max(e+(s||0)-Date.now(),0)}function Mi(e,s){return typeof e=="function"?e(s):e}function Jr(e,s){return typeof e=="function"?e(s):e}function Eb(e,s){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(s.queryHash!==Sj(o,s.options))return!1}else if(!lu(s.queryKey,o))return!1}if(r!=="all"){const c=s.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&s.isStale()!==l||a&&a!==s.state.fetchStatus||i&&!i(s))}function Ab(e,s){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!s.options.mutationKey)return!1;if(r){if(Vo(s.options.mutationKey)!==Vo(i))return!1}else if(!lu(s.options.mutationKey,i))return!1}return!(n&&s.state.status!==n||a&&!a(s))}function Sj(e,s){return((s==null?void 0:s.queryKeyHashFn)||Vo)(e)}function Vo(e){return JSON.stringify(e,(s,r)=>cv(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function lu(e,s){return e===s?!0:typeof e!=typeof s?!1:e&&s&&typeof e=="object"&&typeof s=="object"?Object.keys(s).every(r=>lu(e[r],s[r])):!1}var G3=Object.prototype.hasOwnProperty;function _k(e,s,r=0){if(e===s)return e;if(r>500)return s;const n=Tb(e)&&Tb(s);if(!n&&!(cv(e)&&cv(s)))return s;const i=(n?e:Object.keys(e)).length,o=n?s:Object.keys(s),l=o.length,c=n?new Array(l):{};let d=0;for(let u=0;u<l;u++){const m=n?u:o[u],h=e[m],p=s[m];if(h===p){c[m]=h,(n?u<i:G3.call(e,m))&&d++;continue}if(h===null||p===null||typeof h!="object"||typeof p!="object"){c[m]=p;continue}const g=_k(h,p,r+1);c[m]=g,g===h&&d++}return i===l&&d===i?e:c}function Vm(e,s){if(!s||Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}function Tb(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function cv(e){if(!Pb(e))return!1;const s=e.constructor;if(s===void 0)return!0;const r=s.prototype;return!(!Pb(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Pb(e){return Object.prototype.toString.call(e)==="[object Object]"}function Y3(e){return new Promise(s=>{wo.setTimeout(s,e)})}function dv(e,s,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,s):r.structuralSharing!==!1?_k(e,s):s}function Q3(e,s,r=0){const n=[...e,s];return r&&n.length>r?n.slice(1):n}function Z3(e,s,r=0){const n=[s,...e];return r&&n.length>r?n.slice(0,-1):n}var kj=Symbol();function Sk(e,s){return!e.queryFn&&(s!=null&&s.initialPromise)?()=>s.initialPromise:!e.queryFn||e.queryFn===kj?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Ej(e,s){return typeof e=="function"?e(...s):!!e}function J3(e,s,r){let n=!1,a;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(a??(a=s()),n||(n=!0,a.aborted?r():a.addEventListener("abort",r,{once:!0})),a)}),e}var No,pi,nc,E1,X3=(E1=class extends Gc{constructor(){super();De(this,No);De(this,pi);De(this,nc);ge(this,nc,s=>{if(!Wo&&window.addEventListener){const r=()=>s();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){U(this,pi)||this.setEventListener(U(this,nc))}onUnsubscribe(){var s;this.hasListeners()||((s=U(this,pi))==null||s.call(this),ge(this,pi,void 0))}setEventListener(s){var r;ge(this,nc,s),(r=U(this,pi))==null||r.call(this),ge(this,pi,s(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(s){U(this,No)!==s&&(ge(this,No,s),this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(r=>{r(s)})}isFocused(){var s;return typeof U(this,No)=="boolean"?U(this,No):((s=globalThis.document)==null?void 0:s.visibilityState)!=="hidden"}},No=new WeakMap,pi=new WeakMap,nc=new WeakMap,E1),Aj=new X3;function uv(){let e,s;const r=new Promise((a,i)=>{e=a,s=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),s(a)},r}var eL=H3;function tL(){let e=[],s=0,r=l=>{l()},n=l=>{l()},a=eL;const i=l=>{s?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;s++;try{c=l()}finally{s--,s||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var Cs=tL(),ac,xi,ic,A1,sL=(A1=class extends Gc{constructor(){super();De(this,ac,!0);De(this,xi);De(this,ic);ge(this,ic,s=>{if(!Wo&&window.addEventListener){const r=()=>s(!0),n=()=>s(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){U(this,xi)||this.setEventListener(U(this,ic))}onUnsubscribe(){var s;this.hasListeners()||((s=U(this,xi))==null||s.call(this),ge(this,xi,void 0))}setEventListener(s){var r;ge(this,ic,s),(r=U(this,xi))==null||r.call(this),ge(this,xi,s(this.setOnline.bind(this)))}setOnline(s){U(this,ac)!==s&&(ge(this,ac,s),this.listeners.forEach(n=>{n(s)}))}isOnline(){return U(this,ac)}},ac=new WeakMap,xi=new WeakMap,ic=new WeakMap,A1),Hm=new sL;function rL(e){return Math.min(1e3*2**e,3e4)}function kk(e){return(e??"online")==="online"?Hm.isOnline():!0}var hv=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Ek(e){let s=!1,r=0,n;const a=uv(),i=()=>a.status!=="pending",o=x=>{var v;if(!i()){const y=new hv(x);h(y),(v=e.onCancel)==null||v.call(e,y)}},l=()=>{s=!0},c=()=>{s=!1},d=()=>Aj.isFocused()&&(e.networkMode==="always"||Hm.isOnline())&&e.canRun(),u=()=>kk(e.networkMode)&&e.canRun(),m=x=>{i()||(n==null||n(),a.resolve(x))},h=x=>{i()||(n==null||n(),a.reject(x))},p=()=>new Promise(x=>{var v;n=y=>{(i()||d())&&x(y)},(v=e.onPause)==null||v.call(e)}).then(()=>{var x;n=void 0,i()||(x=e.onContinue)==null||x.call(e)}),g=()=>{if(i())return;let x;const v=r===0?e.initialPromise:void 0;try{x=v??e.fn()}catch(y){x=Promise.reject(y)}Promise.resolve(x).then(m).catch(y=>{var _;if(i())return;const j=e.retry??(Wo?0:3),w=e.retryDelay??rL,b=typeof w=="function"?w(r,y):w,N=j===!0||typeof j=="number"&&r<j||typeof j=="function"&&j(r,y);if(s||!N){h(y);return}r++,(_=e.onFail)==null||_.call(e,r,y),Y3(b).then(()=>d()?void 0:p()).then(()=>{s?h(y):g()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(n==null||n(),a),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?g():p().then(g),a)}}var Co,T1,Ak=(T1=class{constructor(){De(this,Co)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),lv(this.gcTime)&&ge(this,Co,wo.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Wo?1/0:5*60*1e3))}clearGcTimeout(){U(this,Co)&&(wo.clearTimeout(U(this,Co)),ge(this,Co,void 0))}},Co=new WeakMap,T1),_o,oc,Zr,So,As,ku,ko,Nn,wa,P1,nL=(P1=class extends Ak{constructor(s){super();De(this,Nn);De(this,_o);De(this,oc);De(this,Zr);De(this,So);De(this,As);De(this,ku);De(this,ko);ge(this,ko,!1),ge(this,ku,s.defaultOptions),this.setOptions(s.options),this.observers=[],ge(this,So,s.client),ge(this,Zr,U(this,So).getQueryCache()),this.queryKey=s.queryKey,this.queryHash=s.queryHash,ge(this,_o,Ib(this.options)),this.state=s.state??U(this,_o),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var s;return(s=U(this,As))==null?void 0:s.promise}setOptions(s){if(this.options={...U(this,ku),...s},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=Ib(this.options);r.data!==void 0&&(this.setState(Rb(r.data,r.dataUpdatedAt)),ge(this,_o,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&U(this,Zr).remove(this)}setData(s,r){const n=dv(this.state.data,s,this.options);return tt(this,Nn,wa).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(s,r){tt(this,Nn,wa).call(this,{type:"setState",state:s,setStateOptions:r})}cancel(s){var n,a;const r=(n=U(this,As))==null?void 0:n.promise;return(a=U(this,As))==null||a.cancel(s),r?r.then(rr).catch(rr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(U(this,_o))}isActive(){return this.observers.some(s=>Jr(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===kj||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(s=>Mi(s.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(s=0){return this.state.data===void 0?!0:s==="static"?!1:this.state.isInvalidated?!0:!Ck(this.state.dataUpdatedAt,s)}onFocus(){var r;const s=this.observers.find(n=>n.shouldFetchOnWindowFocus());s==null||s.refetch({cancelRefetch:!1}),(r=U(this,As))==null||r.continue()}onOnline(){var r;const s=this.observers.find(n=>n.shouldFetchOnReconnect());s==null||s.refetch({cancelRefetch:!1}),(r=U(this,As))==null||r.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),U(this,Zr).notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(r=>r!==s),this.observers.length||(U(this,As)&&(U(this,ko)?U(this,As).cancel({revert:!0}):U(this,As).cancelRetry()),this.scheduleGc()),U(this,Zr).notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||tt(this,Nn,wa).call(this,{type:"invalidate"})}async fetch(s,r){var c,d,u,m,h,p,g,x,v,y,j,w;if(this.state.fetchStatus!=="idle"&&((c=U(this,As))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(U(this,As))return U(this,As).continueRetry(),U(this,As).promise}if(s&&this.setOptions(s),!this.options.queryFn){const b=this.observers.find(N=>N.options.queryFn);b&&this.setOptions(b.options)}const n=new AbortController,a=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(ge(this,ko,!0),n.signal)})},i=()=>{const b=Sk(this.options,r),_=(()=>{const C={client:U(this,So),queryKey:this.queryKey,meta:this.meta};return a(C),C})();return ge(this,ko,!1),this.options.persister?this.options.persister(b,_,this):b(_)},l=(()=>{const b={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:U(this,So),state:this.state,fetchFn:i};return a(b),b})();(d=this.options.behavior)==null||d.onFetch(l,this),ge(this,oc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=l.fetchOptions)==null?void 0:u.meta))&&tt(this,Nn,wa).call(this,{type:"fetch",meta:(m=l.fetchOptions)==null?void 0:m.meta}),ge(this,As,Ek({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:b=>{b instanceof hv&&b.revert&&this.setState({...U(this,oc),fetchStatus:"idle"}),n.abort()},onFail:(b,N)=>{tt(this,Nn,wa).call(this,{type:"failed",failureCount:b,error:N})},onPause:()=>{tt(this,Nn,wa).call(this,{type:"pause"})},onContinue:()=>{tt(this,Nn,wa).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const b=await U(this,As).start();if(b===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(b),(p=(h=U(this,Zr).config).onSuccess)==null||p.call(h,b,this),(x=(g=U(this,Zr).config).onSettled)==null||x.call(g,b,this.state.error,this),b}catch(b){if(b instanceof hv){if(b.silent)return U(this,As).promise;if(b.revert){if(this.state.data===void 0)throw b;return this.state.data}}throw tt(this,Nn,wa).call(this,{type:"error",error:b}),(y=(v=U(this,Zr).config).onError)==null||y.call(v,b,this),(w=(j=U(this,Zr).config).onSettled)==null||w.call(j,this.state.data,b,this),b}finally{this.scheduleGc()}}},_o=new WeakMap,oc=new WeakMap,Zr=new WeakMap,So=new WeakMap,As=new WeakMap,ku=new WeakMap,ko=new WeakMap,Nn=new WeakSet,wa=function(s){const r=n=>{switch(s.type){case"failed":return{...n,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Tk(n.data,this.options),fetchMeta:s.meta??null};case"success":const a={...n,...Rb(s.data,s.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ge(this,oc,s.manual?a:void 0),a;case"error":const i=s.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...s.state}}};this.state=r(this.state),Cs.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),U(this,Zr).notify({query:this,type:"updated",action:s})})},P1);function Tk(e,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:kk(s.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Rb(e,s){return{data:e,dataUpdatedAt:s??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Ib(e){const s=typeof e.initialData=="function"?e.initialData():e.initialData,r=s!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var pr,lt,Eu,tr,Eo,lc,_a,gi,Au,cc,dc,Ao,To,vi,uc,xt,Cd,mv,fv,pv,xv,gv,vv,yv,Pk,R1,aL=(R1=class extends Gc{constructor(s,r){super();De(this,xt);De(this,pr);De(this,lt);De(this,Eu);De(this,tr);De(this,Eo);De(this,lc);De(this,_a);De(this,gi);De(this,Au);De(this,cc);De(this,dc);De(this,Ao);De(this,To);De(this,vi);De(this,uc,new Set);this.options=r,ge(this,pr,s),ge(this,gi,null),ge(this,_a,uv()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(U(this,lt).addObserver(this),Db(U(this,lt),this.options)?tt(this,xt,Cd).call(this):this.updateResult(),tt(this,xt,xv).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return jv(U(this,lt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return jv(U(this,lt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,tt(this,xt,gv).call(this),tt(this,xt,vv).call(this),U(this,lt).removeObserver(this)}setOptions(s){const r=this.options,n=U(this,lt);if(this.options=U(this,pr).defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Jr(this.options.enabled,U(this,lt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");tt(this,xt,yv).call(this),U(this,lt).setOptions(this.options),r._defaulted&&!Vm(this.options,r)&&U(this,pr).getQueryCache().notify({type:"observerOptionsUpdated",query:U(this,lt),observer:this});const a=this.hasListeners();a&&Ob(U(this,lt),n,this.options,r)&&tt(this,xt,Cd).call(this),this.updateResult(),a&&(U(this,lt)!==n||Jr(this.options.enabled,U(this,lt))!==Jr(r.enabled,U(this,lt))||Mi(this.options.staleTime,U(this,lt))!==Mi(r.staleTime,U(this,lt)))&&tt(this,xt,mv).call(this);const i=tt(this,xt,fv).call(this);a&&(U(this,lt)!==n||Jr(this.options.enabled,U(this,lt))!==Jr(r.enabled,U(this,lt))||i!==U(this,vi))&&tt(this,xt,pv).call(this,i)}getOptimisticResult(s){const r=U(this,pr).getQueryCache().build(U(this,pr),s),n=this.createResult(r,s);return oL(this,n)&&(ge(this,tr,n),ge(this,lc,this.options),ge(this,Eo,U(this,lt).state)),n}getCurrentResult(){return U(this,tr)}trackResult(s,r){return new Proxy(s,{get:(n,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&U(this,_a).status==="pending"&&U(this,_a).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(s){U(this,uc).add(s)}getCurrentQuery(){return U(this,lt)}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const r=U(this,pr).defaultQueryOptions(s),n=U(this,pr).getQueryCache().build(U(this,pr),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(s){return tt(this,xt,Cd).call(this,{...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),U(this,tr)))}createResult(s,r){var k;const n=U(this,lt),a=this.options,i=U(this,tr),o=U(this,Eo),l=U(this,lc),d=s!==n?s.state:U(this,Eu),{state:u}=s;let m={...u},h=!1,p;if(r._optimisticResults){const A=this.hasListeners(),L=!A&&Db(s,r),H=A&&Ob(s,n,r,a);(L||H)&&(m={...m,...Tk(u.data,s.options)}),r._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:g,errorUpdatedAt:x,status:v}=m;p=m.data;let y=!1;if(r.placeholderData!==void 0&&p===void 0&&v==="pending"){let A;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(A=i.data,y=!0):A=typeof r.placeholderData=="function"?r.placeholderData((k=U(this,dc))==null?void 0:k.state.data,U(this,dc)):r.placeholderData,A!==void 0&&(v="success",p=dv(i==null?void 0:i.data,A,r),h=!0)}if(r.select&&p!==void 0&&!y)if(i&&p===(o==null?void 0:o.data)&&r.select===U(this,Au))p=U(this,cc);else try{ge(this,Au,r.select),p=r.select(p),p=dv(i==null?void 0:i.data,p,r),ge(this,cc,p),ge(this,gi,null)}catch(A){ge(this,gi,A)}U(this,gi)&&(g=U(this,gi),p=U(this,cc),x=Date.now(),v="error");const j=m.fetchStatus==="fetching",w=v==="pending",b=v==="error",N=w&&j,_=p!==void 0,E={status:v,fetchStatus:m.fetchStatus,isPending:w,isSuccess:v==="success",isError:b,isInitialLoading:N,isLoading:N,data:p,dataUpdatedAt:m.dataUpdatedAt,error:g,errorUpdatedAt:x,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:j,isRefetching:j&&!w,isLoadingError:b&&!_,isPaused:m.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:b&&_,isStale:Tj(s,r),refetch:this.refetch,promise:U(this,_a),isEnabled:Jr(r.enabled,s)!==!1};if(this.options.experimental_prefetchInRender){const A=E.data!==void 0,L=E.status==="error"&&!A,H=G=>{L?G.reject(E.error):A&&G.resolve(E.data)},F=()=>{const G=ge(this,_a,E.promise=uv());H(G)},I=U(this,_a);switch(I.status){case"pending":s.queryHash===n.queryHash&&H(I);break;case"fulfilled":(L||E.data!==I.value)&&F();break;case"rejected":(!L||E.error!==I.reason)&&F();break}}return E}updateResult(){const s=U(this,tr),r=this.createResult(U(this,lt),this.options);if(ge(this,Eo,U(this,lt).state),ge(this,lc,this.options),U(this,Eo).data!==void 0&&ge(this,dc,U(this,lt)),Vm(r,s))return;ge(this,tr,r);const n=()=>{if(!s)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!U(this,uc).size)return!0;const o=new Set(i??U(this,uc));return this.options.throwOnError&&o.add("error"),Object.keys(U(this,tr)).some(l=>{const c=l;return U(this,tr)[c]!==s[c]&&o.has(c)})};tt(this,xt,Pk).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&tt(this,xt,xv).call(this)}},pr=new WeakMap,lt=new WeakMap,Eu=new WeakMap,tr=new WeakMap,Eo=new WeakMap,lc=new WeakMap,_a=new WeakMap,gi=new WeakMap,Au=new WeakMap,cc=new WeakMap,dc=new WeakMap,Ao=new WeakMap,To=new WeakMap,vi=new WeakMap,uc=new WeakMap,xt=new WeakSet,Cd=function(s){tt(this,xt,yv).call(this);let r=U(this,lt).fetch(this.options,s);return s!=null&&s.throwOnError||(r=r.catch(rr)),r},mv=function(){tt(this,xt,gv).call(this);const s=Mi(this.options.staleTime,U(this,lt));if(Wo||U(this,tr).isStale||!lv(s))return;const n=Ck(U(this,tr).dataUpdatedAt,s)+1;ge(this,Ao,wo.setTimeout(()=>{U(this,tr).isStale||this.updateResult()},n))},fv=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(U(this,lt)):this.options.refetchInterval)??!1},pv=function(s){tt(this,xt,vv).call(this),ge(this,vi,s),!(Wo||Jr(this.options.enabled,U(this,lt))===!1||!lv(U(this,vi))||U(this,vi)===0)&&ge(this,To,wo.setInterval(()=>{(this.options.refetchIntervalInBackground||Aj.isFocused())&&tt(this,xt,Cd).call(this)},U(this,vi)))},xv=function(){tt(this,xt,mv).call(this),tt(this,xt,pv).call(this,tt(this,xt,fv).call(this))},gv=function(){U(this,Ao)&&(wo.clearTimeout(U(this,Ao)),ge(this,Ao,void 0))},vv=function(){U(this,To)&&(wo.clearInterval(U(this,To)),ge(this,To,void 0))},yv=function(){const s=U(this,pr).getQueryCache().build(U(this,pr),this.options);if(s===U(this,lt))return;const r=U(this,lt);ge(this,lt,s),ge(this,Eu,s.state),this.hasListeners()&&(r==null||r.removeObserver(this),s.addObserver(this))},Pk=function(s){Cs.batch(()=>{s.listeners&&this.listeners.forEach(r=>{r(U(this,tr))}),U(this,pr).getQueryCache().notify({query:U(this,lt),type:"observerResultsUpdated"})})},R1);function iL(e,s){return Jr(s.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&s.retryOnMount===!1)}function Db(e,s){return iL(e,s)||e.state.data!==void 0&&jv(e,s,s.refetchOnMount)}function jv(e,s,r){if(Jr(s.enabled,e)!==!1&&Mi(s.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&Tj(e,s)}return!1}function Ob(e,s,r,n){return(e!==s||Jr(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Tj(e,r)}function Tj(e,s){return Jr(s.enabled,e)!==!1&&e.isStaleByTime(Mi(s.staleTime,e))}function oL(e,s){return!Vm(e.getCurrentResult(),s)}function Mb(e){return{onFetch:(s,r)=>{var u,m,h,p,g;const n=s.options,a=(h=(m=(u=s.fetchOptions)==null?void 0:u.meta)==null?void 0:m.fetchMore)==null?void 0:h.direction,i=((p=s.state.data)==null?void 0:p.pages)||[],o=((g=s.state.data)==null?void 0:g.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let x=!1;const v=w=>{J3(w,()=>s.signal,()=>x=!0)},y=Sk(s.options,s.fetchOptions),j=async(w,b,N)=>{if(x)return Promise.reject();if(b==null&&w.pages.length)return Promise.resolve(w);const C=(()=>{const L={client:s.client,queryKey:s.queryKey,pageParam:b,direction:N?"backward":"forward",meta:s.options.meta};return v(L),L})(),E=await y(C),{maxPages:k}=s.options,A=N?Z3:Q3;return{pages:A(w.pages,E,k),pageParams:A(w.pageParams,b,k)}};if(a&&i.length){const w=a==="backward",b=w?lL:Lb,N={pages:i,pageParams:o},_=b(n,N);l=await j(N,_,w)}else{const w=e??i.length;do{const b=c===0?o[0]??n.initialPageParam:Lb(n,l);if(c>0&&b==null)break;l=await j(l,b),c++}while(c<w)}return l};s.options.persister?s.fetchFn=()=>{var x,v;return(v=(x=s.options).persister)==null?void 0:v.call(x,d,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},r)}:s.fetchFn=d}}}function Lb(e,{pages:s,pageParams:r}){const n=s.length-1;return s.length>0?e.getNextPageParam(s[n],s,r[n],r):void 0}function lL(e,{pages:s,pageParams:r}){var n;return s.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,s[0],s,r[0],r):void 0}var Tu,Qn,Gs,Po,Zn,ai,I1,cL=(I1=class extends Ak{constructor(s){super();De(this,Zn);De(this,Tu);De(this,Qn);De(this,Gs);De(this,Po);ge(this,Tu,s.client),this.mutationId=s.mutationId,ge(this,Gs,s.mutationCache),ge(this,Qn,[]),this.state=s.state||Rk(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){U(this,Qn).includes(s)||(U(this,Qn).push(s),this.clearGcTimeout(),U(this,Gs).notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){ge(this,Qn,U(this,Qn).filter(r=>r!==s)),this.scheduleGc(),U(this,Gs).notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){U(this,Qn).length||(this.state.status==="pending"?this.scheduleGc():U(this,Gs).remove(this))}continue(){var s;return((s=U(this,Po))==null?void 0:s.continue())??this.execute(this.state.variables)}async execute(s){var o,l,c,d,u,m,h,p,g,x,v,y,j,w,b,N,_,C;const r=()=>{tt(this,Zn,ai).call(this,{type:"continue"})},n={client:U(this,Tu),meta:this.options.meta,mutationKey:this.options.mutationKey};ge(this,Po,Ek({fn:()=>this.options.mutationFn?this.options.mutationFn(s,n):Promise.reject(new Error("No mutationFn found")),onFail:(E,k)=>{tt(this,Zn,ai).call(this,{type:"failed",failureCount:E,error:k})},onPause:()=>{tt(this,Zn,ai).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>U(this,Gs).canRun(this)}));const a=this.state.status==="pending",i=!U(this,Po).canStart();try{if(a)r();else{tt(this,Zn,ai).call(this,{type:"pending",variables:s,isPaused:i}),U(this,Gs).config.onMutate&&await U(this,Gs).config.onMutate(s,this,n);const k=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,s,n));k!==this.state.context&&tt(this,Zn,ai).call(this,{type:"pending",context:k,variables:s,isPaused:i})}const E=await U(this,Po).start();return await((d=(c=U(this,Gs).config).onSuccess)==null?void 0:d.call(c,E,s,this.state.context,this,n)),await((m=(u=this.options).onSuccess)==null?void 0:m.call(u,E,s,this.state.context,n)),await((p=(h=U(this,Gs).config).onSettled)==null?void 0:p.call(h,E,null,this.state.variables,this.state.context,this,n)),await((x=(g=this.options).onSettled)==null?void 0:x.call(g,E,null,s,this.state.context,n)),tt(this,Zn,ai).call(this,{type:"success",data:E}),E}catch(E){try{await((y=(v=U(this,Gs).config).onError)==null?void 0:y.call(v,E,s,this.state.context,this,n))}catch(k){Promise.reject(k)}try{await((w=(j=this.options).onError)==null?void 0:w.call(j,E,s,this.state.context,n))}catch(k){Promise.reject(k)}try{await((N=(b=U(this,Gs).config).onSettled)==null?void 0:N.call(b,void 0,E,this.state.variables,this.state.context,this,n))}catch(k){Promise.reject(k)}try{await((C=(_=this.options).onSettled)==null?void 0:C.call(_,void 0,E,s,this.state.context,n))}catch(k){Promise.reject(k)}throw tt(this,Zn,ai).call(this,{type:"error",error:E}),E}finally{U(this,Gs).runNext(this)}}},Tu=new WeakMap,Qn=new WeakMap,Gs=new WeakMap,Po=new WeakMap,Zn=new WeakSet,ai=function(s){const r=n=>{switch(s.type){case"failed":return{...n,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...n,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:s.error,failureCount:n.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Cs.batch(()=>{U(this,Qn).forEach(n=>{n.onMutationUpdate(s)}),U(this,Gs).notify({mutation:this,type:"updated",action:s})})},I1);function Rk(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Sa,Cn,Pu,D1,dL=(D1=class extends Gc{constructor(s={}){super();De(this,Sa);De(this,Cn);De(this,Pu);this.config=s,ge(this,Sa,new Set),ge(this,Cn,new Map),ge(this,Pu,0)}build(s,r,n){const a=new cL({client:s,mutationCache:this,mutationId:++uh(this,Pu)._,options:s.defaultMutationOptions(r),state:n});return this.add(a),a}add(s){U(this,Sa).add(s);const r=Ih(s);if(typeof r=="string"){const n=U(this,Cn).get(r);n?n.push(s):U(this,Cn).set(r,[s])}this.notify({type:"added",mutation:s})}remove(s){if(U(this,Sa).delete(s)){const r=Ih(s);if(typeof r=="string"){const n=U(this,Cn).get(r);if(n)if(n.length>1){const a=n.indexOf(s);a!==-1&&n.splice(a,1)}else n[0]===s&&U(this,Cn).delete(r)}}this.notify({type:"removed",mutation:s})}canRun(s){const r=Ih(s);if(typeof r=="string"){const n=U(this,Cn).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===s}else return!0}runNext(s){var n;const r=Ih(s);if(typeof r=="string"){const a=(n=U(this,Cn).get(r))==null?void 0:n.find(i=>i!==s&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Cs.batch(()=>{U(this,Sa).forEach(s=>{this.notify({type:"removed",mutation:s})}),U(this,Sa).clear(),U(this,Cn).clear()})}getAll(){return Array.from(U(this,Sa))}find(s){const r={exact:!0,...s};return this.getAll().find(n=>Ab(r,n))}findAll(s={}){return this.getAll().filter(r=>Ab(s,r))}notify(s){Cs.batch(()=>{this.listeners.forEach(r=>{r(s)})})}resumePausedMutations(){const s=this.getAll().filter(r=>r.state.isPaused);return Cs.batch(()=>Promise.all(s.map(r=>r.continue().catch(rr))))}},Sa=new WeakMap,Cn=new WeakMap,Pu=new WeakMap,D1);function Ih(e){var s;return(s=e.options.scope)==null?void 0:s.id}var ka,yi,xr,Ea,Ia,im,wv,O1,uL=(O1=class extends Gc{constructor(r,n){super();De(this,Ia);De(this,ka);De(this,yi);De(this,xr);De(this,Ea);ge(this,ka,r),this.setOptions(n),this.bindMethods(),tt(this,Ia,im).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=U(this,ka).defaultMutationOptions(r),Vm(this.options,n)||U(this,ka).getMutationCache().notify({type:"observerOptionsUpdated",mutation:U(this,xr),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Vo(n.mutationKey)!==Vo(this.options.mutationKey)?this.reset():((a=U(this,xr))==null?void 0:a.state.status)==="pending"&&U(this,xr).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=U(this,xr))==null||r.removeObserver(this)}onMutationUpdate(r){tt(this,Ia,im).call(this),tt(this,Ia,wv).call(this,r)}getCurrentResult(){return U(this,yi)}reset(){var r;(r=U(this,xr))==null||r.removeObserver(this),ge(this,xr,void 0),tt(this,Ia,im).call(this),tt(this,Ia,wv).call(this)}mutate(r,n){var a;return ge(this,Ea,n),(a=U(this,xr))==null||a.removeObserver(this),ge(this,xr,U(this,ka).getMutationCache().build(U(this,ka),this.options)),U(this,xr).addObserver(this),U(this,xr).execute(r)}},ka=new WeakMap,yi=new WeakMap,xr=new WeakMap,Ea=new WeakMap,Ia=new WeakSet,im=function(){var n;const r=((n=U(this,xr))==null?void 0:n.state)??Rk();ge(this,yi,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},wv=function(r){Cs.batch(()=>{var n,a,i,o,l,c,d,u;if(U(this,Ea)&&this.hasListeners()){const m=U(this,yi).variables,h=U(this,yi).context,p={client:U(this,ka),meta:this.options.meta,mutationKey:this.options.mutationKey};if((r==null?void 0:r.type)==="success"){try{(a=(n=U(this,Ea)).onSuccess)==null||a.call(n,r.data,m,h,p)}catch(g){Promise.reject(g)}try{(o=(i=U(this,Ea)).onSettled)==null||o.call(i,r.data,null,m,h,p)}catch(g){Promise.reject(g)}}else if((r==null?void 0:r.type)==="error"){try{(c=(l=U(this,Ea)).onError)==null||c.call(l,r.error,m,h,p)}catch(g){Promise.reject(g)}try{(u=(d=U(this,Ea)).onSettled)==null||u.call(d,void 0,r.error,m,h,p)}catch(g){Promise.reject(g)}}}this.listeners.forEach(m=>{m(U(this,yi))})})},O1),Jn,M1,hL=(M1=class extends Gc{constructor(s={}){super();De(this,Jn);this.config=s,ge(this,Jn,new Map)}build(s,r,n){const a=r.queryKey,i=r.queryHash??Sj(a,r);let o=this.get(i);return o||(o=new nL({client:s,queryKey:a,queryHash:i,options:s.defaultQueryOptions(r),state:n,defaultOptions:s.getQueryDefaults(a)}),this.add(o)),o}add(s){U(this,Jn).has(s.queryHash)||(U(this,Jn).set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const r=U(this,Jn).get(s.queryHash);r&&(s.destroy(),r===s&&U(this,Jn).delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){Cs.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return U(this,Jn).get(s)}getAll(){return[...U(this,Jn).values()]}find(s){const r={exact:!0,...s};return this.getAll().find(n=>Eb(r,n))}findAll(s={}){const r=this.getAll();return Object.keys(s).length>0?r.filter(n=>Eb(s,n)):r}notify(s){Cs.batch(()=>{this.listeners.forEach(r=>{r(s)})})}onFocus(){Cs.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){Cs.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},Jn=new WeakMap,M1),os,ji,wi,hc,mc,bi,fc,pc,L1,mL=(L1=class{constructor(e={}){De(this,os);De(this,ji);De(this,wi);De(this,hc);De(this,mc);De(this,bi);De(this,fc);De(this,pc);ge(this,os,e.queryCache||new hL),ge(this,ji,e.mutationCache||new dL),ge(this,wi,e.defaultOptions||{}),ge(this,hc,new Map),ge(this,mc,new Map),ge(this,bi,0)}mount(){uh(this,bi)._++,U(this,bi)===1&&(ge(this,fc,Aj.subscribe(async e=>{e&&(await this.resumePausedMutations(),U(this,os).onFocus())})),ge(this,pc,Hm.subscribe(async e=>{e&&(await this.resumePausedMutations(),U(this,os).onOnline())})))}unmount(){var e,s;uh(this,bi)._--,U(this,bi)===0&&((e=U(this,fc))==null||e.call(this),ge(this,fc,void 0),(s=U(this,pc))==null||s.call(this),ge(this,pc,void 0))}isFetching(e){return U(this,os).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return U(this,ji).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const s=this.defaultQueryOptions({queryKey:e});return(r=U(this,os).get(s.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const s=this.defaultQueryOptions(e),r=U(this,os).build(this,s),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Mi(s.staleTime,r))&&this.prefetchQuery(s),Promise.resolve(n))}getQueriesData(e){return U(this,os).findAll(e).map(({queryKey:s,state:r})=>{const n=r.data;return[s,n]})}setQueryData(e,s,r){const n=this.defaultQueryOptions({queryKey:e}),a=U(this,os).get(n.queryHash),i=a==null?void 0:a.state.data,o=K3(s,i);if(o!==void 0)return U(this,os).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,s,r){return Cs.batch(()=>U(this,os).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,s,r)]))}getQueryState(e){var r;const s=this.defaultQueryOptions({queryKey:e});return(r=U(this,os).get(s.queryHash))==null?void 0:r.state}removeQueries(e){const s=U(this,os);Cs.batch(()=>{s.findAll(e).forEach(r=>{s.remove(r)})})}resetQueries(e,s){const r=U(this,os);return Cs.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},s)))}cancelQueries(e,s={}){const r={revert:!0,...s},n=Cs.batch(()=>U(this,os).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(rr).catch(rr)}invalidateQueries(e,s={}){return Cs.batch(()=>(U(this,os).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},s)))}refetchQueries(e,s={}){const r={...s,cancelRefetch:s.cancelRefetch??!0},n=Cs.batch(()=>U(this,os).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(rr)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(rr)}fetchQuery(e){const s=this.defaultQueryOptions(e);s.retry===void 0&&(s.retry=!1);const r=U(this,os).build(this,s);return r.isStaleByTime(Mi(s.staleTime,r))?r.fetch(s):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(rr).catch(rr)}fetchInfiniteQuery(e){return e.behavior=Mb(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(rr).catch(rr)}ensureInfiniteQueryData(e){return e.behavior=Mb(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Hm.isOnline()?U(this,ji).resumePausedMutations():Promise.resolve()}getQueryCache(){return U(this,os)}getMutationCache(){return U(this,ji)}getDefaultOptions(){return U(this,wi)}setDefaultOptions(e){ge(this,wi,e)}setQueryDefaults(e,s){U(this,hc).set(Vo(e),{queryKey:e,defaultOptions:s})}getQueryDefaults(e){const s=[...U(this,hc).values()],r={};return s.forEach(n=>{lu(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,s){U(this,mc).set(Vo(e),{mutationKey:e,defaultOptions:s})}getMutationDefaults(e){const s=[...U(this,mc).values()],r={};return s.forEach(n=>{lu(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const s={...U(this,wi).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return s.queryHash||(s.queryHash=Sj(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===kj&&(s.enabled=!1),s}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...U(this,wi).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){U(this,os).clear(),U(this,ji).clear()}},os=new WeakMap,ji=new WeakMap,wi=new WeakMap,hc=new WeakMap,mc=new WeakMap,bi=new WeakMap,fc=new WeakMap,pc=new WeakMap,L1),Ik=f.createContext(void 0),ht=e=>{const s=f.useContext(Ik);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},fL=({client:e,children:s})=>(f.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),t.jsx(Ik.Provider,{value:e,children:s})),Dk=f.createContext(!1),pL=()=>f.useContext(Dk);Dk.Provider;function xL(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var gL=f.createContext(xL()),vL=()=>f.useContext(gL),yL=(e,s,r)=>{const n=r!=null&&r.state.error&&typeof e.throwOnError=="function"?Ej(e.throwOnError,[r.state.error,r]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||n)&&(s.isReset()||(e.retryOnMount=!1))},jL=e=>{f.useEffect(()=>{e.clearReset()},[e])},wL=({result:e,errorResetBoundary:s,throwOnError:r,query:n,suspense:a})=>e.isError&&!s.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||Ej(r,[e.error,n])),bL=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},NL=(e,s)=>e.isLoading&&e.isFetching&&!s,CL=(e,s)=>(e==null?void 0:e.suspense)&&s.isPending,Fb=(e,s,r)=>s.fetchOptimistic(e).catch(()=>{r.clearReset()});function _L(e,s,r){var h,p,g,x;const n=pL(),a=vL(),i=ht(),o=i.defaultQueryOptions(e);(p=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||p.call(h,o);const l=i.getQueryCache().get(o.queryHash);o._optimisticResults=n?"isRestoring":"optimistic",bL(o),yL(o,a,l),jL(a);const c=!i.getQueryCache().get(o.queryHash),[d]=f.useState(()=>new s(i,o)),u=d.getOptimisticResult(o),m=!n&&e.subscribed!==!1;if(f.useSyncExternalStore(f.useCallback(v=>{const y=m?d.subscribe(Cs.batchCalls(v)):rr;return d.updateResult(),y},[d,m]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),f.useEffect(()=>{d.setOptions(o)},[o,d]),CL(o,u))throw Fb(o,d,a);if(wL({result:u,errorResetBoundary:a,throwOnError:o.throwOnError,query:l,suspense:o.suspense}))throw u.error;if((x=(g=i.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||x.call(g,o,u),o.experimental_prefetchInRender&&!Wo&&NL(u,n)){const v=c?Fb(o,d,a):l==null?void 0:l.promise;v==null||v.catch(rr).finally(()=>{d.updateResult()})}return o.notifyOnChangeProps?u:d.trackResult(u)}function fe(e,s){return _L(e,aL)}function _t(e,s){const r=ht(),[n]=f.useState(()=>new uL(r,e));f.useEffect(()=>{n.setOptions(e)},[n,e]);const a=f.useSyncExternalStore(f.useCallback(o=>n.subscribe(Cs.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=f.useCallback((o,l)=>{n.mutate(o,l).catch(rr)},[n]);if(a.error&&Ej(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cu(){return cu=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cu.apply(this,arguments)}var Si;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Si||(Si={}));const $b="popstate";function SL(e){e===void 0&&(e={});function s(n,a){let{pathname:i,search:o,hash:l}=n.location;return bv("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Km(a)}return EL(s,r,null,e)}function Jt(e,s){if(e===!1||e===null||typeof e>"u")throw new Error(s)}function Pj(e,s){if(!e){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function kL(){return Math.random().toString(36).substr(2,8)}function Ub(e,s){return{usr:e.state,key:e.key,idx:s}}function bv(e,s,r,n){return r===void 0&&(r=null),cu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof s=="string"?Yc(s):s,{state:r,key:s&&s.key||n||kL()})}function Km(e){let{pathname:s="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function Yc(e){let s={};if(e){let r=e.indexOf("#");r>=0&&(s.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(s.search=e.substr(n),e=e.substr(0,n)),e&&(s.pathname=e)}return s}function EL(e,s,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=Si.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(cu({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function m(){l=Si.Pop;let v=u(),y=v==null?null:v-d;d=v,c&&c({action:l,location:x.location,delta:y})}function h(v,y){l=Si.Push;let j=bv(x.location,v,y);d=u()+1;let w=Ub(j,d),b=x.createHref(j);try{o.pushState(w,"",b)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;a.location.assign(b)}i&&c&&c({action:l,location:x.location,delta:1})}function p(v,y){l=Si.Replace;let j=bv(x.location,v,y);d=u();let w=Ub(j,d),b=x.createHref(j);o.replaceState(w,"",b),i&&c&&c({action:l,location:x.location,delta:0})}function g(v){let y=a.location.origin!=="null"?a.location.origin:a.location.href,j=typeof v=="string"?v:Km(v);return j=j.replace(/ $/,"%20"),Jt(y,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,y)}let x={get action(){return l},get location(){return e(a,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener($b,m),c=v,()=>{a.removeEventListener($b,m),c=null}},createHref(v){return s(a,v)},createURL:g,encodeLocation(v){let y=g(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:p,go(v){return o.go(v)}};return x}var Bb;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Bb||(Bb={}));function AL(e,s,r){return r===void 0&&(r="/"),TL(e,s,r)}function TL(e,s,r,n){let a=typeof s=="string"?Yc(s):s,i=Ec(a.pathname||"/",r);if(i==null)return null;let o=Ok(e);PL(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=zL(i);l=UL(o[c],d)}return l}function Ok(e,s,r,n){s===void 0&&(s=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Jt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=Li([n,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(Jt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Ok(i.children,s,u,d)),!(i.path==null&&!i.index)&&s.push({path:d,score:FL(d,i.index),routesMeta:u})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of Mk(i.path))a(i,o,c)}),s}function Mk(e){let s=e.split("/");if(s.length===0)return[];let[r,...n]=s,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=Mk(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function PL(e){e.sort((s,r)=>s.score!==r.score?r.score-s.score:$L(s.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const RL=/^:[\w-]+$/,IL=3,DL=2,OL=1,ML=10,LL=-2,zb=e=>e==="*";function FL(e,s){let r=e.split("/"),n=r.length;return r.some(zb)&&(n+=LL),s&&(n+=DL),r.filter(a=>!zb(a)).reduce((a,i)=>a+(RL.test(i)?IL:i===""?OL:ML),n)}function $L(e,s){return e.length===s.length&&e.slice(0,-1).every((n,a)=>n===s[a])?e[e.length-1]-s[s.length-1]:0}function UL(e,s,r){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=i==="/"?s:s.slice(i.length)||"/",m=Nv({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),h=c.route;if(!m)return null;Object.assign(a,m.params),o.push({params:a,pathname:Li([i,m.pathname]),pathnameBase:KL(Li([i,m.pathnameBase])),route:h}),m.pathnameBase!=="/"&&(i=Li([i,m.pathnameBase]))}return o}function Nv(e,s){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=BL(e.path,e.caseSensitive,e.end),a=s.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((d,u,m)=>{let{paramName:h,isOptional:p}=u;if(h==="*"){let x=l[m]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const g=l[m];return p&&!g?d[h]=void 0:d[h]=(g||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function BL(e,s,r){s===void 0&&(s=!1),r===void 0&&(r=!0),Pj(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,s?void 0:"i"),n]}function zL(e){try{return e.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return Pj(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),e}}function Ec(e,s){if(s==="/")return e;if(!e.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const qL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,WL=e=>qL.test(e);function VL(e,s){s===void 0&&(s="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Yc(e):e,i;if(r)if(WL(r))i=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),Pj(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?i=qb(r.substring(1),"/"):i=qb(r,s)}else i=s;return{pathname:i,search:GL(n),hash:YL(a)}}function qb(e,s){let r=s.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function xx(e,s,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function HL(e){return e.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function Rj(e,s){let r=HL(e);return s?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Ij(e,s,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Yc(e):(a=cu({},e),Jt(!a.pathname||!a.pathname.includes("?"),xx("?","pathname","search",a)),Jt(!a.pathname||!a.pathname.includes("#"),xx("#","pathname","hash",a)),Jt(!a.search||!a.search.includes("#"),xx("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let m=s.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),m-=1;a.pathname=h.join("/")}l=m>=0?s[m]:"/"}let c=VL(a,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const Li=e=>e.join("/").replace(/\/\/+/g,"/"),KL=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),GL=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,YL=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function QL(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Lk=["post","put","patch","delete"];new Set(Lk);const ZL=["get",...Lk];new Set(ZL);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function du(){return du=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},du.apply(this,arguments)}const Xf=f.createContext(null),Fk=f.createContext(null),Va=f.createContext(null),ep=f.createContext(null),Ha=f.createContext({outlet:null,matches:[],isDataRoute:!1}),$k=f.createContext(null);function JL(e,s){let{relative:r}=s===void 0?{}:s;Qc()||Jt(!1);let{basename:n,navigator:a}=f.useContext(Va),{hash:i,pathname:o,search:l}=tp(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:Li([n,o])),a.createHref({pathname:c,search:l,hash:i})}function Qc(){return f.useContext(ep)!=null}function Ws(){return Qc()||Jt(!1),f.useContext(ep).location}function Uk(e){f.useContext(Va).static||f.useLayoutEffect(e)}function Qe(){let{isDataRoute:e}=f.useContext(Ha);return e?uF():XL()}function XL(){Qc()||Jt(!1);let e=f.useContext(Xf),{basename:s,future:r,navigator:n}=f.useContext(Va),{matches:a}=f.useContext(Ha),{pathname:i}=Ws(),o=JSON.stringify(Rj(a,r.v7_relativeSplatPath)),l=f.useRef(!1);return Uk(()=>{l.current=!0}),f.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let m=Ij(d,JSON.parse(o),i,u.relative==="path");e==null&&s!=="/"&&(m.pathname=m.pathname==="/"?s:Li([s,m.pathname])),(u.replace?n.replace:n.push)(m,u.state,u)},[s,n,o,i,e])}function ma(){let{matches:e}=f.useContext(Ha),s=e[e.length-1];return s?s.params:{}}function tp(e,s){let{relative:r}=s===void 0?{}:s,{future:n}=f.useContext(Va),{matches:a}=f.useContext(Ha),{pathname:i}=Ws(),o=JSON.stringify(Rj(a,n.v7_relativeSplatPath));return f.useMemo(()=>Ij(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function eF(e,s){return tF(e,s)}function tF(e,s,r,n){Qc()||Jt(!1);let{navigator:a}=f.useContext(Va),{matches:i}=f.useContext(Ha),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Ws(),u;if(s){var m;let v=typeof s=="string"?Yc(s):s;c==="/"||(m=v.pathname)!=null&&m.startsWith(c)||Jt(!1),u=v}else u=d;let h=u.pathname||"/",p=h;if(c!=="/"){let v=c.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=AL(e,{pathname:p}),x=iF(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:Li([c,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:Li([c,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,r,n);return s&&x?f.createElement(ep.Provider,{value:{location:du({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Si.Pop}},x):x}function sF(){let e=dF(),s=QL(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},s),r?f.createElement("pre",{style:a},r):null,null)}const rF=f.createElement(sF,null);class nF extends f.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){console.error("React Router caught the following error during render",s,r)}render(){return this.state.error!==void 0?f.createElement(Ha.Provider,{value:this.props.routeContext},f.createElement($k.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function aF(e){let{routeContext:s,match:r,children:n}=e,a=f.useContext(Xf);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),f.createElement(Ha.Provider,{value:s},n)}function iF(e,s,r,n){var a;if(s===void 0&&(s=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&s.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let u=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);u>=0||Jt(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let m=o[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=u),m.route.id){let{loaderData:h,errors:p}=r,g=m.route.loader&&h[m.route.id]===void 0&&(!p||p[m.route.id]===void 0);if(m.route.lazy||g){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,m,h)=>{let p,g=!1,x=null,v=null;r&&(p=l&&m.route.id?l[m.route.id]:void 0,x=m.route.errorElement||rF,c&&(d<0&&h===0?(hF("route-fallback"),g=!0,v=null):d===h&&(g=!0,v=m.route.hydrateFallbackElement||null)));let y=s.concat(o.slice(0,h+1)),j=()=>{let w;return p?w=x:g?w=v:m.route.Component?w=f.createElement(m.route.Component,null):m.route.element?w=m.route.element:w=u,f.createElement(aF,{match:m,routeContext:{outlet:u,matches:y,isDataRoute:r!=null},children:w})};return r&&(m.route.ErrorBoundary||m.route.errorElement||h===0)?f.createElement(nF,{location:r.location,revalidation:r.revalidation,component:x,error:p,children:j(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):j()},null)}var Bk=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Bk||{}),zk=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(zk||{});function oF(e){let s=f.useContext(Xf);return s||Jt(!1),s}function lF(e){let s=f.useContext(Fk);return s||Jt(!1),s}function cF(e){let s=f.useContext(Ha);return s||Jt(!1),s}function qk(e){let s=cF(),r=s.matches[s.matches.length-1];return r.route.id||Jt(!1),r.route.id}function dF(){var e;let s=f.useContext($k),r=lF(),n=qk();return s!==void 0?s:(e=r.errors)==null?void 0:e[n]}function uF(){let{router:e}=oF(Bk.UseNavigateStable),s=qk(zk.UseNavigateStable),r=f.useRef(!1);return Uk(()=>{r.current=!0}),f.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,du({fromRouteId:s},i)))},[e,s])}const Wb={};function hF(e,s,r){Wb[e]||(Wb[e]=!0)}function mF(e,s){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Gm(e){let{to:s,replace:r,state:n,relative:a}=e;Qc()||Jt(!1);let{future:i,static:o}=f.useContext(Va),{matches:l}=f.useContext(Ha),{pathname:c}=Ws(),d=Qe(),u=Ij(s,Rj(l,i.v7_relativeSplatPath),c,a==="path"),m=JSON.stringify(u);return f.useEffect(()=>d(JSON.parse(m),{replace:r,state:n,relative:a}),[d,m,a,r,n]),null}function Re(e){Jt(!1)}function fF(e){let{basename:s="/",children:r=null,location:n,navigationType:a=Si.Pop,navigator:i,static:o=!1,future:l}=e;Qc()&&Jt(!1);let c=s.replace(/^\/*/,"/"),d=f.useMemo(()=>({basename:c,navigator:i,static:o,future:du({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=Yc(n));let{pathname:u="/",search:m="",hash:h="",state:p=null,key:g="default"}=n,x=f.useMemo(()=>{let v=Ec(u,c);return v==null?null:{location:{pathname:v,search:m,hash:h,state:p,key:g},navigationType:a}},[c,u,m,h,p,g,a]);return x==null?null:f.createElement(Va.Provider,{value:d},f.createElement(ep.Provider,{children:r,value:x}))}function Dj(e){let{children:s,location:r}=e;return eF(Cv(s),r)}new Promise(()=>{});function Cv(e,s){s===void 0&&(s=[]);let r=[];return f.Children.forEach(e,(n,a)=>{if(!f.isValidElement(n))return;let i=[...s,a];if(n.type===f.Fragment){r.push.apply(r,Cv(n.props.children,i));return}n.type!==Re&&Jt(!1),!n.props.index||!n.props.children||Jt(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Cv(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ym(){return Ym=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ym.apply(this,arguments)}function Wk(e,s){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(s.indexOf(a)>=0)&&(r[a]=e[a]);return r}function pF(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function xF(e,s){return e.button===0&&(!s||s==="_self")&&!pF(e)}function _v(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((s,r)=>{let n=e[r];return s.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function gF(e,s){let r=_v(e);return s&&s.forEach((n,a)=>{r.has(a)||s.getAll(a).forEach(i=>{r.append(a,i)})}),r}const vF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],yF=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],jF="6";try{window.__reactRouterVersion=jF}catch{}const wF=f.createContext({isTransitioning:!1}),bF="startTransition",Vb=jf[bF];function NF(e){let{basename:s,children:r,future:n,window:a}=e,i=f.useRef();i.current==null&&(i.current=SL({window:a,v5Compat:!0}));let o=i.current,[l,c]=f.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},u=f.useCallback(m=>{d&&Vb?Vb(()=>c(m)):c(m)},[c,d]);return f.useLayoutEffect(()=>o.listen(u),[o,u]),f.useEffect(()=>mF(n),[n]),f.createElement(fF,{basename:s,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const CF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_F=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qs=f.forwardRef(function(s,r){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:m}=s,h=Wk(s,vF),{basename:p}=f.useContext(Va),g,x=!1;if(typeof d=="string"&&_F.test(d)&&(g=d,CF))try{let w=new URL(window.location.href),b=d.startsWith("//")?new URL(w.protocol+d):new URL(d),N=Ec(b.pathname,p);b.origin===w.origin&&N!=null?d=N+b.search+b.hash:x=!0}catch{}let v=JL(d,{relative:a}),y=kF(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:a,viewTransition:m});function j(w){n&&n(w),w.defaultPrevented||y(w)}return f.createElement("a",Ym({},h,{href:g||v,onClick:x||i?n:j,ref:r,target:c}))}),Dh=f.forwardRef(function(s,r){let{"aria-current":n="page",caseSensitive:a=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:d,children:u}=s,m=Wk(s,yF),h=tp(c,{relative:m.relative}),p=Ws(),g=f.useContext(Fk),{navigator:x,basename:v}=f.useContext(Va),y=g!=null&&AF(h)&&d===!0,j=x.encodeLocation?x.encodeLocation(h).pathname:h.pathname,w=p.pathname,b=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;a||(w=w.toLowerCase(),b=b?b.toLowerCase():null,j=j.toLowerCase()),b&&v&&(b=Ec(b,v)||b);const N=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let _=w===j||!o&&w.startsWith(j)&&w.charAt(N)==="/",C=b!=null&&(b===j||!o&&b.startsWith(j)&&b.charAt(j.length)==="/"),E={isActive:_,isPending:C,isTransitioning:y},k=_?n:void 0,A;typeof i=="function"?A=i(E):A=[i,_?"active":null,C?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let L=typeof l=="function"?l(E):l;return f.createElement(Qs,Ym({},m,{"aria-current":k,className:A,ref:r,style:L,to:c,viewTransition:d}),typeof u=="function"?u(E):u)});var Sv;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Sv||(Sv={}));var Hb;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Hb||(Hb={}));function SF(e){let s=f.useContext(Xf);return s||Jt(!1),s}function kF(e,s){let{target:r,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=s===void 0?{}:s,c=Qe(),d=Ws(),u=tp(e,{relative:o});return f.useCallback(m=>{if(xF(m,r)){m.preventDefault();let h=n!==void 0?n:Km(d)===Km(u);c(e,{replace:h,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,n,a,r,e,i,o,l])}function EF(e){let s=f.useRef(_v(e)),r=f.useRef(!1),n=Ws(),a=f.useMemo(()=>gF(n.search,r.current?null:s.current),[n.search]),i=Qe(),o=f.useCallback((l,c)=>{const d=_v(typeof l=="function"?l(a):l);r.current=!0,i("?"+d,c)},[i,a]);return[a,o]}function AF(e,s){s===void 0&&(s={});let r=f.useContext(wF);r==null&&Jt(!1);let{basename:n}=SF(Sv.useViewTransitionState),a=tp(e,{relative:s.relative});if(!r.isTransitioning)return!1;let i=Ec(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Ec(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Nv(a.pathname,o)!=null||Nv(a.pathname,i)!=null}var ea=function(){return ea=Object.assign||function(s){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(s[i]=r[i])}return s},ea.apply(this,arguments)};function Zc(e,s){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&s.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)s.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function TF(e,s,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(m){o(m)}}function c(u){try{d(n.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,s||[])).next())})}function PF(e,s,r){if(r||arguments.length===2)for(var n=0,a=s.length,i;n<a;n++)(i||!(n in s))&&(i||(i=Array.prototype.slice.call(s,0,n)),i[n]=s[n]);return e.concat(i||Array.prototype.slice.call(s))}const RF=e=>e?(...s)=>e(...s):(...s)=>fetch(...s);class Oj extends Error{constructor(s,r="FunctionsError",n){super(s),this.name=r,this.context=n}}class IF extends Oj{constructor(s){super("Failed to send a request to the Edge Function","FunctionsFetchError",s)}}class Kb extends Oj{constructor(s){super("Relay Error invoking the Edge Function","FunctionsRelayError",s)}}class Gb extends Oj{constructor(s){super("Edge Function returned a non-2xx status code","FunctionsHttpError",s)}}var kv;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(kv||(kv={}));class DF{constructor(s,{headers:r={},customFetch:n,region:a=kv.Any}={}){this.url=s,this.headers=r,this.region=a,this.fetch=RF(n)}setAuth(s){this.headers.Authorization=`Bearer ${s}`}invoke(s){return TF(this,arguments,void 0,function*(r,n={}){var a;let i,o;try{const{headers:l,method:c,body:d,signal:u,timeout:m}=n;let h={},{region:p}=n;p||(p=this.region);const g=new URL(`${this.url}/${r}`);p&&p!=="any"&&(h["x-region"]=p,g.searchParams.set("forceFunctionRegion",p));let x;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",x=d):typeof d=="string"?(h["Content-Type"]="text/plain",x=d):typeof FormData<"u"&&d instanceof FormData?x=d:(h["Content-Type"]="application/json",x=JSON.stringify(d)):d&&typeof d!="string"&&!(typeof Blob<"u"&&d instanceof Blob)&&!(d instanceof ArrayBuffer)&&!(typeof FormData<"u"&&d instanceof FormData)?x=JSON.stringify(d):x=d;let v=u;m&&(o=new AbortController,i=setTimeout(()=>o.abort(),m),u?(v=o.signal,u.addEventListener("abort",()=>o.abort())):v=o.signal);const y=yield this.fetch(g.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),l),body:x,signal:v}).catch(N=>{throw new IF(N)}),j=y.headers.get("x-relay-error");if(j&&j==="true")throw new Kb(y);if(!y.ok)throw new Gb(y);let w=((a=y.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),b;return w==="application/json"?b=yield y.json():w==="application/octet-stream"||w==="application/pdf"?b=yield y.blob():w==="text/event-stream"?b=y:w==="multipart/form-data"?b=yield y.formData():b=yield y.text(),{data:b,error:null,response:y}}catch(l){return{data:null,error:l,response:l instanceof Gb||l instanceof Kb?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var OF=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},MF=class{constructor(e){var s,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(s=e.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=new Headers(this.headers),this.headers.set(e,s),this}then(e,s){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,c=null,d=i.status,u=i.statusText;if(i.ok){var m,h;if(r.method!=="HEAD"){var p;const y=await i.text();y===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((p=r.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?l=y:l=JSON.parse(y))}const x=(m=r.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),v=(h=i.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");x&&v&&v.length>1&&(c=parseInt(v[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,d=406,u="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var g;const x=await i.text();try{o=JSON.parse(x),Array.isArray(o)&&i.status===404&&(l=[],o=null,d=200,u="OK")}catch{i.status===404&&x===""?(d=204,u="No Content"):o={message:x}}if(o&&r.isMaybeSingle&&(!(o==null||(g=o.details)===null||g===void 0)&&g.includes("0 rows"))&&(o=null,d=200,u="OK"),o&&r.shouldThrowOnError)throw new OF(o)}return{error:o,data:l,count:c,status:d,statusText:u}});return this.shouldThrowOnError||(a=a.catch(i=>{var o;let l="";const c=i==null?void 0:i.cause;if(c){var d,u,m,h;const g=(d=c==null?void 0:c.message)!==null&&d!==void 0?d:"",x=(u=c==null?void 0:c.code)!==null&&u!==void 0?u:"";l=`${(m=i==null?void 0:i.name)!==null&&m!==void 0?m:"FetchError"}: ${i==null?void 0:i.message}`,l+=`

Caused by: ${(h=c==null?void 0:c.name)!==null&&h!==void 0?h:"Error"}: ${g}`,x&&(l+=` (${x})`),c!=null&&c.stack&&(l+=`
${c.stack}`)}else{var p;l=(p=i==null?void 0:i.stack)!==null&&p!==void 0?p:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(e,s)}returns(){return this}overrideTypes(){return this}},LF=class extends MF{select(e){let s=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!s?"":(n==='"'&&(s=!s),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:s=!0,nullsFirst:r,foreignTable:n,referencedTable:a=n}={}){const i=a?`${a}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${s?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:r=s}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,s,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:s=!1,settings:r=!1,buffers:n=!1,wal:a=!1,format:i="text"}={}){var o;const l=[e?"analyze":null,s?"verbose":null,r?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Yb=new RegExp("[,()]");var Nl=class extends LF{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}regexMatch(e,s){return this.url.searchParams.append(e,`match.${s}`),this}regexIMatch(e,s){return this.url.searchParams.append(e,`imatch.${s}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}isDistinct(e,s){return this.url.searchParams.append(e,`isdistinct.${s}`),this}in(e,s){const r=Array.from(new Set(s)).map(n=>typeof n=="string"&&Yb.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,s){const r=Array.from(new Set(s)).map(n=>typeof n=="string"&&Yb.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:r,type:n}={}){let a="";n==="plain"?a="pl":n==="phrase"?a="ph":n==="websearch"&&(a="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${i}.${s}`),this}match(e){return Object.entries(e).forEach(([s,r])=>{this.url.searchParams.append(s,`eq.${r}`)}),this}not(e,s,r){return this.url.searchParams.append(e,`not.${s}.${r}`),this}or(e,{foreignTable:s,referencedTable:r=s}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,s,r){return this.url.searchParams.append(e,`${s}.${r}`),this}},FF=class{constructor(e,{headers:s={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(s),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,s){const{head:r=!1,count:n}=s??{},a=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(d=>/\s/.test(d)&&!i?"":(d==='"'&&(i=!i),d)).join(""),{url:l,headers:c}=this.cloneRequestState();return l.searchParams.set("select",o),n&&c.append("Prefer",`count=${n}`),new Nl({method:a,url:l,headers:c,schema:this.schema,fetch:this.fetch})}insert(e,{count:s,defaultToNull:r=!0}={}){var n;const a="POST",{url:i,headers:o}=this.cloneRequestState();if(s&&o.append("Prefer",`count=${s}`),r||o.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(l.length>0){const c=[...new Set(l)].map(d=>`"${d}"`);i.searchParams.set("columns",c.join(","))}}return new Nl({method:a,url:i,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:s,ignoreDuplicates:r=!1,count:n,defaultToNull:a=!0}={}){var i;const o="POST",{url:l,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),s!==void 0&&l.searchParams.set("on_conflict",s),n&&c.append("Prefer",`count=${n}`),a||c.append("Prefer","missing=default"),Array.isArray(e)){const d=e.reduce((u,m)=>u.concat(Object.keys(m)),[]);if(d.length>0){const u=[...new Set(d)].map(m=>`"${m}"`);l.searchParams.set("columns",u.join(","))}}return new Nl({method:o,url:l,headers:c,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:s}={}){var r;const n="PATCH",{url:a,headers:i}=this.cloneRequestState();return s&&i.append("Prefer",`count=${s}`),new Nl({method:n,url:a,headers:i,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var s;const r="DELETE",{url:n,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new Nl({method:r,url:n,headers:a,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}},$F=class Vk{constructor(s,{headers:r={},schema:n,fetch:a}={}){this.url=s,this.headers=new Headers(r),this.schemaName=n,this.fetch=a}from(s){if(!s||typeof s!="string"||s.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new FF(new URL(`${this.url}/${s}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new Vk(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,r={},{head:n=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${s}`);let d;const u=p=>p!==null&&typeof p=="object"&&(!Array.isArray(p)||p.some(u)),m=n&&Object.values(r).some(u);m?(l="POST",d=r):n||a?(l=n?"HEAD":"GET",Object.entries(r).filter(([p,g])=>g!==void 0).map(([p,g])=>[p,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([p,g])=>{c.searchParams.append(p,g)})):(l="POST",d=r);const h=new Headers(this.headers);return m?h.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&h.set("Prefer",`count=${i}`),new Nl({method:l,url:c,headers:h,schema:this.schemaName,body:d,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class UF{constructor(){}static detectEnvironment(){var s;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((s=navigator.userAgent)===null||s===void 0)&&s.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const a=n.node,i=parseInt(a.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const s=this.detectEnvironment();if(s.constructor)return s.constructor;let r=s.error||"WebSocket not supported in this environment.";throw s.workaround&&(r+=`

Suggested solution: ${s.workaround}`),new Error(r)}static createWebSocket(s,r){const n=this.getWebSocketConstructor();return new n(s,r)}static isWebSocketSupported(){try{const s=this.detectEnvironment();return s.type==="native"||s.type==="ws"}catch{return!1}}}const BF="2.91.1",zF=`realtime-js/${BF}`,qF="1.0.0",Hk="2.0.0",Qb=Hk,Ev=1e4,WF=1e3,VF=100;var ci;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ci||(ci={}));var ws;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ws||(ws={}));var Sn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Sn||(Sn={}));var Av;(function(e){e.websocket="websocket"})(Av||(Av={}));var xo;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(xo||(xo={}));class HF{constructor(s){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=s??[]}encode(s,r){if(s.event===this.BROADCAST_EVENT&&!(s.payload instanceof ArrayBuffer)&&typeof s.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(s));let n=[s.join_ref,s.ref,s.topic,s.event,s.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(s){var r;return this._isArrayBuffer((r=s.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(s):this._encodeJsonUserBroadcastPush(s)}_encodeBinaryUserBroadcastPush(s){var r,n;const a=(n=(r=s.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(s,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(s){var r,n;const a=(n=(r=s.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(s,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(s,r,n){var a,i;const o=s.topic,l=(a=s.ref)!==null&&a!==void 0?a:"",c=(i=s.join_ref)!==null&&i!==void 0?i:"",d=s.payload.event,u=this.allowedMetadataKeys?this._pick(s.payload,this.allowedMetadataKeys):{},m=Object.keys(u).length===0?"":JSON.stringify(u);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`metadata length ${m.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+d.length+m.length,p=new ArrayBuffer(this.HEADER_LENGTH+h);let g=new DataView(p),x=0;g.setUint8(x++,this.KINDS.userBroadcastPush),g.setUint8(x++,c.length),g.setUint8(x++,l.length),g.setUint8(x++,o.length),g.setUint8(x++,d.length),g.setUint8(x++,m.length),g.setUint8(x++,r),Array.from(c,y=>g.setUint8(x++,y.charCodeAt(0))),Array.from(l,y=>g.setUint8(x++,y.charCodeAt(0))),Array.from(o,y=>g.setUint8(x++,y.charCodeAt(0))),Array.from(d,y=>g.setUint8(x++,y.charCodeAt(0))),Array.from(m,y=>g.setUint8(x++,y.charCodeAt(0)));var v=new Uint8Array(p.byteLength+n.byteLength);return v.set(new Uint8Array(p),0),v.set(new Uint8Array(n),p.byteLength),v.buffer}decode(s,r){if(this._isArrayBuffer(s)){let n=this._binaryDecode(s);return r(n)}if(typeof s=="string"){const n=JSON.parse(s),[a,i,o,l,c]=n;return r({join_ref:a,ref:i,topic:o,event:l,payload:c})}return r({})}_binaryDecode(s){const r=new DataView(s),n=r.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(s,r,a)}}_decodeUserBroadcast(s,r,n){const a=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const d=n.decode(s.slice(c,c+a));c=c+a;const u=n.decode(s.slice(c,c+i));c=c+i;const m=n.decode(s.slice(c,c+o));c=c+o;const h=s.slice(c,s.byteLength),p=l===this.JSON_ENCODING?JSON.parse(n.decode(h)):h,g={type:this.BROADCAST_EVENT,event:u,payload:p};return o>0&&(g.meta=JSON.parse(m)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:g}}_isArrayBuffer(s){var r;return s instanceof ArrayBuffer||((r=s==null?void 0:s.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(s,r){return!s||typeof s!="object"?{}:Object.fromEntries(Object.entries(s).filter(([n])=>r.includes(n)))}}class Kk{constructor(s,r){this.callback=s,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=s,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Et;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Et||(Et={}));const Zb=(e,s,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return s?Object.keys(s).reduce((i,o)=>(i[o]=KF(o,e,s,a),i),{}):{}},KF=(e,s,r,n)=>{const a=s.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!n.includes(i)?Gk(i,o):Tv(o)},Gk=(e,s)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return ZF(s,r)}switch(e){case Et.bool:return GF(s);case Et.float4:case Et.float8:case Et.int2:case Et.int4:case Et.int8:case Et.numeric:case Et.oid:return YF(s);case Et.json:case Et.jsonb:return QF(s);case Et.timestamp:return JF(s);case Et.abstime:case Et.date:case Et.daterange:case Et.int4range:case Et.int8range:case Et.money:case Et.reltime:case Et.text:case Et.time:case Et.timestamptz:case Et.timetz:case Et.tsrange:case Et.tstzrange:return Tv(s);default:return Tv(s)}},Tv=e=>e,GF=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},YF=e=>{if(typeof e=="string"){const s=parseFloat(e);if(!Number.isNaN(s))return s}return e},QF=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},ZF=(e,s)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Gk(s,l))}return e},JF=e=>typeof e=="string"?e.replace(" ","T"):e,Yk=e=>{const s=new URL(e);return s.protocol=s.protocol.replace(/^ws/i,"http"),s.pathname=s.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),s.pathname===""||s.pathname==="/"?s.pathname="/api/broadcast":s.pathname=s.pathname+"/api/broadcast",s.href};class gx{constructor(s,r,n={},a=Ev){this.channel=s,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(s){this.timeout=s,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(s){this.payload=Object.assign(Object.assign({},this.payload),s)}receive(s,r){var n;return this._hasReceived(s)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:s,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const s=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},s),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(s,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:s,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:s,response:r}){this.recHooks.filter(n=>n.status===s).forEach(n=>n.callback(r))}_hasReceived(s){return this.receivedResp&&this.receivedResp.status===s}}var Jb;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Jb||(Jb={}));class Bd{constructor(s,r){this.channel=s,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Bd.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=Bd.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Bd.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(s,r,n,a){const i=this.cloneDeep(s),o=this.transformState(r),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const m=i[d];if(m){const h=u.map(v=>v.presence_ref),p=m.map(v=>v.presence_ref),g=u.filter(v=>p.indexOf(v.presence_ref)<0),x=m.filter(v=>h.indexOf(v.presence_ref)<0);g.length>0&&(l[d]=g),x.length>0&&(c[d]=x)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(s,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=s[l])!==null&&d!==void 0?d:[];if(s[l]=this.cloneDeep(c),u.length>0){const m=s[l].map(p=>p.presence_ref),h=u.filter(p=>m.indexOf(p.presence_ref)<0);s[l].unshift(...h)}n(l,u,c)}),this.map(o,(l,c)=>{let d=s[l];if(!d)return;const u=c.map(m=>m.presence_ref);d=d.filter(m=>u.indexOf(m.presence_ref)<0),s[l]=d,a(l,d,c),d.length===0&&delete s[l]}),s}static map(s,r){return Object.getOwnPropertyNames(s).map(n=>r(n,s[n]))}static transformState(s){return s=this.cloneDeep(s),Object.getOwnPropertyNames(s).reduce((r,n)=>{const a=s[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(s){return JSON.parse(JSON.stringify(s))}onJoin(s){this.caller.onJoin=s}onLeave(s){this.caller.onLeave=s}onSync(s){this.caller.onSync=s}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Xb;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Xb||(Xb={}));var zd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(zd||(zd={}));var Na;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Na||(Na={}));class Wl{constructor(s,r={config:{}},n){var a,i;if(this.topic=s,this.params=r,this.socket=n,this.bindings={},this.state=ws.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=s.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new gx(this,Sn.join,this.params,this.timeout),this.rejoinTimer=new Kk(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ws.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ws.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ws.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ws.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ws.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Sn.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new Bd(this),this.broadcastEndpointURL=Yk(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(s,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ws.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,d=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&a!==void 0?a:[],u=!!this.bindings[zd.PRESENCE]&&this.bindings[zd.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,m={},h={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:u}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(p=>s==null?void 0:s(Na.CHANNEL_ERROR,p)),this._onClose(()=>s==null?void 0:s(Na.CLOSED)),this.updateJoinPayload(Object.assign({config:h},m)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var g;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){s==null||s(Na.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,v=(g=x==null?void 0:x.length)!==null&&g!==void 0?g:0,y=[];for(let j=0;j<v;j++){const w=x[j],{filter:{event:b,schema:N,table:_,filter:C}}=w,E=p&&p[j];if(E&&E.event===b&&Wl.isFilterValueEqual(E.schema,N)&&Wl.isFilterValueEqual(E.table,_)&&Wl.isFilterValueEqual(E.filter,C))y.push(Object.assign(Object.assign({},w),{id:E.id}));else{this.unsubscribe(),this.state=ws.errored,s==null||s(Na.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,s&&s(Na.SUBSCRIBED);return}}).receive("error",p=>{this.state=ws.errored,s==null||s(Na.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{s==null||s(Na.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(s,r={}){return await this.send({type:"presence",event:"track",payload:s},r.timeout||this.timeout)}async untrack(s={}){return await this.send({type:"presence",event:"untrack"},s)}on(s,r,n){return this.state===ws.joined&&s===zd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(s,r,n)}async httpSend(s,r,n={}){var a;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const d=await l.json();c=d.error||d.message||c}catch{}return Promise.reject(new Error(c))}async send(s,r={}){var n,a;if(!this._canPush()&&s.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=s,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(s.type,s,r.timeout||this.timeout);s.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(s){this.joinPush.updatePayload(s)}unsubscribe(s=this.timeout){this.state=ws.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Sn.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new gx(this,Sn.leave,{},s),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(s=>s.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ws.closed,this.bindings={}}async _fetchWithTimeout(s,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(s,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(s,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${s}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new gx(this,s,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(s){if(s.startTimeout(),this.pushBuffer.push(s),this.pushBuffer.length>VF){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(s,r,n){return r}_isMember(s){return this.topic===s}_joinRef(){return this.joinPush.ref}_trigger(s,r,n){var a,i;const o=s.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=Sn;if(n&&[l,c,d,u].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(p=>{var g,x,v;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((v=(x=p.filter)===null||x===void 0?void 0:x.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(p=>p.callback(h,n)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var g,x,v,y,j,w,b,N;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const _=p.id,C=(g=p.filter)===null||g===void 0?void 0:g.event;return _&&((x=r.ids)===null||x===void 0?void 0:x.includes(_))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))&&(!(!((y=p.filter)===null||y===void 0)&&y.table)||p.filter.table===((j=r.data)===null||j===void 0?void 0:j.table))}else{const _=(b=(w=p==null?void 0:p.filter)===null||w===void 0?void 0:w.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return _==="*"||_===((N=r==null?void 0:r.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:x,table:v,commit_timestamp:y,type:j,errors:w}=g;h=Object.assign(Object.assign({},{schema:x,table:v,commit_timestamp:y,eventType:j,new:{},old:{},errors:w}),this._getPayloadRecords(g))}p.callback(h,n)})}_isClosed(){return this.state===ws.closed}_isJoined(){return this.state===ws.joined}_isJoining(){return this.state===ws.joining}_isLeaving(){return this.state===ws.leaving}_replyEventName(s){return`chan_reply_${s}`}_on(s,r,n){const a=s.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(s,r){const n=s.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Wl.isEqual(a.filter,r))})),this}static isEqual(s,r){if(Object.keys(s).length!==Object.keys(r).length)return!1;for(const n in s)if(s[n]!==r[n])return!1;return!0}static isFilterValueEqual(s,r){return(s??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(s){this._on(Sn.close,{},s)}_onError(s){this._on(Sn.error,{},r=>s(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(s=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ws.joining,this.joinPush.resend(s))}_getPayloadRecords(s){const r={new:{},old:{}};return(s.type==="INSERT"||s.type==="UPDATE")&&(r.new=Zb(s.columns,s.record)),(s.type==="UPDATE"||s.type==="DELETE")&&(r.old=Zb(s.columns,s.old_record)),r}}const vx=()=>{},Oh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},XF=[1e3,2e3,5e3,1e4],e$=1e4,t$=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class s${constructor(s,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ev,this.transport=null,this.heartbeatIntervalMs=Oh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=vx,this.ref=0,this.reconnectTimer=null,this.vsn=Qb,this.logger=vx,this.conn=null,this.sendBuffer=[],this.serializer=new HF,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${s}/${Av.websocket}`,this.httpEndpoint=Yk(s),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=UF.createWebSocket(this.endpointURL())}catch(s){this._setConnectionState("disconnected");const r=s.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(s,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(s?this.conn.close(s,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(s){const r=await s.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const s=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),s}log(s,r,n){this.logger(s,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ci.connecting:return xo.Connecting;case ci.open:return xo.Open;case ci.closing:return xo.Closing;default:return xo.Closed}}isConnected(){return this.connectionState()===xo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(s,r={config:{}}){const n=`realtime:${s}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new Wl(`realtime:${s}`,r,this);return this.channels.push(i),i}}push(s){const{topic:r,event:n,payload:a,ref:i}=s,o=()=>{this.encode(s,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(s=null){this._authPromise=this._performAuth(s);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var s;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(s=this.conn)===null||s===void 0||s.close(WF,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Oh.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(s){this.heartbeatCallback=s}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(s=>s()),this.sendBuffer=[])}_makeRef(){let s=this.ref+1;return s===this.ref?this.ref=0:this.ref=s,this.ref.toString()}_leaveOpenTopic(s){let r=this.channels.find(n=>n.topic===s&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${s}"`),r.unsubscribe())}_remove(s){this.channels=this.channels.filter(r=>r.topic!==s.topic)}_onConnMessage(s){this.decode(s.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const d=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",d)}catch(u){this.log("error","error in heartbeat callback",u)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:a,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(s){var r;s==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):s==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=s=>this._onConnError(s),this.conn.onmessage=s=>this._onConnMessage(s),this.conn.onclose=s=>this._onConnClose(s),this.conn.readyState===ci.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ci.open||this.conn.readyState===ci.connecting)try{this.conn.close()}catch(s){this.log("error","Error closing connection",s)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(s=>s.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const s=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(s),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(s){var r;this._setConnectionState("disconnected"),this.log("transport","close",s),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",s)}_onConnError(s){this._setConnectionState("disconnected"),this.log("transport",`${s}`),this._triggerChanError(),this._triggerStateCallbacks("error",s)}_triggerChanError(){this.channels.forEach(s=>s._trigger(Sn.error))}_appendParams(s,r){if(Object.keys(r).length===0)return s;const n=s.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${s}${n}${a}`}_workerObjectUrl(s){let r;if(s)r=s;else{const n=new Blob([t$],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(s,r=!1){this._connectionState=s,s==="connecting"?this._wasManualDisconnect=!1:s==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(s=null){let r,n=!1;if(s)r=s,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const i={access_token:r,version:zF};r&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(Sn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(s="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${s}`,r)})}_triggerStateCallbacks(s,r){try{this.stateChangeCallbacks[s].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${s} callback`,a)}})}catch(n){this.log("error",`error triggering ${s} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Kk(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Oh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(s){var r,n,a,i,o,l,c,d,u,m,h,p;switch(this.transport=(r=s==null?void 0:s.transport)!==null&&r!==void 0?r:null,this.timeout=(n=s==null?void 0:s.timeout)!==null&&n!==void 0?n:Ev,this.heartbeatIntervalMs=(a=s==null?void 0:s.heartbeatIntervalMs)!==null&&a!==void 0?a:Oh.HEARTBEAT_INTERVAL,this.worker=(i=s==null?void 0:s.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=s==null?void 0:s.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=s==null?void 0:s.heartbeatCallback)!==null&&l!==void 0?l:vx,this.vsn=(c=s==null?void 0:s.vsn)!==null&&c!==void 0?c:Qb,s!=null&&s.params&&(this.params=s.params),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=s==null?void 0:s.reconnectAfterMs)!==null&&d!==void 0?d:g=>XF[g-1]||e$,this.vsn){case qF:this.encode=(u=s==null?void 0:s.encode)!==null&&u!==void 0?u:(g,x)=>x(JSON.stringify(g)),this.decode=(m=s==null?void 0:s.decode)!==null&&m!==void 0?m:(g,x)=>x(JSON.parse(g));break;case Hk:this.encode=(h=s==null?void 0:s.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(p=s==null?void 0:s.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=s==null?void 0:s.workerUrl}}}var uu=class extends Error{constructor(e,s){var r;super(e),this.name="IcebergError",this.status=s.status,this.icebergType=s.icebergType,this.icebergCode=s.icebergCode,this.details=s.details,this.isCommitStateUnknown=s.icebergType==="CommitStateUnknownException"||[500,502,504].includes(s.status)&&((r=s.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function r$(e,s,r){const n=new URL(s,e);if(r)for(const[a,i]of Object.entries(r))i!==void 0&&n.searchParams.set(a,i);return n.toString()}async function n$(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function a$(e){const s=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:a,body:i,headers:o}){const l=r$(e.baseUrl,n,a),c=await n$(e.auth),d=await s(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),u=await d.text(),m=(d.headers.get("content-type")||"").includes("application/json"),h=m&&u?JSON.parse(u):u;if(!d.ok){const p=m?h:void 0,g=p==null?void 0:p.error;throw new uu((g==null?void 0:g.message)??`Request failed with status ${d.status}`,{status:d.status,icebergType:g==null?void 0:g.type,icebergCode:g==null?void 0:g.code,details:p})}return{status:d.status,headers:d.headers,data:h}}}}function Mh(e){return e.join("")}var i$=class{constructor(e,s=""){this.client=e,this.prefix=s}async listNamespaces(e){const s=e?{parent:Mh(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:s})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,s){const r={namespace:e.namespace,properties:s==null?void 0:s.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Mh(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Mh(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Mh(e.namespace)}`}),!0}catch(s){if(s instanceof uu&&s.status===404)return!1;throw s}}async createNamespaceIfNotExists(e,s){try{return await this.createNamespace(e,s)}catch(r){if(r instanceof uu&&r.status===409)return;throw r}}};function ul(e){return e.join("")}var o$=class{constructor(e,s="",r){this.client=e,this.prefix=s,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ul(e.namespace)}/tables`})).data.identifiers}async createTable(e,s){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ul(e.namespace)}/tables`,body:s,headers:r})).data.metadata}async updateTable(e,s){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ul(e.namespace)}/tables/${e.name}`,body:s});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ul(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((s==null?void 0:s.purge)??!1)}})}async loadTable(e){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ul(e.namespace)}/tables/${e.name}`,headers:s})).data.metadata}async tableExists(e){const s={};this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ul(e.namespace)}/tables/${e.name}`,headers:s}),!0}catch(r){if(r instanceof uu&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,s){try{return await this.createTable(e,s)}catch(r){if(r instanceof uu&&r.status===409)return await this.loadTable({namespace:e.namespace,name:s.name});throw r}}},l$=class{constructor(e){var n;let s="v1";e.catalogName&&(s+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=a$({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new i$(this.client,s),this.tableOps=new o$(this.client,s,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,s){return this.namespaceOps.createNamespace(e,s)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,s){return this.tableOps.createTable(e,s)}async updateTable(e,s){return this.tableOps.updateTable(e,s)}async dropTable(e,s){await this.tableOps.dropTable(e,s)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,s){return this.namespaceOps.createNamespaceIfNotExists(e,s)}async createTableIfNotExists(e,s){return this.tableOps.createTableIfNotExists(e,s)}},sp=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Wt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var c$=class extends sp{constructor(e,s,r){super(e),this.name="StorageApiError",this.status=s,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Pv=class extends sp{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}};const Mj=e=>e?(...s)=>e(...s):(...s)=>fetch(...s),d$=()=>Response,Rv=e=>{if(Array.isArray(e))return e.map(r=>Rv(r));if(typeof e=="function"||e!==Object(e))return e;const s={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));s[a]=Rv(n)}),s},u$=e=>{if(typeof e!="object"||e===null)return!1;const s=Object.getPrototypeOf(e);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},h$=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function hu(e){"@babel/helpers - typeof";return hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},hu(e)}function m$(e,s){if(hu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,s);if(hu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function f$(e){var s=m$(e,"string");return hu(s)=="symbol"?s:s+""}function p$(e,s,r){return(s=f$(s))in e?Object.defineProperty(e,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[s]=r,e}function eN(e,s){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function We(e){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?eN(Object(r),!0).forEach(function(n){p$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const yx=e=>{var s;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(s=e.error)===null||s===void 0?void 0:s.message)||JSON.stringify(e)},x$=async(e,s,r)=>{e instanceof await d$()&&!(r!=null&&r.noResolveJson)?e.json().then(n=>{const a=e.status||500,i=(n==null?void 0:n.statusCode)||a+"";s(new c$(yx(n),a,i))}).catch(n=>{s(new Pv(yx(n),n))}):s(new Pv(yx(e),e))},g$=(e,s,r,n)=>{const a={method:e,headers:(s==null?void 0:s.headers)||{}};return e==="GET"||!n?a:(u$(n)?(a.headers=We({"Content-Type":"application/json"},s==null?void 0:s.headers),a.body=JSON.stringify(n)):a.body=n,s!=null&&s.duplex&&(a.duplex=s.duplex),We(We({},a),r))};async function Ku(e,s,r,n,a,i){return new Promise((o,l)=>{e(r,g$(s,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>x$(c,l,n))})}async function mu(e,s,r,n){return Ku(e,"GET",s,r,n)}async function bn(e,s,r,n,a){return Ku(e,"POST",s,n,a,r)}async function Iv(e,s,r,n,a){return Ku(e,"PUT",s,n,a,r)}async function v$(e,s,r,n){return Ku(e,"HEAD",s,We(We({},r),{},{noResolveJson:!0}),n)}async function Lj(e,s,r,n,a){return Ku(e,"DELETE",s,n,a,r)}var y$=class{constructor(e,s){this.downloadFn=e,this.shouldThrowOnError=s}then(e,s){return this.execute().then(e,s)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Wt(s))return{data:null,error:s};throw s}}};let Qk;Qk=Symbol.toStringTag;var j$=class{constructor(e,s){this.downloadFn=e,this.shouldThrowOnError=s,this[Qk]="BlobDownloadBuilder",this.promise=null}asStream(){return new y$(this.downloadFn,this.shouldThrowOnError)}then(e,s){return this.getPromise().then(e,s)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Wt(s))return{data:null,error:s};throw s}}};const w$={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},tN={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var b$=class{constructor(e,s={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=s,this.bucketId=r,this.fetch=Mj(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,s,r,n){var a=this;try{let i;const o=We(We({},tN),n);let l=We(We({},a.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",a.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",a.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=a.toBase64(a.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(l=We(We({},l),n.headers));const d=a._removeEmptyFolders(s),u=a._getFinalPath(d),m=await(e=="PUT"?Iv:bn)(a.fetch,`${a.url}/object/${u}`,i,We({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:m.Id,fullPath:m.Key},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}}async upload(e,s,r){return this.uploadOrUpdate("POST",e,s,r)}async uploadToSignedUrl(e,s,r,n){var a=this;const i=a._removeEmptyFolders(e),o=a._getFinalPath(i),l=new URL(a.url+`/object/upload/sign/${o}`);l.searchParams.set("token",s);try{let c;const d=We({upsert:tN.upsert},n),u=We(We({},a.headers),{"x-upsert":String(d.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",d.cacheControl)):(c=r,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType),{data:{path:i,fullPath:(await Iv(a.fetch,l.toString(),c,{headers:u})).Key},error:null}}catch(c){if(a.shouldThrowOnError)throw c;if(Wt(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(e,s){var r=this;try{let n=r._getFinalPath(e);const a=We({},r.headers);s!=null&&s.upsert&&(a["x-upsert"]="true");const i=await bn(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(r.url+i.url),l=o.searchParams.get("token");if(!l)throw new sp("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Wt(n))return{data:null,error:n};throw n}}async update(e,s,r){return this.uploadOrUpdate("PUT",e,s,r)}async move(e,s,r){var n=this;try{return{data:await bn(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Wt(a))return{data:null,error:a};throw a}}async copy(e,s,r){var n=this;try{return{data:{path:(await bn(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key},error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Wt(a))return{data:null,error:a};throw a}}async createSignedUrl(e,s,r){var n=this;try{let a=n._getFinalPath(e),i=await bn(n.fetch,`${n.url}/object/sign/${a}`,We({expiresIn:s},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${n.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Wt(a))return{data:null,error:a};throw a}}async createSignedUrls(e,s,r){var n=this;try{const a=await bn(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:s,paths:e},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>We(We({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Wt(a))return{data:null,error:a};throw a}}download(e,s){const r=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),a=n?`?${n}`:"",i=this._getFinalPath(e),o=()=>mu(this.fetch,`${this.url}/${r}/${i}${a}`,{headers:this.headers,noResolveJson:!0});return new j$(o,this.shouldThrowOnError)}async info(e){var s=this;const r=s._getFinalPath(e);try{return{data:Rv(await mu(s.fetch,`${s.url}/object/info/${r}`,{headers:s.headers})),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(Wt(n))return{data:null,error:n};throw n}}async exists(e){var s=this;const r=s._getFinalPath(e);try{return await v$(s.fetch,`${s.url}/object/${r}`,{headers:s.headers}),{data:!0,error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(Wt(n)&&n instanceof Pv){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,s){const r=this._getFinalPath(e),n=[],a=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";a!==""&&n.push(a);const i=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});o!==""&&n.push(o);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(e){var s=this;try{return{data:await Lj(s.fetch,`${s.url}/object/${s.bucketId}`,{prefixes:e},{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}}async list(e,s,r){var n=this;try{const a=We(We(We({},w$),s),{},{prefix:e||""});return{data:await bn(n.fetch,`${n.url}/object/list/${n.bucketId}`,a,{headers:n.headers},r),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Wt(a))return{data:null,error:a};throw a}}async listV2(e,s){var r=this;try{const n=We({},e);return{data:await bn(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},s),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Wt(n))return{data:null,error:n};throw n}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}};const Zk="2.91.1",Jk={"X-Client-Info":`storage-js/${Zk}`};var N$=class{constructor(e,s={},r,n){this.shouldThrowOnError=!1;const a=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=We(We({},Jk),s),this.fetch=Mj(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var s=this;try{const r=s.listBucketOptionsToQueryString(e);return{data:await mu(s.fetch,`${s.url}/bucket${r}`,{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}}async getBucket(e){var s=this;try{return{data:await mu(s.fetch,`${s.url}/bucket/${e}`,{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}}async createBucket(e,s={public:!1}){var r=this;try{return{data:await bn(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Wt(n))return{data:null,error:n};throw n}}async updateBucket(e,s){var r=this;try{return{data:await Iv(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Wt(n))return{data:null,error:n};throw n}}async emptyBucket(e){var s=this;try{return{data:await bn(s.fetch,`${s.url}/bucket/${e}/empty`,{},{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}}async deleteBucket(e){var s=this;try{return{data:await Lj(s.fetch,`${s.url}/bucket/${e}`,{},{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const s={};return e&&("limit"in e&&(s.limit=String(e.limit)),"offset"in e&&(s.offset=String(e.offset)),e.search&&(s.search=e.search),e.sortColumn&&(s.sortColumn=e.sortColumn),e.sortOrder&&(s.sortOrder=e.sortOrder)),Object.keys(s).length>0?"?"+new URLSearchParams(s).toString():""}},C$=class{constructor(e,s={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=We(We({},Jk),s),this.fetch=Mj(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var s=this;try{return{data:await bn(s.fetch,`${s.url}/bucket`,{name:e},{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}}async listBuckets(e){var s=this;try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),a=n?`${s.url}/bucket?${n}`:`${s.url}/bucket`;return{data:await mu(s.fetch,a,{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}}async deleteBucket(e){var s=this;try{return{data:await Lj(s.fetch,`${s.url}/bucket/${e}`,{},{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}}from(e){var s=this;if(!h$(e))throw new sp("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new l$({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>s.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(a,i){const o=a[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(a,l),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}}}})}};const Fj={"X-Client-Info":`storage-js/${Zk}`,"Content-Type":"application/json"};var Xk=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Tr(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var jx=class extends Xk{constructor(e,s,r){super(e),this.name="StorageVectorsApiError",this.status=s,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},_$=class extends Xk{constructor(e,s){super(e),this.name="StorageVectorsUnknownError",this.originalError=s}};const $j=e=>e?(...s)=>e(...s):(...s)=>fetch(...s),S$=e=>{if(typeof e!="object"||e===null)return!1;const s=Object.getPrototypeOf(e);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},sN=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),k$=async(e,s,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const n=e.status||500,a=e;if(typeof a.json=="function")a.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||n+"";s(new jx(sN(i),n,o))}).catch(()=>{const i=n+"";s(new jx(a.statusText||`HTTP ${n} error`,n,i))});else{const i=n+"";s(new jx(a.statusText||`HTTP ${n} error`,n,i))}}else s(new _$(sN(e),e))},E$=(e,s,r,n)=>{const a={method:e,headers:(s==null?void 0:s.headers)||{}};return n?(S$(n)?(a.headers=We({"Content-Type":"application/json"},s==null?void 0:s.headers),a.body=JSON.stringify(n)):a.body=n,We(We({},a),r)):a};async function A$(e,s,r,n,a,i){return new Promise((o,l)=>{e(r,E$(s,n,a,i)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const d=c.headers.get("content-type");return!d||!d.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>k$(c,l,n))})}async function Pr(e,s,r,n,a){return A$(e,"POST",s,n,a,r)}var T$=class{constructor(e,s={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=We(We({},Fj),s),this.fetch=$j(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var s=this;try{return{data:await Pr(s.fetch,`${s.url}/CreateIndex`,e,{headers:s.headers})||{},error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}}async getIndex(e,s){var r=this;try{return{data:await Pr(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:s},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Tr(n))return{data:null,error:n};throw n}}async listIndexes(e){var s=this;try{return{data:await Pr(s.fetch,`${s.url}/ListIndexes`,e,{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}}async deleteIndex(e,s){var r=this;try{return{data:await Pr(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:s},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Tr(n))return{data:null,error:n};throw n}}},P$=class{constructor(e,s={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=We(We({},Fj),s),this.fetch=$j(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var s=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Pr(s.fetch,`${s.url}/PutVectors`,e,{headers:s.headers})||{},error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}}async getVectors(e){var s=this;try{return{data:await Pr(s.fetch,`${s.url}/GetVectors`,e,{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}}async listVectors(e){var s=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await Pr(s.fetch,`${s.url}/ListVectors`,e,{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}}async queryVectors(e){var s=this;try{return{data:await Pr(s.fetch,`${s.url}/QueryVectors`,e,{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}}async deleteVectors(e){var s=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Pr(s.fetch,`${s.url}/DeleteVectors`,e,{headers:s.headers})||{},error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}}},R$=class{constructor(e,s={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=We(We({},Fj),s),this.fetch=$j(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var s=this;try{return{data:await Pr(s.fetch,`${s.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:s.headers})||{},error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}}async getBucket(e){var s=this;try{return{data:await Pr(s.fetch,`${s.url}/GetVectorBucket`,{vectorBucketName:e},{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}}async listBuckets(e={}){var s=this;try{return{data:await Pr(s.fetch,`${s.url}/ListVectorBuckets`,e,{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}}async deleteBucket(e){var s=this;try{return{data:await Pr(s.fetch,`${s.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:s.headers})||{},error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}}},I$=class extends R${constructor(e,s={}){super(e,s.headers||{},s.fetch)}from(e){return new D$(this.url,this.headers,e,this.fetch)}async createBucket(e){var s=()=>super.createBucket,r=this;return s().call(r,e)}async getBucket(e){var s=()=>super.getBucket,r=this;return s().call(r,e)}async listBuckets(e={}){var s=()=>super.listBuckets,r=this;return s().call(r,e)}async deleteBucket(e){var s=()=>super.deleteBucket,r=this;return s().call(r,e)}},D$=class extends T${constructor(e,s,r,n){super(e,s,n),this.vectorBucketName=r}async createIndex(e){var s=()=>super.createIndex,r=this;return s().call(r,We(We({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var s=()=>super.listIndexes,r=this;return s().call(r,We(We({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var s=()=>super.getIndex,r=this;return s().call(r,r.vectorBucketName,e)}async deleteIndex(e){var s=()=>super.deleteIndex,r=this;return s().call(r,r.vectorBucketName,e)}index(e){return new O$(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},O$=class extends P${constructor(e,s,r,n,a){super(e,s,a),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var s=()=>super.putVectors,r=this;return s().call(r,We(We({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var s=()=>super.getVectors,r=this;return s().call(r,We(We({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var s=()=>super.listVectors,r=this;return s().call(r,We(We({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var s=()=>super.queryVectors,r=this;return s().call(r,We(We({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var s=()=>super.deleteVectors,r=this;return s().call(r,We(We({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},M$=class extends N${constructor(e,s={},r,n){super(e,s,r,n)}from(e){return new b$(this.url,this.headers,e,this.fetch)}get vectors(){return new I$(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new C$(this.url+"/iceberg",this.headers,this.fetch)}};const e2="2.91.1",Cl=30*1e3,Dv=3,wx=Dv*Cl,L$="http://localhost:9999",F$="supabase.auth.token",$$={"X-Client-Info":`gotrue-js/${e2}`},Ov="X-Supabase-Api-Version",t2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},U$=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,B$=10*60*1e3;class fu extends Error{constructor(s,r,n){super(s),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Pe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class z$ extends fu{constructor(s,r,n){super(s,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function q$(e){return Pe(e)&&e.name==="AuthApiError"}class go extends fu{constructor(s,r){super(s),this.name="AuthUnknownError",this.originalError=r}}class Ka extends fu{constructor(s,r,n,a){super(s,n,a),this.name=r,this.status=n}}class kr extends Ka{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function W$(e){return Pe(e)&&e.name==="AuthSessionMissingError"}class hl extends Ka{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Lh extends Ka{constructor(s){super(s,"AuthInvalidCredentialsError",400,void 0)}}class Fh extends Ka{constructor(s,r=null){super(s,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function V$(e){return Pe(e)&&e.name==="AuthImplicitGrantRedirectError"}class rN extends Ka{constructor(s,r=null){super(s,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class H$ extends Ka{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Mv extends Ka{constructor(s,r){super(s,"AuthRetryableFetchError",r,void 0)}}function bx(e){return Pe(e)&&e.name==="AuthRetryableFetchError"}class nN extends Ka{constructor(s,r,n){super(s,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Lv extends Ka{constructor(s){super(s,"AuthInvalidJwtError",400,"invalid_jwt")}}const Qm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),aN=` 	
\r=`.split(""),K$=(()=>{const e=new Array(128);for(let s=0;s<e.length;s+=1)e[s]=-1;for(let s=0;s<aN.length;s+=1)e[aN[s].charCodeAt(0)]=-2;for(let s=0;s<Qm.length;s+=1)e[Qm[s].charCodeAt(0)]=s;return e})();function iN(e,s,r){if(e!==null)for(s.queue=s.queue<<8|e,s.queuedBits+=8;s.queuedBits>=6;){const n=s.queue>>s.queuedBits-6&63;r(Qm[n]),s.queuedBits-=6}else if(s.queuedBits>0)for(s.queue=s.queue<<6-s.queuedBits,s.queuedBits=6;s.queuedBits>=6;){const n=s.queue>>s.queuedBits-6&63;r(Qm[n]),s.queuedBits-=6}}function s2(e,s,r){const n=K$[e];if(n>-1)for(s.queue=s.queue<<6|n,s.queuedBits+=6;s.queuedBits>=8;)r(s.queue>>s.queuedBits-8&255),s.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function oN(e){const s=[],r=o=>{s.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{Q$(o,n,r)};for(let o=0;o<e.length;o+=1)s2(e.charCodeAt(o),a,i);return s.join("")}function G$(e,s){if(e<=127){s(e);return}else if(e<=2047){s(192|e>>6),s(128|e&63);return}else if(e<=65535){s(224|e>>12),s(128|e>>6&63),s(128|e&63);return}else if(e<=1114111){s(240|e>>18),s(128|e>>12&63),s(128|e>>6&63),s(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Y$(e,s){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}G$(n,s)}}function Q$(e,s,r){if(s.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){s.utf8seq=n;break}if(s.utf8seq===2)s.codepoint=e&31;else if(s.utf8seq===3)s.codepoint=e&15;else if(s.utf8seq===4)s.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");s.utf8seq-=1}else if(s.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");s.codepoint=s.codepoint<<6|e&63,s.utf8seq-=1,s.utf8seq===0&&r(s.codepoint)}}function ec(e){const s=[],r={queue:0,queuedBits:0},n=a=>{s.push(a)};for(let a=0;a<e.length;a+=1)s2(e.charCodeAt(a),r,n);return new Uint8Array(s)}function Z$(e){const s=[];return Y$(e,r=>s.push(r)),new Uint8Array(s)}function bo(e){const s=[],r={queue:0,queuedBits:0},n=a=>{s.push(a)};return e.forEach(a=>iN(a,r,n)),iN(null,r,n),s.join("")}function J$(e){return Math.round(Date.now()/1e3)+e}function X$(){return Symbol("auth-callback")}const Ls=()=>typeof window<"u"&&typeof document<"u",oo={tested:!1,writable:!1},r2=()=>{if(!Ls())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(oo.tested)return oo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),oo.tested=!0,oo.writable=!0}catch{oo.tested=!0,oo.writable=!1}return oo.writable};function e6(e){const s={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{s[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{s[a]=n}),s}const n2=e=>e?(...s)=>e(...s):(...s)=>fetch(...s),t6=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",_l=async(e,s,r)=>{await e.setItem(s,JSON.stringify(r))},lo=async(e,s)=>{const r=await e.getItem(s);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ms=async(e,s)=>{await e.removeItem(s)};class rp{constructor(){this.promise=new rp.promiseConstructor((s,r)=>{this.resolve=s,this.reject=r})}}rp.promiseConstructor=Promise;function Nx(e){const s=e.split(".");if(s.length!==3)throw new Lv("Invalid JWT structure");for(let n=0;n<s.length;n++)if(!U$.test(s[n]))throw new Lv("JWT not in base64url format");return{header:JSON.parse(oN(s[0])),payload:JSON.parse(oN(s[1])),signature:ec(s[2]),raw:{header:s[0],payload:s[1]}}}async function s6(e){return await new Promise(s=>{setTimeout(()=>s(null),e)})}function r6(e,s){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!s(i,null,o)){n(o);return}}catch(o){if(!s(i,o)){a(o);return}}})()})}function n6(e){return("0"+e.toString(16)).substr(-2)}function a6(){const s=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(s),Array.from(s,n6).join("")}async function i6(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function o6(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await i6(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ml(e,s,r=!1){const n=a6();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await _l(e,`${s}-code-verifier`,a);const i=await o6(n);return[i,n===i?"plain":"s256"]}const l6=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function c6(e){const s=e.headers.get(Ov);if(!s||!s.match(l6))return null;try{return new Date(`${s}T00:00:00.0Z`)}catch{return null}}function d6(e){if(!e)throw new Error("Missing exp claim");const s=Math.floor(Date.now()/1e3);if(e<=s)throw new Error("JWT has expired")}function u6(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const h6=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function fl(e){if(!h6.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Cx(){const e={};return new Proxy(e,{get:(s,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(s,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(s,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function m6(e,s){return new Proxy(e,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!s.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),s.value=!0),Reflect.get(r,n,a)}})}function lN(e){return JSON.parse(JSON.stringify(e))}const mo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),f6=[502,503,504];async function cN(e){var s;if(!t6(e))throw new Mv(mo(e),0);if(f6.includes(e.status))throw new Mv(mo(e),e.status);let r;try{r=await e.json()}catch(i){throw new go(mo(i),i)}let n;const a=c6(e);if(a&&a.getTime()>=t2["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new nN(mo(r),e.status,((s=r.weak_password)===null||s===void 0?void 0:s.reasons)||[]);if(n==="session_not_found")throw new kr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new nN(mo(r),e.status,r.weak_password.reasons);throw new z$(mo(r),e.status||500,n)}const p6=(e,s,r,n)=>{const a={method:e,headers:(s==null?void 0:s.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},s==null?void 0:s.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function qe(e,s,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[Ov]||(i[Ov]=t2["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await x6(e,s,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function x6(e,s,r,n,a,i){const o=p6(s,n,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new Mv(mo(c),0)}if(l.ok||await cN(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await cN(c)}}function yn(e){var s;let r=null;y6(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=J$(e.expires_in)));const n=(s=e.user)!==null&&s!==void 0?s:e;return{data:{session:r,user:n},error:null}}function dN(e){const s=yn(e);return!s.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(s.data.weak_password=e.weak_password),s}function mi(e){var s;return{data:{user:(s=e.user)!==null&&s!==void 0?s:e},error:null}}function g6(e){return{data:e,error:null}}function v6(e){const{action_link:s,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,o=Zc(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:s,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function uN(e){return e}function y6(e){return e.access_token&&e.refresh_token&&e.expires_in}const _x=["global","local","others"];class j6{constructor({url:s="",headers:r={},fetch:n}){this.url=s,this.headers=r,this.fetch=n2(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(s,r=_x[0]){if(_x.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${_x.join(", ")}`);try{return await qe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:s,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}}async inviteUserByEmail(s,r={}){try{return await qe(this.fetch,"POST",`${this.url}/invite`,{body:{email:s,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:mi})}catch(n){if(Pe(n))return{data:{user:null},error:n};throw n}}async generateLink(s){try{const{options:r}=s,n=Zc(s,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await qe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:v6,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Pe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(s){try{return await qe(this.fetch,"POST",`${this.url}/admin/users`,{body:s,headers:this.headers,xform:mi})}catch(r){if(Pe(r))return{data:{user:null},error:r};throw r}}async listUsers(s){var r,n,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await qe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=s==null?void 0:s.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=s==null?void 0:s.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:uN});if(u.error)throw u.error;const m=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(g=>{const x=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);d[`${v}Page`]=x}),d.total=parseInt(h)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(Pe(d))return{data:{users:[]},error:d};throw d}}async getUserById(s){fl(s);try{return await qe(this.fetch,"GET",`${this.url}/admin/users/${s}`,{headers:this.headers,xform:mi})}catch(r){if(Pe(r))return{data:{user:null},error:r};throw r}}async updateUserById(s,r){fl(s);try{return await qe(this.fetch,"PUT",`${this.url}/admin/users/${s}`,{body:r,headers:this.headers,xform:mi})}catch(n){if(Pe(n))return{data:{user:null},error:n};throw n}}async deleteUser(s,r=!1){fl(s);try{return await qe(this.fetch,"DELETE",`${this.url}/admin/users/${s}`,{headers:this.headers,body:{should_soft_delete:r},xform:mi})}catch(n){if(Pe(n))return{data:{user:null},error:n};throw n}}async _listFactors(s){fl(s.userId);try{const{data:r,error:n}=await qe(this.fetch,"GET",`${this.url}/admin/users/${s.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(Pe(r))return{data:null,error:r};throw r}}async _deleteFactor(s){fl(s.userId),fl(s.id);try{return{data:await qe(this.fetch,"DELETE",`${this.url}/admin/users/${s.userId}/factors/${s.id}`,{headers:this.headers}),error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}}async _listOAuthClients(s){var r,n,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await qe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=s==null?void 0:s.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=s==null?void 0:s.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:uN});if(u.error)throw u.error;const m=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(g=>{const x=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);d[`${v}Page`]=x}),d.total=parseInt(h)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(Pe(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(s){try{return await qe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:s,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Pe(r))return{data:null,error:r};throw r}}async _getOAuthClient(s){try{return await qe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${s}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Pe(r))return{data:null,error:r};throw r}}async _updateOAuthClient(s,r){try{return await qe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${s}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Pe(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(s){try{return await qe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${s}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(s){try{return await qe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${s}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Pe(r))return{data:null,error:r};throw r}}}function hN(e={}){return{getItem:s=>e[s]||null,setItem:(s,r)=>{e[s]=r},removeItem:s=>{delete e[s]}}}const pl={debug:!!(globalThis&&r2()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class a2 extends Error{constructor(s){super(s),this.isAcquireTimeout=!0}}class w6 extends a2{}async function b6(e,s,r){pl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,s);const n=new globalThis.AbortController;return s>0&&setTimeout(()=>{n.abort(),pl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},s),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,s===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){pl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{pl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(s===0)throw pl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new w6(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(pl.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function N6(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function i2(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function C6(e){return parseInt(e,16)}function _6(e){const s=new TextEncoder().encode(e);return"0x"+Array.from(s,n=>n.toString(16).padStart(2,"0")).join("")}function S6(e){var s;const{chainId:r,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:d,scheme:u,uri:m,version:h}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((s=e.statement)===null||s===void 0)&&s.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=i2(e.address),g=u?`${u}://${n}`:n,x=e.statement?`${e.statement}
`:"",v=`${g} wants you to sign in with your Ethereum account:
${p}

${x}`;let y=`URI: ${m}
Version: ${h}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(a&&(y+=`
Expiration Time: ${a.toISOString()}`),l&&(y+=`
Not Before: ${l.toISOString()}`),c&&(y+=`
Request ID: ${c}`),d){let j=`
Resources:`;for(const w of d){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);j+=`
- ${w}`}y+=j}return`${v}
${y}`}class xs extends Error{constructor({message:s,code:r,cause:n,name:a}){var i;super(s,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Zm extends xs{constructor(s,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:s}),this.name="WebAuthnUnknownError",this.originalError=r}}function k6({error:e,options:s}){var r,n,a;const{publicKey:i}=s;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(s.signal instanceof AbortSignal)return new xs({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new xs({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(s.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new xs({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new xs({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new xs({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new xs({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new xs({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new xs({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(o2(o)){if(i.rp.id!==o)return new xs({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new xs({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new xs({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new xs({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new xs({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function E6({error:e,options:s}){const{publicKey:r}=s;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(s.signal instanceof AbortSignal)return new xs({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new xs({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(o2(n)){if(r.rpId!==n)return new xs({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new xs({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new xs({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new xs({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class A6{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const s=new AbortController;return this.controller=s,s.signal}cancelCeremony(){if(this.controller){const s=new Error("Manually cancelling existing WebAuthn API call");s.name="AbortError",this.controller.abort(s),this.controller=void 0}}}const T6=new A6;function P6(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:s,user:r,excludeCredentials:n}=e,a=Zc(e,["challenge","user","excludeCredentials"]),i=ec(s).buffer,o=Object.assign(Object.assign({},r),{id:ec(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const d=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},d),{id:ec(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function R6(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:s,allowCredentials:r}=e,n=Zc(e,["challenge","allowCredentials"]),a=ec(s).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:ec(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function I6(e){var s;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:bo(new Uint8Array(e.response.attestationObject)),clientDataJSON:bo(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(s=r.authenticatorAttachment)!==null&&s!==void 0?s:void 0}}function D6(e){var s;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:bo(new Uint8Array(a.authenticatorData)),clientDataJSON:bo(new Uint8Array(a.clientDataJSON)),signature:bo(new Uint8Array(a.signature)),userHandle:a.userHandle?bo(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(s=r.authenticatorAttachment)!==null&&s!==void 0?s:void 0}}function o2(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function mN(){var e,s;return!!(Ls()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((s=navigator==null?void 0:navigator.credentials)===null||s===void 0?void 0:s.get)=="function")}async function O6(e){try{const s=await navigator.credentials.create(e);return s?s instanceof PublicKeyCredential?{data:s,error:null}:{data:null,error:new Zm("Browser returned unexpected credential type",s)}:{data:null,error:new Zm("Empty credential response",s)}}catch(s){return{data:null,error:k6({error:s,options:e})}}}async function M6(e){try{const s=await navigator.credentials.get(e);return s?s instanceof PublicKeyCredential?{data:s,error:null}:{data:null,error:new Zm("Browser returned unexpected credential type",s)}:{data:null,error:new Zm("Empty credential response",s)}}catch(s){return{data:null,error:E6({error:s,options:e})}}}const L6={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},F6={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Jm(...e){const s=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(s(o)){const l=n[i];s(l)?n[i]=Jm(l,o):n[i]=Jm(o)}else n[i]=o}return n}function $6(e,s){return Jm(L6,e,s||{})}function U6(e,s){return Jm(F6,e,s||{})}class B6{constructor(s){this.client=s,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(s){return this.client.mfa.enroll(Object.assign(Object.assign({},s),{factorType:"webauthn"}))}async _challenge({factorId:s,webauthn:r,friendlyName:n,signal:a},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:s,webauthn:r});if(!o)return{data:null,error:l};const c=a??T6.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:d}=o.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${n}`),d.displayName||(d.displayName=d.name)}switch(o.webauthn.type){case"create":{const d=$6(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:u,error:m}=await O6({publicKey:d,signal:c});return u?{data:{factorId:s,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:m}}case"request":{const d=U6(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:u,error:m}=await M6(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:d,signal:c}));return u?{data:{factorId:s,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:m}}}}catch(o){return Pe(o)?{data:null,error:o}:{data:null,error:new go("Unexpected error in challenge",o)}}}async _verify({challengeId:s,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:s,webauthn:n})}async _authenticate({factorId:s,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new fu("rpId is required for WebAuthn authentication")};try{if(!mN())return{data:null,error:new go("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:s,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:s,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return Pe(o)?{data:null,error:o}:{data:null,error:new go("Unexpected error in authenticate",o)}}}async _register({friendlyName:s,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new fu("rpId is required for WebAuthn registration")};try{if(!mN())return{data:null,error:new go("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:s});if(!o)return await this.client.mfa.listFactors().then(u=>{var m;return(m=u.data)===null||m===void 0?void 0:m.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===s&&h.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:l};const{data:c,error:d}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:d}}catch(o){return Pe(o)?{data:null,error:o}:{data:null,error:new go("Unexpected error in register",o)}}}}N6();const z6={url:L$,storageKey:F$,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:$$,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function fN(e,s,r){return await r()}const xl={};class pu{get jwks(){var s,r;return(r=(s=xl[this.storageKey])===null||s===void 0?void 0:s.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(s){xl[this.storageKey]=Object.assign(Object.assign({},xl[this.storageKey]),{jwks:s})}get jwks_cached_at(){var s,r;return(r=(s=xl[this.storageKey])===null||s===void 0?void 0:s.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(s){xl[this.storageKey]=Object.assign(Object.assign({},xl[this.storageKey]),{cachedAt:s})}constructor(s){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},z6),s);if(this.storageKey=i.storageKey,this.instanceID=(r=pu.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,pu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Ls()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new j6({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=n2(i.fetch),this.lock=i.lock||fN,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&Ls()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=b6:this.lock=fN,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new B6(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:r2()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=hN(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=hN(this.memoryStorage)),Ls()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(s){if(this.throwOnError&&s&&s.error)throw s.error;return s}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${e2}) ${new Date().toISOString()}`}_debug(...s){return this.logDebugMessages&&this.logger(this._logPrefix(),...s),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var s;try{let r={},n="none";if(Ls()&&(r=e6(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Ls()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),V$(i)){const c=(s=i.details)===null||s===void 0?void 0:s.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Pe(r)?this._returnResult({error:r}):this._returnResult({error:new go("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(s){var r,n,a;try{const i=await qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=s==null?void 0:s.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=s==null?void 0:s.options)===null||a===void 0?void 0:a.captchaToken}},xform:yn}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(i){if(Pe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(s){var r,n,a;try{let i;if("email"in s){const{email:u,password:m,options:h}=s;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await ml(this.storage,this.storageKey)),i=await qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:m,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:g},xform:yn})}else if("phone"in s){const{phone:u,password:m,options:h}=s;i=await qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:m,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:yn})}else throw new Lh("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await Ms(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(i){if(await Ms(this.storage,`${this.storageKey}-code-verifier`),Pe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(s){try{let r;if("email"in s){const{email:i,password:o,options:l}=s;r=await qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:dN})}else if("phone"in s){const{phone:i,password:o,options:l}=s;r=await qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:dN})}else throw new Lh("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const i=new hl;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(Pe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(s){var r,n,a,i;return await this._handleProviderSignIn(s.provider,{redirectTo:(r=s.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=s.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=s.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=s.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(s){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(s))}async signInWithWeb3(s){const{chain:r}=s;switch(r){case"ethereum":return await this.signInWithEthereum(s);case"solana":return await this.signInWithSolana(s);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(s){var r,n,a,i,o,l,c,d,u,m,h;let p,g;if("message"in s)p=s.message,g=s.signature;else{const{chain:x,wallet:v,statement:y,options:j}=s;let w;if(Ls())if(typeof v=="object")w=v;else{const k=window;if("ethereum"in k&&typeof k.ethereum=="object"&&"request"in k.ethereum&&typeof k.ethereum.request=="function")w=k.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=v}const b=new URL((r=j==null?void 0:j.url)!==null&&r!==void 0?r:window.location.href),N=await w.request({method:"eth_requestAccounts"}).then(k=>k).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const _=i2(N[0]);let C=(n=j==null?void 0:j.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!C){const k=await w.request({method:"eth_chainId"});C=C6(k)}const E={domain:b.host,address:_,statement:y,uri:b.href,version:"1",chainId:C,nonce:(a=j==null?void 0:j.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=j==null?void 0:j.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=j==null?void 0:j.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=j==null?void 0:j.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=j==null?void 0:j.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(u=j==null?void 0:j.signInWithEthereum)===null||u===void 0?void 0:u.resources};p=S6(E),g=await w.request({method:"personal_sign",params:[_6(p),_]})}try{const{data:x,error:v}=await qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:g},!((m=s.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(h=s.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:yn});if(v)throw v;if(!x||!x.session||!x.user){const y=new hl;return this._returnResult({data:{user:null,session:null},error:y})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:v})}catch(x){if(Pe(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(s){var r,n,a,i,o,l,c,d,u,m,h,p;let g,x;if("message"in s)g=s.message,x=s.signature;else{const{chain:v,wallet:y,statement:j,options:w}=s;let b;if(Ls())if(typeof y=="object")b=y;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))b=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=y}const N=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in b&&b.signIn){const _=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),j?{statement:j}:null));let C;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")C=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)C=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)g=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),x=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${N.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...j?["",j,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(a=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((d=w==null?void 0:w.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((m=(u=w==null?void 0:w.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||m===void 0)&&m.length?["Resources",...w.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const _=await b.signMessage(new TextEncoder().encode(g),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=_}}try{const{data:v,error:y}=await qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:bo(x)},!((h=s.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=s.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:yn});if(y)throw y;if(!v||!v.session||!v.user){const j=new hl;return this._returnResult({data:{user:null,session:null},error:j})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:y})}catch(v){if(Pe(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(s){const r=await lo(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new H$;const{data:i,error:o}=await qe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:s,code_verifier:n},xform:yn});if(await Ms(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new hl;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(await Ms(this.storage,`${this.storageKey}-code-verifier`),Pe(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(s){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=s,l=await qe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:yn}),{data:c,error:d}=l;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c||!c.session||!c.user){const u=new hl;return this._returnResult({data:{user:null,session:null},error:u})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:d})}catch(r){if(Pe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(s){var r,n,a,i,o;try{if("email"in s){const{email:l,options:c}=s;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await ml(this.storage,this.storageKey));const{error:m}=await qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:m})}if("phone"in s){const{phone:l,options:c}=s,{data:d,error:u}=await qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u})}throw new Lh("You must provide either an email or phone number.")}catch(l){if(await Ms(this.storage,`${this.storageKey}-code-verifier`),Pe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(s){var r,n;try{let a,i;"options"in s&&(a=(r=s.options)===null||r===void 0?void 0:r.redirectTo,i=(n=s.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await qe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},s),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:yn});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(s.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(a){if(Pe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(s){var r,n,a,i,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await ml(this.storage,this.storageKey));const d=await qe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in s?{provider_id:s.providerId}:null),"domain"in s?{domain:s.domain}:null),{redirect_to:(n=(r=s.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=s==null?void 0:s.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:s.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:g6});return!((i=d.data)===null||i===void 0)&&i.url&&Ls()&&!(!((o=s.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(l){if(await Ms(this.storage,`${this.storageKey}-code-verifier`),Pe(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async s=>{const{data:{session:r},error:n}=s;if(n)throw n;if(!r)throw new kr;const{error:a}=await qe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(s){if(Pe(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async resend(s){try{const r=`${this.url}/resend`;if("email"in s){const{email:n,type:a,options:i}=s,{error:o}=await qe(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in s){const{phone:n,type:a,options:i}=s,{data:o,error:l}=await qe(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new Lh("You must provide either an email or phone number and a type")}catch(r){if(Pe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(s,r){this._debug("#_acquireLock","begin",s);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,s,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(s){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await s(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let s=null;const r=await lo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?s=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!s)return{data:{session:null},error:null};const n=s.expires_at?s.expires_at*1e3-Date.now()<wx:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",s.expires_at),!n){if(this.userStorage){const o=await lo(this.userStorage,this.storageKey+"-user");o!=null&&o.user?s.user=o.user:s.user=Cx()}if(this.storage.isServer&&s.user&&!s.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};s.user=m6(s.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:s},error:null}}const{data:a,error:i}=await this._callRefreshToken(s.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(s){if(s)return await this._getUser(s);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(s){try{return s?await qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:s,xform:mi}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new kr}:await qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:mi})})}catch(r){if(Pe(r))return W$(r)&&(await this._removeSession(),await Ms(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(s,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(s,r))}async _updateUser(s,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new kr;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&s.email!=null&&([l,c]=await ml(this.storage,this.storageKey));const{data:d,error:u}=await qe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},s),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:mi});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await Ms(this.storage,`${this.storageKey}-code-verifier`),Pe(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(s){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(s))}async _setSession(s){try{if(!s.access_token||!s.refresh_token)throw new kr;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=Nx(s.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{data:l,error:c}=await this._callRefreshToken(s.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(s.access_token);if(c)throw c;i={access_token:s.access_token,refresh_token:s.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(Pe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(s){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(s))}async _refreshSession(s){try{return await this._useSession(async r=>{var n;if(!s){const{data:o,error:l}=r;if(l)throw l;s=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(s!=null&&s.refresh_token))throw new kr;const{data:a,error:i}=await this._callRefreshToken(s.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Pe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(s,r){try{if(!Ls())throw new Fh("No browser detected.");if(s.error||s.error_description||s.error_code)throw new Fh(s.error_description||"Error in URL with unspecified error_description",{error:s.error||"unspecified_error",code:s.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new rN("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fh("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!s.code)throw new rN("No code detected.");const{data:j,error:w}=await this._exchangeCodeForSession(s.code);if(w)throw w;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:j.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=s;if(!i||!l||!o||!d)throw new Fh("No session defined in URL");const u=Math.round(Date.now()/1e3),m=parseInt(l);let h=u+m;c&&(h=parseInt(c));const p=h-u;p*1e3<=Cl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${m}s`);const g=h-m;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,u);const{data:x,error:v}=await this._getUser(i);if(v)throw v;const y={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:m,expires_at:h,refresh_token:o,token_type:d,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:s.type},error:null})}catch(n){if(Pe(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(s){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),s):!!(s.access_token||s.error_description)}async _isPKCECallback(s){const r=await lo(this.storage,`${this.storageKey}-code-verifier`);return!!(s.code&&r)}async signOut(s={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(s))}async _signOut({scope:s}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({error:i});const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,s);if(l&&!(q$(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return s!=="others"&&(await this._removeSession(),await Ms(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(s){const r=X$(),n={id:r,callback:s,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(s){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(s))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",s,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(s))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",s,"error",i),console.error(i)}})}async resetPasswordForEmail(s,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await ml(this.storage,this.storageKey,!0));try{return await qe(this.fetch,"POST",`${this.url}/recover`,{body:{email:s,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await Ms(this.storage,`${this.storageKey}-code-verifier`),Pe(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var s;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(s=r.user.identities)!==null&&s!==void 0?s:[]},error:null})}catch(r){if(Pe(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(s){return"token"in s?this.linkIdentityIdToken(s):this.linkIdentityOAuth(s)}async linkIdentityOAuth(s){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,c,d,u;const{data:m,error:h}=i;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,s.provider,{redirectTo:(o=s.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=s.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=s.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await qe(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(d=m.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return Ls()&&!(!((r=s.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:s.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(Pe(n))return this._returnResult({data:{provider:s.provider,url:null},error:n});throw n}}async linkIdentityIdToken(s){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:o,provider:l,token:c,access_token:d,nonce:u}=s,m=await qe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:d,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:yn}),{data:h,error:p}=m;return p?this._returnResult({data:{user:null,session:null},error:p}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new hl}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:p}))}catch(a){if(await Ms(this.storage,`${this.storageKey}-code-verifier`),Pe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(s){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await qe(this.fetch,"DELETE",`${this.url}/user/identities/${s.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Pe(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(s){const r=`#_refreshAccessToken(${s.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await r6(async a=>(a>0&&await s6(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await qe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:s},headers:this.headers,xform:yn})),(a,i)=>{const o=200*Math.pow(2,a);return i&&bx(i)&&Date.now()+o-n<Cl})}catch(n){if(this._debug(r,"error",n),Pe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(s){return typeof s=="object"&&s!==null&&"access_token"in s&&"refresh_token"in s&&"expires_at"in s}async _handleProviderSignIn(s,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,s,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",s,"options",r,"url",n),Ls()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:s,url:n},error:null}}async _recoverAndRefresh(){var s,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await lo(this.storage,this.storageKey);if(a&&this.userStorage){let o=await lo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await _l(this.userStorage,this.storageKey+"-user",o)),a.user=(s=o==null?void 0:o.user)!==null&&s!==void 0?s:Cx()}else if(a&&!a.user&&!a.user){const o=await lo(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Ms(this.storage,this.storageKey+"-user"),await _l(this.storage,this.storageKey,a)):a.user=Cx()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<wx;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${wx}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),bx(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(s){var r,n;if(!s)throw new kr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${s.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new rp;const{data:i,error:o}=await this._refreshAccessToken(s);if(o)throw o;if(!i.session)throw new kr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),Pe(i)){const o={data:null,error:i};return bx(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(s,r,n=!0){const a=`#_notifyAllSubscribers(${s})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:s,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(s,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(s){this._debug("#_saveSession()",s),this.suppressGetSessionWarning=!0,await Ms(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},s),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await _l(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=lN(a);await _l(this.storage,this.storageKey,i)}else{const a=lN(r);await _l(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ms(this.storage,this.storageKey),await Ms(this.storage,this.storageKey+"-code-verifier"),await Ms(this.storage,this.storageKey+"-user"),this.userStorage&&await Ms(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const s=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{s&&Ls()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",s)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const s=setInterval(()=>this._autoRefreshTokenTick(),Cl);this.autoRefreshTicker=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const s=this.autoRefreshTicker;this.autoRefreshTicker=null,s&&clearInterval(s);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const s=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-s)/Cl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Cl}ms, refresh threshold is ${Dv} ticks`),a<=Dv&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(s){if(s.isAcquireTimeout||s instanceof a2)this._debug("auto refresh token tick lock not available");else throw s}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ls()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(s){console.error("_handleVisibilityChange",s)}}async _onVisibilityChanged(s){const r=`#_onVisibilityChanged(${s})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),s||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(s,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await ml(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${s}?${a.join("&")}`}async _unenroll(s){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await qe(this.fetch,"DELETE",`${this.url}/factors/${s.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Pe(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(s){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:s.friendlyName,factor_type:s.factorType},s.factorType==="phone"?{phone:s.phone}:s.factorType==="totp"?{issuer:s.issuer}:{}),{data:c,error:d}=await qe(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?this._returnResult({data:null,error:d}):(s.factorType==="totp"&&c.type==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(Pe(r))return this._returnResult({data:null,error:r});throw r}}async _verify(s){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:s.challengeId},"webauthn"in s?{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_response:s.webauthn.type==="create"?I6(s.webauthn.credential_response):D6(s.webauthn.credential_response)})}:{code:s.code}),{data:l,error:c}=await qe(this.fetch,"POST",`${this.url}/factors/${s.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(Pe(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(s){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await qe(this.fetch,"POST",`${this.url}/factors/${s.factorId}/challenge`,{body:s,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:P6(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:R6(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Pe(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(s){const{data:r,error:n}=await this._challenge({factorId:s.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:s.factorId,challengeId:r.id,code:s.code})}async _listFactors(){var s;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(s=r==null?void 0:r.factors)!==null&&s!==void 0?s:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var s,r;const{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Nx(n.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((r=(s=n.user.factors)===null||s===void 0?void 0:s.filter(u=>u.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(s){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await qe(this.fetch,"GET",`${this.url}/oauth/authorizations/${s}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new kr})})}catch(r){if(Pe(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(s,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new kr});const o=await qe(this.fetch,"POST",`${this.url}/oauth/authorizations/${s}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Ls()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(Pe(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(s,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new kr});const o=await qe(this.fetch,"POST",`${this.url}/oauth/authorizations/${s}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Ls()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(Pe(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async s=>{const{data:{session:r},error:n}=s;return n?this._returnResult({data:null,error:n}):r?await qe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new kr})})}catch(s){if(Pe(s))return this._returnResult({data:null,error:s});throw s}}async _revokeOAuthGrant(s){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?(await qe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:s.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new kr})})}catch(r){if(Pe(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(s,r={keys:[]}){let n=r.keys.find(l=>l.kid===s);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===s),n&&this.jwks_cached_at+B$>a)return n;const{data:i,error:o}=await qe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===s),!n)?null:n}async getClaims(s,r={}){try{let n=s;if(!n){const{data:p,error:g}=await this.getSession();if(g||!p.session)return this._returnResult({data:null,error:g});n=p.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=Nx(n);r!=null&&r.allowExpired||d6(i.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:a,signature:o},error:null}}const u=u6(a.alg),m=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,m,o,Z$(`${l}.${c}`)))throw new Lv("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(Pe(n))return this._returnResult({data:null,error:n});throw n}}}pu.nextInstanceID={};const q6=pu,W6="2.91.1";let _d="";typeof Deno<"u"?_d="deno":typeof document<"u"?_d="web":typeof navigator<"u"&&navigator.product==="ReactNative"?_d="react-native":_d="node";const V6={"X-Client-Info":`supabase-js-${_d}/${W6}`},H6={headers:V6},K6={schema:"public"},G6={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Y6={};function xu(e){"@babel/helpers - typeof";return xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},xu(e)}function Q6(e,s){if(xu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,s);if(xu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function Z6(e){var s=Q6(e,"string");return xu(s)=="symbol"?s:s+""}function J6(e,s,r){return(s=Z6(s))in e?Object.defineProperty(e,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[s]=r,e}function pN(e,s){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ls(e){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?pN(Object(r),!0).forEach(function(n){J6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const X6=e=>e?(...s)=>e(...s):(...s)=>fetch(...s),e8=()=>Headers,t8=(e,s,r)=>{const n=X6(r),a=e8();return async(i,o)=>{var l;const c=(l=await s())!==null&&l!==void 0?l:e;let d=new a(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,ls(ls({},o),{},{headers:d}))}};function s8(e){return e.endsWith("/")?e:e+"/"}function r8(e,s){var r,n;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:d,realtime:u,global:m}=s,h={db:ls(ls({},c),a),auth:ls(ls({},d),i),realtime:ls(ls({},u),o),storage:{},global:ls(ls(ls({},m),l),{},{headers:ls(ls({},(r=m==null?void 0:m.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function n8(e){const s=e==null?void 0:e.trim();if(!s)throw new Error("supabaseUrl is required.");if(!s.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(s8(s))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var a8=class extends q6{constructor(e){super(e)}},i8=class{constructor(e,s,r){var n,a;this.supabaseUrl=e,this.supabaseKey=s;const i=n8(e);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:K6,realtime:Y6,auth:ls(ls({},G6),{},{storageKey:o}),global:H6},c=r8(r??{},l);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=c.global.headers)!==null&&a!==void 0?a:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(u,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}});else{var d;this.auth=this._initSupabaseAuthClient((d=c.auth)!==null&&d!==void 0?d:{},this.headers,c.global.fetch)}this.fetch=t8(s,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(ls({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(u=>this.realtime.setAuth(u)).catch(u=>console.warn("Failed to set initial Realtime auth token:",u)),this.rest=new $F(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new M$(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new DF(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,s,r)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,s,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(s=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,userStorage:a,storageKey:i,flowType:o,lock:l,debug:c,throwOnError:d},u,m){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new a8({url:this.authUrl.href,headers:ls(ls({},h),u),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,userStorage:a,flowType:o,lock:l,debug:c,throwOnError:d,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new s$(this.realtimeUrl.href,ls(ls({},e),{},{params:ls(ls({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,s)=>{this._handleTokenChanged(e,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,s,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const o8=(e,s,r)=>new i8(e,s,r);function l8(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const s=e.version;if(s==null)return!1;const r=s.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}l8()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const c8="https://zthuvqtshgcbgiuvypvw.supabase.co",d8="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp0aHV2cXRzaGdjYmdpdXZ5cHZ3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkxOTgzNzAsImV4cCI6MjA4NDc3NDM3MH0.kWhC4A4ZJ3bq-qcSwovTTmFL7Z1gmbRzoqvNruAAqsQ",B=o8(c8,d8,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),l2=f.createContext(void 0);function u8({children:e}){const[s,r]=f.useState(null),[n,a]=f.useState(null),[i,o]=f.useState(!0);f.useEffect(()=>{const{data:{subscription:u}}=B.auth.onAuthStateChange((m,h)=>{a(h),r((h==null?void 0:h.user)??null),o(!1)});return B.auth.getSession().then(({data:{session:m}})=>{a(m),r((m==null?void 0:m.user)??null),o(!1)}),()=>u.unsubscribe()},[]);const l=async(u,m)=>{const{error:h}=await B.auth.signInWithPassword({email:u,password:m});return{error:h}},c=async(u,m,h)=>{const p=`${window.location.origin}/`,{error:g}=await B.auth.signUp({email:u,password:m,options:{emailRedirectTo:p,data:{full_name:h}}});return{error:g}},d=async()=>{var u;try{const{error:m}=await B.auth.signOut();m&&!((u=m.message)!=null&&u.includes("session_not_found"))&&m.message!=="Session not found"&&console.error("Sign out error:",m)}catch(m){console.error("Sign out exception:",m)}r(null),a(null)};return t.jsx(l2.Provider,{value:{user:s,session:n,loading:i,signIn:l,signUp:c,signOut:d},children:e})}function ft(){const e=f.useContext(l2);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const c2=f.createContext(void 0);function h8({children:e}){const[s,r]=f.useState(null),[n,a]=f.useState(null),[i,o]=f.useState(null),[l,c]=f.useState(!0),d=async p=>{const{data:g,error:x}=await B.from("clients").select("id, name, email, company, phone, organization_id").eq("user_id",p).single();o(!x&&g?g:null)};f.useEffect(()=>{const{data:{subscription:p}}=B.auth.onAuthStateChange(async(g,x)=>{a(x),r((x==null?void 0:x.user)??null),x!=null&&x.user?setTimeout(()=>d(x.user.id),0):o(null),c(!1)});return B.auth.getSession().then(({data:{session:g}})=>{a(g),r((g==null?void 0:g.user)??null),g!=null&&g.user&&d(g.user.id),c(!1)}),()=>{p.unsubscribe()}},[]);const u=async(p,g)=>{const{error:x}=await B.auth.signInWithPassword({email:p,password:g});return{error:x}},m=async(p,g,x)=>{const{data:v,error:y}=await B.auth.signUp({email:p,password:g,options:{data:{full_name:x,is_client:!0}}});return{error:y}},h=async()=>{var p;try{const{error:g}=await B.auth.signOut();g&&!((p=g.message)!=null&&p.includes("session_not_found"))&&g.message!=="Session not found"&&console.error("Client sign out error:",g)}catch(g){console.error("Client sign out exception:",g)}r(null),a(null),o(null)};return t.jsx(c2.Provider,{value:{user:s,session:n,clientData:i,loading:l,signIn:u,signUp:m,signOut:h},children:e})}function dn(){const e=f.useContext(c2);if(e===void 0)throw new Error("useClientAuth must be used within a ClientAuthProvider");return e}const d2=f.createContext(void 0);function m8({children:e}){const{user:s}=ft(),[r,n]=f.useState(null),[a,i]=f.useState(!1);f.useEffect(()=>{async function d(){if(!(s!=null&&s.id)){i(!1);return}const{data:u}=await B.from("infraweave_admins").select("can_impersonate").eq("user_id",s.id).eq("is_active",!0).maybeSingle();i((u==null?void 0:u.can_impersonate)??!1)}d()},[s==null?void 0:s.id]),f.useEffect(()=>{const d=sessionStorage.getItem("impersonation");if(d)try{const u=JSON.parse(d);n(u)}catch{sessionStorage.removeItem("impersonation")}},[]);const o=f.useCallback(async(d,u,m)=>{if(s!=null&&s.id)try{await B.from("audit_logs").insert({user_id:s.id,entity_type:"impersonation",entity_id:u,action:d,action_category:"security",is_sensitive:!0,impersonated_by:s.id,new_values:{company_id:u,company_name:m,admin_user_id:s.id,timestamp:new Date().toISOString()},organization_id:u})}catch(h){console.error("Failed to log impersonation action:",h)}},[s==null?void 0:s.id]),l=f.useCallback(async d=>{if(!a){z.error("You do not have permission to impersonate");return}await o("impersonation_started",d.id,d.name),sessionStorage.setItem("impersonation",JSON.stringify(d)),n(d),z.success(`Now viewing as ${d.name}`,{description:'All actions will be logged. Click "Exit Impersonation" to return.',duration:5e3})},[a,o]),c=f.useCallback(()=>{r&&o("impersonation_ended",r.id,r.name),sessionStorage.removeItem("impersonation"),n(null),z.info("Exited impersonation mode")},[r,o]);return t.jsx(d2.Provider,{value:{isImpersonating:!!r,impersonatedCompany:r,startImpersonation:l,stopImpersonation:c,canImpersonate:a},children:e})}function u2(){const e=f.useContext(d2);if(e===void 0)throw new Error("useImpersonation must be used within an ImpersonationProvider");return e}function f8({children:e,...s}){return t.jsx(SM,{...s,children:e})}function Xe({children:e}){const{user:s,loading:r}=ft(),n=Ws();return r?t.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:t.jsx(Ie,{className:"h-8 w-8 animate-spin text-primary"})}):s?t.jsx(t.Fragment,{children:e}):t.jsx(Gm,{to:"/auth",state:{from:n},replace:!0})}function p8(){try{const e=typeof window<"u"?sessionStorage.getItem("impersonation"):null;if(e)return{isImpersonating:!0,impersonatedCompany:JSON.parse(e)}}catch{}return{isImpersonating:!1,impersonatedCompany:null}}function Ze(){const{user:e}=ft(),s=p8(),{data:r,isLoading:n}=fe({queryKey:["infraweave-admin",e==null?void 0:e.id],queryFn:async()=>{if(!(e!=null&&e.id))return null;const{data:w,error:b}=await B.from("infraweave_admins").select("*").eq("user_id",e.id).eq("is_active",!0).maybeSingle();return b?(console.error("Error checking infraweave admin:",b),null):w},enabled:!!(e!=null&&e.id)}),{data:a,isLoading:i}=fe({queryKey:["infraweave-employee",e==null?void 0:e.id],queryFn:async()=>{if(!(e!=null&&e.id))return null;const{data:w,error:b}=await B.from("infraweave_employees").select("*").eq("user_id",e.id).eq("is_active",!0).maybeSingle();return b?(console.error("Error checking infraweave employee:",b),null):w},enabled:!!(e!=null&&e.id)&&!r}),{data:o,isLoading:l}=fe({queryKey:["company-membership",e==null?void 0:e.id],queryFn:async()=>{if(!(e!=null&&e.id))return null;const{data:w,error:b}=await B.from("company_members").select(`
          *,
          company:organizations(*)
        `).eq("user_id",e.id).eq("is_active",!0).maybeSingle();return b?(console.error("Error fetching company membership:",b),null):w},enabled:!!(e!=null&&e.id)&&!r&&!a}),c=!!r,d=!!a,u=o==null?void 0:o.role;let m=null;c?m="infraweave_admin":d?m="infraweave_employee":u&&(m=u);const h=s.isImpersonating&&c,p=c&&!h,g=d,x=h||u==="company_admin"||c,v=u==="engineer";let y=null;h?y="company_admin":c?y="infraweave_admin":d?y="infraweave_employee":u&&(y=u);let j=null;if(h&&s.impersonatedCompany)j={id:s.impersonatedCompany.id,name:s.impersonatedCompany.name,slug:s.impersonatedCompany.slug,domain:void 0,billingEmail:void 0,billingAddress:void 0,subscriptionStatus:"active",subscriptionTier:"standard",settings:void 0,logoUrl:s.impersonatedCompany.logoUrl,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};else if(o!=null&&o.company){const w=o.company;j={id:o.company.id,name:o.company.name,slug:o.company.slug,domain:o.company.domain,billingEmail:w.billing_email,billingAddress:w.billing_address,subscriptionStatus:w.subscription_status||"active",subscriptionTier:w.subscription_tier||"standard",settings:o.company.settings,logoUrl:w.logo_url,createdAt:o.company.created_at,updatedAt:o.company.updated_at}}return{isInfraweaveAdmin:p,isInfraweaveEmployee:g,isCompanyAdmin:x,isEngineer:v,role:y,company:j,companyMembership:o?{id:o.id,companyId:o.company_id,userId:o.user_id,role:o.role,invitedBy:o.invited_by,invitedAt:o.invited_at,joinedAt:o.joined_at,isActive:o.is_active,createdAt:o.created_at,updatedAt:o.updated_at}:null,isLoading:n||i||l,canViewBilling:c||x,canManageTeam:c||x,canViewAuditLogs:c,canAccessAllCompanies:c&&!h,canManageTickets:c||d,isImpersonating:h,actualRole:m}}function h2({children:e,allowedRoles:s,fallbackPath:r="/"}){const{role:n,isLoading:a}=Ze(),i=Ws();return a?t.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:t.jsx(Ie,{className:"h-8 w-8 animate-spin text-primary"})}):n?s.includes(n)?t.jsx(t.Fragment,{children:e}):t.jsx(Gm,{to:r,state:{from:i},replace:!0}):t.jsx(Gm,{to:"/",state:{from:i},replace:!0})}function is({children:e}){return t.jsx(h2,{allowedRoles:["infraweave_admin"],fallbackPath:"/",children:e})}function co({children:e}){return t.jsx(h2,{allowedRoles:["infraweave_admin","company_admin"],fallbackPath:"/",children:e})}function gl({children:e}){const{user:s,clientData:r,loading:n}=dn(),a=Ws();return n?t.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:t.jsx(Ie,{className:"h-8 w-8 animate-spin text-primary"})}):s?r?t.jsx(t.Fragment,{children:e}):t.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:t.jsxs("div",{className:"text-center space-y-4 max-w-md",children:[t.jsx("div",{className:"mx-auto h-16 w-16 rounded-2xl bg-destructive/20 flex items-center justify-center",children:t.jsx(Ie,{className:"h-8 w-8 text-destructive"})}),t.jsx("h2",{className:"text-xl font-semibold",children:"Access Denied"}),t.jsx("p",{className:"text-muted-foreground",children:"Your account is not linked to a client record. Please contact support to get access to the client portal."})]})}):t.jsx(Gm,{to:"/portal/auth",state:{from:a},replace:!0})}var x8=Symbol.for("react.lazy"),Xm=jf[" use ".trim().toString()];function g8(e){return typeof e=="object"&&e!==null&&"then"in e}function m2(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===x8&&"_payload"in e&&g8(e._payload)}function f2(e){const s=y8(e),r=f.forwardRef((n,a)=>{let{children:i,...o}=n;m2(i)&&typeof Xm=="function"&&(i=Xm(i._payload));const l=f.Children.toArray(i),c=l.find(w8);if(c){const d=c.props.children,u=l.map(m=>m===c?f.Children.count(d)>1?f.Children.only(null):f.isValidElement(d)?d.props.children:null:m);return t.jsx(s,{...o,ref:a,children:f.isValidElement(d)?f.cloneElement(d,void 0,u):null})}return t.jsx(s,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}var v8=f2("Slot");function y8(e){const s=f.forwardRef((r,n)=>{let{children:a,...i}=r;if(m2(a)&&typeof Xm=="function"&&(a=Xm(a._payload)),f.isValidElement(a)){const o=N8(a),l=b8(i,a.props);return a.type!==f.Fragment&&(l.ref=n?la(n,o):o),f.cloneElement(a,l)}return f.Children.count(a)>1?f.Children.only(null):null});return s.displayName=`${e}.SlotClone`,s}var j8=Symbol("radix.slottable");function w8(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===j8}function b8(e,s){const r={...s};for(const n in s){const a=e[n],i=s[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function N8(e){var n,a;let s=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?e.ref:(s=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}const gu=$u("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 active:scale-[0.98]",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90 active:scale-[0.98]",outline:"border border-border bg-transparent hover:bg-secondary hover:text-secondary-foreground active:scale-[0.98]",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80 active:scale-[0.98]",ghost:"hover:bg-secondary hover:text-secondary-foreground",link:"text-primary underline-offset-4 hover:underline",glow:"bg-primary text-primary-foreground shadow-lg hover:shadow-primary/25 hover:bg-primary/90 active:scale-[0.98]",success:"bg-success text-success-foreground shadow-sm hover:bg-success/90 active:scale-[0.98]"},size:{default:"h-10 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-11 rounded-lg px-8",icon:"h-10 w-10","icon-sm":"h-8 w-8"}},defaultVariants:{variant:"default",size:"default"}}),T=f.forwardRef(({className:e,variant:s,size:r,asChild:n=!1,...a},i)=>{const o=n?v8:"button";return t.jsx(o,{className:J(gu({variant:s,size:r,className:e})),ref:i,...a})});T.displayName="Button";function C8(){const{isImpersonating:e,impersonatedCompany:s,stopImpersonation:r}=u2();return!e||!s?null:t.jsx("div",{className:"fixed top-0 left-0 right-0 z-[100] bg-warning text-warning-foreground py-2 px-4 shadow-md",children:t.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(rn,{className:"h-5 w-5 animate-pulse"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(qt,{className:"h-4 w-4"}),t.jsx("span",{className:"font-medium",children:"Impersonation Mode Active"})]}),t.jsxs("span",{className:"text-sm",children:["Viewing as ",t.jsx("strong",{children:s.name}),"  All actions are being logged"]})]}),t.jsxs(T,{variant:"outline",size:"sm",onClick:r,className:"bg-warning-foreground/10 hover:bg-warning-foreground/20 border-warning-foreground/30",children:[t.jsx(Ct,{className:"mr-2 h-4 w-4"}),"Exit Impersonation"]})]})})}function p2({timeoutMinutes:e=10,onTimeout:s,redirectPath:r="/auth",enabled:n=!0}){const a=Qe(),i=f.useRef(null),o=f.useRef(null),l=f.useRef(!1),c=f.useCallback(()=>{i.current&&(clearTimeout(i.current),i.current=null),o.current&&(clearTimeout(o.current),o.current=null)},[]),d=f.useCallback(async()=>{if(!l.current){l.current=!0,c(),z.info("You have been logged out due to inactivity");try{await s()}catch(m){console.error("Error during inactivity logout:",m)}a(r),l.current=!1}},[s,a,r,c]),u=f.useCallback(()=>{if(!n)return;c();const m=e*60*1e3,h=m-6e4;h>0&&(o.current=setTimeout(()=>{z.warning("You will be logged out in 1 minute due to inactivity")},h)),i.current=setTimeout(()=>{d()},m)},[n,e,d,c]);return f.useEffect(()=>{if(!n){c();return}const m=["mousedown","mousemove","keydown","scroll","touchstart","click","wheel"];let h=Date.now();const p=1e3,g=()=>{const v=Date.now();v-h>=p&&(h=v,u())};m.forEach(v=>{document.addEventListener(v,g,{passive:!0})});const x=()=>{document.visibilityState==="visible"&&u()};return document.addEventListener("visibilitychange",x),u(),()=>{c(),m.forEach(v=>{document.removeEventListener(v,g)}),document.removeEventListener("visibilitychange",x)}},[n,u,c]),{resetTimer:u}}function _8({timeoutMinutes:e=10,redirectPath:s="/auth"}){const{user:r,signOut:n}=ft();return p2({timeoutMinutes:e,onTimeout:n,redirectPath:s,enabled:!!r}),null}function S8({timeoutMinutes:e=10}){const{user:s,signOut:r}=dn();return p2({timeoutMinutes:e,onTimeout:r,redirectPath:"/portal/auth",enabled:!!s}),null}const x2=f.createContext(void 0);function k8({children:e}){const[s,r]=f.useState([]),n=f.useCallback(c=>{const d={...c,id:`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,read:!1,createdAt:new Date};r(u=>[d,...u].slice(0,50))},[]),a=f.useCallback(c=>{r(d=>d.map(u=>u.id===c?{...u,read:!0}:u))},[]),i=f.useCallback(()=>{r(c=>c.map(d=>({...d,read:!0})))},[]),o=f.useCallback(()=>{r([])},[]),l=s.filter(c=>!c.read).length;return t.jsx(x2.Provider,{value:{notifications:s,unreadCount:l,addNotification:n,markAsRead:a,markAllAsRead:i,clearNotifications:o},children:e})}function g2(){const e=f.useContext(x2);if(e===void 0)throw new Error("useNotifications must be used within a NotificationProvider");return e}function E8(e={}){const{enabled:s=!0}=e,{user:r}=ft(),{addNotification:n}=g2(),a=f.useRef(null);return f.useEffect(()=>{if(!s||!(r!=null&&r.id))return;a.current&&B.removeChannel(a.current);const i=B.channel("ticket-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"tickets"},o=>{A8(o.new,r.id,n)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"tickets"},o=>{T8(o.old,o.new,r.id,n)}).subscribe();return a.current=i,()=>{a.current&&(B.removeChannel(a.current),a.current=null)}},[s,r==null?void 0:r.id,n]),null}function A8(e,s,r){var n;e.assigned_to===s&&(z.info(" New Ticket Assigned",{description:`You've been assigned to: "${Vl(e.title,50)}"`,duration:5e3}),r({type:"ticket_assigned",title:"New Ticket Assigned",message:`You've been assigned to: "${e.title}"`,ticketId:e.id,ticketTitle:e.title})),(n=e.watchers)!=null&&n.includes(s)&&(z.info(" New Watched Ticket",{description:`A ticket you're watching was created: "${Vl(e.title,50)}"`,duration:5e3}),r({type:"new_ticket",title:"New Watched Ticket",message:`A ticket you're watching was created: "${e.title}"`,ticketId:e.id,ticketTitle:e.title}))}function T8(e,s,r,n){var d,u,m;const a=s.assigned_to===r,i=(d=s.watchers)==null?void 0:d.includes(r),o=s.reporter_id===r,l=e.assigned_to!==r&&s.assigned_to===r,c=!((u=e.watchers)!=null&&u.includes(r))&&((m=s.watchers)==null?void 0:m.includes(r));if(l){z.success(" Ticket Assigned to You",{description:`You've been assigned to: "${Vl(s.title,50)}"`,duration:5e3}),n({type:"ticket_assigned",title:"Ticket Assigned to You",message:`You've been assigned to: "${s.title}"`,ticketId:s.id,ticketTitle:s.title});return}if(c){z.info(" Added as Watcher",{description:`You're now watching: "${Vl(s.title,50)}"`,duration:5e3}),n({type:"watcher_added",title:"Added as Watcher",message:`You're now watching: "${s.title}"`,ticketId:s.id,ticketTitle:s.title});return}if(e.status!==s.status&&(a||i||o)){const h=P8(s.status);z.info(" Ticket Status Updated",{description:`"${Vl(s.title,40)}"  ${h}`,duration:5e3}),n({type:"ticket_status",title:"Ticket Status Updated",message:`"${s.title}" status changed to ${h}`,ticketId:s.id,ticketTitle:s.title})}if(e.priority!==s.priority&&(a||i||o)){const h=s.priority.charAt(0).toUpperCase()+s.priority.slice(1);z.warning(" Priority Changed",{description:`"${Vl(s.title,40)}" priority is now ${h}`,duration:5e3}),n({type:"ticket_priority",title:"Priority Changed",message:`"${s.title}" priority changed to ${h}`,ticketId:s.id,ticketTitle:s.title})}}function Vl(e,s){return e.length<=s?e:e.slice(0,s)+"..."}function P8(e){return{open:"Open",in_progress:"In Progress",waiting_customer:"Waiting on Customer",waiting_internal:"Waiting on Internal",resolved:"Resolved",closed:"Closed"}[e]||e}function R8(){const{user:e}=ft();return E8({enabled:!!e}),null}function I8({children:e}){return t.jsxs(k8,{children:[t.jsx(R8,{}),e]})}const se=f.forwardRef(({className:e,type:s,...r},n)=>t.jsx("input",{type:s,className:J("flex h-10 w-full rounded-md border-2 border-border bg-input px-3 py-2 text-base text-foreground ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground transition-all duration-200 hover:border-primary/40 focus-visible:outline-none focus-visible:border-primary focus-visible:ring-2 focus-visible:ring-primary/20 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));se.displayName="Input";var D8=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],hr=D8.reduce((e,s)=>{const r=f2(`Primitive.${s}`),n=f.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${s}`,{...e,[s]:n}},{}),O8="Label",v2=f.forwardRef((e,s)=>t.jsx(hr.label,{...e,ref:s,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));v2.displayName=O8;var y2=v2;const M8=$u("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),O=f.forwardRef(({className:e,...s},r)=>t.jsx(y2,{ref:r,className:J(M8(),e),...s}));O.displayName=y2.displayName;const P=f.forwardRef(({className:e,...s},r)=>t.jsx("div",{ref:r,className:J("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));P.displayName="Card";const W=f.forwardRef(({className:e,...s},r)=>t.jsx("div",{ref:r,className:J("flex flex-col space-y-1.5 p-6",e),...s}));W.displayName="CardHeader";const V=f.forwardRef(({className:e,...s},r)=>t.jsx("h3",{ref:r,className:J("text-2xl font-semibold leading-none tracking-tight",e),...s}));V.displayName="CardTitle";const ce=f.forwardRef(({className:e,...s},r)=>t.jsx("p",{ref:r,className:J("text-sm text-muted-foreground",e),...s}));ce.displayName="CardDescription";const M=f.forwardRef(({className:e,...s},r)=>t.jsx("div",{ref:r,className:J("p-6 pt-0",e),...s}));M.displayName="CardContent";const L8=f.forwardRef(({className:e,...s},r)=>t.jsx("div",{ref:r,className:J("flex items-center p-6 pt-0",e),...s}));L8.displayName="CardFooter";var ut;(function(e){e.assertEqual=a=>{};function s(a){}e.assertIs=s;function r(a){throw new Error}e.assertNever=r,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of i)o[l]=a[l];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function n(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=n,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(ut||(ut={}));var xN;(function(e){e.mergeShapes=(s,r)=>({...s,...r})})(xN||(xN={}));const Ee=ut.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),di=e=>{switch(typeof e){case"undefined":return Ee.undefined;case"string":return Ee.string;case"number":return Number.isNaN(e)?Ee.nan:Ee.number;case"boolean":return Ee.boolean;case"function":return Ee.function;case"bigint":return Ee.bigint;case"symbol":return Ee.symbol;case"object":return Array.isArray(e)?Ee.array:e===null?Ee.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Ee.promise:typeof Map<"u"&&e instanceof Map?Ee.map:typeof Set<"u"&&e instanceof Set?Ee.set:typeof Date<"u"&&e instanceof Date?Ee.date:Ee.object;default:return Ee.unknown}},me=ut.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class lr extends Error{get errors(){return this.issues}constructor(s){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=s}format(s){const r=s||function(i){return i.message},n={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let l=n,c=0;for(;c<o.path.length;){const d=o.path[c];c===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(r(o))):l[d]=l[d]||{_errors:[]},l=l[d],c++}}};return a(this),n}static assert(s){if(!(s instanceof lr))throw new Error(`Not a ZodError: ${s}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ut.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(s=r=>r.message){const r={},n=[];for(const a of this.issues)if(a.path.length>0){const i=a.path[0];r[i]=r[i]||[],r[i].push(s(a))}else n.push(s(a));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}lr.create=e=>new lr(e);const Fv=(e,s)=>{let r;switch(e.code){case me.invalid_type:e.received===Ee.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case me.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,ut.jsonStringifyReplacer)}`;break;case me.unrecognized_keys:r=`Unrecognized key(s) in object: ${ut.joinValues(e.keys,", ")}`;break;case me.invalid_union:r="Invalid input";break;case me.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${ut.joinValues(e.options)}`;break;case me.invalid_enum_value:r=`Invalid enum value. Expected ${ut.joinValues(e.options)}, received '${e.received}'`;break;case me.invalid_arguments:r="Invalid function arguments";break;case me.invalid_return_type:r="Invalid function return type";break;case me.invalid_date:r="Invalid date";break;case me.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:ut.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case me.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case me.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case me.custom:r="Invalid input";break;case me.invalid_intersection_types:r="Intersection results could not be merged";break;case me.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case me.not_finite:r="Number must be finite";break;default:r=s.defaultError,ut.assertNever(e)}return{message:r}};let F8=Fv;function $8(){return F8}const U8=e=>{const{data:s,path:r,errorMaps:n,issueData:a}=e,i=[...r,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let l="";const c=n.filter(d=>!!d).slice().reverse();for(const d of c)l=d(o,{data:s,defaultError:l}).message;return{...a,path:i,message:l}};function ye(e,s){const r=$8(),n=U8({issueData:s,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===Fv?void 0:Fv].filter(a=>!!a)});e.common.issues.push(n)}class Fr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(s,r){const n=[];for(const a of r){if(a.status==="aborted")return Ke;a.status==="dirty"&&s.dirty(),n.push(a.value)}return{status:s.value,value:n}}static async mergeObjectAsync(s,r){const n=[];for(const a of r){const i=await a.key,o=await a.value;n.push({key:i,value:o})}return Fr.mergeObjectSync(s,n)}static mergeObjectSync(s,r){const n={};for(const a of r){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return Ke;i.status==="dirty"&&s.dirty(),o.status==="dirty"&&s.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(n[i.value]=o.value)}return{status:s.value,value:n}}}const Ke=Object.freeze({status:"aborted"}),Sd=e=>({status:"dirty",value:e}),un=e=>({status:"valid",value:e}),gN=e=>e.status==="aborted",vN=e=>e.status==="dirty",Ac=e=>e.status==="valid",ef=e=>typeof Promise<"u"&&e instanceof Promise;var Te;(function(e){e.errToObj=s=>typeof s=="string"?{message:s}:s||{},e.toString=s=>typeof s=="string"?s:s==null?void 0:s.message})(Te||(Te={}));class Hi{constructor(s,r,n,a){this._cachedPath=[],this.parent=s,this.data=r,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const yN=(e,s)=>{if(Ac(s))return{success:!0,data:s.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new lr(e.common.issues);return this._error=r,this._error}}};function st(e){if(!e)return{};const{errorMap:s,invalid_type_error:r,required_error:n,description:a}=e;if(s&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return s?{errorMap:s,description:a}:{errorMap:(o,l)=>{const{message:c}=e;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??n??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??r??l.defaultError}},description:a}}class dt{get description(){return this._def.description}_getType(s){return di(s.data)}_getOrReturnCtx(s,r){return r||{common:s.parent.common,data:s.data,parsedType:di(s.data),schemaErrorMap:this._def.errorMap,path:s.path,parent:s.parent}}_processInputParams(s){return{status:new Fr,ctx:{common:s.parent.common,data:s.data,parsedType:di(s.data),schemaErrorMap:this._def.errorMap,path:s.path,parent:s.parent}}}_parseSync(s){const r=this._parse(s);if(ef(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(s){const r=this._parse(s);return Promise.resolve(r)}parse(s,r){const n=this.safeParse(s,r);if(n.success)return n.data;throw n.error}safeParse(s,r){const n={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:di(s)},a=this._parseSync({data:s,path:n.path,parent:n});return yN(n,a)}"~validate"(s){var n,a;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:di(s)};if(!this["~standard"].async)try{const i=this._parseSync({data:s,path:[],parent:r});return Ac(i)?{value:i.value}:{issues:r.common.issues}}catch(i){(a=(n=i==null?void 0:i.message)==null?void 0:n.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:s,path:[],parent:r}).then(i=>Ac(i)?{value:i.value}:{issues:r.common.issues})}async parseAsync(s,r){const n=await this.safeParseAsync(s,r);if(n.success)return n.data;throw n.error}async safeParseAsync(s,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:di(s)},a=this._parse({data:s,path:n.path,parent:n}),i=await(ef(a)?a:Promise.resolve(a));return yN(n,i)}refine(s,r){const n=a=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(a):r;return this._refinement((a,i)=>{const o=s(a),l=()=>i.addIssue({code:me.custom,...n(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(s,r){return this._refinement((n,a)=>s(n)?!0:(a.addIssue(typeof r=="function"?r(n,a):r),!1))}_refinement(s){return new Pc({schema:this,typeName:Ge.ZodEffects,effect:{type:"refinement",refinement:s}})}superRefine(s){return this._refinement(s)}constructor(s){this.spa=this.safeParseAsync,this._def=s,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Fi.create(this,this._def)}nullable(){return Rc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ia.create(this)}promise(){return nf.create(this,this._def)}or(s){return sf.create([this,s],this._def)}and(s){return rf.create(this,s,this._def)}transform(s){return new Pc({...st(this._def),schema:this,typeName:Ge.ZodEffects,effect:{type:"transform",transform:s}})}default(s){const r=typeof s=="function"?s:()=>s;return new Bv({...st(this._def),innerType:this,defaultValue:r,typeName:Ge.ZodDefault})}brand(){return new cU({typeName:Ge.ZodBranded,type:this,...st(this._def)})}catch(s){const r=typeof s=="function"?s:()=>s;return new zv({...st(this._def),innerType:this,catchValue:r,typeName:Ge.ZodCatch})}describe(s){const r=this.constructor;return new r({...this._def,description:s})}pipe(s){return Uj.create(this,s)}readonly(){return qv.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const B8=/^c[^\s-]{8,}$/i,z8=/^[0-9a-z]+$/,q8=/^[0-9A-HJKMNP-TV-Z]{26}$/i,W8=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,V8=/^[a-z0-9_-]{21}$/i,H8=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,K8=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,G8=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Y8="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Sx;const Q8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Z8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,J8=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,X8=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,eU=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,tU=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,j2="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",sU=new RegExp(`^${j2}$`);function w2(e){let s="[0-5]\\d";e.precision?s=`${s}\\.\\d{${e.precision}}`:e.precision==null&&(s=`${s}(\\.\\d+)?`);const r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${s})${r}`}function rU(e){return new RegExp(`^${w2(e)}$`)}function nU(e){let s=`${j2}T${w2(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),s=`${s}(${r.join("|")})`,new RegExp(`^${s}$`)}function aU(e,s){return!!((s==="v4"||!s)&&Q8.test(e)||(s==="v6"||!s)&&J8.test(e))}function iU(e,s){if(!H8.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||s&&a.alg!==s)}catch{return!1}}function oU(e,s){return!!((s==="v4"||!s)&&Z8.test(e)||(s==="v6"||!s)&&X8.test(e))}class ki extends dt{_parse(s){if(this._def.coerce&&(s.data=String(s.data)),this._getType(s)!==Ee.string){const i=this._getOrReturnCtx(s);return ye(i,{code:me.invalid_type,expected:Ee.string,received:i.parsedType}),Ke}const n=new Fr;let a;for(const i of this._def.checks)if(i.kind==="min")s.data.length<i.value&&(a=this._getOrReturnCtx(s,a),ye(a,{code:me.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")s.data.length>i.value&&(a=this._getOrReturnCtx(s,a),ye(a,{code:me.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=s.data.length>i.value,l=s.data.length<i.value;(o||l)&&(a=this._getOrReturnCtx(s,a),o?ye(a,{code:me.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&ye(a,{code:me.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")G8.test(s.data)||(a=this._getOrReturnCtx(s,a),ye(a,{validation:"email",code:me.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Sx||(Sx=new RegExp(Y8,"u")),Sx.test(s.data)||(a=this._getOrReturnCtx(s,a),ye(a,{validation:"emoji",code:me.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")W8.test(s.data)||(a=this._getOrReturnCtx(s,a),ye(a,{validation:"uuid",code:me.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")V8.test(s.data)||(a=this._getOrReturnCtx(s,a),ye(a,{validation:"nanoid",code:me.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")B8.test(s.data)||(a=this._getOrReturnCtx(s,a),ye(a,{validation:"cuid",code:me.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")z8.test(s.data)||(a=this._getOrReturnCtx(s,a),ye(a,{validation:"cuid2",code:me.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")q8.test(s.data)||(a=this._getOrReturnCtx(s,a),ye(a,{validation:"ulid",code:me.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(s.data)}catch{a=this._getOrReturnCtx(s,a),ye(a,{validation:"url",code:me.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(s.data)||(a=this._getOrReturnCtx(s,a),ye(a,{validation:"regex",code:me.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?s.data=s.data.trim():i.kind==="includes"?s.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(s,a),ye(a,{code:me.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?s.data=s.data.toLowerCase():i.kind==="toUpperCase"?s.data=s.data.toUpperCase():i.kind==="startsWith"?s.data.startsWith(i.value)||(a=this._getOrReturnCtx(s,a),ye(a,{code:me.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?s.data.endsWith(i.value)||(a=this._getOrReturnCtx(s,a),ye(a,{code:me.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?nU(i).test(s.data)||(a=this._getOrReturnCtx(s,a),ye(a,{code:me.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?sU.test(s.data)||(a=this._getOrReturnCtx(s,a),ye(a,{code:me.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?rU(i).test(s.data)||(a=this._getOrReturnCtx(s,a),ye(a,{code:me.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?K8.test(s.data)||(a=this._getOrReturnCtx(s,a),ye(a,{validation:"duration",code:me.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?aU(s.data,i.version)||(a=this._getOrReturnCtx(s,a),ye(a,{validation:"ip",code:me.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?iU(s.data,i.alg)||(a=this._getOrReturnCtx(s,a),ye(a,{validation:"jwt",code:me.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?oU(s.data,i.version)||(a=this._getOrReturnCtx(s,a),ye(a,{validation:"cidr",code:me.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?eU.test(s.data)||(a=this._getOrReturnCtx(s,a),ye(a,{validation:"base64",code:me.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?tU.test(s.data)||(a=this._getOrReturnCtx(s,a),ye(a,{validation:"base64url",code:me.invalid_string,message:i.message}),n.dirty()):ut.assertNever(i);return{status:n.value,value:s.data}}_regex(s,r,n){return this.refinement(a=>s.test(a),{validation:r,code:me.invalid_string,...Te.errToObj(n)})}_addCheck(s){return new ki({...this._def,checks:[...this._def.checks,s]})}email(s){return this._addCheck({kind:"email",...Te.errToObj(s)})}url(s){return this._addCheck({kind:"url",...Te.errToObj(s)})}emoji(s){return this._addCheck({kind:"emoji",...Te.errToObj(s)})}uuid(s){return this._addCheck({kind:"uuid",...Te.errToObj(s)})}nanoid(s){return this._addCheck({kind:"nanoid",...Te.errToObj(s)})}cuid(s){return this._addCheck({kind:"cuid",...Te.errToObj(s)})}cuid2(s){return this._addCheck({kind:"cuid2",...Te.errToObj(s)})}ulid(s){return this._addCheck({kind:"ulid",...Te.errToObj(s)})}base64(s){return this._addCheck({kind:"base64",...Te.errToObj(s)})}base64url(s){return this._addCheck({kind:"base64url",...Te.errToObj(s)})}jwt(s){return this._addCheck({kind:"jwt",...Te.errToObj(s)})}ip(s){return this._addCheck({kind:"ip",...Te.errToObj(s)})}cidr(s){return this._addCheck({kind:"cidr",...Te.errToObj(s)})}datetime(s){return typeof s=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:s}):this._addCheck({kind:"datetime",precision:typeof(s==null?void 0:s.precision)>"u"?null:s==null?void 0:s.precision,offset:(s==null?void 0:s.offset)??!1,local:(s==null?void 0:s.local)??!1,...Te.errToObj(s==null?void 0:s.message)})}date(s){return this._addCheck({kind:"date",message:s})}time(s){return typeof s=="string"?this._addCheck({kind:"time",precision:null,message:s}):this._addCheck({kind:"time",precision:typeof(s==null?void 0:s.precision)>"u"?null:s==null?void 0:s.precision,...Te.errToObj(s==null?void 0:s.message)})}duration(s){return this._addCheck({kind:"duration",...Te.errToObj(s)})}regex(s,r){return this._addCheck({kind:"regex",regex:s,...Te.errToObj(r)})}includes(s,r){return this._addCheck({kind:"includes",value:s,position:r==null?void 0:r.position,...Te.errToObj(r==null?void 0:r.message)})}startsWith(s,r){return this._addCheck({kind:"startsWith",value:s,...Te.errToObj(r)})}endsWith(s,r){return this._addCheck({kind:"endsWith",value:s,...Te.errToObj(r)})}min(s,r){return this._addCheck({kind:"min",value:s,...Te.errToObj(r)})}max(s,r){return this._addCheck({kind:"max",value:s,...Te.errToObj(r)})}length(s,r){return this._addCheck({kind:"length",value:s,...Te.errToObj(r)})}nonempty(s){return this.min(1,Te.errToObj(s))}trim(){return new ki({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ki({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ki({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(s=>s.kind==="datetime")}get isDate(){return!!this._def.checks.find(s=>s.kind==="date")}get isTime(){return!!this._def.checks.find(s=>s.kind==="time")}get isDuration(){return!!this._def.checks.find(s=>s.kind==="duration")}get isEmail(){return!!this._def.checks.find(s=>s.kind==="email")}get isURL(){return!!this._def.checks.find(s=>s.kind==="url")}get isEmoji(){return!!this._def.checks.find(s=>s.kind==="emoji")}get isUUID(){return!!this._def.checks.find(s=>s.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(s=>s.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(s=>s.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(s=>s.kind==="cuid2")}get isULID(){return!!this._def.checks.find(s=>s.kind==="ulid")}get isIP(){return!!this._def.checks.find(s=>s.kind==="ip")}get isCIDR(){return!!this._def.checks.find(s=>s.kind==="cidr")}get isBase64(){return!!this._def.checks.find(s=>s.kind==="base64")}get isBase64url(){return!!this._def.checks.find(s=>s.kind==="base64url")}get minLength(){let s=null;for(const r of this._def.checks)r.kind==="min"&&(s===null||r.value>s)&&(s=r.value);return s}get maxLength(){let s=null;for(const r of this._def.checks)r.kind==="max"&&(s===null||r.value<s)&&(s=r.value);return s}}ki.create=e=>new ki({checks:[],typeName:Ge.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...st(e)});function lU(e,s){const r=(e.toString().split(".")[1]||"").length,n=(s.toString().split(".")[1]||"").length,a=r>n?r:n,i=Number.parseInt(e.toFixed(a).replace(".","")),o=Number.parseInt(s.toFixed(a).replace(".",""));return i%o/10**a}class vu extends dt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(s){if(this._def.coerce&&(s.data=Number(s.data)),this._getType(s)!==Ee.number){const i=this._getOrReturnCtx(s);return ye(i,{code:me.invalid_type,expected:Ee.number,received:i.parsedType}),Ke}let n;const a=new Fr;for(const i of this._def.checks)i.kind==="int"?ut.isInteger(s.data)||(n=this._getOrReturnCtx(s,n),ye(n,{code:me.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?s.data<i.value:s.data<=i.value)&&(n=this._getOrReturnCtx(s,n),ye(n,{code:me.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?s.data>i.value:s.data>=i.value)&&(n=this._getOrReturnCtx(s,n),ye(n,{code:me.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?lU(s.data,i.value)!==0&&(n=this._getOrReturnCtx(s,n),ye(n,{code:me.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(s.data)||(n=this._getOrReturnCtx(s,n),ye(n,{code:me.not_finite,message:i.message}),a.dirty()):ut.assertNever(i);return{status:a.value,value:s.data}}gte(s,r){return this.setLimit("min",s,!0,Te.toString(r))}gt(s,r){return this.setLimit("min",s,!1,Te.toString(r))}lte(s,r){return this.setLimit("max",s,!0,Te.toString(r))}lt(s,r){return this.setLimit("max",s,!1,Te.toString(r))}setLimit(s,r,n,a){return new vu({...this._def,checks:[...this._def.checks,{kind:s,value:r,inclusive:n,message:Te.toString(a)}]})}_addCheck(s){return new vu({...this._def,checks:[...this._def.checks,s]})}int(s){return this._addCheck({kind:"int",message:Te.toString(s)})}positive(s){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Te.toString(s)})}negative(s){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Te.toString(s)})}nonpositive(s){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Te.toString(s)})}nonnegative(s){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Te.toString(s)})}multipleOf(s,r){return this._addCheck({kind:"multipleOf",value:s,message:Te.toString(r)})}finite(s){return this._addCheck({kind:"finite",message:Te.toString(s)})}safe(s){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Te.toString(s)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Te.toString(s)})}get minValue(){let s=null;for(const r of this._def.checks)r.kind==="min"&&(s===null||r.value>s)&&(s=r.value);return s}get maxValue(){let s=null;for(const r of this._def.checks)r.kind==="max"&&(s===null||r.value<s)&&(s=r.value);return s}get isInt(){return!!this._def.checks.find(s=>s.kind==="int"||s.kind==="multipleOf"&&ut.isInteger(s.value))}get isFinite(){let s=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(s===null||n.value<s)&&(s=n.value)}return Number.isFinite(r)&&Number.isFinite(s)}}vu.create=e=>new vu({checks:[],typeName:Ge.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...st(e)});class yu extends dt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(s){if(this._def.coerce)try{s.data=BigInt(s.data)}catch{return this._getInvalidInput(s)}if(this._getType(s)!==Ee.bigint)return this._getInvalidInput(s);let n;const a=new Fr;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?s.data<i.value:s.data<=i.value)&&(n=this._getOrReturnCtx(s,n),ye(n,{code:me.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?s.data>i.value:s.data>=i.value)&&(n=this._getOrReturnCtx(s,n),ye(n,{code:me.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?s.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(s,n),ye(n,{code:me.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):ut.assertNever(i);return{status:a.value,value:s.data}}_getInvalidInput(s){const r=this._getOrReturnCtx(s);return ye(r,{code:me.invalid_type,expected:Ee.bigint,received:r.parsedType}),Ke}gte(s,r){return this.setLimit("min",s,!0,Te.toString(r))}gt(s,r){return this.setLimit("min",s,!1,Te.toString(r))}lte(s,r){return this.setLimit("max",s,!0,Te.toString(r))}lt(s,r){return this.setLimit("max",s,!1,Te.toString(r))}setLimit(s,r,n,a){return new yu({...this._def,checks:[...this._def.checks,{kind:s,value:r,inclusive:n,message:Te.toString(a)}]})}_addCheck(s){return new yu({...this._def,checks:[...this._def.checks,s]})}positive(s){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Te.toString(s)})}negative(s){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Te.toString(s)})}nonpositive(s){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Te.toString(s)})}nonnegative(s){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Te.toString(s)})}multipleOf(s,r){return this._addCheck({kind:"multipleOf",value:s,message:Te.toString(r)})}get minValue(){let s=null;for(const r of this._def.checks)r.kind==="min"&&(s===null||r.value>s)&&(s=r.value);return s}get maxValue(){let s=null;for(const r of this._def.checks)r.kind==="max"&&(s===null||r.value<s)&&(s=r.value);return s}}yu.create=e=>new yu({checks:[],typeName:Ge.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...st(e)});class jN extends dt{_parse(s){if(this._def.coerce&&(s.data=!!s.data),this._getType(s)!==Ee.boolean){const n=this._getOrReturnCtx(s);return ye(n,{code:me.invalid_type,expected:Ee.boolean,received:n.parsedType}),Ke}return un(s.data)}}jN.create=e=>new jN({typeName:Ge.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...st(e)});class tf extends dt{_parse(s){if(this._def.coerce&&(s.data=new Date(s.data)),this._getType(s)!==Ee.date){const i=this._getOrReturnCtx(s);return ye(i,{code:me.invalid_type,expected:Ee.date,received:i.parsedType}),Ke}if(Number.isNaN(s.data.getTime())){const i=this._getOrReturnCtx(s);return ye(i,{code:me.invalid_date}),Ke}const n=new Fr;let a;for(const i of this._def.checks)i.kind==="min"?s.data.getTime()<i.value&&(a=this._getOrReturnCtx(s,a),ye(a,{code:me.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?s.data.getTime()>i.value&&(a=this._getOrReturnCtx(s,a),ye(a,{code:me.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):ut.assertNever(i);return{status:n.value,value:new Date(s.data.getTime())}}_addCheck(s){return new tf({...this._def,checks:[...this._def.checks,s]})}min(s,r){return this._addCheck({kind:"min",value:s.getTime(),message:Te.toString(r)})}max(s,r){return this._addCheck({kind:"max",value:s.getTime(),message:Te.toString(r)})}get minDate(){let s=null;for(const r of this._def.checks)r.kind==="min"&&(s===null||r.value>s)&&(s=r.value);return s!=null?new Date(s):null}get maxDate(){let s=null;for(const r of this._def.checks)r.kind==="max"&&(s===null||r.value<s)&&(s=r.value);return s!=null?new Date(s):null}}tf.create=e=>new tf({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Ge.ZodDate,...st(e)});class wN extends dt{_parse(s){if(this._getType(s)!==Ee.symbol){const n=this._getOrReturnCtx(s);return ye(n,{code:me.invalid_type,expected:Ee.symbol,received:n.parsedType}),Ke}return un(s.data)}}wN.create=e=>new wN({typeName:Ge.ZodSymbol,...st(e)});class bN extends dt{_parse(s){if(this._getType(s)!==Ee.undefined){const n=this._getOrReturnCtx(s);return ye(n,{code:me.invalid_type,expected:Ee.undefined,received:n.parsedType}),Ke}return un(s.data)}}bN.create=e=>new bN({typeName:Ge.ZodUndefined,...st(e)});class NN extends dt{_parse(s){if(this._getType(s)!==Ee.null){const n=this._getOrReturnCtx(s);return ye(n,{code:me.invalid_type,expected:Ee.null,received:n.parsedType}),Ke}return un(s.data)}}NN.create=e=>new NN({typeName:Ge.ZodNull,...st(e)});class CN extends dt{constructor(){super(...arguments),this._any=!0}_parse(s){return un(s.data)}}CN.create=e=>new CN({typeName:Ge.ZodAny,...st(e)});class _N extends dt{constructor(){super(...arguments),this._unknown=!0}_parse(s){return un(s.data)}}_N.create=e=>new _N({typeName:Ge.ZodUnknown,...st(e)});class Ki extends dt{_parse(s){const r=this._getOrReturnCtx(s);return ye(r,{code:me.invalid_type,expected:Ee.never,received:r.parsedType}),Ke}}Ki.create=e=>new Ki({typeName:Ge.ZodNever,...st(e)});class SN extends dt{_parse(s){if(this._getType(s)!==Ee.undefined){const n=this._getOrReturnCtx(s);return ye(n,{code:me.invalid_type,expected:Ee.void,received:n.parsedType}),Ke}return un(s.data)}}SN.create=e=>new SN({typeName:Ge.ZodVoid,...st(e)});class ia extends dt{_parse(s){const{ctx:r,status:n}=this._processInputParams(s),a=this._def;if(r.parsedType!==Ee.array)return ye(r,{code:me.invalid_type,expected:Ee.array,received:r.parsedType}),Ke;if(a.exactLength!==null){const o=r.data.length>a.exactLength.value,l=r.data.length<a.exactLength.value;(o||l)&&(ye(r,{code:o?me.too_big:me.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&(ye(r,{code:me.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&(ye(r,{code:me.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>a.type._parseAsync(new Hi(r,o,r.path,l)))).then(o=>Fr.mergeArray(n,o));const i=[...r.data].map((o,l)=>a.type._parseSync(new Hi(r,o,r.path,l)));return Fr.mergeArray(n,i)}get element(){return this._def.type}min(s,r){return new ia({...this._def,minLength:{value:s,message:Te.toString(r)}})}max(s,r){return new ia({...this._def,maxLength:{value:s,message:Te.toString(r)}})}length(s,r){return new ia({...this._def,exactLength:{value:s,message:Te.toString(r)}})}nonempty(s){return this.min(1,s)}}ia.create=(e,s)=>new ia({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Ge.ZodArray,...st(s)});function Sl(e){if(e instanceof bs){const s={};for(const r in e.shape){const n=e.shape[r];s[r]=Fi.create(Sl(n))}return new bs({...e._def,shape:()=>s})}else return e instanceof ia?new ia({...e._def,type:Sl(e.element)}):e instanceof Fi?Fi.create(Sl(e.unwrap())):e instanceof Rc?Rc.create(Sl(e.unwrap())):e instanceof Ho?Ho.create(e.items.map(s=>Sl(s))):e}class bs extends dt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const s=this._def.shape(),r=ut.objectKeys(s);return this._cached={shape:s,keys:r},this._cached}_parse(s){if(this._getType(s)!==Ee.object){const d=this._getOrReturnCtx(s);return ye(d,{code:me.invalid_type,expected:Ee.object,received:d.parsedType}),Ke}const{status:n,ctx:a}=this._processInputParams(s),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Ki&&this._def.unknownKeys==="strip"))for(const d in a.data)o.includes(d)||l.push(d);const c=[];for(const d of o){const u=i[d],m=a.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Hi(a,m,a.path,d)),alwaysSet:d in a.data})}if(this._def.catchall instanceof Ki){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of l)c.push({key:{status:"valid",value:u},value:{status:"valid",value:a.data[u]}});else if(d==="strict")l.length>0&&(ye(a,{code:me.unrecognized_keys,keys:l}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of l){const m=a.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Hi(a,m,a.path,u)),alwaysSet:u in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of c){const m=await u.key,h=await u.value;d.push({key:m,value:h,alwaysSet:u.alwaysSet})}return d}).then(d=>Fr.mergeObjectSync(n,d)):Fr.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(s){return Te.errToObj,new bs({...this._def,unknownKeys:"strict",...s!==void 0?{errorMap:(r,n)=>{var i,o;const a=((o=(i=this._def).errorMap)==null?void 0:o.call(i,r,n).message)??n.defaultError;return r.code==="unrecognized_keys"?{message:Te.errToObj(s).message??a}:{message:a}}}:{}})}strip(){return new bs({...this._def,unknownKeys:"strip"})}passthrough(){return new bs({...this._def,unknownKeys:"passthrough"})}extend(s){return new bs({...this._def,shape:()=>({...this._def.shape(),...s})})}merge(s){return new bs({unknownKeys:s._def.unknownKeys,catchall:s._def.catchall,shape:()=>({...this._def.shape(),...s._def.shape()}),typeName:Ge.ZodObject})}setKey(s,r){return this.augment({[s]:r})}catchall(s){return new bs({...this._def,catchall:s})}pick(s){const r={};for(const n of ut.objectKeys(s))s[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new bs({...this._def,shape:()=>r})}omit(s){const r={};for(const n of ut.objectKeys(this.shape))s[n]||(r[n]=this.shape[n]);return new bs({...this._def,shape:()=>r})}deepPartial(){return Sl(this)}partial(s){const r={};for(const n of ut.objectKeys(this.shape)){const a=this.shape[n];s&&!s[n]?r[n]=a:r[n]=a.optional()}return new bs({...this._def,shape:()=>r})}required(s){const r={};for(const n of ut.objectKeys(this.shape))if(s&&!s[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Fi;)i=i._def.innerType;r[n]=i}return new bs({...this._def,shape:()=>r})}keyof(){return b2(ut.objectKeys(this.shape))}}bs.create=(e,s)=>new bs({shape:()=>e,unknownKeys:"strip",catchall:Ki.create(),typeName:Ge.ZodObject,...st(s)});bs.strictCreate=(e,s)=>new bs({shape:()=>e,unknownKeys:"strict",catchall:Ki.create(),typeName:Ge.ZodObject,...st(s)});bs.lazycreate=(e,s)=>new bs({shape:e,unknownKeys:"strip",catchall:Ki.create(),typeName:Ge.ZodObject,...st(s)});class sf extends dt{_parse(s){const{ctx:r}=this._processInputParams(s),n=this._def.options;function a(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new lr(l.ctx.common.issues));return ye(r,{code:me.invalid_union,unionErrors:o}),Ke}if(r.common.async)return Promise.all(n.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const c of n){const d={...r,common:{...r.common,issues:[]},parent:null},u=c._parseSync({data:r.data,path:r.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(c=>new lr(c));return ye(r,{code:me.invalid_union,unionErrors:l}),Ke}}get options(){return this._def.options}}sf.create=(e,s)=>new sf({options:e,typeName:Ge.ZodUnion,...st(s)});function $v(e,s){const r=di(e),n=di(s);if(e===s)return{valid:!0,data:e};if(r===Ee.object&&n===Ee.object){const a=ut.objectKeys(s),i=ut.objectKeys(e).filter(l=>a.indexOf(l)!==-1),o={...e,...s};for(const l of i){const c=$v(e[l],s[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(r===Ee.array&&n===Ee.array){if(e.length!==s.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],l=s[i],c=$v(o,l);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return r===Ee.date&&n===Ee.date&&+e==+s?{valid:!0,data:e}:{valid:!1}}class rf extends dt{_parse(s){const{status:r,ctx:n}=this._processInputParams(s),a=(i,o)=>{if(gN(i)||gN(o))return Ke;const l=$v(i.value,o.value);return l.valid?((vN(i)||vN(o))&&r.dirty(),{status:r.value,value:l.data}):(ye(n,{code:me.invalid_intersection_types}),Ke)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}rf.create=(e,s,r)=>new rf({left:e,right:s,typeName:Ge.ZodIntersection,...st(r)});class Ho extends dt{_parse(s){const{status:r,ctx:n}=this._processInputParams(s);if(n.parsedType!==Ee.array)return ye(n,{code:me.invalid_type,expected:Ee.array,received:n.parsedType}),Ke;if(n.data.length<this._def.items.length)return ye(n,{code:me.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ke;!this._def.rest&&n.data.length>this._def.items.length&&(ye(n,{code:me.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Hi(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>Fr.mergeArray(r,o)):Fr.mergeArray(r,i)}get items(){return this._def.items}rest(s){return new Ho({...this._def,rest:s})}}Ho.create=(e,s)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ho({items:e,typeName:Ge.ZodTuple,rest:null,...st(s)})};class kN extends dt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(s){const{status:r,ctx:n}=this._processInputParams(s);if(n.parsedType!==Ee.map)return ye(n,{code:me.invalid_type,expected:Ee.map,received:n.parsedType}),Ke;const a=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([l,c],d)=>({key:a._parse(new Hi(n,l,n.path,[d,"key"])),value:i._parse(new Hi(n,c,n.path,[d,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const d=await c.key,u=await c.value;if(d.status==="aborted"||u.status==="aborted")return Ke;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),l.set(d.value,u.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of o){const d=c.key,u=c.value;if(d.status==="aborted"||u.status==="aborted")return Ke;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),l.set(d.value,u.value)}return{status:r.value,value:l}}}}kN.create=(e,s,r)=>new kN({valueType:s,keyType:e,typeName:Ge.ZodMap,...st(r)});class ju extends dt{_parse(s){const{status:r,ctx:n}=this._processInputParams(s);if(n.parsedType!==Ee.set)return ye(n,{code:me.invalid_type,expected:Ee.set,received:n.parsedType}),Ke;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(ye(n,{code:me.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(ye(n,{code:me.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());const i=this._def.valueType;function o(c){const d=new Set;for(const u of c){if(u.status==="aborted")return Ke;u.status==="dirty"&&r.dirty(),d.add(u.value)}return{status:r.value,value:d}}const l=[...n.data.values()].map((c,d)=>i._parse(new Hi(n,c,n.path,d)));return n.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(s,r){return new ju({...this._def,minSize:{value:s,message:Te.toString(r)}})}max(s,r){return new ju({...this._def,maxSize:{value:s,message:Te.toString(r)}})}size(s,r){return this.min(s,r).max(s,r)}nonempty(s){return this.min(1,s)}}ju.create=(e,s)=>new ju({valueType:e,minSize:null,maxSize:null,typeName:Ge.ZodSet,...st(s)});class EN extends dt{get schema(){return this._def.getter()}_parse(s){const{ctx:r}=this._processInputParams(s);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}EN.create=(e,s)=>new EN({getter:e,typeName:Ge.ZodLazy,...st(s)});class Uv extends dt{_parse(s){if(s.data!==this._def.value){const r=this._getOrReturnCtx(s);return ye(r,{received:r.data,code:me.invalid_literal,expected:this._def.value}),Ke}return{status:"valid",value:s.data}}get value(){return this._def.value}}Uv.create=(e,s)=>new Uv({value:e,typeName:Ge.ZodLiteral,...st(s)});function b2(e,s){return new Tc({values:e,typeName:Ge.ZodEnum,...st(s)})}class Tc extends dt{_parse(s){if(typeof s.data!="string"){const r=this._getOrReturnCtx(s),n=this._def.values;return ye(r,{expected:ut.joinValues(n),received:r.parsedType,code:me.invalid_type}),Ke}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(s.data)){const r=this._getOrReturnCtx(s),n=this._def.values;return ye(r,{received:r.data,code:me.invalid_enum_value,options:n}),Ke}return un(s.data)}get options(){return this._def.values}get enum(){const s={};for(const r of this._def.values)s[r]=r;return s}get Values(){const s={};for(const r of this._def.values)s[r]=r;return s}get Enum(){const s={};for(const r of this._def.values)s[r]=r;return s}extract(s,r=this._def){return Tc.create(s,{...this._def,...r})}exclude(s,r=this._def){return Tc.create(this.options.filter(n=>!s.includes(n)),{...this._def,...r})}}Tc.create=b2;class AN extends dt{_parse(s){const r=ut.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(s);if(n.parsedType!==Ee.string&&n.parsedType!==Ee.number){const a=ut.objectValues(r);return ye(n,{expected:ut.joinValues(a),received:n.parsedType,code:me.invalid_type}),Ke}if(this._cache||(this._cache=new Set(ut.getValidEnumValues(this._def.values))),!this._cache.has(s.data)){const a=ut.objectValues(r);return ye(n,{received:n.data,code:me.invalid_enum_value,options:a}),Ke}return un(s.data)}get enum(){return this._def.values}}AN.create=(e,s)=>new AN({values:e,typeName:Ge.ZodNativeEnum,...st(s)});class nf extends dt{unwrap(){return this._def.type}_parse(s){const{ctx:r}=this._processInputParams(s);if(r.parsedType!==Ee.promise&&r.common.async===!1)return ye(r,{code:me.invalid_type,expected:Ee.promise,received:r.parsedType}),Ke;const n=r.parsedType===Ee.promise?r.data:Promise.resolve(r.data);return un(n.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}}nf.create=(e,s)=>new nf({type:e,typeName:Ge.ZodPromise,...st(s)});class Pc extends dt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ge.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(s){const{status:r,ctx:n}=this._processInputParams(s),a=this._def.effect||null,i={addIssue:o=>{ye(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return Ke;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?Ke:c.status==="dirty"||r.value==="dirty"?Sd(c.value):c});{if(r.value==="aborted")return Ke;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?Ke:l.status==="dirty"||r.value==="dirty"?Sd(l.value):l}}if(a.type==="refinement"){const o=l=>{const c=a.refinement(l,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?Ke:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?Ke:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(a.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Ac(o))return Ke;const l=a.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Ac(o)?Promise.resolve(a.transform(o.value,i)).then(l=>({status:r.value,value:l})):Ke);ut.assertNever(a)}}Pc.create=(e,s,r)=>new Pc({schema:e,typeName:Ge.ZodEffects,effect:s,...st(r)});Pc.createWithPreprocess=(e,s,r)=>new Pc({schema:s,effect:{type:"preprocess",transform:e},typeName:Ge.ZodEffects,...st(r)});class Fi extends dt{_parse(s){return this._getType(s)===Ee.undefined?un(void 0):this._def.innerType._parse(s)}unwrap(){return this._def.innerType}}Fi.create=(e,s)=>new Fi({innerType:e,typeName:Ge.ZodOptional,...st(s)});class Rc extends dt{_parse(s){return this._getType(s)===Ee.null?un(null):this._def.innerType._parse(s)}unwrap(){return this._def.innerType}}Rc.create=(e,s)=>new Rc({innerType:e,typeName:Ge.ZodNullable,...st(s)});class Bv extends dt{_parse(s){const{ctx:r}=this._processInputParams(s);let n=r.data;return r.parsedType===Ee.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Bv.create=(e,s)=>new Bv({innerType:e,typeName:Ge.ZodDefault,defaultValue:typeof s.default=="function"?s.default:()=>s.default,...st(s)});class zv extends dt{_parse(s){const{ctx:r}=this._processInputParams(s),n={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return ef(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new lr(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new lr(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}zv.create=(e,s)=>new zv({innerType:e,typeName:Ge.ZodCatch,catchValue:typeof s.catch=="function"?s.catch:()=>s.catch,...st(s)});class TN extends dt{_parse(s){if(this._getType(s)!==Ee.nan){const n=this._getOrReturnCtx(s);return ye(n,{code:me.invalid_type,expected:Ee.nan,received:n.parsedType}),Ke}return{status:"valid",value:s.data}}}TN.create=e=>new TN({typeName:Ge.ZodNaN,...st(e)});class cU extends dt{_parse(s){const{ctx:r}=this._processInputParams(s),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Uj extends dt{_parse(s){const{status:r,ctx:n}=this._processInputParams(s);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Ke:i.status==="dirty"?(r.dirty(),Sd(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Ke:a.status==="dirty"?(r.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(s,r){return new Uj({in:s,out:r,typeName:Ge.ZodPipeline})}}class qv extends dt{_parse(s){const r=this._def.innerType._parse(s),n=a=>(Ac(a)&&(a.value=Object.freeze(a.value)),a);return ef(r)?r.then(a=>n(a)):n(r)}unwrap(){return this._def.innerType}}qv.create=(e,s)=>new qv({innerType:e,typeName:Ge.ZodReadonly,...st(s)});var Ge;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Ge||(Ge={}));const Vs=ki.create;Ki.create;ia.create;sf.create;rf.create;Ho.create;const Bj=Uv.create;Tc.create;nf.create;Fi.create;Rc.create;var dU=f.createContext(void 0);function il(e){const s=f.useContext(dU);return e||s||"ltr"}var kx=0;function np(){f.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??PN()),document.body.insertAdjacentElement("beforeend",e[1]??PN()),kx++,()=>{kx===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),kx--}},[])}function PN(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Ex="focusScope.autoFocusOnMount",Ax="focusScope.autoFocusOnUnmount",RN={bubbles:!1,cancelable:!0},uU="FocusScope",Gu=f.forwardRef((e,s)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=f.useState(null),d=ds(a),u=ds(i),m=f.useRef(null),h=Ve(s,x=>c(x)),p=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(n){let x=function(w){if(p.paused||!l)return;const b=w.target;l.contains(b)?m.current=b:ii(m.current,{select:!0})},v=function(w){if(p.paused||!l)return;const b=w.relatedTarget;b!==null&&(l.contains(b)||ii(m.current,{select:!0}))},y=function(w){if(document.activeElement===document.body)for(const N of w)N.removedNodes.length>0&&ii(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",v);const j=new MutationObserver(y);return l&&j.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",v),j.disconnect()}}},[n,l,p.paused]),f.useEffect(()=>{if(l){DN.add(p);const x=document.activeElement;if(!l.contains(x)){const y=new CustomEvent(Ex,RN);l.addEventListener(Ex,d),l.dispatchEvent(y),y.defaultPrevented||(hU(gU(N2(l)),{select:!0}),document.activeElement===x&&ii(l))}return()=>{l.removeEventListener(Ex,d),setTimeout(()=>{const y=new CustomEvent(Ax,RN);l.addEventListener(Ax,u),l.dispatchEvent(y),y.defaultPrevented||ii(x??document.body,{select:!0}),l.removeEventListener(Ax,u),DN.remove(p)},0)}}},[l,d,u,p]);const g=f.useCallback(x=>{if(!r&&!n||p.paused)return;const v=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,y=document.activeElement;if(v&&y){const j=x.currentTarget,[w,b]=mU(j);w&&b?!x.shiftKey&&y===b?(x.preventDefault(),r&&ii(w,{select:!0})):x.shiftKey&&y===w&&(x.preventDefault(),r&&ii(b,{select:!0})):y===j&&x.preventDefault()}},[r,n,p.paused]);return t.jsx(Se.div,{tabIndex:-1,...o,ref:h,onKeyDown:g})});Gu.displayName=uU;function hU(e,{select:s=!1}={}){const r=document.activeElement;for(const n of e)if(ii(n,{select:s}),document.activeElement!==r)return}function mU(e){const s=N2(e),r=IN(s,e),n=IN(s.reverse(),e);return[r,n]}function N2(e){const s=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)s.push(r.currentNode);return s}function IN(e,s){for(const r of e)if(!fU(r,{upTo:s}))return r}function fU(e,{upTo:s}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(s!==void 0&&e===s)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function pU(e){return e instanceof HTMLInputElement&&"select"in e}function ii(e,{select:s=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&pU(e)&&s&&e.select()}}var DN=xU();function xU(){let e=[];return{add(s){const r=e[0];s!==r&&(r==null||r.pause()),e=ON(e,s),e.unshift(s)},remove(s){var r;e=ON(e,s),(r=e[0])==null||r.resume()}}}function ON(e,s){const r=[...e],n=r.indexOf(s);return n!==-1&&r.splice(n,1),r}function gU(e){return e.filter(s=>s.tagName!=="A")}var Tx="rovingFocusGroup.onEntryFocus",vU={bubbles:!1,cancelable:!0},Yu="RovingFocusGroup",[Wv,C2,yU]=Lu(Yu),[jU,Jc]=ks(Yu,[yU]),[wU,bU]=jU(Yu),_2=f.forwardRef((e,s)=>t.jsx(Wv.Provider,{scope:e.__scopeRovingFocusGroup,children:t.jsx(Wv.Slot,{scope:e.__scopeRovingFocusGroup,children:t.jsx(NU,{...e,ref:s})})}));_2.displayName=Yu;var NU=f.forwardRef((e,s)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...m}=e,h=f.useRef(null),p=Ve(s,h),g=il(i),[x,v]=_r({prop:o,defaultProp:l??null,onChange:c,caller:Yu}),[y,j]=f.useState(!1),w=ds(d),b=C2(r),N=f.useRef(!1),[_,C]=f.useState(0);return f.useEffect(()=>{const E=h.current;if(E)return E.addEventListener(Tx,w),()=>E.removeEventListener(Tx,w)},[w]),t.jsx(wU,{scope:r,orientation:n,dir:g,loop:a,currentTabStopId:x,onItemFocus:f.useCallback(E=>v(E),[v]),onItemShiftTab:f.useCallback(()=>j(!0),[]),onFocusableItemAdd:f.useCallback(()=>C(E=>E+1),[]),onFocusableItemRemove:f.useCallback(()=>C(E=>E-1),[]),children:t.jsx(Se.div,{tabIndex:y||_===0?-1:0,"data-orientation":n,...m,ref:p,style:{outline:"none",...e.style},onMouseDown:de(e.onMouseDown,()=>{N.current=!0}),onFocus:de(e.onFocus,E=>{const k=!N.current;if(E.target===E.currentTarget&&k&&!y){const A=new CustomEvent(Tx,vU);if(E.currentTarget.dispatchEvent(A),!A.defaultPrevented){const L=b().filter(ee=>ee.focusable),H=L.find(ee=>ee.active),F=L.find(ee=>ee.id===x),G=[H,F,...L].filter(Boolean).map(ee=>ee.ref.current);E2(G,u)}}N.current=!1}),onBlur:de(e.onBlur,()=>j(!1))})})}),S2="RovingFocusGroupItem",k2=f.forwardRef((e,s)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=Ss(),d=i||c,u=bU(S2,r),m=u.currentTabStopId===d,h=C2(r),{onFocusableItemAdd:p,onFocusableItemRemove:g,currentTabStopId:x}=u;return f.useEffect(()=>{if(n)return p(),()=>g()},[n,p,g]),t.jsx(Wv.ItemSlot,{scope:r,id:d,focusable:n,active:a,children:t.jsx(Se.span,{tabIndex:m?0:-1,"data-orientation":u.orientation,...l,ref:s,onMouseDown:de(e.onMouseDown,v=>{n?u.onItemFocus(d):v.preventDefault()}),onFocus:de(e.onFocus,()=>u.onItemFocus(d)),onKeyDown:de(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const y=SU(v,u.orientation,u.dir);if(y!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let w=h().filter(b=>b.focusable).map(b=>b.ref.current);if(y==="last")w.reverse();else if(y==="prev"||y==="next"){y==="prev"&&w.reverse();const b=w.indexOf(v.currentTarget);w=u.loop?kU(w,b+1):w.slice(b+1)}setTimeout(()=>E2(w))}}),children:typeof o=="function"?o({isCurrentTabStop:m,hasTabStop:x!=null}):o})})});k2.displayName=S2;var CU={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function _U(e,s){return s!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function SU(e,s,r){const n=_U(e.key,r);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return CU[n]}function E2(e,s=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:s}),document.activeElement!==r))return}function kU(e,s){return e.map((r,n)=>e[(s+n)%e.length])}var zj=_2,qj=k2,EU=function(e){if(typeof document>"u")return null;var s=Array.isArray(e)?e[0]:e;return s.ownerDocument.body},vl=new WeakMap,$h=new WeakMap,Uh={},Px=0,A2=function(e){return e&&(e.host||A2(e.parentNode))},AU=function(e,s){return s.map(function(r){if(e.contains(r))return r;var n=A2(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},TU=function(e,s,r,n){var a=AU(s,Array.isArray(e)?e:[e]);Uh[r]||(Uh[r]=new WeakMap);var i=Uh[r],o=[],l=new Set,c=new Set(a),d=function(m){!m||l.has(m)||(l.add(m),d(m.parentNode))};a.forEach(d);var u=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(h){if(l.has(h))u(h);else try{var p=h.getAttribute(n),g=p!==null&&p!=="false",x=(vl.get(h)||0)+1,v=(i.get(h)||0)+1;vl.set(h,x),i.set(h,v),o.push(h),x===1&&g&&$h.set(h,!0),v===1&&h.setAttribute(r,"true"),g||h.setAttribute(n,"true")}catch(y){console.error("aria-hidden: cannot operate on ",h,y)}})};return u(s),l.clear(),Px++,function(){o.forEach(function(m){var h=vl.get(m)-1,p=i.get(m)-1;vl.set(m,h),i.set(m,p),h||($h.has(m)||m.removeAttribute(n),$h.delete(m)),p||m.removeAttribute(r)}),Px--,Px||(vl=new WeakMap,vl=new WeakMap,$h=new WeakMap,Uh={})}},ap=function(e,s,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=EU(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),TU(n,a,r,"aria-hidden")):function(){return null}},om="right-scroll-bar-position",lm="width-before-scroll-bar",PU="with-scroll-bars-hidden",RU="--removed-body-scroll-bar-size";function Rx(e,s){return typeof e=="function"?e(s):e&&(e.current=s),e}function IU(e,s){var r=f.useState(function(){return{value:e,callback:s,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=s,r.facade}var DU=typeof window<"u"?f.useLayoutEffect:f.useEffect,MN=new WeakMap;function OU(e,s){var r=IU(null,function(n){return e.forEach(function(a){return Rx(a,n)})});return DU(function(){var n=MN.get(r);if(n){var a=new Set(n),i=new Set(e),o=r.current;a.forEach(function(l){i.has(l)||Rx(l,null)}),i.forEach(function(l){a.has(l)||Rx(l,o)})}MN.set(r,e)},[e]),r}function MU(e){return e}function LU(e,s){s===void 0&&(s=MU);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=s(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var u=o;o=[],u.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),r}}}};return a}function FU(e){e===void 0&&(e={});var s=LU(null);return s.options=ea({async:!0,ssr:!1},e),s}var T2=function(e){var s=e.sideCar,r=Zc(e,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=s.read();if(!n)throw new Error("Sidecar medium not found");return f.createElement(n,ea({},r))};T2.isSideCarExport=!0;function $U(e,s){return e.useMedium(s),T2}var P2=FU(),Ix=function(){},ip=f.forwardRef(function(e,s){var r=f.useRef(null),n=f.useState({onScrollCapture:Ix,onWheelCapture:Ix,onTouchMoveCapture:Ix}),a=n[0],i=n[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,m=e.shards,h=e.sideCar,p=e.noRelative,g=e.noIsolation,x=e.inert,v=e.allowPinchZoom,y=e.as,j=y===void 0?"div":y,w=e.gapMode,b=Zc(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=h,_=OU([r,s]),C=ea(ea({},b),a);return f.createElement(f.Fragment,null,u&&f.createElement(N,{sideCar:P2,removeScrollBar:d,shards:m,noRelative:p,noIsolation:g,inert:x,setCallbacks:i,allowPinchZoom:!!v,lockRef:r,gapMode:w}),o?f.cloneElement(f.Children.only(l),ea(ea({},C),{ref:_})):f.createElement(j,ea({},C,{className:c,ref:_}),l))});ip.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ip.classNames={fullWidth:lm,zeroRight:om};var UU=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function BU(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var s=UU();return s&&e.setAttribute("nonce",s),e}function zU(e,s){e.styleSheet?e.styleSheet.cssText=s:e.appendChild(document.createTextNode(s))}function qU(e){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(e)}var WU=function(){var e=0,s=null;return{add:function(r){e==0&&(s=BU())&&(zU(s,r),qU(s)),e++},remove:function(){e--,!e&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},VU=function(){var e=WU();return function(s,r){f.useEffect(function(){return e.add(s),function(){e.remove()}},[s&&r])}},R2=function(){var e=VU(),s=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return s},HU={left:0,top:0,right:0,gap:0},Dx=function(e){return parseInt(e||"",10)||0},KU=function(e){var s=window.getComputedStyle(document.body),r=s[e==="padding"?"paddingLeft":"marginLeft"],n=s[e==="padding"?"paddingTop":"marginTop"],a=s[e==="padding"?"paddingRight":"marginRight"];return[Dx(r),Dx(n),Dx(a)]},GU=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return HU;var s=KU(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,n-r+s[2]-s[0])}},YU=R2(),tc="data-scroll-locked",QU=function(e,s,r,n){var a=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(PU,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(tc,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(om,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(lm,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(om," .").concat(om,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(lm," .").concat(lm,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(tc,`] {
    `).concat(RU,": ").concat(l,`px;
  }
`)},LN=function(){var e=parseInt(document.body.getAttribute(tc)||"0",10);return isFinite(e)?e:0},ZU=function(){f.useEffect(function(){return document.body.setAttribute(tc,(LN()+1).toString()),function(){var e=LN()-1;e<=0?document.body.removeAttribute(tc):document.body.setAttribute(tc,e.toString())}},[])},JU=function(e){var s=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;ZU();var i=f.useMemo(function(){return GU(a)},[a]);return f.createElement(YU,{styles:QU(i,!s,a,r?"":"!important")})},Vv=!1;if(typeof window<"u")try{var Bh=Object.defineProperty({},"passive",{get:function(){return Vv=!0,!0}});window.addEventListener("test",Bh,Bh),window.removeEventListener("test",Bh,Bh)}catch{Vv=!1}var yl=Vv?{passive:!1}:!1,XU=function(e){return e.tagName==="TEXTAREA"},I2=function(e,s){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[s]!=="hidden"&&!(r.overflowY===r.overflowX&&!XU(e)&&r[s]==="visible")},eB=function(e){return I2(e,"overflowY")},tB=function(e){return I2(e,"overflowX")},FN=function(e,s){var r=s.ownerDocument,n=s;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=D2(e,n);if(a){var i=O2(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},sB=function(e){var s=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[s,r,n]},rB=function(e){var s=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[s,r,n]},D2=function(e,s){return e==="v"?eB(s):tB(s)},O2=function(e,s){return e==="v"?sB(s):rB(s)},nB=function(e,s){return e==="h"&&s==="rtl"?-1:1},aB=function(e,s,r,n,a){var i=nB(e,window.getComputedStyle(s).direction),o=i*n,l=r.target,c=s.contains(l),d=!1,u=o>0,m=0,h=0;do{if(!l)break;var p=O2(e,l),g=p[0],x=p[1],v=p[2],y=x-v-i*g;(g||y)&&D2(e,l)&&(m+=y,h+=g);var j=l.parentNode;l=j&&j.nodeType===Node.DOCUMENT_FRAGMENT_NODE?j.host:j}while(!c&&l!==document.body||c&&(s.contains(l)||s===l));return(u&&Math.abs(m)<1||!u&&Math.abs(h)<1)&&(d=!0),d},zh=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},$N=function(e){return[e.deltaX,e.deltaY]},UN=function(e){return e&&"current"in e?e.current:e},iB=function(e,s){return e[0]===s[0]&&e[1]===s[1]},oB=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},lB=0,jl=[];function cB(e){var s=f.useRef([]),r=f.useRef([0,0]),n=f.useRef(),a=f.useState(lB++)[0],i=f.useState(R2)[0],o=f.useRef(e);f.useEffect(function(){o.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var x=PF([e.lockRef.current],(e.shards||[]).map(UN),!0).filter(Boolean);return x.forEach(function(v){return v.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),x.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=f.useCallback(function(x,v){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var y=zh(x),j=r.current,w="deltaX"in x?x.deltaX:j[0]-y[0],b="deltaY"in x?x.deltaY:j[1]-y[1],N,_=x.target,C=Math.abs(w)>Math.abs(b)?"h":"v";if("touches"in x&&C==="h"&&_.type==="range")return!1;var E=window.getSelection(),k=E&&E.anchorNode,A=k?k===_||k.contains(_):!1;if(A)return!1;var L=FN(C,_);if(!L)return!0;if(L?N=C:(N=C==="v"?"h":"v",L=FN(C,_)),!L)return!1;if(!n.current&&"changedTouches"in x&&(w||b)&&(n.current=N),!N)return!0;var H=n.current||N;return aB(H,v,x,H==="h"?w:b)},[]),c=f.useCallback(function(x){var v=x;if(!(!jl.length||jl[jl.length-1]!==i)){var y="deltaY"in v?$N(v):zh(v),j=s.current.filter(function(N){return N.name===v.type&&(N.target===v.target||v.target===N.shadowParent)&&iB(N.delta,y)})[0];if(j&&j.should){v.cancelable&&v.preventDefault();return}if(!j){var w=(o.current.shards||[]).map(UN).filter(Boolean).filter(function(N){return N.contains(v.target)}),b=w.length>0?l(v,w[0]):!o.current.noIsolation;b&&v.cancelable&&v.preventDefault()}}},[]),d=f.useCallback(function(x,v,y,j){var w={name:x,delta:v,target:y,should:j,shadowParent:dB(y)};s.current.push(w),setTimeout(function(){s.current=s.current.filter(function(b){return b!==w})},1)},[]),u=f.useCallback(function(x){r.current=zh(x),n.current=void 0},[]),m=f.useCallback(function(x){d(x.type,$N(x),x.target,l(x,e.lockRef.current))},[]),h=f.useCallback(function(x){d(x.type,zh(x),x.target,l(x,e.lockRef.current))},[]);f.useEffect(function(){return jl.push(i),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:h}),document.addEventListener("wheel",c,yl),document.addEventListener("touchmove",c,yl),document.addEventListener("touchstart",u,yl),function(){jl=jl.filter(function(x){return x!==i}),document.removeEventListener("wheel",c,yl),document.removeEventListener("touchmove",c,yl),document.removeEventListener("touchstart",u,yl)}},[]);var p=e.removeScrollBar,g=e.inert;return f.createElement(f.Fragment,null,g?f.createElement(i,{styles:oB(a)}):null,p?f.createElement(JU,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function dB(e){for(var s=null;e!==null;)e instanceof ShadowRoot&&(s=e.host,e=e.host),e=e.parentNode;return s}const uB=$U(P2,cB);var Qu=f.forwardRef(function(e,s){return f.createElement(ip,ea({},e,{ref:s,sideCar:uB}))});Qu.classNames=ip.classNames;var Hv=["Enter"," "],hB=["ArrowDown","PageUp","Home"],M2=["ArrowUp","PageDown","End"],mB=[...hB,...M2],fB={ltr:[...Hv,"ArrowRight"],rtl:[...Hv,"ArrowLeft"]},pB={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Zu="Menu",[wu,xB,gB]=Lu(Zu),[ol,L2]=ks(Zu,[gB,Xi,Jc]),op=Xi(),F2=Jc(),[vB,ll]=ol(Zu),[yB,Ju]=ol(Zu),$2=e=>{const{__scopeMenu:s,open:r=!1,children:n,dir:a,onOpenChange:i,modal:o=!0}=e,l=op(s),[c,d]=f.useState(null),u=f.useRef(!1),m=ds(i),h=il(a);return f.useEffect(()=>{const p=()=>{u.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>u.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),t.jsx(Cj,{...l,children:t.jsx(vB,{scope:s,open:r,onOpenChange:m,content:c,onContentChange:d,children:t.jsx(yB,{scope:s,onClose:f.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:u,dir:h,modal:o,children:n})})})};$2.displayName=Zu;var jB="MenuAnchor",Wj=f.forwardRef((e,s)=>{const{__scopeMenu:r,...n}=e,a=op(r);return t.jsx(Hu,{...a,...n,ref:s})});Wj.displayName=jB;var Vj="MenuPortal",[wB,U2]=ol(Vj,{forceMount:void 0}),B2=e=>{const{__scopeMenu:s,forceMount:r,children:n,container:a}=e,i=ll(Vj,s);return t.jsx(wB,{scope:s,forceMount:r,children:t.jsx(js,{present:r||i.open,children:t.jsx(qc,{asChild:!0,container:a,children:n})})})};B2.displayName=Vj;var nn="MenuContent",[bB,Hj]=ol(nn),z2=f.forwardRef((e,s)=>{const r=U2(nn,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=ll(nn,e.__scopeMenu),o=Ju(nn,e.__scopeMenu);return t.jsx(wu.Provider,{scope:e.__scopeMenu,children:t.jsx(js,{present:n||i.open,children:t.jsx(wu.Slot,{scope:e.__scopeMenu,children:o.modal?t.jsx(NB,{...a,ref:s}):t.jsx(CB,{...a,ref:s})})})})}),NB=f.forwardRef((e,s)=>{const r=ll(nn,e.__scopeMenu),n=f.useRef(null),a=Ve(s,n);return f.useEffect(()=>{const i=n.current;if(i)return ap(i)},[]),t.jsx(Kj,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:de(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),CB=f.forwardRef((e,s)=>{const r=ll(nn,e.__scopeMenu);return t.jsx(Kj,{...e,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),_B=$o("MenuContent.ScrollLock"),Kj=f.forwardRef((e,s)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:h,onDismiss:p,disableOutsideScroll:g,...x}=e,v=ll(nn,r),y=Ju(nn,r),j=op(r),w=F2(r),b=xB(r),[N,_]=f.useState(null),C=f.useRef(null),E=Ve(s,C,v.onContentChange),k=f.useRef(0),A=f.useRef(""),L=f.useRef(0),H=f.useRef(null),F=f.useRef("right"),I=f.useRef(0),G=g?Qu:f.Fragment,ee=g?{as:_B,allowPinchZoom:!0}:void 0,K=q=>{var X,xe;const re=A.current+q,S=b().filter(ve=>!ve.disabled),R=document.activeElement,te=(X=S.find(ve=>ve.ref.current===R))==null?void 0:X.textValue,Q=S.map(ve=>ve.textValue),Y=LB(Q,re,te),oe=(xe=S.find(ve=>ve.textValue===Y))==null?void 0:xe.ref.current;(function ve(Ae){A.current=Ae,window.clearTimeout(k.current),Ae!==""&&(k.current=window.setTimeout(()=>ve(""),1e3))})(re),oe&&setTimeout(()=>oe.focus())};f.useEffect(()=>()=>window.clearTimeout(k.current),[]),np();const D=f.useCallback(q=>{var S,R;return F.current===((S=H.current)==null?void 0:S.side)&&$B(q,(R=H.current)==null?void 0:R.area)},[]);return t.jsx(bB,{scope:r,searchRef:A,onItemEnter:f.useCallback(q=>{D(q)&&q.preventDefault()},[D]),onItemLeave:f.useCallback(q=>{var re;D(q)||((re=C.current)==null||re.focus(),_(null))},[D]),onTriggerLeave:f.useCallback(q=>{D(q)&&q.preventDefault()},[D]),pointerGraceTimerRef:L,onPointerGraceIntentChange:f.useCallback(q=>{H.current=q},[]),children:t.jsx(G,{...ee,children:t.jsx(Gu,{asChild:!0,trapped:a,onMountAutoFocus:de(i,q=>{var re;q.preventDefault(),(re=C.current)==null||re.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:t.jsx(rl,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:h,onDismiss:p,children:t.jsx(zj,{asChild:!0,...w,dir:y.dir,orientation:"vertical",loop:n,currentTabStopId:N,onCurrentTabStopIdChange:_,onEntryFocus:de(c,q=>{y.isUsingKeyboardRef.current||q.preventDefault()}),preventScrollOnEntryFocus:!0,children:t.jsx(Yf,{role:"menu","aria-orientation":"vertical","data-state":n4(v.open),"data-radix-menu-content":"",dir:y.dir,...j,...x,ref:E,style:{outline:"none",...x.style},onKeyDown:de(x.onKeyDown,q=>{const S=q.target.closest("[data-radix-menu-content]")===q.currentTarget,R=q.ctrlKey||q.altKey||q.metaKey,te=q.key.length===1;S&&(q.key==="Tab"&&q.preventDefault(),!R&&te&&K(q.key));const Q=C.current;if(q.target!==Q||!mB.includes(q.key))return;q.preventDefault();const oe=b().filter(X=>!X.disabled).map(X=>X.ref.current);M2.includes(q.key)&&oe.reverse(),OB(oe)}),onBlur:de(e.onBlur,q=>{q.currentTarget.contains(q.target)||(window.clearTimeout(k.current),A.current="")}),onPointerMove:de(e.onPointerMove,bu(q=>{const re=q.target,S=I.current!==q.clientX;if(q.currentTarget.contains(re)&&S){const R=q.clientX>I.current?"right":"left";F.current=R,I.current=q.clientX}}))})})})})})})});z2.displayName=nn;var SB="MenuGroup",Gj=f.forwardRef((e,s)=>{const{__scopeMenu:r,...n}=e;return t.jsx(Se.div,{role:"group",...n,ref:s})});Gj.displayName=SB;var kB="MenuLabel",q2=f.forwardRef((e,s)=>{const{__scopeMenu:r,...n}=e;return t.jsx(Se.div,{...n,ref:s})});q2.displayName=kB;var af="MenuItem",BN="menu.itemSelect",lp=f.forwardRef((e,s)=>{const{disabled:r=!1,onSelect:n,...a}=e,i=f.useRef(null),o=Ju(af,e.__scopeMenu),l=Hj(af,e.__scopeMenu),c=Ve(s,i),d=f.useRef(!1),u=()=>{const m=i.current;if(!r&&m){const h=new CustomEvent(BN,{bubbles:!0,cancelable:!0});m.addEventListener(BN,p=>n==null?void 0:n(p),{once:!0}),ij(m,h),h.defaultPrevented?d.current=!1:o.onClose()}};return t.jsx(W2,{...a,ref:c,disabled:r,onClick:de(e.onClick,u),onPointerDown:m=>{var h;(h=e.onPointerDown)==null||h.call(e,m),d.current=!0},onPointerUp:de(e.onPointerUp,m=>{var h;d.current||(h=m.currentTarget)==null||h.click()}),onKeyDown:de(e.onKeyDown,m=>{const h=l.searchRef.current!=="";r||h&&m.key===" "||Hv.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});lp.displayName=af;var W2=f.forwardRef((e,s)=>{const{__scopeMenu:r,disabled:n=!1,textValue:a,...i}=e,o=Hj(af,r),l=F2(r),c=f.useRef(null),d=Ve(s,c),[u,m]=f.useState(!1),[h,p]=f.useState("");return f.useEffect(()=>{const g=c.current;g&&p((g.textContent??"").trim())},[i.children]),t.jsx(wu.ItemSlot,{scope:r,disabled:n,textValue:a??h,children:t.jsx(qj,{asChild:!0,...l,focusable:!n,children:t.jsx(Se.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:d,onPointerMove:de(e.onPointerMove,bu(g=>{n?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:de(e.onPointerLeave,bu(g=>o.onItemLeave(g))),onFocus:de(e.onFocus,()=>m(!0)),onBlur:de(e.onBlur,()=>m(!1))})})})}),EB="MenuCheckboxItem",V2=f.forwardRef((e,s)=>{const{checked:r=!1,onCheckedChange:n,...a}=e;return t.jsx(Q2,{scope:e.__scopeMenu,checked:r,children:t.jsx(lp,{role:"menuitemcheckbox","aria-checked":of(r)?"mixed":r,...a,ref:s,"data-state":Qj(r),onSelect:de(a.onSelect,()=>n==null?void 0:n(of(r)?!0:!r),{checkForDefaultPrevented:!1})})})});V2.displayName=EB;var H2="MenuRadioGroup",[AB,TB]=ol(H2,{value:void 0,onValueChange:()=>{}}),K2=f.forwardRef((e,s)=>{const{value:r,onValueChange:n,...a}=e,i=ds(n);return t.jsx(AB,{scope:e.__scopeMenu,value:r,onValueChange:i,children:t.jsx(Gj,{...a,ref:s})})});K2.displayName=H2;var G2="MenuRadioItem",Y2=f.forwardRef((e,s)=>{const{value:r,...n}=e,a=TB(G2,e.__scopeMenu),i=r===a.value;return t.jsx(Q2,{scope:e.__scopeMenu,checked:i,children:t.jsx(lp,{role:"menuitemradio","aria-checked":i,...n,ref:s,"data-state":Qj(i),onSelect:de(n.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,r)},{checkForDefaultPrevented:!1})})})});Y2.displayName=G2;var Yj="MenuItemIndicator",[Q2,PB]=ol(Yj,{checked:!1}),Z2=f.forwardRef((e,s)=>{const{__scopeMenu:r,forceMount:n,...a}=e,i=PB(Yj,r);return t.jsx(js,{present:n||of(i.checked)||i.checked===!0,children:t.jsx(Se.span,{...a,ref:s,"data-state":Qj(i.checked)})})});Z2.displayName=Yj;var RB="MenuSeparator",J2=f.forwardRef((e,s)=>{const{__scopeMenu:r,...n}=e;return t.jsx(Se.div,{role:"separator","aria-orientation":"horizontal",...n,ref:s})});J2.displayName=RB;var IB="MenuArrow",X2=f.forwardRef((e,s)=>{const{__scopeMenu:r,...n}=e,a=op(r);return t.jsx(Qf,{...a,...n,ref:s})});X2.displayName=IB;var DB="MenuSub",[fZ,e4]=ol(DB),kd="MenuSubTrigger",t4=f.forwardRef((e,s)=>{const r=ll(kd,e.__scopeMenu),n=Ju(kd,e.__scopeMenu),a=e4(kd,e.__scopeMenu),i=Hj(kd,e.__scopeMenu),o=f.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,d={__scopeMenu:e.__scopeMenu},u=f.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return f.useEffect(()=>u,[u]),f.useEffect(()=>{const m=l.current;return()=>{window.clearTimeout(m),c(null)}},[l,c]),t.jsx(Wj,{asChild:!0,...d,children:t.jsx(W2,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":n4(r.open),...e,ref:la(s,a.onTriggerChange),onClick:m=>{var h;(h=e.onClick)==null||h.call(e,m),!(e.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:de(e.onPointerMove,bu(m=>{i.onItemEnter(m),!m.defaultPrevented&&!e.disabled&&!r.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),u()},100))})),onPointerLeave:de(e.onPointerLeave,bu(m=>{var p,g;u();const h=(p=r.content)==null?void 0:p.getBoundingClientRect();if(h){const x=(g=r.content)==null?void 0:g.dataset.side,v=x==="right",y=v?-5:5,j=h[v?"left":"right"],w=h[v?"right":"left"];i.onPointerGraceIntentChange({area:[{x:m.clientX+y,y:m.clientY},{x:j,y:h.top},{x:w,y:h.top},{x:w,y:h.bottom},{x:j,y:h.bottom}],side:x}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(m),m.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:de(e.onKeyDown,m=>{var p;const h=i.searchRef.current!=="";e.disabled||h&&m.key===" "||fB[n.dir].includes(m.key)&&(r.onOpenChange(!0),(p=r.content)==null||p.focus(),m.preventDefault())})})})});t4.displayName=kd;var s4="MenuSubContent",r4=f.forwardRef((e,s)=>{const r=U2(nn,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=ll(nn,e.__scopeMenu),o=Ju(nn,e.__scopeMenu),l=e4(s4,e.__scopeMenu),c=f.useRef(null),d=Ve(s,c);return t.jsx(wu.Provider,{scope:e.__scopeMenu,children:t.jsx(js,{present:n||i.open,children:t.jsx(wu.Slot,{scope:e.__scopeMenu,children:t.jsx(Kj,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var m;o.isUsingKeyboardRef.current&&((m=c.current)==null||m.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:de(e.onFocusOutside,u=>{u.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:de(e.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:de(e.onKeyDown,u=>{var p;const m=u.currentTarget.contains(u.target),h=pB[o.dir].includes(u.key);m&&h&&(i.onOpenChange(!1),(p=l.trigger)==null||p.focus(),u.preventDefault())})})})})})});r4.displayName=s4;function n4(e){return e?"open":"closed"}function of(e){return e==="indeterminate"}function Qj(e){return of(e)?"indeterminate":e?"checked":"unchecked"}function OB(e){const s=document.activeElement;for(const r of e)if(r===s||(r.focus(),document.activeElement!==s))return}function MB(e,s){return e.map((r,n)=>e[(s+n)%e.length])}function LB(e,s,r){const a=s.length>1&&Array.from(s).every(d=>d===s[0])?s[0]:s,i=r?e.indexOf(r):-1;let o=MB(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function FB(e,s){const{x:r,y:n}=e;let a=!1;for(let i=0,o=s.length-1;i<s.length;o=i++){const l=s[i],c=s[o],d=l.x,u=l.y,m=c.x,h=c.y;u>n!=h>n&&r<(m-d)*(n-u)/(h-u)+d&&(a=!a)}return a}function $B(e,s){if(!s)return!1;const r={x:e.clientX,y:e.clientY};return FB(r,s)}function bu(e){return s=>s.pointerType==="mouse"?e(s):void 0}var UB=$2,BB=Wj,zB=B2,qB=z2,WB=Gj,VB=q2,HB=lp,KB=V2,GB=K2,YB=Y2,QB=Z2,ZB=J2,JB=X2,XB=t4,ez=r4,cp="DropdownMenu",[tz]=ks(cp,[L2]),mr=L2(),[sz,a4]=tz(cp),i4=e=>{const{__scopeDropdownMenu:s,children:r,dir:n,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=mr(s),d=f.useRef(null),[u,m]=_r({prop:a,defaultProp:i??!1,onChange:o,caller:cp});return t.jsx(sz,{scope:s,triggerId:Ss(),triggerRef:d,contentId:Ss(),open:u,onOpenChange:m,onOpenToggle:f.useCallback(()=>m(h=>!h),[m]),modal:l,children:t.jsx(UB,{...c,open:u,onOpenChange:m,dir:n,modal:l,children:r})})};i4.displayName=cp;var o4="DropdownMenuTrigger",l4=f.forwardRef((e,s)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...a}=e,i=a4(o4,r),o=mr(r);return t.jsx(BB,{asChild:!0,...o,children:t.jsx(Se.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:la(s,i.triggerRef),onPointerDown:de(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:de(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});l4.displayName=o4;var rz="DropdownMenuPortal",c4=e=>{const{__scopeDropdownMenu:s,...r}=e,n=mr(s);return t.jsx(zB,{...n,...r})};c4.displayName=rz;var d4="DropdownMenuContent",u4=f.forwardRef((e,s)=>{const{__scopeDropdownMenu:r,...n}=e,a=a4(d4,r),i=mr(r),o=f.useRef(!1);return t.jsx(qB,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...n,ref:s,onCloseAutoFocus:de(e.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:de(e.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!a.modal||u)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});u4.displayName=d4;var nz="DropdownMenuGroup",az=f.forwardRef((e,s)=>{const{__scopeDropdownMenu:r,...n}=e,a=mr(r);return t.jsx(WB,{...a,...n,ref:s})});az.displayName=nz;var iz="DropdownMenuLabel",h4=f.forwardRef((e,s)=>{const{__scopeDropdownMenu:r,...n}=e,a=mr(r);return t.jsx(VB,{...a,...n,ref:s})});h4.displayName=iz;var oz="DropdownMenuItem",m4=f.forwardRef((e,s)=>{const{__scopeDropdownMenu:r,...n}=e,a=mr(r);return t.jsx(HB,{...a,...n,ref:s})});m4.displayName=oz;var lz="DropdownMenuCheckboxItem",f4=f.forwardRef((e,s)=>{const{__scopeDropdownMenu:r,...n}=e,a=mr(r);return t.jsx(KB,{...a,...n,ref:s})});f4.displayName=lz;var cz="DropdownMenuRadioGroup",dz=f.forwardRef((e,s)=>{const{__scopeDropdownMenu:r,...n}=e,a=mr(r);return t.jsx(GB,{...a,...n,ref:s})});dz.displayName=cz;var uz="DropdownMenuRadioItem",p4=f.forwardRef((e,s)=>{const{__scopeDropdownMenu:r,...n}=e,a=mr(r);return t.jsx(YB,{...a,...n,ref:s})});p4.displayName=uz;var hz="DropdownMenuItemIndicator",x4=f.forwardRef((e,s)=>{const{__scopeDropdownMenu:r,...n}=e,a=mr(r);return t.jsx(QB,{...a,...n,ref:s})});x4.displayName=hz;var mz="DropdownMenuSeparator",g4=f.forwardRef((e,s)=>{const{__scopeDropdownMenu:r,...n}=e,a=mr(r);return t.jsx(ZB,{...a,...n,ref:s})});g4.displayName=mz;var fz="DropdownMenuArrow",pz=f.forwardRef((e,s)=>{const{__scopeDropdownMenu:r,...n}=e,a=mr(r);return t.jsx(JB,{...a,...n,ref:s})});pz.displayName=fz;var xz="DropdownMenuSubTrigger",v4=f.forwardRef((e,s)=>{const{__scopeDropdownMenu:r,...n}=e,a=mr(r);return t.jsx(XB,{...a,...n,ref:s})});v4.displayName=xz;var gz="DropdownMenuSubContent",y4=f.forwardRef((e,s)=>{const{__scopeDropdownMenu:r,...n}=e,a=mr(r);return t.jsx(ez,{...a,...n,ref:s,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});y4.displayName=gz;var vz=i4,yz=l4,jz=c4,j4=u4,w4=h4,b4=m4,N4=f4,C4=p4,_4=x4,S4=g4,k4=v4,E4=y4;const Ga=vz,Ya=yz,wz=f.forwardRef(({className:e,inset:s,children:r,...n},a)=>t.jsxs(k4,{ref:a,className:J("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",s&&"pl-8",e),...n,children:[r,t.jsx(ln,{className:"ml-auto h-4 w-4"})]}));wz.displayName=k4.displayName;const bz=f.forwardRef(({className:e,...s},r)=>t.jsx(E4,{ref:r,className:J("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s}));bz.displayName=E4.displayName;const fa=f.forwardRef(({className:e,sideOffset:s=4,...r},n)=>t.jsx(jz,{children:t.jsx(j4,{ref:n,sideOffset:s,className:J("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));fa.displayName=j4.displayName;const mt=f.forwardRef(({className:e,inset:s,...r},n)=>t.jsx(b4,{ref:n,className:J("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",s&&"pl-8",e),...r}));mt.displayName=b4.displayName;const Nz=f.forwardRef(({className:e,children:s,checked:r,...n},a)=>t.jsxs(N4,{ref:a,className:J("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:r,...n,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(_4,{children:t.jsx(On,{className:"h-4 w-4"})})}),s]}));Nz.displayName=N4.displayName;const Cz=f.forwardRef(({className:e,children:s,...r},n)=>t.jsxs(C4,{ref:n,className:J("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(_4,{children:t.jsx(AS,{className:"h-2 w-2 fill-current"})})}),s]}));Cz.displayName=C4.displayName;const A4=f.forwardRef(({className:e,inset:s,...r},n)=>t.jsx(w4,{ref:n,className:J("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",e),...r}));A4.displayName=w4.displayName;const za=f.forwardRef(({className:e,...s},r)=>t.jsx(S4,{ref:r,className:J("-mx-1 my-1 h-px bg-muted",e),...s}));za.displayName=S4.displayName;function $n(){const{setTheme:e,theme:s}=GS();return t.jsxs(Ga,{children:[t.jsx(Ya,{asChild:!0,children:t.jsxs(T,{variant:"ghost",size:"icon",className:"h-9 w-9",children:[t.jsx(cb,{className:"h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),t.jsx(lb,{className:"absolute h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),t.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),t.jsxs(fa,{align:"end",children:[t.jsxs(mt,{onClick:()=>e("light"),children:[t.jsx(cb,{className:"mr-2 h-4 w-4"}),"Light"]}),t.jsxs(mt,{onClick:()=>e("dark"),children:[t.jsx(lb,{className:"mr-2 h-4 w-4"}),"Dark"]}),t.jsxs(mt,{onClick:()=>e("system"),children:[t.jsx("span",{className:"mr-2 h-4 w-4 flex items-center justify-center text-xs",children:""}),"System"]})]})]})}var dp="Dialog",[T4,P4]=ks(dp),[_z,zn]=T4(dp),R4=e=>{const{__scopeDialog:s,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=f.useRef(null),c=f.useRef(null),[d,u]=_r({prop:n,defaultProp:a??!1,onChange:i,caller:dp});return t.jsx(_z,{scope:s,triggerRef:l,contentRef:c,contentId:Ss(),titleId:Ss(),descriptionId:Ss(),open:d,onOpenChange:u,onOpenToggle:f.useCallback(()=>u(m=>!m),[u]),modal:o,children:r})};R4.displayName=dp;var I4="DialogTrigger",D4=f.forwardRef((e,s)=>{const{__scopeDialog:r,...n}=e,a=zn(I4,r),i=Ve(s,a.triggerRef);return t.jsx(Se.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Xj(a.open),...n,ref:i,onClick:de(e.onClick,a.onOpenToggle)})});D4.displayName=I4;var Zj="DialogPortal",[Sz,O4]=T4(Zj,{forceMount:void 0}),M4=e=>{const{__scopeDialog:s,forceMount:r,children:n,container:a}=e,i=zn(Zj,s);return t.jsx(Sz,{scope:s,forceMount:r,children:f.Children.map(n,o=>t.jsx(js,{present:r||i.open,children:t.jsx(qc,{asChild:!0,container:a,children:o})}))})};M4.displayName=Zj;var lf="DialogOverlay",L4=f.forwardRef((e,s)=>{const r=O4(lf,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=zn(lf,e.__scopeDialog);return i.modal?t.jsx(js,{present:n||i.open,children:t.jsx(Ez,{...a,ref:s})}):null});L4.displayName=lf;var kz=$o("DialogOverlay.RemoveScroll"),Ez=f.forwardRef((e,s)=>{const{__scopeDialog:r,...n}=e,a=zn(lf,r);return t.jsx(Qu,{as:kz,allowPinchZoom:!0,shards:[a.contentRef],children:t.jsx(Se.div,{"data-state":Xj(a.open),...n,ref:s,style:{pointerEvents:"auto",...n.style}})})}),Ko="DialogContent",F4=f.forwardRef((e,s)=>{const r=O4(Ko,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=zn(Ko,e.__scopeDialog);return t.jsx(js,{present:n||i.open,children:i.modal?t.jsx(Az,{...a,ref:s}):t.jsx(Tz,{...a,ref:s})})});F4.displayName=Ko;var Az=f.forwardRef((e,s)=>{const r=zn(Ko,e.__scopeDialog),n=f.useRef(null),a=Ve(s,r.contentRef,n);return f.useEffect(()=>{const i=n.current;if(i)return ap(i)},[]),t.jsx($4,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:de(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:de(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:de(e.onFocusOutside,i=>i.preventDefault())})}),Tz=f.forwardRef((e,s)=>{const r=zn(Ko,e.__scopeDialog),n=f.useRef(!1),a=f.useRef(!1);return t.jsx($4,{...e,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),$4=f.forwardRef((e,s)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=zn(Ko,r),c=f.useRef(null),d=Ve(s,c);return np(),t.jsxs(t.Fragment,{children:[t.jsx(Gu,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:t.jsx(rl,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Xj(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),t.jsxs(t.Fragment,{children:[t.jsx(Rz,{titleId:l.titleId}),t.jsx(Dz,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Jj="DialogTitle",U4=f.forwardRef((e,s)=>{const{__scopeDialog:r,...n}=e,a=zn(Jj,r);return t.jsx(Se.h2,{id:a.titleId,...n,ref:s})});U4.displayName=Jj;var B4="DialogDescription",z4=f.forwardRef((e,s)=>{const{__scopeDialog:r,...n}=e,a=zn(B4,r);return t.jsx(Se.p,{id:a.descriptionId,...n,ref:s})});z4.displayName=B4;var q4="DialogClose",W4=f.forwardRef((e,s)=>{const{__scopeDialog:r,...n}=e,a=zn(q4,r);return t.jsx(Se.button,{type:"button",...n,ref:s,onClick:de(e.onClick,()=>a.onOpenChange(!1))})});W4.displayName=q4;function Xj(e){return e?"open":"closed"}var V4="DialogTitleWarning",[Pz,H4]=AD(V4,{contentName:Ko,titleName:Jj,docsSlug:"dialog"}),Rz=({titleId:e})=>{const s=H4(V4),r=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return f.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},Iz="DialogDescriptionWarning",Dz=({contentRef:e,descriptionId:s})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${H4(Iz).contentName}}.`;return f.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");s&&a&&(document.getElementById(s)||console.warn(n))},[n,e,s]),null},up=R4,K4=D4,hp=M4,Xc=L4,ed=F4,Xu=U4,eh=z4,mp=W4;const Xt=up,$r=K4,Oz=hp,G4=f.forwardRef(({className:e,...s},r)=>t.jsx(Xc,{ref:r,className:J("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));G4.displayName=Xc.displayName;const zt=f.forwardRef(({className:e,children:s,preventClose:r=!1,...n},a)=>t.jsxs(Oz,{children:[t.jsx(G4,{}),t.jsxs(ed,{ref:a,className:J("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),onPointerDownOutside:r?i=>i.preventDefault():void 0,onEscapeKeyDown:r?i=>i.preventDefault():void 0,onInteractOutside:r?i=>i.preventDefault():void 0,...n,children:[s,t.jsxs(mp,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[t.jsx(Ct,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));zt.displayName=ed.displayName;const es=({className:e,...s})=>t.jsx("div",{className:J("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});es.displayName="DialogHeader";const In=({className:e,...s})=>t.jsx("div",{className:J("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});In.displayName="DialogFooter";const ts=f.forwardRef(({className:e,...s},r)=>t.jsx(Xu,{ref:r,className:J("text-lg font-semibold leading-none tracking-tight",e),...s}));ts.displayName=Xu.displayName;const ss=f.forwardRef(({className:e,...s},r)=>t.jsx(eh,{ref:r,className:J("text-sm text-muted-foreground",e),...s}));ss.displayName=eh.displayName;const Mz=Vs().email("Please enter a valid email address");function Lz({variant:e="default"}){const[s,r]=f.useState(!1),[n,a]=f.useState(""),[i,o]=f.useState(!1),[l,c]=f.useState(!1),d=async h=>{h.preventDefault();try{Mz.parse(n)}catch(x){if(x instanceof lr){z.error(x.errors[0].message);return}}o(!0);const p=`${window.location.origin}/reset-password`,{error:g}=await B.auth.resetPasswordForEmail(n,{redirectTo:p});o(!1),g?z.error(g.message):(c(!0),z.success("Password reset email sent!"))},u=()=>{r(!1),a(""),c(!1)},m=e==="admin";return t.jsxs(Xt,{open:s,onOpenChange:h=>{h?r(!0):u()},children:[t.jsx($r,{asChild:!0,children:t.jsx("button",{type:"button",className:`text-sm hover:underline ${m?"text-destructive/80 hover:text-destructive":"text-primary/80 hover:text-primary"}`,children:"Forgot password?"})}),t.jsxs(zt,{className:"sm:max-w-md",preventClose:!0,children:[t.jsxs(es,{children:[t.jsx("div",{className:`mx-auto h-12 w-12 rounded-xl flex items-center justify-center mb-2 ${m?"bg-gradient-to-br from-destructive to-destructive/60":"bg-gradient-to-br from-primary to-primary/60"}`,children:t.jsx(Bo,{className:"h-6 w-6 text-primary-foreground"})}),t.jsx(ts,{className:"text-center",children:"Reset Your Password"}),t.jsx(ss,{className:"text-center",children:l?"Check your email for the password reset link.":"Enter your email address and we'll send you a link to reset your password."})]}),l?t.jsxs("div",{className:"space-y-4 pt-4",children:[t.jsxs("div",{className:"flex flex-col items-center gap-4 py-6",children:[t.jsx("div",{className:"h-16 w-16 rounded-full bg-primary/10 flex items-center justify-center",children:t.jsx(ys,{className:"h-8 w-8 text-primary"})}),t.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:["We've sent a password reset link to ",t.jsx("strong",{children:n}),". Please check your inbox and spam folder."]})]}),t.jsx(T,{onClick:u,className:"w-full",variant:"outline",children:"Close"})]}):t.jsxs("form",{onSubmit:d,className:"space-y-4 pt-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"reset-email",children:"Email Address"}),t.jsx(se,{id:"reset-email",type:"email",placeholder:"you@company.com",value:n,onChange:h=>a(h.target.value),className:"bg-input border-border",required:!0})]}),t.jsx(T,{type:"submit",className:`w-full ${m?"bg-destructive hover:bg-destructive/90":""}`,disabled:i,children:i?t.jsxs(t.Fragment,{children:[t.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):"Send Reset Link"})]})]})]})}function Fz({variant:e="admin"}){const s=f.useRef(null),r=f.useRef(),n=f.useRef([]),a=f.useRef({x:0,y:0}),i=e==="admin";return f.useEffect(()=>{const o=s.current;if(!o)return;const l=o.getContext("2d");if(!l)return;const c=()=>{o.width=window.innerWidth,o.height=window.innerHeight};c(),window.addEventListener("resize",c);const d=Math.floor(o.width*o.height/15e3),u=i?["rgba(239, 68, 68, 0.8)","rgba(220, 38, 38, 0.8)","rgba(248, 113, 113, 0.8)","rgba(251, 146, 60, 0.8)"]:["rgba(14, 165, 233, 0.8)","rgba(59, 130, 246, 0.8)","rgba(139, 92, 246, 0.8)","rgba(6, 182, 212, 0.8)"],m=i?"rgba(239, 68, 68,":"rgba(59, 130, 246,";n.current=Array.from({length:d},()=>({x:Math.random()*o.width,y:Math.random()*o.height,vx:(Math.random()-.5)*.5,vy:(Math.random()-.5)*.5,size:Math.random()*2+1,opacity:Math.random()*.5+.3,color:u[Math.floor(Math.random()*u.length)]}));const h=g=>{a.current={x:g.clientX,y:g.clientY}};window.addEventListener("mousemove",h);const p=()=>{if(!l||!o)return;l.fillStyle="rgba(0, 0, 0, 0.05)",l.fillRect(0,0,o.width,o.height);const g=n.current,x=150,v=200;g.forEach((y,j)=>{const w=a.current.x-y.x,b=a.current.y-y.y,N=Math.sqrt(w*w+b*b);if(N<v){const C=(v-N)/v;y.vx-=w/N*C*.02,y.vy-=b/N*C*.02}y.x+=y.vx,y.y+=y.vy,(y.x<0||y.x>o.width)&&(y.vx*=-1),(y.y<0||y.y>o.height)&&(y.vy*=-1),y.x=Math.max(0,Math.min(o.width,y.x)),y.y=Math.max(0,Math.min(o.height,y.y));for(let C=j+1;C<g.length;C++){const E=g[C],k=y.x-E.x,A=y.y-E.y,L=Math.sqrt(k*k+A*A);if(L<x){const H=(1-L/x)*.3;l.beginPath(),l.strokeStyle=`${m}${H})`,l.lineWidth=.5,l.moveTo(y.x,y.y),l.lineTo(E.x,E.y),l.stroke()}}l.beginPath(),l.arc(y.x,y.y,y.size,0,Math.PI*2),l.fillStyle=y.color,l.fill();const _=l.createRadialGradient(y.x,y.y,0,y.x,y.y,y.size*3);_.addColorStop(0,y.color.replace("0.8","0.4")),_.addColorStop(1,"transparent"),l.fillStyle=_,l.fill()}),r.current=requestAnimationFrame(p)};return p(),()=>{window.removeEventListener("resize",c),window.removeEventListener("mousemove",h),r.current&&cancelAnimationFrame(r.current)}},[i]),t.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden",children:[t.jsx("div",{className:`absolute inset-0 ${i?"bg-gradient-to-br from-slate-950 via-red-950/20 to-slate-950":"bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950"}`}),t.jsx("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundImage:`
            linear-gradient(${i?"rgba(239, 68, 68, 0.3)":"rgba(59, 130, 246, 0.3)"} 1px, transparent 1px),
            linear-gradient(90deg, ${i?"rgba(239, 68, 68, 0.3)":"rgba(59, 130, 246, 0.3)"} 1px, transparent 1px)
          `,backgroundSize:"60px 60px"}}),t.jsx("canvas",{ref:s,className:"absolute inset-0 w-full h-full"}),i?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"absolute top-1/4 left-1/4 w-[600px] h-[600px] bg-red-500/10 rounded-full blur-[120px] animate-pulse"}),t.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-[500px] h-[500px] bg-orange-500/10 rounded-full blur-[100px] animate-pulse",style:{animationDelay:"1s"}}),t.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-red-500/5 rounded-full blur-[150px] animate-pulse",style:{animationDelay:"2s"}})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"absolute top-1/4 left-1/4 w-[600px] h-[600px] bg-blue-500/10 rounded-full blur-[120px] animate-pulse"}),t.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-[500px] h-[500px] bg-violet-500/10 rounded-full blur-[100px] animate-pulse",style:{animationDelay:"1s"}}),t.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-cyan-500/5 rounded-full blur-[150px] animate-pulse",style:{animationDelay:"2s"}})]}),t.jsx("div",{className:`absolute top-20 right-20 w-4 h-4 ${i?"bg-red-500/60":"bg-blue-500/60"} rounded-full animate-float blur-[2px]`}),t.jsx("div",{className:`absolute bottom-40 left-32 w-3 h-3 ${i?"bg-orange-400/60":"bg-cyan-400/60"} rounded-full animate-float blur-[2px]`,style:{animationDelay:"0.5s"}}),t.jsx("div",{className:`absolute top-1/3 right-1/4 w-2 h-2 ${i?"bg-red-400/60":"bg-violet-400/60"} rounded-full animate-float blur-[1px]`,style:{animationDelay:"1s"}}),t.jsx("div",{className:`absolute bottom-1/4 left-1/3 w-3 h-3 ${i?"bg-rose-400/60":"bg-blue-400/60"} rounded-full animate-float blur-[2px]`,style:{animationDelay:"1.5s"}}),t.jsx("div",{className:`absolute top-1/2 right-10 w-2 h-2 ${i?"bg-amber-400/60":"bg-sky-400/60"} rounded-full animate-float blur-[1px]`,style:{animationDelay:"2s"}}),t.jsx("div",{className:"absolute inset-0 bg-gradient-radial from-transparent via-transparent to-black/40 pointer-events-none"})]})}function $z(){return{checkLockout:async a=>{try{const{data:i,error:o}=await B.rpc("is_email_locked_out",{p_email:a});if(o)return console.error("Error checking lockout:",o),{isLocked:!1,remainingSeconds:0};if(i){const{data:l,error:c}=await B.rpc("get_lockout_remaining_seconds",{p_email:a});return c?(console.error("Error getting lockout time:",c),{isLocked:!0,remainingSeconds:300}):{isLocked:!0,remainingSeconds:l||0}}return{isLocked:!1,remainingSeconds:0}}catch(i){return console.error("Lockout check error:",i),{isLocked:!1,remainingSeconds:0}}},recordLoginAttempt:async(a,i)=>{try{await B.rpc("record_login_attempt",{p_email:a,p_success:i,p_ip:null,p_user_agent:navigator.userAgent})}catch(o){console.error("Error recording login attempt:",o)}},checkPortalAccess:async a=>{try{const{data:i,error:o}=await B.rpc("get_user_portal_type",{p_email:a});return o?(console.error("Error checking portal type:",o),"unknown"):i||"unknown"}catch(i){return console.error("Portal access check error:",i),"unknown"}},formatLockoutTime:a=>{const i=Math.floor(a/60),o=a%60;return i>0?`${i} minute${i>1?"s":""} ${o>0?`and ${o} seconds`:""}`:`${o} seconds`}}}const eo="/assets/infraweave-logo-DqQ6XRBz.png",Uz=Vs().email("Please enter a valid email address"),Bz=Vs().min(6,"Password must be at least 6 characters");function Ox(){const e=Qe(),{user:s,loading:r,signIn:n}=ft(),{isInfraweaveAdmin:a,isInfraweaveEmployee:i,isCompanyAdmin:o,isEngineer:l,role:c,isLoading:d}=Ze(),{checkLockout:u,recordLoginAttempt:m,formatLockoutTime:h}=$z(),[p,g]=f.useState(!1),[x,v]=f.useState(""),[y,j]=f.useState(""),[w,b]=f.useState(0),[N,_]=f.useState(!1);f.useEffect(()=>{if(w>0){const k=setTimeout(()=>{b(A=>A-1)},1e3);return()=>clearTimeout(k)}},[w]),f.useEffect(()=>{s&&!r&&!d&&c&&(_(!0),a?(z.success("Welcome, Super Admin!"),e("/admin")):i?(z.success("Welcome, Support Staff!"),e("/employee")):o?(z.success("Welcome, Company Admin!"),e("/company")):l?(z.success("Welcome, Engineer!"),e("/engineer")):(z.success("Welcome back!"),e("/")))},[s,r,d,c,a,i,o,l,e]);const C=async k=>{k.preventDefault();try{Uz.parse(x),Bz.parse(y)}catch(F){if(F instanceof lr){z.error(F.errors[0].message);return}}const{isLocked:A,remainingSeconds:L}=await u(x);if(A){b(L),z.error(`Account is temporarily locked. Please try again in ${h(L)}.`);return}g(!0);const{error:H}=await n(x,y);if(g(!1),H){await m(x,!1);const{isLocked:F,remainingSeconds:I}=await u(x);if(F){b(I),z.error(`Too many failed attempts. Account locked for ${h(I)}.`);return}H.message.includes("Invalid login credentials")?z.error("Invalid email or password"):z.error(H.message)}else await m(x,!0)};if(r||s&&d||N)return t.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col items-center justify-center gap-4",children:[t.jsx(Ie,{className:"h-10 w-10 animate-spin text-red-500"}),t.jsx("p",{className:"text-slate-400 text-sm animate-pulse",children:N?"Detecting your role and redirecting...":"Loading..."})]});const E=w>0;return t.jsxs("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden",children:[t.jsx(Fz,{variant:"admin"}),t.jsx("div",{className:"absolute top-4 right-4 z-20",children:t.jsx($n,{})}),t.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[t.jsx("div",{className:"absolute top-16 left-16 p-4 bg-white/5 backdrop-blur-md rounded-2xl border border-red-500/20 animate-float shadow-lg",children:t.jsx(us,{className:"h-8 w-8 text-red-400"})}),t.jsx("div",{className:"absolute top-24 right-32 p-4 bg-white/5 backdrop-blur-md rounded-2xl border border-red-500/20 animate-float shadow-lg",style:{animationDelay:"0.5s"},children:t.jsx(TS,{className:"h-8 w-8 text-orange-400"})}),t.jsx("div",{className:"absolute bottom-32 left-24 p-4 bg-white/5 backdrop-blur-md rounded-2xl border border-red-500/20 animate-float shadow-lg",style:{animationDelay:"1s"},children:t.jsx(Nt,{className:"h-8 w-8 text-amber-400"})}),t.jsx("div",{className:"absolute bottom-20 right-20 p-4 bg-white/5 backdrop-blur-md rounded-2xl border border-red-500/20 animate-float shadow-lg",style:{animationDelay:"1.5s"},children:t.jsx(LO,{className:"h-8 w-8 text-rose-400"})}),t.jsx("div",{className:"absolute top-1/2 left-8 p-4 bg-white/5 backdrop-blur-md rounded-2xl border border-red-500/20 animate-float shadow-lg",style:{animationDelay:"2s"},children:t.jsx(Js,{className:"h-8 w-8 text-red-300"})}),t.jsx("div",{className:"absolute top-1/3 right-12 p-4 bg-white/5 backdrop-blur-md rounded-2xl border border-red-500/20 animate-float shadow-lg",style:{animationDelay:"2.5s"},children:t.jsx(DO,{className:"h-8 w-8 text-orange-300"})})]}),t.jsxs(P,{className:"w-full max-w-md mx-4 bg-slate-900/80 backdrop-blur-xl border-red-500/20 relative z-10 shadow-2xl shadow-red-500/10",children:[t.jsxs(W,{className:"text-center space-y-4 pb-6",children:[t.jsx("div",{className:"mx-auto p-4 bg-gradient-to-br from-red-500/20 to-orange-500/20 rounded-2xl backdrop-blur-sm border border-red-500/20",children:t.jsx("img",{src:eo,alt:"InfraWeave CRM",className:"h-14 w-auto"})}),t.jsxs("div",{children:[t.jsx(V,{className:"text-2xl font-bold text-white",children:"InfraWeave CRM"}),t.jsx(ce,{className:"text-slate-400",children:"Unified Portal  All roles welcome"})]})]}),t.jsxs(M,{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gradient-to-r from-red-500/10 to-orange-500/10 border border-red-500/20 rounded-lg p-3 text-center",children:[t.jsxs("p",{className:"text-slate-300 text-sm font-medium flex items-center justify-center gap-2",children:[t.jsx(us,{className:"h-4 w-4 text-red-400"}),"Auto-detects your role and routes you"]}),t.jsx("p",{className:"text-slate-500 text-xs mt-1",children:"Super Admin  Support Staff  Company Admin  Engineer"})]}),E&&t.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4 text-center",children:[t.jsx("p",{className:"text-red-400 text-sm font-medium",children:"Account temporarily locked"}),t.jsxs("p",{className:"text-red-400/80 text-xs mt-1",children:["Please wait ",h(w)," before trying again"]})]}),t.jsxs("form",{onSubmit:C,className:"space-y-5",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"email",className:"text-slate-200 font-medium",children:"Email Address"}),t.jsx(se,{id:"email",type:"email",placeholder:"you@company.com",value:x,onChange:k=>v(k.target.value),className:"h-12 bg-slate-800/50 border-2 border-slate-700 hover:border-red-500/50 focus:border-red-500 focus:ring-2 focus:ring-red-500/20 transition-all duration-200 text-white placeholder:text-slate-500",disabled:E,required:!0})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(O,{htmlFor:"password",className:"text-slate-200 font-medium",children:"Password"}),t.jsx(Lz,{variant:"admin"})]}),t.jsx(se,{id:"password",type:"password",placeholder:"Enter your password",value:y,onChange:k=>j(k.target.value),className:"h-12 bg-slate-800/50 border-2 border-slate-700 hover:border-red-500/50 focus:border-red-500 focus:ring-2 focus:ring-red-500/20 transition-all duration-200 text-white placeholder:text-slate-500",disabled:E,required:!0})]}),t.jsx(T,{type:"submit",className:"w-full h-12 text-base font-semibold bg-gradient-to-r from-red-600 to-orange-500 hover:from-red-500 hover:to-orange-400 shadow-lg shadow-red-500/25 transition-all duration-300 hover:shadow-xl hover:shadow-red-500/30 hover:-translate-y-0.5",disabled:p||E,children:p?t.jsxs(t.Fragment,{children:[t.jsx(Ie,{className:"mr-2 h-5 w-5 animate-spin"}),"Signing in..."]}):"Sign In"})]}),t.jsx("p",{className:"text-xs text-center text-slate-500 pt-2",children:"Don't have an account? Contact your administrator for an invitation."})]})]}),t.jsxs("div",{className:"absolute bottom-6 left-0 right-0 text-center z-10",children:[t.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Enterprise Infrastructure Management"}),t.jsx("p",{className:"text-slate-600 text-xs mt-1",children:"Secure  Scalable  Reliable"})]})]})}function fp(){const{company:e}=Ze();return fe({queryKey:["company-projects",e==null?void 0:e.id],queryFn:async()=>{if(!(e!=null&&e.id))return[];const{data:s,error:r}=await B.from("projects").select("*").eq("organization_id",e.id).eq("is_draft",!1).order("created_at",{ascending:!1});if(r)throw r;return s.map(n=>({id:n.id,name:n.name,description:n.description,status:n.status||"draft",health:n.health||"healthy",progressPercent:n.progress_percent||0,startDate:n.start_date,targetEndDate:n.target_end_date,actualEndDate:n.actual_end_date,organizationId:n.organization_id,isDraft:n.is_draft||!1,formProgress:n.form_progress,lastEditedBy:n.last_edited_by,lastEditedAt:n.last_edited_at,createdAt:n.created_at,updatedAt:n.updated_at}))},enabled:!!(e!=null&&e.id)})}function zz(){const{company:e,canViewBilling:s}=Ze();return fe({queryKey:["billing-transactions",e==null?void 0:e.id],queryFn:async()=>{if(!(e!=null&&e.id))return[];const{data:r,error:n}=await B.from("billing_transactions").select("*").eq("company_id",e.id).order("transaction_date",{ascending:!1});if(n)throw n;return r},enabled:!!(e!=null&&e.id)&&s})}function qz(){const{company:e,canViewBilling:s}=Ze();return fe({queryKey:["upcoming-dues",e==null?void 0:e.id],queryFn:async()=>{if(!(e!=null&&e.id))return[];const{data:r,error:n}=await B.from("upcoming_dues").select("*").eq("company_id",e.id).order("due_date",{ascending:!0});if(n)throw n;return r},enabled:!!(e!=null&&e.id)&&s})}function Y4(){const{company:e,canManageTeam:s}=Ze();return fe({queryKey:["company-members",e==null?void 0:e.id],queryFn:async()=>{if(!(e!=null&&e.id))return[];const{data:r,error:n}=await B.from("company_members").select("*").eq("company_id",e.id).order("created_at",{ascending:!1});if(n)throw n;const a=r.map(l=>l.user_id),{data:i}=await B.from("profiles_safe").select("*").in("id",a),o=new Map((i==null?void 0:i.map(l=>[l.id,l]))||[]);return r.map(l=>{const c=o.get(l.user_id);return{id:l.id,companyId:l.company_id,userId:l.user_id,role:l.role,invitedBy:l.invited_by,invitedAt:l.invited_at,joinedAt:l.joined_at,isActive:l.is_active,createdAt:l.created_at,updatedAt:l.updated_at,user:c?{id:c.id,email:c.email,fullName:c.full_name,avatarUrl:c.avatar_url,createdAt:c.created_at,updatedAt:c.updated_at}:void 0}})},enabled:!!(e!=null&&e.id)&&s})}function Wz(){const{company:e,canManageTeam:s}=Ze();return fe({queryKey:["company-invitations",e==null?void 0:e.id],queryFn:async()=>{if(!(e!=null&&e.id))return[];const{data:r,error:n}=await B.from("invitations").select("*").eq("company_id",e.id).order("created_at",{ascending:!1});if(n)throw n;return r.map(a=>({id:a.id,email:a.email,role:a.role,company_id:a.company_id,invited_by:a.invited_by,token:a.token,status:a.status,expires_at:a.expires_at,accepted_at:a.accepted_at,created_at:a.created_at,updated_at:a.updated_at}))},enabled:!!(e!=null&&e.id)&&s})}function th(){const{isInfraweaveAdmin:e}=Ze();return fe({queryKey:["all-companies"],queryFn:async()=>{const{data:s,error:r}=await B.from("organizations").select("*").order("name",{ascending:!0});if(r)throw r;return s.map(n=>({id:n.id,name:n.name,slug:n.slug,domain:n.domain,billingEmail:n.billing_email,subscriptionStatus:n.subscription_status||"active",subscriptionTier:n.subscription_tier||"standard",createdAt:n.created_at,updatedAt:n.updated_at}))},enabled:e})}function pp(e){const{isInfraweaveAdmin:s}=Ze();return fe({queryKey:["all-projects",e],queryFn:async()=>{let r=B.from("projects").select(`
          *,
          organization:organizations(*)
        `).order("created_at",{ascending:!1});e&&(r=r.ilike("name",`%${e}%`));const{data:n,error:a}=await r;if(a)throw a;return n.map(i=>({id:i.id,name:i.name,description:i.description,status:i.status,health:i.health||"healthy",progressPercent:i.progress_percent||0,organizationId:i.organization_id,isDraft:i.is_draft||!1,formProgress:i.form_progress||void 0,lastEditedBy:i.last_edited_by||void 0,lastEditedAt:i.last_edited_at||void 0,createdAt:i.created_at,updatedAt:i.updated_at,company:i.organization?{id:i.organization.id,name:i.organization.name,slug:i.organization.slug}:void 0}))},enabled:s})}function Q4(e){const{isInfraweaveAdmin:s}=Ze();return fe({queryKey:["audit-logs",e],queryFn:async()=>{let r=B.from("audit_logs").select("*").order("created_at",{ascending:!1}).limit((e==null?void 0:e.limit)||100);e!=null&&e.isSensitive&&(r=r.eq("is_sensitive",!0));const{data:n,error:a}=await r;if(a)throw a;return n.map(i=>({id:i.id,userId:i.user_id,entityType:i.entity_type,entityId:i.entity_id,action:i.action,actionCategory:i.action_category,isSensitive:i.is_sensitive||!1,oldValues:i.old_values,newValues:i.new_values,organizationId:i.organization_id,impersonatedBy:i.impersonated_by,ipAddress:i.ip_address,userAgent:i.user_agent,createdAt:i.created_at}))},enabled:s})}function ew(){const{company:e}=Ze();return fe({queryKey:["company-tickets",e==null?void 0:e.id],queryFn:async()=>{if(!(e!=null&&e.id))return[];const{data:s,error:r}=await B.from("tickets").select(`
          *,
          project:projects(id, name)
        `).eq("organization_id",e.id).order("created_at",{ascending:!1});if(r)throw r;return s},enabled:!!(e!=null&&e.id)})}function Z4(e){const{isInfraweaveAdmin:s}=Ze();return fe({queryKey:["all-tickets",e],queryFn:async()=>{let r=B.from("tickets").select(`
          *,
          project:projects(id, name),
          organization:organizations(id, name)
        `).order("created_at",{ascending:!1}).limit((e==null?void 0:e.limit)||100);e!=null&&e.status&&(r=r.eq("status",e.status)),e!=null&&e.priority&&(r=r.eq("priority",e.priority)),e!=null&&e.companyId&&(r=r.eq("organization_id",e.companyId));const{data:n,error:a}=await r;if(a)throw a;const i=new Set;n.forEach(l=>{l.assigned_to&&i.add(l.assigned_to),l.reporter_id&&i.add(l.reporter_id)});let o=new Map;if(i.size>0){const{data:l}=await B.from("profiles").select("id, full_name, email").in("id",Array.from(i));l&&(o=new Map(l.map(c=>[c.id,{full_name:c.full_name,email:c.email}])))}return n.map((l,c)=>{var m,h;const d=l.assigned_to?o.get(l.assigned_to):null,u=l.reporter_id?o.get(l.reporter_id):null;return{id:l.id,ticketNumber:`TKT-${String(c+1).padStart(4,"0")}`,title:l.title,status:l.status,priority:l.priority,category:l.category,dueDate:l.due_date,createdAt:l.created_at,updatedAt:l.updated_at,projectId:l.project_id,projectName:((m=l.project)==null?void 0:m.name)||null,companyId:l.organization_id,companyName:((h=l.organization)==null?void 0:h.name)||"Unknown",assignedToId:l.assigned_to,assignedToName:(d==null?void 0:d.full_name)||(d==null?void 0:d.email)||null,reporterId:l.reporter_id,reporterName:(u==null?void 0:u.full_name)||(u==null?void 0:u.email)||null}})},enabled:s})}const J4=f.createContext(void 0);function Vz({children:e}){const[s,r]=f.useState(!1),n=()=>r(a=>!a);return t.jsx(J4.Provider,{value:{isCollapsed:s,setIsCollapsed:r,toggleCollapse:n},children:e})}function sh(){const e=f.useContext(J4);if(!e)throw new Error("useSidebarContext must be used within a SidebarProvider");return e}function X4(e,s=[]){let r=[];function n(i,o){const l=f.createContext(o);l.displayName=i+"Context";const c=r.length;r=[...r,o];const d=m=>{var y;const{scope:h,children:p,...g}=m,x=((y=h==null?void 0:h[e])==null?void 0:y[c])||l,v=f.useMemo(()=>g,Object.values(g));return t.jsx(x.Provider,{value:v,children:p})};d.displayName=i+"Provider";function u(m,h){var x;const p=((x=h==null?void 0:h[e])==null?void 0:x[c])||l,g=f.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=r.map(o=>f.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return f.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,Hz(a,...s)]}function Hz(...e){const s=e[0];if(e.length===1)return s;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const m=c(i)[`__scope${d}`];return{...l,...m}},{});return f.useMemo(()=>({[`__scope${s.scopeName}`]:o}),[o])}};return r.scopeName=s.scopeName,r}var eE={exports:{}},tE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ic=f;function Kz(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var Gz=typeof Object.is=="function"?Object.is:Kz,Yz=Ic.useState,Qz=Ic.useEffect,Zz=Ic.useLayoutEffect,Jz=Ic.useDebugValue;function Xz(e,s){var r=s(),n=Yz({inst:{value:r,getSnapshot:s}}),a=n[0].inst,i=n[1];return Zz(function(){a.value=r,a.getSnapshot=s,Mx(a)&&i({inst:a})},[e,r,s]),Qz(function(){return Mx(a)&&i({inst:a}),e(function(){Mx(a)&&i({inst:a})})},[e]),Jz(r),r}function Mx(e){var s=e.getSnapshot;e=e.value;try{var r=s();return!Gz(e,r)}catch{return!0}}function eq(e,s){return s()}var tq=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?eq:Xz;tE.useSyncExternalStore=Ic.useSyncExternalStore!==void 0?Ic.useSyncExternalStore:tq;eE.exports=tE;var sq=eE.exports;function rq(){return sq.useSyncExternalStore(nq,()=>!0,()=>!1)}function nq(){return()=>{}}var tw="Avatar",[aq]=X4(tw),[iq,sE]=aq(tw),rE=f.forwardRef((e,s)=>{const{__scopeAvatar:r,...n}=e,[a,i]=f.useState("idle");return t.jsx(iq,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:t.jsx(hr.span,{...n,ref:s})})});rE.displayName=tw;var nE="AvatarImage",aE=f.forwardRef((e,s)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:a=()=>{},...i}=e,o=sE(nE,r),l=oq(n,i),c=ds(d=>{a(d),o.onImageLoadingStatusChange(d)});return hs(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?t.jsx(hr.img,{...i,ref:s,src:n}):null});aE.displayName=nE;var iE="AvatarFallback",oE=f.forwardRef((e,s)=>{const{__scopeAvatar:r,delayMs:n,...a}=e,i=sE(iE,r),[o,l]=f.useState(n===void 0);return f.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&i.imageLoadingStatus!=="loaded"?t.jsx(hr.span,{...a,ref:s}):null});oE.displayName=iE;function zN(e,s){return e?s?(e.src!==s&&(e.src=s),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function oq(e,{referrerPolicy:s,crossOrigin:r}){const n=rq(),a=f.useRef(null),i=n?(a.current||(a.current=new window.Image),a.current):null,[o,l]=f.useState(()=>zN(i,e));return hs(()=>{l(zN(i,e))},[i,e]),hs(()=>{const c=m=>()=>{l(m)};if(!i)return;const d=c("loaded"),u=c("error");return i.addEventListener("load",d),i.addEventListener("error",u),s&&(i.referrerPolicy=s),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",d),i.removeEventListener("error",u)}},[i,r,s]),o}var lE=rE,cE=aE,dE=oE;const Tt=f.forwardRef(({className:e,...s},r)=>t.jsx(lE,{ref:r,className:J("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...s}));Tt.displayName=lE.displayName;const Ps=f.forwardRef(({className:e,...s},r)=>t.jsx(cE,{ref:r,className:J("aspect-square h-full w-full",e),...s}));Ps.displayName=cE.displayName;const Pt=f.forwardRef(({className:e,...s},r)=>t.jsx(dE,{ref:r,className:J("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...s}));Pt.displayName=dE.displayName;const lq=$u("inline-flex items-center rounded-md border px-2 py-0.5 text-xs font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground",outline:"text-foreground border-border",success:"border-transparent bg-success/20 text-success",warning:"border-transparent bg-warning/20 text-warning",info:"border-transparent bg-info/20 text-info",muted:"border-transparent bg-muted text-muted-foreground",open:"border-transparent bg-status-open/20 text-status-open","in-progress":"border-transparent bg-status-in-progress/20 text-status-in-progress",waiting:"border-transparent bg-status-waiting/20 text-status-waiting",resolved:"border-transparent bg-status-resolved/20 text-status-resolved",closed:"border-transparent bg-status-closed/20 text-status-closed",urgent:"border-transparent bg-destructive/20 text-destructive",high:"border-transparent bg-warning/20 text-warning",medium:"border-transparent bg-info/20 text-info",low:"border-transparent bg-muted text-muted-foreground"}},defaultVariants:{variant:"default"}});function $({className:e,variant:s,...r}){return t.jsx("div",{className:J(lq({variant:s}),e),...r})}const cq=[{name:"Dashboard",href:"/admin",icon:Wa},{name:"Companies",href:"/admin/companies",icon:Qt},{name:"Employees",href:"/admin/employees",icon:Kt},{name:"All Projects",href:"/admin/all-projects",icon:bt},{name:"All Tickets",href:"/admin/all-tickets",icon:rt},{name:"Billing",href:"/admin/billing",icon:ca},{name:"Global Reports",href:"/admin/reports",icon:Zt},{name:"Audit Logs",href:"/admin/audit-logs",icon:us},{name:"User Management",href:"/admin/users",icon:Kt},{name:"Knowledge Base",href:"/knowledge-base",icon:ir},{name:"Settings",href:"/admin/settings",icon:Js}];function dq(){var c;const{isCollapsed:e,toggleCollapse:s}=sh(),r=Ws(),n=Qe(),{user:a,signOut:i}=ft(),o=async()=>{try{await i()}catch(d){console.error("Sign out error:",d)}n("/auth")},l=((c=a==null?void 0:a.email)==null?void 0:c.substring(0,2).toUpperCase())||"IA";return t.jsx("aside",{className:J("fixed left-0 top-0 z-40 h-screen border-r border-border bg-card/50 backdrop-blur-xl transition-all duration-300",e?"w-16":"w-64"),children:t.jsxs("div",{className:"flex h-full flex-col",children:[t.jsxs("div",{className:"flex h-16 items-center justify-between border-b border-border px-4",children:[!e&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("img",{src:eo,alt:"InfraWeave",className:"h-8 w-8 object-contain"}),t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold text-foreground",children:"InfraWeave"}),t.jsx($,{variant:"destructive",className:"ml-2 text-xs",children:"Super Admin"})]})]}),t.jsx("button",{onClick:s,className:"rounded-lg p-1.5 hover:bg-accent transition-colors",children:e?t.jsx(ln,{className:"h-4 w-4 text-muted-foreground"}):t.jsx(nl,{className:"h-4 w-4 text-muted-foreground"})})]}),t.jsx("nav",{className:"flex-1 space-y-1 overflow-y-auto p-3",children:cq.map(d=>{const u=r.pathname===d.href||d.href!=="/admin"&&r.pathname.startsWith(d.href),m=d.icon;return t.jsxs(Qs,{to:d.href,className:J("flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium transition-all duration-200",u?"bg-primary text-primary-foreground shadow-md":"text-muted-foreground hover:bg-accent hover:text-foreground"),children:[t.jsx(m,{className:J("h-5 w-5 flex-shrink-0",u&&"text-primary-foreground")}),!e&&t.jsx("span",{children:d.name})]},d.name)})}),t.jsxs("div",{className:"border-t border-border p-3",children:[t.jsxs("div",{className:J("flex items-center gap-3 rounded-lg p-2",e?"justify-center":""),children:[t.jsxs(Tt,{className:"h-9 w-9 ring-2 ring-primary/20",children:[t.jsx(Ps,{src:void 0}),t.jsx(Pt,{className:"bg-primary/10 text-primary text-xs font-medium",children:l})]}),!e&&t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:"InfraWeave Admin"}),t.jsx("p",{className:"text-xs text-muted-foreground truncate",children:a==null?void 0:a.email})]})]}),t.jsxs("div",{className:J("flex items-center gap-2 mt-2",e?"flex-col":""),children:[t.jsx($n,{}),t.jsxs("button",{onClick:o,className:"flex items-center gap-2 rounded-lg px-3 py-2 text-sm text-muted-foreground hover:bg-destructive/10 hover:text-destructive transition-colors flex-1",children:[t.jsx(al,{className:"h-4 w-4"}),!e&&t.jsx("span",{children:"Sign Out"})]})]})]})]})})}const uq=[{name:"Dashboard",href:"/dashboard",icon:Wa},{name:"Projects",href:"/projects",icon:bt},{name:"Tickets",href:"/tickets",icon:rt},{name:"Team",href:"/team",icon:Kt},{name:"Billing",href:"/billing",icon:ca},{name:"Knowledge Base",href:"/knowledge-base",icon:ir},{name:"Settings",href:"/settings",icon:Js}];function hq({company:e}){var m,h;const{isCollapsed:s,toggleCollapse:r}=sh(),n=Ws(),a=Qe(),{user:i,signOut:o}=ft(),l=async()=>{try{await o()}catch(p){console.error("Sign out error:",p)}a("/auth")},c=((m=i==null?void 0:i.email)==null?void 0:m.substring(0,2).toUpperCase())||"CA",d=((h=e==null?void 0:e.name)==null?void 0:h.substring(0,2).toUpperCase())||"CO",u=e==null?void 0:e.logoUrl;return t.jsx("aside",{className:J("fixed left-0 top-0 z-40 h-screen border-r border-border bg-card/50 backdrop-blur-xl transition-all duration-300",s?"w-16":"w-64"),children:t.jsxs("div",{className:"flex h-full flex-col",children:[t.jsxs("div",{className:"flex h-16 items-center justify-between border-b border-border px-4",children:[!s&&t.jsxs("div",{className:"flex items-center gap-2",children:[u?t.jsxs(Tt,{className:"h-8 w-8",children:[t.jsx(Ps,{src:u,alt:(e==null?void 0:e.name)||"Company",className:"object-cover"}),t.jsx(Pt,{className:"bg-primary/10 text-primary text-xs font-semibold",children:d})]}):t.jsx("img",{src:eo,alt:"InfraWeave CRM",className:"h-8 w-8 object-contain"}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("span",{className:"font-semibold text-foreground text-sm truncate block",children:"InfraWeave CRM"}),t.jsx("span",{className:"text-xs text-muted-foreground truncate block",children:(e==null?void 0:e.name)||"Company Admin"})]})]}),t.jsx("button",{onClick:r,className:"rounded-lg p-1.5 hover:bg-accent transition-colors",children:s?t.jsx(ln,{className:"h-4 w-4 text-muted-foreground"}):t.jsx(nl,{className:"h-4 w-4 text-muted-foreground"})})]}),t.jsx("nav",{className:"flex-1 space-y-1 overflow-y-auto p-3",children:uq.map(p=>{const g=n.pathname===p.href||p.href!=="/dashboard"&&n.pathname.startsWith(p.href),x=p.icon;return t.jsxs(Qs,{to:p.href,className:J("flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium transition-all duration-200",g?"bg-primary text-primary-foreground shadow-md":"text-muted-foreground hover:bg-accent hover:text-foreground"),children:[t.jsx(x,{className:J("h-5 w-5 flex-shrink-0",g&&"text-primary-foreground")}),!s&&t.jsx("span",{children:p.name})]},p.name)})}),t.jsxs("div",{className:"border-t border-border p-3",children:[t.jsxs("div",{className:J("flex items-center gap-3 rounded-lg p-2",s?"justify-center":""),children:[t.jsxs(Tt,{className:"h-9 w-9 ring-2 ring-primary/20",children:[t.jsx(Ps,{src:void 0}),t.jsx(Pt,{className:"bg-primary/10 text-primary text-xs font-medium",children:c})]}),!s&&t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:"Company Admin"}),t.jsx("p",{className:"text-xs text-muted-foreground truncate",children:i==null?void 0:i.email})]})]}),t.jsxs("div",{className:J("flex items-center gap-2 mt-2",s?"flex-col":""),children:[t.jsx($n,{}),t.jsxs("button",{onClick:l,className:"flex items-center gap-2 rounded-lg px-3 py-2 text-sm text-muted-foreground hover:bg-destructive/10 hover:text-destructive transition-colors flex-1",children:[t.jsx(al,{className:"h-4 w-4"}),!s&&t.jsx("span",{children:"Sign Out"})]})]})]})]})})}const mq=[{name:"Dashboard",href:"/dashboard",icon:Wa},{name:"My Projects",href:"/my-projects",icon:bt},{name:"My Tickets",href:"/my-tickets",icon:rt},{name:"Knowledge Base",href:"/knowledge-base",icon:ir},{name:"Profile",href:"/profile",icon:qs}];function qN({company:e}){var d,u;const{isCollapsed:s,toggleCollapse:r}=sh(),n=Ws(),a=Qe(),{user:i,signOut:o}=ft(),l=async()=>{try{await o()}catch(m){console.error("Sign out error:",m)}a("/auth")},c=((d=i==null?void 0:i.email)==null?void 0:d.substring(0,2).toUpperCase())||"EN";return t.jsx("aside",{className:J("fixed left-0 top-0 z-40 h-screen border-r border-border bg-card/50 backdrop-blur-xl transition-all duration-300",s?"w-16":"w-64"),children:t.jsxs("div",{className:"flex h-full flex-col",children:[t.jsxs("div",{className:"flex h-16 items-center justify-between border-b border-border px-4",children:[!s&&t.jsxs("div",{className:"flex items-center gap-2",children:[e!=null&&e.logoUrl?t.jsxs(Tt,{className:"h-8 w-8",children:[t.jsx(Ps,{src:e.logoUrl,alt:(e==null?void 0:e.name)||"Company",className:"object-cover"}),t.jsx(Pt,{className:"bg-primary/10 text-primary text-xs font-semibold",children:((u=e==null?void 0:e.name)==null?void 0:u.substring(0,2).toUpperCase())||"CO"})]}):t.jsx("img",{src:eo,alt:"InfraWeave CRM",className:"h-8 w-8 object-contain"}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("span",{className:"font-semibold text-foreground text-sm truncate block",children:"InfraWeave CRM"}),t.jsx("span",{className:"text-xs text-muted-foreground truncate block",children:(e==null?void 0:e.name)||"Engineer"})]})]}),t.jsx("button",{onClick:r,className:"rounded-lg p-1.5 hover:bg-accent transition-colors",children:s?t.jsx(ln,{className:"h-4 w-4 text-muted-foreground"}):t.jsx(nl,{className:"h-4 w-4 text-muted-foreground"})})]}),t.jsx("nav",{className:"flex-1 space-y-1 overflow-y-auto p-3",children:mq.map(m=>{const h=n.pathname===m.href||m.href!=="/dashboard"&&n.pathname.startsWith(m.href),p=m.icon;return t.jsxs(Qs,{to:m.href,className:J("flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium transition-all duration-200",h?"bg-primary text-primary-foreground shadow-md":"text-muted-foreground hover:bg-accent hover:text-foreground"),children:[t.jsx(p,{className:J("h-5 w-5 flex-shrink-0",h&&"text-primary-foreground")}),!s&&t.jsx("span",{children:m.name})]},m.name)})}),t.jsxs("div",{className:"border-t border-border p-3",children:[t.jsxs("div",{className:J("flex items-center gap-3 rounded-lg p-2",s?"justify-center":""),children:[t.jsxs(Tt,{className:"h-9 w-9 ring-2 ring-primary/20",children:[t.jsx(Ps,{src:void 0}),t.jsx(Pt,{className:"bg-primary/10 text-primary text-xs font-medium",children:c})]}),!s&&t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:"Engineer"}),t.jsx("p",{className:"text-xs text-muted-foreground truncate",children:i==null?void 0:i.email})]})]}),t.jsxs("div",{className:J("flex items-center gap-2 mt-2",s?"flex-col":""),children:[t.jsx($n,{}),t.jsxs("button",{onClick:l,className:"flex items-center gap-2 rounded-lg px-3 py-2 text-sm text-muted-foreground hover:bg-destructive/10 hover:text-destructive transition-colors flex-1",children:[t.jsx(al,{className:"h-4 w-4"}),!s&&t.jsx("span",{children:"Sign Out"})]})]})]})]})})}const fq=[{name:"Dashboard",href:"/employee",icon:Wa},{name:"All Tickets",href:"/employee/tickets",icon:rt},{name:"Knowledge Base",href:"/knowledge-base",icon:ir},{name:"My Profile",href:"/employee/profile",icon:qs}];function pq(){var c;const{isCollapsed:e,toggleCollapse:s}=sh(),r=Ws(),n=Qe(),{user:a,signOut:i}=ft(),o=async()=>{try{await i()}catch(d){console.error("Sign out error:",d)}n("/admin/auth")},l=((c=a==null?void 0:a.email)==null?void 0:c.substring(0,2).toUpperCase())||"E";return t.jsx("aside",{className:J("fixed left-0 top-0 z-40 h-screen border-r border-border bg-card/50 backdrop-blur-xl transition-all duration-300",e?"w-16":"w-64"),children:t.jsxs("div",{className:"flex h-full flex-col",children:[t.jsxs("div",{className:"flex h-16 items-center justify-between border-b border-border px-4",children:[!e&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("img",{src:eo,alt:"InfraWeave",className:"h-8 w-8 object-contain"}),t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold text-foreground",children:"InfraWeave"}),t.jsx($,{variant:"info",className:"ml-2 text-xs",children:"Employee"})]})]}),t.jsx("button",{onClick:s,className:"rounded-lg p-1.5 hover:bg-accent transition-colors",children:e?t.jsx(ln,{className:"h-4 w-4 text-muted-foreground"}):t.jsx(nl,{className:"h-4 w-4 text-muted-foreground"})})]}),t.jsx("nav",{className:"flex-1 space-y-1 overflow-y-auto p-3",children:fq.map(d=>{const u=r.pathname===d.href||d.href!=="/employee"&&r.pathname.startsWith(d.href),m=d.icon;return t.jsxs(Qs,{to:d.href,className:J("flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium transition-all duration-200",u?"bg-primary text-primary-foreground shadow-md":"text-muted-foreground hover:bg-accent hover:text-foreground"),children:[t.jsx(m,{className:J("h-5 w-5 flex-shrink-0",u&&"text-primary-foreground")}),!e&&t.jsx("span",{children:d.name})]},d.name)})}),t.jsxs("div",{className:"border-t border-border p-3",children:[t.jsxs("div",{className:J("flex items-center gap-3 rounded-lg p-2",e?"justify-center":""),children:[t.jsxs(Tt,{className:"h-9 w-9 ring-2 ring-info/20",children:[t.jsx(Ps,{src:void 0}),t.jsx(Pt,{className:"bg-info/10 text-info text-xs font-medium",children:l})]}),!e&&t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:"Employee"}),t.jsx("p",{className:"text-xs text-muted-foreground truncate",children:a==null?void 0:a.email})]})]}),t.jsxs("div",{className:J("flex items-center gap-2 mt-2",e?"flex-col":""),children:[t.jsx($n,{}),t.jsxs("button",{onClick:o,className:"flex items-center gap-2 rounded-lg px-3 py-2 text-sm text-muted-foreground hover:bg-destructive/10 hover:text-destructive transition-colors flex-1",children:[t.jsx(al,{className:"h-4 w-4"}),!e&&t.jsx("span",{children:"Sign Out"})]})]})]})]})})}const je=f.forwardRef(({className:e,...s},r)=>t.jsx("div",{ref:r,className:J("animate-pulse rounded-md bg-muted",e),...s}));je.displayName="Skeleton";function xq({children:e}){const{role:s,isLoading:r,company:n}=Ze(),{isCollapsed:a}=sh();if(r)return t.jsxs("div",{className:"min-h-screen bg-background flex",children:[t.jsxs("div",{className:"w-64 border-r border-border p-4",children:[t.jsx(je,{className:"h-8 w-32 mb-8"}),t.jsx("div",{className:"space-y-2",children:Array.from({length:6}).map((o,l)=>t.jsx(je,{className:"h-10 w-full"},l))})]}),t.jsxs("main",{className:"flex-1 p-6",children:[t.jsx(je,{className:"h-8 w-48 mb-4"}),t.jsx(je,{className:"h-64 w-full"})]})]});const i=()=>{switch(s){case"infraweave_admin":return t.jsx(dq,{});case"infraweave_employee":return t.jsx(pq,{});case"company_admin":return t.jsx(hq,{company:n});case"engineer":return t.jsx(qN,{company:n});default:return t.jsx(qN,{company:n})}};return t.jsxs("div",{className:"min-h-screen bg-background",children:[i(),t.jsx("main",{className:J("min-h-screen transition-all duration-300",a?"ml-16":"ml-64"),children:e}),t.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden -z-10",children:[t.jsx("div",{className:"absolute -top-40 -right-40 h-80 w-80 rounded-full bg-primary/5 blur-3xl"}),t.jsx("div",{className:"absolute -bottom-40 -left-40 h-80 w-80 rounded-full bg-primary/5 blur-3xl"})]})]})}function we({children:e}){return t.jsx(Vz,{children:t.jsx(xq,{children:e})})}function Kv(e,[s,r]){return Math.min(r,Math.max(s,e))}function gq(e,s){return f.useReducer((r,n)=>s[r][n]??r,e)}var sw="ScrollArea",[uE]=ks(sw),[vq,hn]=uE(sw),hE=f.forwardRef((e,s)=>{const{__scopeScrollArea:r,type:n="hover",dir:a,scrollHideDelay:i=600,...o}=e,[l,c]=f.useState(null),[d,u]=f.useState(null),[m,h]=f.useState(null),[p,g]=f.useState(null),[x,v]=f.useState(null),[y,j]=f.useState(0),[w,b]=f.useState(0),[N,_]=f.useState(!1),[C,E]=f.useState(!1),k=Ve(s,L=>c(L)),A=il(a);return t.jsx(vq,{scope:r,type:n,dir:A,scrollHideDelay:i,scrollArea:l,viewport:d,onViewportChange:u,content:m,onContentChange:h,scrollbarX:p,onScrollbarXChange:g,scrollbarXEnabled:N,onScrollbarXEnabledChange:_,scrollbarY:x,onScrollbarYChange:v,scrollbarYEnabled:C,onScrollbarYEnabledChange:E,onCornerWidthChange:j,onCornerHeightChange:b,children:t.jsx(Se.div,{dir:A,...o,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});hE.displayName=sw;var mE="ScrollAreaViewport",fE=f.forwardRef((e,s)=>{const{__scopeScrollArea:r,children:n,nonce:a,...i}=e,o=hn(mE,r),l=f.useRef(null),c=Ve(s,l,o.onViewportChange);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),t.jsx(Se.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:t.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});fE.displayName=mE;var pa="ScrollAreaScrollbar",rw=f.forwardRef((e,s)=>{const{forceMount:r,...n}=e,a=hn(pa,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,l=e.orientation==="horizontal";return f.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),a.type==="hover"?t.jsx(yq,{...n,ref:s,forceMount:r}):a.type==="scroll"?t.jsx(jq,{...n,ref:s,forceMount:r}):a.type==="auto"?t.jsx(pE,{...n,ref:s,forceMount:r}):a.type==="always"?t.jsx(nw,{...n,ref:s}):null});rw.displayName=pa;var yq=f.forwardRef((e,s)=>{const{forceMount:r,...n}=e,a=hn(pa,e.__scopeScrollArea),[i,o]=f.useState(!1);return f.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),o(!0)},u=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",u)}}},[a.scrollArea,a.scrollHideDelay]),t.jsx(js,{present:r||i,children:t.jsx(pE,{"data-state":i?"visible":"hidden",...n,ref:s})})}),jq=f.forwardRef((e,s)=>{const{forceMount:r,...n}=e,a=hn(pa,e.__scopeScrollArea),i=e.orientation==="horizontal",o=gp(()=>c("SCROLL_END"),100),[l,c]=gq("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return f.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,a.scrollHideDelay,c]),f.useEffect(()=>{const d=a.viewport,u=i?"scrollLeft":"scrollTop";if(d){let m=d[u];const h=()=>{const p=d[u];m!==p&&(c("SCROLL"),o()),m=p};return d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[a.viewport,i,c,o]),t.jsx(js,{present:r||l!=="hidden",children:t.jsx(nw,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:s,onPointerEnter:de(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:de(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),pE=f.forwardRef((e,s)=>{const r=hn(pa,e.__scopeScrollArea),{forceMount:n,...a}=e,[i,o]=f.useState(!1),l=e.orientation==="horizontal",c=gp(()=>{if(r.viewport){const d=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?d:u)}},10);return Dc(r.viewport,c),Dc(r.content,c),t.jsx(js,{present:n||i,children:t.jsx(nw,{"data-state":i?"visible":"hidden",...a,ref:s})})}),nw=f.forwardRef((e,s)=>{const{orientation:r="vertical",...n}=e,a=hn(pa,e.__scopeScrollArea),i=f.useRef(null),o=f.useRef(0),[l,c]=f.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=jE(l.viewport,l.content),u={...n,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:h=>i.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function m(h,p){return Sq(h,o.current,l,p)}return r==="horizontal"?t.jsx(wq,{...u,ref:s,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollLeft,p=WN(h,l,a.dir);i.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollLeft=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollLeft=m(h,a.dir))}}):r==="vertical"?t.jsx(bq,{...u,ref:s,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollTop,p=WN(h,l);i.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollTop=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollTop=m(h))}}):null}),wq=f.forwardRef((e,s)=>{const{sizes:r,onSizesChange:n,...a}=e,i=hn(pa,e.__scopeScrollArea),[o,l]=f.useState(),c=f.useRef(null),d=Ve(s,c,i.onScrollbarXChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),t.jsx(gE,{"data-orientation":"horizontal",...a,ref:d,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":xp(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,m)=>{if(i.viewport){const h=i.viewport.scrollLeft+u.deltaX;e.onWheelScroll(h),bE(h,m)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:df(o.paddingLeft),paddingEnd:df(o.paddingRight)}})}})}),bq=f.forwardRef((e,s)=>{const{sizes:r,onSizesChange:n,...a}=e,i=hn(pa,e.__scopeScrollArea),[o,l]=f.useState(),c=f.useRef(null),d=Ve(s,c,i.onScrollbarYChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),t.jsx(gE,{"data-orientation":"vertical",...a,ref:d,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":xp(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,m)=>{if(i.viewport){const h=i.viewport.scrollTop+u.deltaY;e.onWheelScroll(h),bE(h,m)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:df(o.paddingTop),paddingEnd:df(o.paddingBottom)}})}})}),[Nq,xE]=uE(pa),gE=f.forwardRef((e,s)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:m,...h}=e,p=hn(pa,r),[g,x]=f.useState(null),v=Ve(s,k=>x(k)),y=f.useRef(null),j=f.useRef(""),w=p.viewport,b=n.content-n.viewport,N=ds(u),_=ds(c),C=gp(m,10);function E(k){if(y.current){const A=k.clientX-y.current.left,L=k.clientY-y.current.top;d({x:A,y:L})}}return f.useEffect(()=>{const k=A=>{const L=A.target;(g==null?void 0:g.contains(L))&&N(A,b)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[w,g,b,N]),f.useEffect(_,[n,_]),Dc(g,C),Dc(p.content,C),t.jsx(Nq,{scope:r,scrollbar:g,hasThumb:a,onThumbChange:ds(i),onThumbPointerUp:ds(o),onThumbPositionChange:_,onThumbPointerDown:ds(l),children:t.jsx(Se.div,{...h,ref:v,style:{position:"absolute",...h.style},onPointerDown:de(e.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),y.current=g.getBoundingClientRect(),j.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),E(k))}),onPointerMove:de(e.onPointerMove,E),onPointerUp:de(e.onPointerUp,k=>{const A=k.target;A.hasPointerCapture(k.pointerId)&&A.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=j.current,p.viewport&&(p.viewport.style.scrollBehavior=""),y.current=null})})})}),cf="ScrollAreaThumb",vE=f.forwardRef((e,s)=>{const{forceMount:r,...n}=e,a=xE(cf,e.__scopeScrollArea);return t.jsx(js,{present:r||a.hasThumb,children:t.jsx(Cq,{ref:s,...n})})}),Cq=f.forwardRef((e,s)=>{const{__scopeScrollArea:r,style:n,...a}=e,i=hn(cf,r),o=xE(cf,r),{onThumbPositionChange:l}=o,c=Ve(s,m=>o.onThumbChange(m)),d=f.useRef(void 0),u=gp(()=>{d.current&&(d.current(),d.current=void 0)},100);return f.useEffect(()=>{const m=i.viewport;if(m){const h=()=>{if(u(),!d.current){const p=kq(m,l);d.current=p,l()}};return l(),m.addEventListener("scroll",h),()=>m.removeEventListener("scroll",h)}},[i.viewport,u,l]),t.jsx(Se.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:de(e.onPointerDownCapture,m=>{const p=m.target.getBoundingClientRect(),g=m.clientX-p.left,x=m.clientY-p.top;o.onThumbPointerDown({x:g,y:x})}),onPointerUp:de(e.onPointerUp,o.onThumbPointerUp)})});vE.displayName=cf;var aw="ScrollAreaCorner",yE=f.forwardRef((e,s)=>{const r=hn(aw,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?t.jsx(_q,{...e,ref:s}):null});yE.displayName=aw;var _q=f.forwardRef((e,s)=>{const{__scopeScrollArea:r,...n}=e,a=hn(aw,r),[i,o]=f.useState(0),[l,c]=f.useState(0),d=!!(i&&l);return Dc(a.scrollbarX,()=>{var m;const u=((m=a.scrollbarX)==null?void 0:m.offsetHeight)||0;a.onCornerHeightChange(u),c(u)}),Dc(a.scrollbarY,()=>{var m;const u=((m=a.scrollbarY)==null?void 0:m.offsetWidth)||0;a.onCornerWidthChange(u),o(u)}),d?t.jsx(Se.div,{...n,ref:s,style:{width:i,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function df(e){return e?parseInt(e,10):0}function jE(e,s){const r=e/s;return isNaN(r)?0:r}function xp(e){const s=jE(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*s;return Math.max(n,18)}function Sq(e,s,r,n="ltr"){const a=xp(r),i=a/2,o=s||i,l=a-o,c=r.scrollbar.paddingStart+o,d=r.scrollbar.size-r.scrollbar.paddingEnd-l,u=r.content-r.viewport,m=n==="ltr"?[0,u]:[u*-1,0];return wE([c,d],m)(e)}function WN(e,s,r="ltr"){const n=xp(s),a=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,i=s.scrollbar.size-a,o=s.content-s.viewport,l=i-n,c=r==="ltr"?[0,o]:[o*-1,0],d=Kv(e,c);return wE([0,o],[0,l])(d)}function wE(e,s){return r=>{if(e[0]===e[1]||s[0]===s[1])return s[0];const n=(s[1]-s[0])/(e[1]-e[0]);return s[0]+n*(r-e[0])}}function bE(e,s){return e>0&&e<s}var kq=(e,s=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=r.left!==i.left,l=r.top!==i.top;(o||l)&&s(),r=i,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function gp(e,s){const r=ds(e),n=f.useRef(0);return f.useEffect(()=>()=>window.clearTimeout(n.current),[]),f.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,s)},[r,s])}function Dc(e,s){const r=ds(s);hs(()=>{let n=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(n),a.unobserve(e)}}},[e,r])}var NE=hE,Eq=fE,Aq=yE;const vp=f.forwardRef(({className:e,children:s,...r},n)=>t.jsxs(NE,{ref:n,className:J("relative overflow-hidden",e),...r,children:[t.jsx(Eq,{className:"h-full w-full rounded-[inherit]",children:s}),t.jsx(CE,{}),t.jsx(Aq,{})]}));vp.displayName=NE.displayName;const CE=f.forwardRef(({className:e,orientation:s="vertical",...r},n)=>t.jsx(rw,{ref:n,orientation:s,className:J("flex touch-none select-none transition-colors",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:t.jsx(vE,{className:"relative flex-1 rounded-full bg-border"})}));CE.displayName=rw.displayName;function ze(e){const s=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&s==="[object Date]"?new e.constructor(+e):typeof e=="number"||s==="[object Number]"||typeof e=="string"||s==="[object String]"?new Date(e):new Date(NaN)}function cr(e,s){return e instanceof Date?new e.constructor(s):new Date(s)}function gs(e,s){const r=ze(e);return isNaN(s)?cr(e,NaN):(s&&r.setDate(r.getDate()+s),r)}function Un(e,s){const r=ze(e);if(isNaN(s))return cr(e,NaN);if(!s)return r;const n=r.getDate(),a=cr(e,r.getTime());a.setMonth(r.getMonth()+s+1,0);const i=a.getDate();return n>=i?a:(r.setFullYear(a.getFullYear(),a.getMonth(),n),r)}function Tq(e,s){const r=+ze(e);return cr(e,r+s)}const iw=6048e5,Pq=864e5,Rq=6e4,_E=36e5,qh=43200,VN=1440;function Iq(e,s){return Tq(e,s*_E)}let Dq={};function td(){return Dq}function ua(e,s){var l,c,d,u;const r=td(),n=(s==null?void 0:s.weekStartsOn)??((c=(l=s==null?void 0:s.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=ze(e),i=a.getDay(),o=(i<n?7:0)+i-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Go(e){return ua(e,{weekStartsOn:1})}function SE(e){const s=ze(e),r=s.getFullYear(),n=cr(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=Go(n),i=cr(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=Go(i);return s.getTime()>=a.getTime()?r+1:s.getTime()>=o.getTime()?r:r-1}function Oc(e){const s=ze(e);return s.setHours(0,0,0,0),s}function Mc(e){const s=ze(e),r=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return r.setUTCFullYear(s.getFullYear()),+e-+r}function En(e,s){const r=Oc(e),n=Oc(s),a=+r-Mc(r),i=+n-Mc(n);return Math.round((a-i)/Pq)}function Oq(e){const s=SE(e),r=cr(e,0);return r.setFullYear(s,0,4),r.setHours(0,0,0,0),Go(r)}function Gv(e,s){const r=s*7;return gs(e,r)}function Mq(e,s){return Un(e,s*12)}function Lq(e){let s;return e.forEach(function(r){const n=ze(r);(s===void 0||s<n||isNaN(Number(n)))&&(s=n)}),s||new Date(NaN)}function Fq(e){let s;return e.forEach(r=>{const n=ze(r);(!s||s>n||isNaN(+n))&&(s=n)}),s||new Date(NaN)}function cm(e,s){const r=ze(e),n=ze(s),a=r.getTime()-n.getTime();return a<0?-1:a>0?1:a}function kE(e){return cr(e,Date.now())}function nr(e,s){const r=Oc(e),n=Oc(s);return+r==+n}function ow(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function $q(e){if(!ow(e)&&typeof e!="number")return!1;const s=ze(e);return!isNaN(Number(s))}function Lc(e,s){const r=ze(e),n=ze(s),a=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return a*12+i}function Uq(e,s,r){const n=ua(e,r),a=ua(s,r),i=+n-Mc(n),o=+a-Mc(a);return Math.round((i-o)/iw)}function EE(e,s){const r=ze(e),n=ze(s),a=HN(r,n),i=Math.abs(En(r,n));r.setDate(r.getDate()-a*i);const o=+(HN(r,n)===-a),l=a*(i-o);return l===0?0:l}function HN(e,s){const r=e.getFullYear()-s.getFullYear()||e.getMonth()-s.getMonth()||e.getDate()-s.getDate()||e.getHours()-s.getHours()||e.getMinutes()-s.getMinutes()||e.getSeconds()-s.getSeconds()||e.getMilliseconds()-s.getMilliseconds();return r<0?-1:r>0?1:r}function lw(e){return s=>{const n=(e?Math[e]:Math.trunc)(s);return n===0?0:n}}function cw(e,s){return+ze(e)-+ze(s)}function Bq(e,s,r){const n=cw(e,s)/_E;return lw(r==null?void 0:r.roundingMethod)(n)}function zq(e,s,r){const n=cw(e,s)/Rq;return lw(r==null?void 0:r.roundingMethod)(n)}function qq(e){const s=ze(e);return s.setHours(23,59,59,999),s}function yp(e){const s=ze(e),r=s.getMonth();return s.setFullYear(s.getFullYear(),r+1,0),s.setHours(23,59,59,999),s}function Wq(e){const s=ze(e);return+qq(s)==+yp(s)}function Vq(e,s){const r=ze(e),n=ze(s),a=cm(r,n),i=Math.abs(Lc(r,n));let o;if(i<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*i);let l=cm(r,n)===-a;Wq(ze(e))&&i===1&&cm(e,n)===1&&(l=!1),o=a*(i-Number(l))}return o===0?0:o}function Hq(e,s,r){const n=cw(e,s)/1e3;return lw(r==null?void 0:r.roundingMethod)(n)}function Cr(e){const s=ze(e);return s.setDate(1),s.setHours(0,0,0,0),s}function AE(e){const s=ze(e),r=cr(e,0);return r.setFullYear(s.getFullYear(),0,1),r.setHours(0,0,0,0),r}function dw(e,s){var l,c,d,u;const r=td(),n=(s==null?void 0:s.weekStartsOn)??((c=(l=s==null?void 0:s.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=ze(e),i=a.getDay(),o=(i<n?-7:0)+6-(i-n);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}function TE(e){return dw(e,{weekStartsOn:1})}const Kq={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Gq=(e,s,r)=>{let n;const a=Kq[e];return typeof a=="string"?n=a:s===1?n=a.one:n=a.other.replace("{{count}}",s.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Lx(e){return(s={})=>{const r=s.width?String(s.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const Yq={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Qq={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Zq={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Jq={date:Lx({formats:Yq,defaultWidth:"full"}),time:Lx({formats:Qq,defaultWidth:"full"}),dateTime:Lx({formats:Zq,defaultWidth:"full"})},Xq={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},e9=(e,s,r,n)=>Xq[e];function xd(e){return(s,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(s):s;return a[i]}}const t9={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},s9={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},r9={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},n9={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},a9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},i9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},o9=(e,s)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},l9={ordinalNumber:o9,era:xd({values:t9,defaultWidth:"wide"}),quarter:xd({values:s9,defaultWidth:"wide",argumentCallback:e=>e-1}),month:xd({values:r9,defaultWidth:"wide"}),day:xd({values:n9,defaultWidth:"wide"}),dayPeriod:xd({values:a9,defaultWidth:"wide",formattingValues:i9,defaultFormattingWidth:"wide"})};function gd(e){return(s,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=s.match(a);if(!i)return null;const o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?d9(l,m=>m.test(o)):c9(l,m=>m.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=s.slice(o.length);return{value:d,rest:u}}}function c9(e,s){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&s(e[r]))return r}function d9(e,s){for(let r=0;r<e.length;r++)if(s(e[r]))return r}function u9(e){return(s,r={})=>{const n=s.match(e.matchPattern);if(!n)return null;const a=n[0],i=s.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=s.slice(a.length);return{value:o,rest:l}}}const h9=/^(\d+)(th|st|nd|rd)?/i,m9=/\d+/i,f9={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},p9={any:[/^b/i,/^(a|c)/i]},x9={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},g9={any:[/1/i,/2/i,/3/i,/4/i]},v9={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},y9={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},j9={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},w9={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},b9={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},N9={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},C9={ordinalNumber:u9({matchPattern:h9,parsePattern:m9,valueCallback:e=>parseInt(e,10)}),era:gd({matchPatterns:f9,defaultMatchWidth:"wide",parsePatterns:p9,defaultParseWidth:"any"}),quarter:gd({matchPatterns:x9,defaultMatchWidth:"wide",parsePatterns:g9,defaultParseWidth:"any",valueCallback:e=>e+1}),month:gd({matchPatterns:v9,defaultMatchWidth:"wide",parsePatterns:y9,defaultParseWidth:"any"}),day:gd({matchPatterns:j9,defaultMatchWidth:"wide",parsePatterns:w9,defaultParseWidth:"any"}),dayPeriod:gd({matchPatterns:b9,defaultMatchWidth:"any",parsePatterns:N9,defaultParseWidth:"any"})},uw={code:"en-US",formatDistance:Gq,formatLong:Jq,formatRelative:e9,localize:l9,match:C9,options:{weekStartsOn:0,firstWeekContainsDate:1}};function _9(e){const s=ze(e);return En(s,AE(s))+1}function PE(e){const s=ze(e),r=+Go(s)-+Oq(s);return Math.round(r/iw)+1}function RE(e,s){var u,m,h,p;const r=ze(e),n=r.getFullYear(),a=td(),i=(s==null?void 0:s.firstWeekContainsDate)??((m=(u=s==null?void 0:s.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??a.firstWeekContainsDate??((p=(h=a.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,o=cr(e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=ua(o,s),c=cr(e,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const d=ua(c,s);return r.getTime()>=l.getTime()?n+1:r.getTime()>=d.getTime()?n:n-1}function S9(e,s){var l,c,d,u;const r=td(),n=(s==null?void 0:s.firstWeekContainsDate)??((c=(l=s==null?void 0:s.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,a=RE(e,s),i=cr(e,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),ua(i,s)}function IE(e,s){const r=ze(e),n=+ua(r,s)-+S9(r,s);return Math.round(n/iw)+1}function gt(e,s){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(s,"0");return r+n}const ri={y(e,s){const r=e.getFullYear(),n=r>0?r:1-r;return gt(s==="yy"?n%100:n,s.length)},M(e,s){const r=e.getMonth();return s==="M"?String(r+1):gt(r+1,2)},d(e,s){return gt(e.getDate(),s.length)},a(e,s){const r=e.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,s){return gt(e.getHours()%12||12,s.length)},H(e,s){return gt(e.getHours(),s.length)},m(e,s){return gt(e.getMinutes(),s.length)},s(e,s){return gt(e.getSeconds(),s.length)},S(e,s){const r=s.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return gt(a,s.length)}},wl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},KN={G:function(e,s,r){const n=e.getFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,s,r){if(s==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return ri.y(e,s)},Y:function(e,s,r,n){const a=RE(e,n),i=a>0?a:1-a;if(s==="YY"){const o=i%100;return gt(o,2)}return s==="Yo"?r.ordinalNumber(i,{unit:"year"}):gt(i,s.length)},R:function(e,s){const r=SE(e);return gt(r,s.length)},u:function(e,s){const r=e.getFullYear();return gt(r,s.length)},Q:function(e,s,r){const n=Math.ceil((e.getMonth()+1)/3);switch(s){case"Q":return String(n);case"QQ":return gt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,s,r){const n=Math.ceil((e.getMonth()+1)/3);switch(s){case"q":return String(n);case"qq":return gt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,s,r){const n=e.getMonth();switch(s){case"M":case"MM":return ri.M(e,s);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,s,r){const n=e.getMonth();switch(s){case"L":return String(n+1);case"LL":return gt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,s,r,n){const a=IE(e,n);return s==="wo"?r.ordinalNumber(a,{unit:"week"}):gt(a,s.length)},I:function(e,s,r){const n=PE(e);return s==="Io"?r.ordinalNumber(n,{unit:"week"}):gt(n,s.length)},d:function(e,s,r){return s==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):ri.d(e,s)},D:function(e,s,r){const n=_9(e);return s==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):gt(n,s.length)},E:function(e,s,r){const n=e.getDay();switch(s){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,s,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(s){case"e":return String(i);case"ee":return gt(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,s,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(s){case"c":return String(i);case"cc":return gt(i,s.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,s,r){const n=e.getDay(),a=n===0?7:n;switch(s){case"i":return String(a);case"ii":return gt(a,s.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,s,r){const a=e.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,s,r){const n=e.getHours();let a;switch(n===12?a=wl.noon:n===0?a=wl.midnight:a=n/12>=1?"pm":"am",s){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,s,r){const n=e.getHours();let a;switch(n>=17?a=wl.evening:n>=12?a=wl.afternoon:n>=4?a=wl.morning:a=wl.night,s){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,s,r){if(s==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return ri.h(e,s)},H:function(e,s,r){return s==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):ri.H(e,s)},K:function(e,s,r){const n=e.getHours()%12;return s==="Ko"?r.ordinalNumber(n,{unit:"hour"}):gt(n,s.length)},k:function(e,s,r){let n=e.getHours();return n===0&&(n=24),s==="ko"?r.ordinalNumber(n,{unit:"hour"}):gt(n,s.length)},m:function(e,s,r){return s==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):ri.m(e,s)},s:function(e,s,r){return s==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):ri.s(e,s)},S:function(e,s){return ri.S(e,s)},X:function(e,s,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(s){case"X":return YN(n);case"XXXX":case"XX":return fo(n);case"XXXXX":case"XXX":default:return fo(n,":")}},x:function(e,s,r){const n=e.getTimezoneOffset();switch(s){case"x":return YN(n);case"xxxx":case"xx":return fo(n);case"xxxxx":case"xxx":default:return fo(n,":")}},O:function(e,s,r){const n=e.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+GN(n,":");case"OOOO":default:return"GMT"+fo(n,":")}},z:function(e,s,r){const n=e.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+GN(n,":");case"zzzz":default:return"GMT"+fo(n,":")}},t:function(e,s,r){const n=Math.trunc(e.getTime()/1e3);return gt(n,s.length)},T:function(e,s,r){const n=e.getTime();return gt(n,s.length)}};function GN(e,s=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),i=n%60;return i===0?r+String(a):r+String(a)+s+gt(i,2)}function YN(e,s){return e%60===0?(e>0?"-":"+")+gt(Math.abs(e)/60,2):fo(e,s)}function fo(e,s=""){const r=e>0?"-":"+",n=Math.abs(e),a=gt(Math.trunc(n/60),2),i=gt(n%60,2);return r+a+s+i}const QN=(e,s)=>{switch(e){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},DE=(e,s)=>{switch(e){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},k9=(e,s)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return QN(e,s);let i;switch(n){case"P":i=s.dateTime({width:"short"});break;case"PP":i=s.dateTime({width:"medium"});break;case"PPP":i=s.dateTime({width:"long"});break;case"PPPP":default:i=s.dateTime({width:"full"});break}return i.replace("{{date}}",QN(n,s)).replace("{{time}}",DE(a,s))},E9={p:DE,P:k9},A9=/^D+$/,T9=/^Y+$/,P9=["D","DD","YY","YYYY"];function R9(e){return A9.test(e)}function I9(e){return T9.test(e)}function D9(e,s,r){const n=O9(e,s,r);if(console.warn(n),P9.includes(e))throw new RangeError(n)}function O9(e,s,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${s}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const M9=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,L9=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,F9=/^'([^]*?)'?$/,$9=/''/g,U9=/[a-zA-Z]/;function pe(e,s,r){var u,m,h,p,g,x,v,y;const n=td(),a=(r==null?void 0:r.locale)??n.locale??uw,i=(r==null?void 0:r.firstWeekContainsDate)??((m=(u=r==null?void 0:r.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(h=n.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((x=(g=r==null?void 0:r.locale)==null?void 0:g.options)==null?void 0:x.weekStartsOn)??n.weekStartsOn??((y=(v=n.locale)==null?void 0:v.options)==null?void 0:y.weekStartsOn)??0,l=ze(e);if(!$q(l))throw new RangeError("Invalid time value");let c=s.match(L9).map(j=>{const w=j[0];if(w==="p"||w==="P"){const b=E9[w];return b(j,a.formatLong)}return j}).join("").match(M9).map(j=>{if(j==="''")return{isToken:!1,value:"'"};const w=j[0];if(w==="'")return{isToken:!1,value:B9(j)};if(KN[w])return{isToken:!0,value:j};if(w.match(U9))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:j}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(j=>{if(!j.isToken)return j.value;const w=j.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&I9(w)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&R9(w))&&D9(w,s,String(e));const b=KN[w[0]];return b(l,w,a.localize,d)}).join("")}function B9(e){const s=e.match(F9);return s?s[1].replace($9,"'"):e}function z9(e,s,r){const n=td(),a=(r==null?void 0:r.locale)??n.locale??uw,i=2520,o=cm(e,s);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let c,d;o>0?(c=ze(s),d=ze(e)):(c=ze(e),d=ze(s));const u=Hq(d,c),m=(Mc(d)-Mc(c))/1e3,h=Math.round((u-m)/60);let p;if(h<2)return r!=null&&r.includeSeconds?u<5?a.formatDistance("lessThanXSeconds",5,l):u<10?a.formatDistance("lessThanXSeconds",10,l):u<20?a.formatDistance("lessThanXSeconds",20,l):u<40?a.formatDistance("halfAMinute",0,l):u<60?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",1,l):h===0?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",h,l);if(h<45)return a.formatDistance("xMinutes",h,l);if(h<90)return a.formatDistance("aboutXHours",1,l);if(h<VN){const g=Math.round(h/60);return a.formatDistance("aboutXHours",g,l)}else{if(h<i)return a.formatDistance("xDays",1,l);if(h<qh){const g=Math.round(h/VN);return a.formatDistance("xDays",g,l)}else if(h<qh*2)return p=Math.round(h/qh),a.formatDistance("aboutXMonths",p,l)}if(p=Vq(d,c),p<12){const g=Math.round(h/qh);return a.formatDistance("xMonths",g,l)}else{const g=p%12,x=Math.trunc(p/12);return g<3?a.formatDistance("aboutXYears",x,l):g<9?a.formatDistance("overXYears",x,l):a.formatDistance("almostXYears",x+1,l)}}function sd(e,s){return z9(e,kE(e),s)}function q9(e){const s=ze(e),r=s.getFullYear(),n=s.getMonth(),a=cr(e,0);return a.setFullYear(r,n+1,0),a.setHours(0,0,0,0),a.getDate()}function W9(e){return Math.trunc(+ze(e)/1e3)}function V9(e){const s=ze(e),r=s.getMonth();return s.setFullYear(s.getFullYear(),r+1,0),s.setHours(0,0,0,0),s}function H9(e,s){return Uq(V9(e),Cr(e),s)+1}function uf(e,s){const r=ze(e),n=ze(s);return r.getTime()>n.getTime()}function Nu(e,s){const r=ze(e),n=ze(s);return+r<+n}function K9(e){return+ze(e)>Date.now()}function oa(e){return+ze(e)<Date.now()}function hw(e,s){const r=ze(e),n=ze(s);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function G9(e,s){const r=ze(e),n=ze(s);return r.getFullYear()===n.getFullYear()}function Fc(e){return nr(e,kE(e))}function Fx(e,s){return gs(e,-s)}function $x(e,s){const r=ze(e),n=r.getFullYear(),a=r.getDate(),i=cr(e,0);i.setFullYear(n,s,15),i.setHours(0,0,0,0);const o=q9(i);return r.setMonth(s,Math.min(a,o)),r}function ZN(e,s){const r=ze(e);return isNaN(+r)?cr(e,NaN):(r.setFullYear(s),r)}function Yv(e,s){return Iq(e,-s)}const Y9={ticket_assigned:Yr,ticket_status:fs,ticket_priority:fs,watcher_added:rn,new_ticket:rt},Q9={ticket_assigned:"text-primary",ticket_status:"text-info",ticket_priority:"text-warning",watcher_added:"text-muted-foreground",new_ticket:"text-success"};function Z9(){const{notifications:e,unreadCount:s,markAsRead:r,markAllAsRead:n,clearNotifications:a}=g2(),i=Qe(),o=(l,c)=>{r(l),c&&i(`/tickets/${c}`)};return t.jsxs(Ga,{children:[t.jsx(Ya,{asChild:!0,children:t.jsxs(T,{variant:"ghost",size:"icon",className:"relative",children:[t.jsx(na,{className:"h-5 w-5 text-muted-foreground"}),s>0&&t.jsx("span",{className:"absolute -right-0.5 -top-0.5 flex h-4 w-4 items-center justify-center rounded-full bg-destructive text-[10px] font-medium text-destructive-foreground",children:s>9?"9+":s})]})}),t.jsxs(fa,{align:"end",className:"w-80 bg-card border-border z-50",sideOffset:8,children:[t.jsxs(A4,{className:"flex items-center justify-between",children:[t.jsx("span",{className:"font-semibold",children:"Notifications"}),e.length>0&&t.jsxs("div",{className:"flex items-center gap-1",children:[s>0&&t.jsxs(T,{variant:"ghost",size:"sm",className:"h-7 px-2 text-xs",onClick:l=>{l.preventDefault(),n()},children:[t.jsx(NO,{className:"h-3 w-3 mr-1"}),"Mark all read"]}),t.jsx(T,{variant:"ghost",size:"sm",className:"h-7 px-2 text-xs text-muted-foreground hover:text-destructive",onClick:l=>{l.preventDefault(),a()},children:t.jsx(Rt,{className:"h-3 w-3"})})]})]}),t.jsx(za,{}),e.length===0?t.jsxs("div",{className:"py-8 text-center",children:[t.jsx(na,{className:"h-8 w-8 mx-auto text-muted-foreground/50 mb-2"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"No notifications yet"}),t.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:"You'll see ticket updates here"})]}):t.jsx(vp,{className:"h-[320px]",children:e.map(l=>{const c=Y9[l.type]||na,d=Q9[l.type]||"text-muted-foreground";return t.jsxs(mt,{className:J("flex items-start gap-3 p-3 cursor-pointer focus:bg-accent",!l.read&&"bg-primary/5"),onClick:()=>o(l.id,l.ticketId),children:[t.jsx("div",{className:J("mt-0.5 flex-shrink-0",d),children:t.jsx(c,{className:"h-4 w-4"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("p",{className:J("text-sm truncate",!l.read&&"font-medium"),children:l.title}),!l.read&&t.jsx("span",{className:"flex-shrink-0 h-2 w-2 rounded-full bg-primary"})]}),t.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 mt-0.5",children:l.message}),t.jsx("p",{className:"text-[10px] text-muted-foreground/70 mt-1",children:sd(l.createdAt,{addSuffix:!0})})]}),!l.read&&t.jsx(T,{variant:"ghost",size:"icon",className:"h-6 w-6 flex-shrink-0 hover:bg-primary/10",onClick:u=>{u.stopPropagation(),r(l.id)},children:t.jsx(On,{className:"h-3 w-3"})})]},l.id)})})]})]})}function qn({title:e,subtitle:s,action:r,customAction:n}){return t.jsx("header",{className:"sticky top-0 z-30 border-b border-border bg-background/80 backdrop-blur-xl",children:t.jsxs("div",{className:"flex h-16 items-center justify-between px-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-semibold text-foreground",children:e}),s&&t.jsx("p",{className:"text-sm text-muted-foreground",children:s})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"relative hidden md:block",children:[t.jsx(ns,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t.jsx(se,{placeholder:"Search tickets, projects...",className:"w-64 pl-9 bg-secondary border-border focus:border-primary"})]}),t.jsx(Z9,{}),n,r&&t.jsxs(T,{onClick:r.onClick,className:"gap-2",children:[t.jsx(at,{className:"h-4 w-4"}),r.label]})]})]})})}var jp="Tabs",[J9]=ks(jp,[Jc]),OE=Jc(),[X9,mw]=J9(jp),ME=f.forwardRef((e,s)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=il(l),[m,h]=_r({prop:n,onChange:a,defaultProp:i??"",caller:jp});return t.jsx(X9,{scope:r,baseId:Ss(),value:m,onValueChange:h,orientation:o,dir:u,activationMode:c,children:t.jsx(Se.div,{dir:u,"data-orientation":o,...d,ref:s})})});ME.displayName=jp;var LE="TabsList",FE=f.forwardRef((e,s)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,i=mw(LE,r),o=OE(r);return t.jsx(zj,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:t.jsx(Se.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:s})})});FE.displayName=LE;var $E="TabsTrigger",UE=f.forwardRef((e,s)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=e,o=mw($E,r),l=OE(r),c=qE(o.baseId,n),d=WE(o.baseId,n),u=n===o.value;return t.jsx(qj,{asChild:!0,...l,focusable:!a,active:u,children:t.jsx(Se.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:s,onMouseDown:de(e.onMouseDown,m=>{!a&&m.button===0&&m.ctrlKey===!1?o.onValueChange(n):m.preventDefault()}),onKeyDown:de(e.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&o.onValueChange(n)}),onFocus:de(e.onFocus,()=>{const m=o.activationMode!=="manual";!u&&!a&&m&&o.onValueChange(n)})})})});UE.displayName=$E;var BE="TabsContent",zE=f.forwardRef((e,s)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...o}=e,l=mw(BE,r),c=qE(l.baseId,n),d=WE(l.baseId,n),u=n===l.value,m=f.useRef(u);return f.useEffect(()=>{const h=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(h)},[]),t.jsx(js,{present:a||u,children:({present:h})=>t.jsx(Se.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:d,tabIndex:0,...o,ref:s,style:{...e.style,animationDuration:m.current?"0s":void 0},children:h&&i})})});zE.displayName=BE;function qE(e,s){return`${e}-trigger-${s}`}function WE(e,s){return`${e}-content-${s}`}var eW=ME,VE=FE,HE=UE,KE=zE;const kt=eW,St=f.forwardRef(({className:e,...s},r)=>t.jsx(VE,{ref:r,className:J("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));St.displayName=VE.displayName;const he=f.forwardRef(({className:e,...s},r)=>t.jsx(HE,{ref:r,className:J("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...s}));he.displayName=HE.displayName;const Ce=f.forwardRef(({className:e,...s},r)=>t.jsx(KE,{ref:r,className:J("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));Ce.displayName=KE.displayName;function tW(){const{data:e=[],isLoading:s}=fe({queryKey:["pii-access-logs"],queryFn:async()=>{const u=Yv(new Date,24).toISOString(),{data:m,error:h}=await B.from("audit_logs").select(`
          id,
          user_id,
          entity_type,
          entity_id,
          action,
          action_category,
          new_values,
          created_at
        `).eq("action_category","pii_access").gte("created_at",u).order("created_at",{ascending:!1}).limit(100);if(h)throw h;const p=[...new Set((m||[]).map(x=>x.user_id).filter(Boolean))];let g={};if(p.length>0){const{data:x}=await B.from("profiles_safe").select("id, full_name, email").in("id",p);x&&(g=x.reduce((v,y)=>(v[y.id]={fullName:y.full_name,email:y.email},v),{}))}return(m||[]).map(x=>({id:x.id,userId:x.user_id,entityType:x.entity_type,entityId:x.entity_id,action:x.action,actionCategory:x.action_category,newValues:x.new_values,createdAt:x.created_at,profile:x.user_id?g[x.user_id]:null}))},refetchInterval:6e4}),n=(u=>{const m=[],h={},p=[];if(u.forEach(v=>{var j,w;v.userId&&(h[v.userId]||(h[v.userId]={count:0,name:((j=v.profile)==null?void 0:j.fullName)||((w=v.profile)==null?void 0:w.email)||"Unknown User"}),h[v.userId].count++);const y=new Date(v.createdAt).getHours();(y<6||y>=22)&&p.push(v)}),Object.entries(h).forEach(([v,y])=>{y.count>20&&m.push({type:"high_volume",severity:y.count>50?"high":"medium",message:`${y.name} accessed PII ${y.count} times in the last 24 hours`,userId:v,userName:y.name,count:y.count})}),p.length>0){const v=new Set(p.map(y=>y.userId).filter(Boolean));m.push({type:"after_hours",severity:p.length>10?"medium":"low",message:`${p.length} PII access events outside business hours by ${v.size} users`,count:p.length})}const g=u.filter(v=>uf(new Date(v.createdAt),Yv(new Date,1))),x={};return g.forEach(v=>{const y=`${v.userId}-${Math.floor(new Date(v.createdAt).getTime()/3e5)}`;x[y]||(x[y]=[]),x[y].push(v)}),Object.entries(x).forEach(([v,y])=>{var j,w;if(y.length>=10){const b=((j=y[0].profile)==null?void 0:j.fullName)||((w=y[0].profile)==null?void 0:w.email)||"Unknown User";m.push({type:"bulk_access",severity:"high",message:`${b} accessed ${y.length} client records in under 5 minutes`,userId:y[0].userId||void 0,userName:b,count:y.length})}}),m})(e),a=e.slice(0,10),i=e.length,o=new Set(e.map(u=>u.userId).filter(Boolean)).size,l=new Set(e.map(u=>u.entityId).filter(Boolean)).size,c=u=>{switch(u){case"high":return"destructive";case"medium":return"warning";default:return"secondary"}},d=u=>{switch(u){case"PII_ACCESS":return t.jsx(rn,{className:"h-4 w-4"});case"UPDATE":return t.jsx(qu,{className:"h-4 w-4"});case"DELETE":return t.jsx(kO,{className:"h-4 w-4"});default:return t.jsx(us,{className:"h-4 w-4"})}};return s?t.jsxs(P,{children:[t.jsx(W,{children:t.jsxs(V,{className:"flex items-center gap-2",children:[t.jsx(us,{className:"h-5 w-5"}),"PII Access Monitor"]})}),t.jsx(M,{children:t.jsx("div",{className:"flex items-center justify-center py-8 text-muted-foreground",children:"Loading access patterns..."})})]}):t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsxs(V,{className:"flex items-center gap-2",children:[t.jsx(us,{className:"h-5 w-5"}),"PII Access Monitor"]}),t.jsx(ce,{children:"Last 24 hours of client PII access patterns"})]}),t.jsxs(M,{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{className:"text-center p-3 rounded-lg bg-muted/50",children:[t.jsx("p",{className:"text-2xl font-bold",children:i}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Accesses"})]}),t.jsxs("div",{className:"text-center p-3 rounded-lg bg-muted/50",children:[t.jsx("p",{className:"text-2xl font-bold",children:o}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique Users"})]}),t.jsxs("div",{className:"text-center p-3 rounded-lg bg-muted/50",children:[t.jsx("p",{className:"text-2xl font-bold",children:l}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Clients Viewed"})]})]}),n.length>0&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2 text-destructive",children:[t.jsx(qt,{className:"h-4 w-4"}),"Suspicious Activity Detected"]}),t.jsx("div",{className:"space-y-2",children:n.map((u,m)=>t.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border border-destructive/30 bg-destructive/5",children:[t.jsx(qt,{className:"h-4 w-4 text-destructive mt-0.5"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx($,{variant:c(u.severity),children:u.severity.toUpperCase()}),t.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:u.type.replace("_"," ")})]}),t.jsx("p",{className:"text-sm mt-1",children:u.message})]})]},m))})]}),n.length===0&&t.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-success/10 border border-success/30",children:[t.jsx(us,{className:"h-4 w-4 text-success"}),t.jsx("span",{className:"text-sm text-success",children:"No suspicious patterns detected"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[t.jsx(Oe,{className:"h-4 w-4"}),"Recent PII Access"]}),t.jsx(vp,{className:"h-[200px]",children:t.jsx("div",{className:"space-y-2",children:a.length===0?t.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No PII access in the last 24 hours"}):a.map(u=>{var m,h,p,g;return t.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border border-border hover:bg-muted/50",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"h-8 w-8 rounded-full bg-muted flex items-center justify-center",children:d(u.action)}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm font-medium flex items-center gap-1",children:[t.jsx(qs,{className:"h-3 w-3"}),((m=u.profile)==null?void 0:m.fullName)||((h=u.profile)==null?void 0:h.email)||"System"]}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[u.action,"  ",((p=u.newValues)==null?void 0:p.client_name)||((g=u.entityId)==null?void 0:g.slice(0,8))]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:pe(new Date(u.createdAt),"HH:mm")}),t.jsx("p",{className:"text-xs text-muted-foreground",children:pe(new Date(u.createdAt),"MMM d")})]})]},u.id)})})})]}),t.jsx(T,{variant:"outline",className:"w-full",size:"sm",children:"View Full Audit Log"})]})]})}function sW(){const{data:e=[],isLoading:s}=fe({queryKey:["financial-activity-logs"],queryFn:async()=>{const g=Yv(new Date,24).toISOString(),{data:x,error:v}=await B.from("audit_logs").select("*").eq("action_category","financial_data").gte("created_at",g).order("created_at",{ascending:!1}).limit(100);if(v)throw v;return x||[]},refetchInterval:6e4}),{data:r=[]}=fe({queryKey:["financial-activity-users",e.map(g=>g.user_id).filter(Boolean)],queryFn:async()=>{const g=[...new Set(e.map(y=>y.user_id).filter(Boolean))];if(g.length===0)return[];const{data:x,error:v}=await B.from("profiles_safe").select("id, full_name, email").in("id",g);if(v)throw v;return x||[]},enabled:e.length>0}),n=g=>{if(!g)return"System";const x=r.find(v=>v.id===g);return(x==null?void 0:x.full_name)||(x==null?void 0:x.email)||"Unknown User"},i=(g=>{const x=[],v=new Map;return g.forEach(y=>{const j=y.user_id||"system";v.has(j)||v.set(j,[]),v.get(j).push(y)}),v.forEach((y,j)=>{y.length>15&&x.push({type:"high_volume",severity:y.length>30?"high":"medium",description:`${y.length} financial modifications in 24h`,userId:j,userName:n(j==="system"?null:j),count:y.length});const w=y.filter(_=>{const C=new Date(_.created_at).getHours();return C>=22||C<6});w.length>0&&x.push({type:"after_hours",severity:w.length>5?"high":"medium",description:`${w.length} after-hours modifications (10PM-6AM)`,userId:j,userName:n(j==="system"?null:j),count:w.length});const b=y.filter(_=>_.action==="DELETE");b.length>3&&x.push({type:"bulk_delete",severity:"high",description:`${b.length} billing records deleted`,userId:j,userName:n(j==="system"?null:j),count:b.length});const N=[...y].sort((_,C)=>new Date(_.created_at).getTime()-new Date(C.created_at).getTime());for(let _=0;_<N.length-5;_++){const C=N.slice(_,_+6);if(zq(new Date(C[5].created_at),new Date(C[0].created_at))<=5){x.push({type:"rapid_changes",severity:"medium",description:"6+ modifications in 5-minute window",userId:j,userName:n(j==="system"?null:j),count:6});break}}}),g.forEach(y=>{var w,b;const j=((w=y.new_values)==null?void 0:w.amount)||((b=y.old_values)==null?void 0:b.amount);j&&j>1e4&&x.push({type:"large_transaction",severity:j>5e4?"high":"medium",description:`Large transaction: $${j.toLocaleString()}`,userId:y.user_id||void 0,userName:n(y.user_id),amount:j})}),x})(e),o=e.slice(0,8),l=e.filter(g=>g.action==="INSERT").length,c=e.filter(g=>g.action==="UPDATE").length,d=e.filter(g=>g.action==="DELETE").length,u=new Set(e.map(g=>g.user_id).filter(Boolean)).size,m=g=>{switch(g){case"INSERT":return t.jsx(at,{className:"h-3 w-3"});case"UPDATE":return t.jsx(zo,{className:"h-3 w-3"});case"DELETE":return t.jsx(Rt,{className:"h-3 w-3"});default:return null}},h=g=>{switch(g){case"INSERT":return"default";case"UPDATE":return"secondary";case"DELETE":return"destructive";default:return"outline"}},p=g=>{switch(g){case"high":return"destructive";case"medium":return"warning";default:return"default"}};return s?t.jsxs(P,{children:[t.jsx(W,{children:t.jsxs(V,{className:"flex items-center gap-2",children:[t.jsx(or,{className:"h-5 w-5"}),"Financial Activity Monitor"]})}),t.jsxs(M,{className:"space-y-4",children:[t.jsx(je,{className:"h-20 w-full"}),t.jsx(je,{className:"h-40 w-full"})]})]}):t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsxs(V,{className:"flex items-center gap-2",children:[t.jsx(or,{className:"h-5 w-5"}),"Financial Activity Monitor"]}),t.jsx(ce,{children:"Billing transaction modifications and anomaly detection (24h)"})]}),t.jsxs(M,{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[t.jsxs("div",{className:"text-center p-2 rounded-lg bg-muted/50",children:[t.jsx("div",{className:"text-lg font-bold text-primary",children:e.length}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"Total"})]}),t.jsxs("div",{className:"text-center p-2 rounded-lg bg-muted/50",children:[t.jsx("div",{className:"text-lg font-bold text-success",children:l}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"Created"})]}),t.jsxs("div",{className:"text-center p-2 rounded-lg bg-muted/50",children:[t.jsx("div",{className:"text-lg font-bold text-accent-foreground",children:c}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"Updated"})]}),t.jsxs("div",{className:"text-center p-2 rounded-lg bg-muted/50",children:[t.jsx("div",{className:"text-lg font-bold text-destructive",children:d}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"Deleted"})]})]}),i.length>0&&t.jsxs("div",{className:"rounded-lg border border-destructive/50 bg-destructive/10 p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(RO,{className:"h-4 w-4 text-destructive"}),t.jsxs("span",{className:"font-semibold text-destructive text-sm",children:[i.length," Potential Anomal",i.length===1?"y":"ies"," Detected"]})]}),t.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:i.slice(0,5).map((g,x)=>t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(qt,{className:"h-3 w-3 text-warning"}),t.jsx("span",{className:"text-foreground",children:g.description})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xs text-muted-foreground",children:g.userName}),t.jsx($,{variant:p(g.severity),className:"text-xs",children:g.severity})]})]},x))})]}),i.length===0&&e.length>0&&t.jsx("div",{className:"rounded-lg border border-success/50 bg-success/10 p-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(qu,{className:"h-4 w-4 text-success"}),t.jsx("span",{className:"text-sm text-success",children:"No anomalies detected - All activity appears normal"})]})}),t.jsxs("div",{children:[t.jsxs("h4",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[t.jsx(Oe,{className:"h-4 w-4"}),"Recent Financial Activity"]}),o.length===0?t.jsx("p",{className:"text-sm text-muted-foreground",children:"No financial activity in the last 24 hours"}):t.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:o.map(g=>{var x;return t.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/30 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs($,{variant:h(g.action),className:"text-xs gap-1",children:[m(g.action),g.action]}),t.jsx("span",{className:"text-muted-foreground",children:g.entity_type==="billing_transaction"?"Transaction":g.entity_type}),((x=g.new_values)==null?void 0:x.amount)&&t.jsxs("span",{className:"font-medium text-foreground",children:["$",Number(g.new_values.amount).toLocaleString()]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[t.jsx("span",{children:n(g.user_id)}),t.jsx("span",{children:pe(new Date(g.created_at),"HH:mm")})]})]},g.id)})})]}),t.jsxs("div",{className:"pt-2 border-t text-xs text-muted-foreground flex justify-between",children:[t.jsxs("span",{children:[u," unique user",u!==1?"s":""," active"]}),t.jsxs("span",{children:["Last updated: ",pe(new Date,"HH:mm:ss")]})]})]})]})}function wp(e){const s=f.useRef({value:e,previous:e});return f.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}var rW=[" ","Enter","ArrowUp","ArrowDown"],nW=[" ","Enter"],Yo="Select",[bp,Np,aW]=Lu(Yo),[rd]=ks(Yo,[aW,Xi]),Cp=Xi(),[iW,to]=rd(Yo),[oW,lW]=rd(Yo),GE=e=>{const{__scopeSelect:s,children:r,open:n,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:m,disabled:h,required:p,form:g}=e,x=Cp(s),[v,y]=f.useState(null),[j,w]=f.useState(null),[b,N]=f.useState(!1),_=il(d),[C,E]=_r({prop:n,defaultProp:a??!1,onChange:i,caller:Yo}),[k,A]=_r({prop:o,defaultProp:l,onChange:c,caller:Yo}),L=f.useRef(null),H=v?g||!!v.closest("form"):!0,[F,I]=f.useState(new Set),G=Array.from(F).map(ee=>ee.props.value).join(";");return t.jsx(Cj,{...x,children:t.jsxs(iW,{required:p,scope:s,trigger:v,onTriggerChange:y,valueNode:j,onValueNodeChange:w,valueNodeHasChildren:b,onValueNodeHasChildrenChange:N,contentId:Ss(),value:k,onValueChange:A,open:C,onOpenChange:E,dir:_,triggerPointerDownPosRef:L,disabled:h,children:[t.jsx(bp.Provider,{scope:s,children:t.jsx(oW,{scope:e.__scopeSelect,onNativeOptionAdd:f.useCallback(ee=>{I(K=>new Set(K).add(ee))},[]),onNativeOptionRemove:f.useCallback(ee=>{I(K=>{const D=new Set(K);return D.delete(ee),D})},[]),children:r})}),H?t.jsxs(vA,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:m,value:k,onChange:ee=>A(ee.target.value),disabled:h,form:g,children:[k===void 0?t.jsx("option",{value:""}):null,Array.from(F)]},G):null]})})};GE.displayName=Yo;var YE="SelectTrigger",QE=f.forwardRef((e,s)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,i=Cp(r),o=to(YE,r),l=o.disabled||n,c=Ve(s,o.onTriggerChange),d=Np(r),u=f.useRef("touch"),[m,h,p]=jA(x=>{const v=d().filter(w=>!w.disabled),y=v.find(w=>w.value===o.value),j=wA(v,x,y);j!==void 0&&o.onValueChange(j.value)}),g=x=>{l||(o.onOpenChange(!0),p()),x&&(o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return t.jsx(Hu,{asChild:!0,...i,children:t.jsx(Se.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":yA(o.value)?"":void 0,...a,ref:c,onClick:de(a.onClick,x=>{x.currentTarget.focus(),u.current!=="mouse"&&g(x)}),onPointerDown:de(a.onPointerDown,x=>{u.current=x.pointerType;const v=x.target;v.hasPointerCapture(x.pointerId)&&v.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(g(x),x.preventDefault())}),onKeyDown:de(a.onKeyDown,x=>{const v=m.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&h(x.key),!(v&&x.key===" ")&&rW.includes(x.key)&&(g(),x.preventDefault())})})})});QE.displayName=YE;var ZE="SelectValue",JE=f.forwardRef((e,s)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:o="",...l}=e,c=to(ZE,r),{onValueNodeHasChildrenChange:d}=c,u=i!==void 0,m=Ve(s,c.onValueNodeChange);return hs(()=>{d(u)},[d,u]),t.jsx(Se.span,{...l,ref:m,style:{pointerEvents:"none"},children:yA(c.value)?t.jsx(t.Fragment,{children:o}):i})});JE.displayName=ZE;var cW="SelectIcon",XE=f.forwardRef((e,s)=>{const{__scopeSelect:r,children:n,...a}=e;return t.jsx(Se.span,{"aria-hidden":!0,...a,ref:s,children:n||""})});XE.displayName=cW;var dW="SelectPortal",eA=e=>t.jsx(qc,{asChild:!0,...e});eA.displayName=dW;var Qo="SelectContent",tA=f.forwardRef((e,s)=>{const r=to(Qo,e.__scopeSelect),[n,a]=f.useState();if(hs(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?sl.createPortal(t.jsx(sA,{scope:e.__scopeSelect,children:t.jsx(bp.Slot,{scope:e.__scopeSelect,children:t.jsx("div",{children:e.children})})}),i):null}return t.jsx(rA,{...e,ref:s})});tA.displayName=Qo;var jn=10,[sA,so]=rd(Qo),uW="SelectContentImpl",hW=$o("SelectContent.RemoveScroll"),rA=f.forwardRef((e,s)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:h,collisionPadding:p,sticky:g,hideWhenDetached:x,avoidCollisions:v,...y}=e,j=to(Qo,r),[w,b]=f.useState(null),[N,_]=f.useState(null),C=Ve(s,X=>b(X)),[E,k]=f.useState(null),[A,L]=f.useState(null),H=Np(r),[F,I]=f.useState(!1),G=f.useRef(!1);f.useEffect(()=>{if(w)return ap(w)},[w]),np();const ee=f.useCallback(X=>{const[xe,...ve]=H().map(et=>et.ref.current),[Ae]=ve.slice(-1),Be=document.activeElement;for(const et of X)if(et===Be||(et==null||et.scrollIntoView({block:"nearest"}),et===xe&&N&&(N.scrollTop=0),et===Ae&&N&&(N.scrollTop=N.scrollHeight),et==null||et.focus(),document.activeElement!==Be))return},[H,N]),K=f.useCallback(()=>ee([E,w]),[ee,E,w]);f.useEffect(()=>{F&&K()},[F,K]);const{onOpenChange:D,triggerPointerDownPosRef:q}=j;f.useEffect(()=>{if(w){let X={x:0,y:0};const xe=Ae=>{var Be,et;X={x:Math.abs(Math.round(Ae.pageX)-(((Be=q.current)==null?void 0:Be.x)??0)),y:Math.abs(Math.round(Ae.pageY)-(((et=q.current)==null?void 0:et.y)??0))}},ve=Ae=>{X.x<=10&&X.y<=10?Ae.preventDefault():w.contains(Ae.target)||D(!1),document.removeEventListener("pointermove",xe),q.current=null};return q.current!==null&&(document.addEventListener("pointermove",xe),document.addEventListener("pointerup",ve,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",xe),document.removeEventListener("pointerup",ve,{capture:!0})}}},[w,D,q]),f.useEffect(()=>{const X=()=>D(!1);return window.addEventListener("blur",X),window.addEventListener("resize",X),()=>{window.removeEventListener("blur",X),window.removeEventListener("resize",X)}},[D]);const[re,S]=jA(X=>{const xe=H().filter(Be=>!Be.disabled),ve=xe.find(Be=>Be.ref.current===document.activeElement),Ae=wA(xe,X,ve);Ae&&setTimeout(()=>Ae.ref.current.focus())}),R=f.useCallback((X,xe,ve)=>{const Ae=!G.current&&!ve;(j.value!==void 0&&j.value===xe||Ae)&&(k(X),Ae&&(G.current=!0))},[j.value]),te=f.useCallback(()=>w==null?void 0:w.focus(),[w]),Q=f.useCallback((X,xe,ve)=>{const Ae=!G.current&&!ve;(j.value!==void 0&&j.value===xe||Ae)&&L(X)},[j.value]),Y=n==="popper"?Qv:nA,oe=Y===Qv?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:h,collisionPadding:p,sticky:g,hideWhenDetached:x,avoidCollisions:v}:{};return t.jsx(sA,{scope:r,content:w,viewport:N,onViewportChange:_,itemRefCallback:R,selectedItem:E,onItemLeave:te,itemTextRefCallback:Q,focusSelectedItem:K,selectedItemText:A,position:n,isPositioned:F,searchRef:re,children:t.jsx(Qu,{as:hW,allowPinchZoom:!0,children:t.jsx(Gu,{asChild:!0,trapped:j.open,onMountAutoFocus:X=>{X.preventDefault()},onUnmountAutoFocus:de(a,X=>{var xe;(xe=j.trigger)==null||xe.focus({preventScroll:!0}),X.preventDefault()}),children:t.jsx(rl,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:X=>X.preventDefault(),onDismiss:()=>j.onOpenChange(!1),children:t.jsx(Y,{role:"listbox",id:j.contentId,"data-state":j.open?"open":"closed",dir:j.dir,onContextMenu:X=>X.preventDefault(),...y,...oe,onPlaced:()=>I(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:de(y.onKeyDown,X=>{const xe=X.ctrlKey||X.altKey||X.metaKey;if(X.key==="Tab"&&X.preventDefault(),!xe&&X.key.length===1&&S(X.key),["ArrowUp","ArrowDown","Home","End"].includes(X.key)){let Ae=H().filter(Be=>!Be.disabled).map(Be=>Be.ref.current);if(["ArrowUp","End"].includes(X.key)&&(Ae=Ae.slice().reverse()),["ArrowUp","ArrowDown"].includes(X.key)){const Be=X.target,et=Ae.indexOf(Be);Ae=Ae.slice(et+1)}setTimeout(()=>ee(Ae)),X.preventDefault()}})})})})})})});rA.displayName=uW;var mW="SelectItemAlignedPosition",nA=f.forwardRef((e,s)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,i=to(Qo,r),o=so(Qo,r),[l,c]=f.useState(null),[d,u]=f.useState(null),m=Ve(s,C=>u(C)),h=Np(r),p=f.useRef(!1),g=f.useRef(!0),{viewport:x,selectedItem:v,selectedItemText:y,focusSelectedItem:j}=o,w=f.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&x&&v&&y){const C=i.trigger.getBoundingClientRect(),E=d.getBoundingClientRect(),k=i.valueNode.getBoundingClientRect(),A=y.getBoundingClientRect();if(i.dir!=="rtl"){const Be=A.left-E.left,et=k.left-Be,as=C.left-et,Es=C.width+as,Qr=Math.max(Es,E.width),fr=window.innerWidth-jn,be=Kv(et,[jn,Math.max(jn,fr-Qr)]);l.style.minWidth=Es+"px",l.style.left=be+"px"}else{const Be=E.right-A.right,et=window.innerWidth-k.right-Be,as=window.innerWidth-C.right-et,Es=C.width+as,Qr=Math.max(Es,E.width),fr=window.innerWidth-jn,be=Kv(et,[jn,Math.max(jn,fr-Qr)]);l.style.minWidth=Es+"px",l.style.right=be+"px"}const L=h(),H=window.innerHeight-jn*2,F=x.scrollHeight,I=window.getComputedStyle(d),G=parseInt(I.borderTopWidth,10),ee=parseInt(I.paddingTop,10),K=parseInt(I.borderBottomWidth,10),D=parseInt(I.paddingBottom,10),q=G+ee+F+D+K,re=Math.min(v.offsetHeight*5,q),S=window.getComputedStyle(x),R=parseInt(S.paddingTop,10),te=parseInt(S.paddingBottom,10),Q=C.top+C.height/2-jn,Y=H-Q,oe=v.offsetHeight/2,X=v.offsetTop+oe,xe=G+ee+X,ve=q-xe;if(xe<=Q){const Be=L.length>0&&v===L[L.length-1].ref.current;l.style.bottom="0px";const et=d.clientHeight-x.offsetTop-x.offsetHeight,as=Math.max(Y,oe+(Be?te:0)+et+K),Es=xe+as;l.style.height=Es+"px"}else{const Be=L.length>0&&v===L[0].ref.current;l.style.top="0px";const as=Math.max(Q,G+x.offsetTop+(Be?R:0)+oe)+ve;l.style.height=as+"px",x.scrollTop=xe-Q+x.offsetTop}l.style.margin=`${jn}px 0`,l.style.minHeight=re+"px",l.style.maxHeight=H+"px",n==null||n(),requestAnimationFrame(()=>p.current=!0)}},[h,i.trigger,i.valueNode,l,d,x,v,y,i.dir,n]);hs(()=>w(),[w]);const[b,N]=f.useState();hs(()=>{d&&N(window.getComputedStyle(d).zIndex)},[d]);const _=f.useCallback(C=>{C&&g.current===!0&&(w(),j==null||j(),g.current=!1)},[w,j]);return t.jsx(pW,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:_,children:t.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:t.jsx(Se.div,{...a,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});nA.displayName=mW;var fW="SelectPopperPosition",Qv=f.forwardRef((e,s)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=jn,...i}=e,o=Cp(r);return t.jsx(Yf,{...o,...i,ref:s,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Qv.displayName=fW;var[pW,fw]=rd(Qo,{}),Zv="SelectViewport",aA=f.forwardRef((e,s)=>{const{__scopeSelect:r,nonce:n,...a}=e,i=so(Zv,r),o=fw(Zv,r),l=Ve(s,i.onViewportChange),c=f.useRef(0);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),t.jsx(bp.Slot,{scope:r,children:t.jsx(Se.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:de(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&m){const p=Math.abs(c.current-u.scrollTop);if(p>0){const g=window.innerHeight-jn*2,x=parseFloat(m.style.minHeight),v=parseFloat(m.style.height),y=Math.max(x,v);if(y<g){const j=y+p,w=Math.min(g,j),b=j-w;m.style.height=w+"px",m.style.bottom==="0px"&&(u.scrollTop=b>0?b:0,m.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});aA.displayName=Zv;var iA="SelectGroup",[xW,gW]=rd(iA),vW=f.forwardRef((e,s)=>{const{__scopeSelect:r,...n}=e,a=Ss();return t.jsx(xW,{scope:r,id:a,children:t.jsx(Se.div,{role:"group","aria-labelledby":a,...n,ref:s})})});vW.displayName=iA;var oA="SelectLabel",lA=f.forwardRef((e,s)=>{const{__scopeSelect:r,...n}=e,a=gW(oA,r);return t.jsx(Se.div,{id:a.id,...n,ref:s})});lA.displayName=oA;var hf="SelectItem",[yW,cA]=rd(hf),dA=f.forwardRef((e,s)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...o}=e,l=to(hf,r),c=so(hf,r),d=l.value===n,[u,m]=f.useState(i??""),[h,p]=f.useState(!1),g=Ve(s,j=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,j,n,a)}),x=Ss(),v=f.useRef("touch"),y=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return t.jsx(yW,{scope:r,value:n,disabled:a,textId:x,isSelected:d,onItemTextChange:f.useCallback(j=>{m(w=>w||((j==null?void 0:j.textContent)??"").trim())},[]),children:t.jsx(bp.ItemSlot,{scope:r,value:n,disabled:a,textValue:u,children:t.jsx(Se.div,{role:"option","aria-labelledby":x,"data-highlighted":h?"":void 0,"aria-selected":d&&h,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:g,onFocus:de(o.onFocus,()=>p(!0)),onBlur:de(o.onBlur,()=>p(!1)),onClick:de(o.onClick,()=>{v.current!=="mouse"&&y()}),onPointerUp:de(o.onPointerUp,()=>{v.current==="mouse"&&y()}),onPointerDown:de(o.onPointerDown,j=>{v.current=j.pointerType}),onPointerMove:de(o.onPointerMove,j=>{var w;v.current=j.pointerType,a?(w=c.onItemLeave)==null||w.call(c):v.current==="mouse"&&j.currentTarget.focus({preventScroll:!0})}),onPointerLeave:de(o.onPointerLeave,j=>{var w;j.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:de(o.onKeyDown,j=>{var b;((b=c.searchRef)==null?void 0:b.current)!==""&&j.key===" "||(nW.includes(j.key)&&y(),j.key===" "&&j.preventDefault())})})})})});dA.displayName=hf;var Ed="SelectItemText",uA=f.forwardRef((e,s)=>{const{__scopeSelect:r,className:n,style:a,...i}=e,o=to(Ed,r),l=so(Ed,r),c=cA(Ed,r),d=lW(Ed,r),[u,m]=f.useState(null),h=Ve(s,y=>m(y),c.onItemTextChange,y=>{var j;return(j=l.itemTextRefCallback)==null?void 0:j.call(l,y,c.value,c.disabled)}),p=u==null?void 0:u.textContent,g=f.useMemo(()=>t.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:x,onNativeOptionRemove:v}=d;return hs(()=>(x(g),()=>v(g)),[x,v,g]),t.jsxs(t.Fragment,{children:[t.jsx(Se.span,{id:c.textId,...i,ref:h}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?sl.createPortal(i.children,o.valueNode):null]})});uA.displayName=Ed;var hA="SelectItemIndicator",mA=f.forwardRef((e,s)=>{const{__scopeSelect:r,...n}=e;return cA(hA,r).isSelected?t.jsx(Se.span,{"aria-hidden":!0,...n,ref:s}):null});mA.displayName=hA;var Jv="SelectScrollUpButton",fA=f.forwardRef((e,s)=>{const r=so(Jv,e.__scopeSelect),n=fw(Jv,e.__scopeSelect),[a,i]=f.useState(!1),o=Ve(s,n.onScrollButtonChange);return hs(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?t.jsx(xA,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});fA.displayName=Jv;var Xv="SelectScrollDownButton",pA=f.forwardRef((e,s)=>{const r=so(Xv,e.__scopeSelect),n=fw(Xv,e.__scopeSelect),[a,i]=f.useState(!1),o=Ve(s,n.onScrollButtonChange);return hs(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?t.jsx(xA,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});pA.displayName=Xv;var xA=f.forwardRef((e,s)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,i=so("SelectScrollButton",r),o=f.useRef(null),l=Np(r),c=f.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return f.useEffect(()=>()=>c(),[c]),hs(()=>{var u;const d=l().find(m=>m.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),t.jsx(Se.div,{"aria-hidden":!0,...a,ref:s,style:{flexShrink:0,...a.style},onPointerDown:de(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:de(a.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:de(a.onPointerLeave,()=>{c()})})}),jW="SelectSeparator",gA=f.forwardRef((e,s)=>{const{__scopeSelect:r,...n}=e;return t.jsx(Se.div,{"aria-hidden":!0,...n,ref:s})});gA.displayName=jW;var ey="SelectArrow",wW=f.forwardRef((e,s)=>{const{__scopeSelect:r,...n}=e,a=Cp(r),i=to(ey,r),o=so(ey,r);return i.open&&o.position==="popper"?t.jsx(Qf,{...a,...n,ref:s}):null});wW.displayName=ey;var bW="SelectBubbleInput",vA=f.forwardRef(({__scopeSelect:e,value:s,...r},n)=>{const a=f.useRef(null),i=Ve(n,a),o=wp(s);return f.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==s&&u){const m=new Event("change",{bubbles:!0});u.call(l,s),l.dispatchEvent(m)}},[o,s]),t.jsx(Se.select,{...r,style:{...nS,...r.style},ref:i,defaultValue:s})});vA.displayName=bW;function yA(e){return e===""||e===void 0}function jA(e){const s=ds(e),r=f.useRef(""),n=f.useRef(0),a=f.useCallback(o=>{const l=r.current+o;s(l),function c(d){r.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[s]),i=f.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return f.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function wA(e,s,r){const a=s.length>1&&Array.from(s).every(d=>d===s[0])?s[0]:s,i=r?e.indexOf(r):-1;let o=NW(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function NW(e,s){return e.map((r,n)=>e[(s+n)%e.length])}var CW=GE,bA=QE,_W=JE,SW=XE,kW=eA,NA=tA,EW=aA,CA=lA,_A=dA,AW=uA,TW=mA,SA=fA,kA=pA,EA=gA;const $e=CW,Ue=_W,Le=f.forwardRef(({className:e,children:s,...r},n)=>t.jsxs(bA,{ref:n,className:J("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[s,t.jsx(SW,{asChild:!0,children:t.jsx(Ff,{className:"h-4 w-4 opacity-50"})})]}));Le.displayName=bA.displayName;const AA=f.forwardRef(({className:e,...s},r)=>t.jsx(SA,{ref:r,className:J("flex cursor-default items-center justify-center py-1",e),...s,children:t.jsx(CO,{className:"h-4 w-4"})}));AA.displayName=SA.displayName;const TA=f.forwardRef(({className:e,...s},r)=>t.jsx(kA,{ref:r,className:J("flex cursor-default items-center justify-center py-1",e),...s,children:t.jsx(Ff,{className:"h-4 w-4"})}));TA.displayName=kA.displayName;const Fe=f.forwardRef(({className:e,children:s,position:r="popper",...n},a)=>t.jsx(kW,{children:t.jsxs(NA,{ref:a,className:J("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[t.jsx(AA,{}),t.jsx(EW,{className:J("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),t.jsx(TA,{})]})}));Fe.displayName=NA.displayName;const PW=f.forwardRef(({className:e,...s},r)=>t.jsx(CA,{ref:r,className:J("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s}));PW.displayName=CA.displayName;const Z=f.forwardRef(({className:e,children:s,...r},n)=>t.jsxs(_A,{ref:n,className:J("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(TW,{children:t.jsx(On,{className:"h-4 w-4"})})}),t.jsx(AW,{children:s})]}));Z.displayName=_A.displayName;const RW=f.forwardRef(({className:e,...s},r)=>t.jsx(EA,{ref:r,className:J("-mx-1 my-1 h-px bg-muted",e),...s}));RW.displayName=EA.displayName;const Rs=f.forwardRef(({className:e,...s},r)=>t.jsx("div",{className:"relative w-full overflow-auto",children:t.jsx("table",{ref:r,className:J("w-full caption-bottom text-sm",e),...s})}));Rs.displayName="Table";const Is=f.forwardRef(({className:e,...s},r)=>t.jsx("thead",{ref:r,className:J("[&_tr]:border-b",e),...s}));Is.displayName="TableHeader";const Ds=f.forwardRef(({className:e,...s},r)=>t.jsx("tbody",{ref:r,className:J("[&_tr:last-child]:border-0",e),...s}));Ds.displayName="TableBody";const IW=f.forwardRef(({className:e,...s},r)=>t.jsx("tfoot",{ref:r,className:J("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...s}));IW.displayName="TableFooter";const ot=f.forwardRef(({className:e,...s},r)=>t.jsx("tr",{ref:r,className:J("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...s}));ot.displayName="TableRow";const ae=f.forwardRef(({className:e,...s},r)=>t.jsx("th",{ref:r,className:J("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...s}));ae.displayName="TableHead";const ne=f.forwardRef(({className:e,...s},r)=>t.jsx("td",{ref:r,className:J("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...s}));ne.displayName="TableCell";const DW=f.forwardRef(({className:e,...s},r)=>t.jsx("caption",{ref:r,className:J("mt-4 text-sm text-muted-foreground",e),...s}));DW.displayName="TableCaption";const OW=[{value:"all",label:"All Statuses"},{value:"open",label:"Open"},{value:"in_progress",label:"In Progress"},{value:"waiting",label:"Waiting"},{value:"resolved",label:"Resolved"},{value:"closed",label:"Closed"}],MW=[{value:"all",label:"All Priorities"},{value:"urgent",label:"Urgent"},{value:"high",label:"High"},{value:"medium",label:"Medium"},{value:"low",label:"Low"}],LW=e=>{switch(e){case"open":return"open";case"in_progress":return"in-progress";case"waiting":return"waiting";case"resolved":return"resolved";case"closed":return"closed";default:return"secondary"}},FW=e=>{switch(e){case"urgent":return"urgent";case"high":return"high";case"medium":return"medium";case"low":return"low";default:return"secondary"}},$W=e=>{if(!e)return null;const s=new Date(e),r=new Date;return oa(s)&&!Fc(s)?{label:"Overdue",variant:"destructive"}:Fc(s)?{label:"Due Today",variant:"warning"}:Nu(s,gs(r,3))?{label:"Due Soon",variant:"warning"}:null};function PA(){const e=Qe(),[s,r]=f.useState(""),[n,a]=f.useState("all"),[i,o]=f.useState("all"),[l,c]=f.useState("all"),{data:d=[]}=th(),{data:u=[],isLoading:m}=Z4({status:n!=="all"?n:void 0,priority:i!=="all"?i:void 0,companyId:l!=="all"?l:void 0,limit:200}),h=u.filter(v=>{var j,w;if(!s)return!0;const y=s.toLowerCase();return v.title.toLowerCase().includes(y)||v.ticketNumber.toLowerCase().includes(y)||v.companyName.toLowerCase().includes(y)||((j=v.projectName)==null?void 0:j.toLowerCase().includes(y))||((w=v.assignedToName)==null?void 0:w.toLowerCase().includes(y))}),p=u.filter(v=>v.status==="open").length,g=u.filter(v=>v.priority==="urgent").length,x=u.filter(v=>v.dueDate?oa(new Date(v.dueDate))&&!Fc(new Date(v.dueDate))&&v.status!=="closed"&&v.status!=="resolved":!1).length;return m?t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:[1,2,3,4].map(v=>t.jsxs(P,{children:[t.jsx(W,{className:"pb-2",children:t.jsx(je,{className:"h-4 w-24"})}),t.jsx(M,{children:t.jsx(je,{className:"h-8 w-16"})})]},v))}),t.jsxs(P,{children:[t.jsx(W,{children:t.jsx(je,{className:"h-6 w-32"})}),t.jsx(M,{children:t.jsx(je,{className:"h-64 w-full"})})]})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Total Tickets"}),t.jsx(rt,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold",children:u.length}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all companies"})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Open Tickets"}),t.jsx(Oe,{className:"h-4 w-4 text-status-open"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold text-status-open",children:p}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting action"})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Urgent Priority"}),t.jsx(fs,{className:"h-4 w-4 text-destructive"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold text-destructive",children:g}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Need immediate attention"})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Overdue"}),t.jsx(Lr,{className:"h-4 w-4 text-warning"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold text-warning",children:x}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Past deadline"})]})]})]}),t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsxs(V,{className:"flex items-center gap-2",children:[t.jsx(rt,{className:"h-5 w-5"}),"All Tickets"]}),t.jsx(ce,{children:"View and manage tickets across all companies"})]}),t.jsxs(M,{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.jsx("div",{className:"flex-1 min-w-[200px]",children:t.jsxs("div",{className:"relative",children:[t.jsx(ns,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t.jsx(se,{placeholder:"Search tickets...",value:s,onChange:v=>r(v.target.value),className:"pl-9"})]})}),t.jsxs($e,{value:n,onValueChange:a,children:[t.jsx(Le,{className:"w-[150px]",children:t.jsx(Ue,{placeholder:"Status"})}),t.jsx(Fe,{children:OW.map(v=>t.jsx(Z,{value:v.value,children:v.label},v.value))})]}),t.jsxs($e,{value:i,onValueChange:o,children:[t.jsx(Le,{className:"w-[150px]",children:t.jsx(Ue,{placeholder:"Priority"})}),t.jsx(Fe,{children:MW.map(v=>t.jsx(Z,{value:v.value,children:v.label},v.value))})]}),t.jsxs($e,{value:l,onValueChange:c,children:[t.jsx(Le,{className:"w-[180px]",children:t.jsx(Ue,{placeholder:"Company"})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"all",children:"All Companies"}),d.map(v=>t.jsx(Z,{value:v.id,children:v.name},v.id))]})]})]}),t.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",h.length," of ",u.length," tickets"]}),t.jsx("div",{className:"rounded-md border",children:t.jsxs(Rs,{children:[t.jsx(Is,{children:t.jsxs(ot,{children:[t.jsx(ae,{className:"w-[100px]",children:"Ticket ID"}),t.jsx(ae,{children:"Title"}),t.jsx(ae,{children:"Company"}),t.jsx(ae,{children:"Project"}),t.jsx(ae,{children:"Assignee"}),t.jsx(ae,{children:"Priority"}),t.jsx(ae,{children:"Status"}),t.jsx(ae,{children:"Deadline"}),t.jsx(ae,{className:"w-[80px]"})]})}),t.jsx(Ds,{children:h.length===0?t.jsx(ot,{children:t.jsx(ne,{colSpan:9,className:"text-center text-muted-foreground py-8",children:"No tickets found"})}):h.map(v=>{const y=$W(v.dueDate);return t.jsxs(ot,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>e(`/admin/tickets/${v.id}`),children:[t.jsx(ne,{children:t.jsx("code",{className:"text-xs font-mono bg-muted px-1.5 py-0.5 rounded",children:v.ticketNumber})}),t.jsx(ne,{children:t.jsxs("div",{className:"max-w-[250px]",children:[t.jsx("p",{className:"font-medium truncate",children:v.title}),v.category&&t.jsx("p",{className:"text-xs text-muted-foreground",children:v.category})]})}),t.jsx(ne,{children:t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(Qt,{className:"h-3.5 w-3.5 text-muted-foreground"}),t.jsx("span",{className:"text-sm",children:v.companyName})]})}),t.jsx(ne,{children:v.projectName?t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(bt,{className:"h-3.5 w-3.5 text-muted-foreground"}),t.jsx("span",{className:"text-sm truncate max-w-[120px]",children:v.projectName})]}):t.jsx("span",{className:"text-muted-foreground text-sm",children:""})}),t.jsx(ne,{children:v.assignedToName?t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(qs,{className:"h-3.5 w-3.5 text-muted-foreground"}),t.jsx("span",{className:"text-sm truncate max-w-[100px]",children:v.assignedToName})]}):t.jsx("span",{className:"text-muted-foreground text-sm italic",children:"Unassigned"})}),t.jsx(ne,{children:t.jsx($,{variant:FW(v.priority),children:v.priority})}),t.jsx(ne,{children:t.jsx($,{variant:LW(v.status),children:v.status.replace("_"," ")})}),t.jsx(ne,{children:v.dueDate?t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-sm",children:pe(new Date(v.dueDate),"MMM d, yyyy")}),y&&v.status!=="closed"&&v.status!=="resolved"&&t.jsx($,{variant:y.variant,className:"text-[10px] px-1.5",children:y.label})]}):t.jsx("span",{className:"text-muted-foreground text-sm",children:""})}),t.jsx(ne,{children:t.jsx(T,{variant:"ghost",size:"sm",onClick:j=>{j.stopPropagation(),e(`/admin/tickets/${v.id}`)},children:t.jsx(Uu,{className:"h-4 w-4"})})})]},v.id)})})]})})]})]})]})}function RA(){const{isInfraweaveAdmin:e,isLoading:s}=Ze(),r=Qe(),[n,a]=f.useState(""),[i,o]=f.useState("overview"),{data:l=[]}=th(),{data:c=[]}=pp(n),{data:d=[]}=Q4({isSensitive:!0,limit:10}),{data:u=[]}=Z4({limit:50});if(s)return t.jsx(we,{children:t.jsx("div",{className:"p-6",children:"Loading..."})});if(!e)return t.jsx(we,{children:t.jsxs("div",{className:"p-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-destructive",children:"Access Denied"}),t.jsx("p",{className:"text-muted-foreground",children:"You don't have permission to access this page."})]})});const m=l.filter(g=>g.subscriptionStatus==="active").length,h=c.filter(g=>g.health==="at_risk"||g.health==="critical").length,p=u.filter(g=>g.status==="open"||g.status==="in_progress").length;return t.jsxs(we,{children:[t.jsx(qn,{title:"InfraWeave Admin Dashboard",subtitle:"Global system overview and management"}),t.jsx("div",{className:"p-6 space-y-6",children:t.jsxs(kt,{value:i,onValueChange:o,className:"w-full",children:[t.jsxs(St,{className:"grid w-full max-w-md grid-cols-2",children:[t.jsxs(he,{value:"overview",className:"flex items-center gap-2",children:[t.jsx(Wa,{className:"h-4 w-4"}),"Overview"]}),t.jsxs(he,{value:"tickets",className:"flex items-center gap-2",children:[t.jsx(rt,{className:"h-4 w-4"}),"Tickets",p>0&&t.jsx($,{variant:"secondary",className:"ml-1 h-5 px-1.5 text-xs",children:p})]})]}),t.jsxs(Ce,{value:"overview",className:"space-y-6 mt-6",children:[t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsxs(V,{className:"flex items-center gap-2",children:[t.jsx(ns,{className:"h-5 w-5"}),"Project Search"]}),t.jsx(ce,{children:"Search across all companies by project name"})]}),t.jsxs(M,{children:[t.jsxs("div",{className:"flex gap-4",children:[t.jsx(se,{placeholder:"Search projects...",value:n,onChange:g=>a(g.target.value),className:"max-w-md"}),t.jsxs(T,{onClick:()=>r("/admin/projects"),children:["View All Projects",t.jsx(Ra,{className:"ml-2 h-4 w-4"})]})]}),n&&c.length>0&&t.jsx("div",{className:"mt-4 space-y-2",children:c.slice(0,5).map(g=>{var x;return t.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-border hover:bg-accent cursor-pointer transition-colors",onClick:()=>r(`/admin/projects/${g.id}`),children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:g.name}),t.jsx("p",{className:"text-sm text-muted-foreground",children:(x=g.company)==null?void 0:x.name})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx($,{variant:g.health==="healthy"?"success":g.health==="at_risk"?"warning":"destructive",children:g.health}),t.jsx($,{variant:"secondary",children:g.status})]})]},g.id)})})]})]}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Total Companies"}),t.jsx(Qt,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold",children:l.length}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[m," active"]})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Total Projects"}),t.jsx(bt,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold",children:c.length}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all companies"})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"At Risk Projects"}),t.jsx(qt,{className:"h-4 w-4 text-warning"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold text-warning",children:h}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Require attention"})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Open Tickets"}),t.jsx(rt,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold",children:p}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all companies"})]})]})]}),t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsxs(V,{className:"flex items-center gap-2",children:[t.jsx(Fa,{className:"h-5 w-5"}),"Recent Sensitive Actions"]}),t.jsx(ce,{children:"Audit trail of sensitive operations across all companies"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"space-y-3",children:d.length===0?t.jsx("p",{className:"text-muted-foreground text-sm",children:"No recent sensitive actions"}):d.map(g=>{var x;return t.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-border",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"font-medium text-foreground",children:[g.entityType," - ",g.action]}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Entity ID: ",(x=g.entityId)==null?void 0:x.slice(0,8),"..."]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx($,{variant:g.isSensitive?"destructive":"secondary",children:g.isSensitive?"Sensitive":"Normal"}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:pe(new Date(g.createdAt),"MMM d, HH:mm")})]})]},g.id)})}),t.jsx(T,{variant:"outline",className:"w-full mt-4",onClick:()=>r("/admin/audit-logs"),children:"View All Audit Logs"})]})]}),t.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[t.jsx(tW,{}),t.jsx(sW,{})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Quick Actions"}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[t.jsx(P,{className:"cursor-pointer hover:border-primary transition-colors",onClick:()=>r("/admin/companies"),children:t.jsxs(W,{className:"pb-3",children:[t.jsxs(V,{className:"flex items-center gap-2 text-base",children:[t.jsx(Qt,{className:"h-5 w-5"}),"Companies"]}),t.jsx(ce,{children:"View and manage all tenant companies"})]})}),t.jsx(P,{className:"cursor-pointer hover:border-primary transition-colors",onClick:()=>r("/admin/all-projects"),children:t.jsxs(W,{className:"pb-3",children:[t.jsxs(V,{className:"flex items-center gap-2 text-base",children:[t.jsx(bt,{className:"h-5 w-5"}),"All Projects"]}),t.jsx(ce,{children:"Browse projects across all companies"})]})}),t.jsx(P,{className:"cursor-pointer hover:border-primary transition-colors",onClick:()=>r("/admin/users"),children:t.jsxs(W,{className:"pb-3",children:[t.jsxs(V,{className:"flex items-center gap-2 text-base",children:[t.jsx(Kt,{className:"h-5 w-5"}),"User Management"]}),t.jsx(ce,{children:"Manage global user accounts"})]})})]})]})]}),t.jsx(Ce,{value:"tickets",className:"mt-6",children:t.jsx(PA,{})})]})})]})}function UW(){const{company:e,isCompanyAdmin:s,isLoading:r}=Ze(),n=Qe(),{data:a=[]}=fp(),{data:i=[]}=zz(),{data:o=[]}=qz(),{data:l=[]}=ew(),{data:c=[]}=Y4();if(r)return t.jsx(we,{children:t.jsx("div",{className:"p-6",children:"Loading..."})});const d=a.filter(x=>x.status==="active").length,u=l.filter(x=>x.status==="open"||x.status==="in_progress").length,m=l.filter(x=>x.priority==="critical").length,h=o.reduce((x,v)=>x+Number(v.amount),0),p=o.filter(x=>x.status==="overdue").length,g=c.filter(x=>x.isActive).length;return t.jsx(we,{children:t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold text-foreground",children:[(e==null?void 0:e.name)||"Company"," Dashboard"]}),t.jsx("p",{className:"text-muted-foreground",children:"Overview of your company's projects, tickets, and billing"})]}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Active Projects"}),t.jsx(bt,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold",children:d}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.length," total projects"]})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Open Tickets"}),t.jsx(rt,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold",children:u}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[m>0&&t.jsxs("span",{className:"text-destructive",children:[m," critical"]}),m===0&&"No critical tickets"]})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Team Members"}),t.jsx(Kt,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold",children:g}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Active engineers"})]})]}),s&&t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Upcoming Dues"}),t.jsx(or,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(M,{children:[t.jsxs("div",{className:"text-2xl font-bold",children:["$",h.toLocaleString()]}),t.jsx("p",{className:"text-xs text-muted-foreground",children:p>0?t.jsxs("span",{className:"text-destructive",children:[p," overdue"]}):"All payments on track"})]})]})]}),t.jsxs(P,{children:[t.jsx(W,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx(V,{children:"Project Health"}),t.jsx(ce,{children:"Status of your active projects"})]}),t.jsxs(T,{variant:"outline",onClick:()=>n("/projects"),children:["View All",t.jsx(Ra,{className:"ml-2 h-4 w-4"})]})]})}),t.jsx(M,{children:t.jsxs("div",{className:"space-y-3",children:[a.slice(0,5).map(x=>t.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-border hover:bg-accent cursor-pointer transition-colors",onClick:()=>n(`/projects/${x.id}`),children:[t.jsxs("div",{className:"flex items-center gap-3",children:[x.health==="healthy"&&t.jsx(vt,{className:"h-5 w-5 text-success"}),x.health==="at_risk"&&t.jsx(qt,{className:"h-5 w-5 text-warning"}),x.health==="critical"&&t.jsx(qt,{className:"h-5 w-5 text-destructive"}),x.health==="on_hold"&&t.jsx(Oe,{className:"h-5 w-5 text-muted-foreground"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:x.name}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:[x.progressPercent,"% complete"]})]})]}),t.jsx($,{variant:x.health==="healthy"?"success":x.health==="at_risk"?"warning":x.health==="critical"?"destructive":"secondary",children:x.health})]},x.id)),a.length===0&&t.jsx("p",{className:"text-muted-foreground text-sm text-center py-4",children:"No projects yet. Create your first project to get started."})]})})]}),s&&t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[t.jsxs(P,{children:[t.jsx(W,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs(V,{className:"flex items-center gap-2",children:[t.jsx(ca,{className:"h-5 w-5"}),"Recent Transactions"]}),t.jsx(ce,{children:"Latest billing activity"})]}),t.jsx(T,{variant:"outline",size:"sm",onClick:()=>n("/billing"),children:"View All"})]})}),t.jsx(M,{children:t.jsxs("div",{className:"space-y-3",children:[i.slice(0,5).map(x=>t.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border border-border",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground text-sm",children:x.description||x.type}),t.jsx("p",{className:"text-xs text-muted-foreground",children:pe(new Date(x.transactionDate),"MMM d, yyyy")})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:`font-medium ${x.type==="payment"?"text-success":""}`,children:[x.type==="payment"?"-":"","$",Number(x.amount).toLocaleString()]}),t.jsx($,{variant:x.status==="completed"?"success":"secondary",className:"text-xs",children:x.status})]})]},x.id)),i.length===0&&t.jsx("p",{className:"text-muted-foreground text-sm text-center py-4",children:"No transactions yet"})]})})]}),t.jsxs(P,{children:[t.jsx(W,{children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsxs(V,{className:"flex items-center gap-2",children:[t.jsx(Oe,{className:"h-5 w-5"}),"Upcoming Dues"]}),t.jsx(ce,{children:"Payments due soon"})]})})}),t.jsx(M,{children:t.jsxs("div",{className:"space-y-3",children:[o.slice(0,5).map(x=>t.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border border-border",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground text-sm",children:x.description||"Payment Due"}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Due: ",pe(new Date(x.dueDate),"MMM d, yyyy")]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"font-medium",children:["$",Number(x.amount).toLocaleString()]}),t.jsx($,{variant:x.status==="overdue"?"destructive":x.status==="due"?"warning":"secondary",className:"text-xs",children:x.status})]})]},x.id)),o.length===0&&t.jsx("p",{className:"text-muted-foreground text-sm text-center py-4",children:"No upcoming dues"})]})})]})]}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[t.jsx(P,{className:"cursor-pointer hover:border-primary transition-colors",onClick:()=>n("/projects"),children:t.jsxs(M,{className:"pt-6",children:[t.jsx(bt,{className:"h-8 w-8 text-primary mb-2"}),t.jsx("h3",{className:"font-semibold",children:"Projects"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage projects"})]})}),t.jsx(P,{className:"cursor-pointer hover:border-primary transition-colors",onClick:()=>n("/tickets"),children:t.jsxs(M,{className:"pt-6",children:[t.jsx(rt,{className:"h-8 w-8 text-primary mb-2"}),t.jsx("h3",{className:"font-semibold",children:"Tickets"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"View all tickets"})]})}),t.jsx(P,{className:"cursor-pointer hover:border-primary transition-colors",onClick:()=>n("/team"),children:t.jsxs(M,{className:"pt-6",children:[t.jsx(Kt,{className:"h-8 w-8 text-primary mb-2"}),t.jsx("h3",{className:"font-semibold",children:"Team"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage team"})]})}),s&&t.jsx(P,{className:"cursor-pointer hover:border-primary transition-colors",onClick:()=>n("/billing"),children:t.jsxs(M,{className:"pt-6",children:[t.jsx(ca,{className:"h-8 w-8 text-primary mb-2"}),t.jsx("h3",{className:"font-semibold",children:"Billing"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"View invoices"})]})})]})]})})}function JN(){const{company:e,isLoading:s}=Ze(),{user:r}=ft(),n=Qe(),{data:a=[]}=fp(),{data:i=[]}=ew();if(s)return t.jsx(we,{children:t.jsx("div",{className:"p-6",children:"Loading..."})});const o=i.filter(d=>d.assigned_to===(r==null?void 0:r.id)||d.reporter_id===(r==null?void 0:r.id)),l=o.filter(d=>d.status==="open"||d.status==="in_progress"),c=o.filter(d=>d.status==="resolved"||d.status==="closed");return t.jsx(we,{children:t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Welcome Back!"}),t.jsxs("p",{className:"text-muted-foreground",children:["Here's an overview of your work at ",(e==null?void 0:e.name)||"your company"]})]}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"My Projects"}),t.jsx(bt,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold",children:a.length}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Projects you have access to"})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Open Tickets"}),t.jsx(rt,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold",children:l.length}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Assigned or created by you"})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Resolved"}),t.jsx(vt,{className:"h-4 w-4 text-success"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold",children:c.length}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Tickets you've closed"})]})]})]}),t.jsxs(P,{children:[t.jsx(W,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx(V,{children:"My Tickets"}),t.jsx(ce,{children:"Tickets assigned to you or created by you"})]}),t.jsxs(T,{variant:"outline",onClick:()=>n("/my-tickets"),children:["View All",t.jsx(Ra,{className:"ml-2 h-4 w-4"})]})]})}),t.jsx(M,{children:t.jsxs("div",{className:"space-y-3",children:[l.slice(0,5).map(d=>t.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-border hover:bg-accent cursor-pointer transition-colors",onClick:()=>n(`/tickets/${d.id}`),children:[t.jsxs("div",{className:"flex items-center gap-3",children:[d.priority==="critical"&&t.jsx(fs,{className:"h-5 w-5 text-destructive"}),d.priority==="high"&&t.jsx(fs,{className:"h-5 w-5 text-warning"}),(d.priority==="medium"||d.priority==="low")&&t.jsx(Oe,{className:"h-5 w-5 text-muted-foreground"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:d.title}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Created ",pe(new Date(d.created_at),"MMM d, yyyy")]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx($,{variant:d.priority==="critical"?"destructive":d.priority==="high"?"warning":"secondary",children:d.priority}),t.jsx($,{variant:"outline",children:d.status})]})]},d.id)),l.length===0&&t.jsxs("div",{className:"text-center py-8",children:[t.jsx(vt,{className:"h-12 w-12 text-success mx-auto mb-4"}),t.jsx("p",{className:"text-muted-foreground",children:"No open tickets! You're all caught up."})]})]})})]}),t.jsxs(P,{children:[t.jsx(W,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx(V,{children:"My Projects"}),t.jsx(ce,{children:"Projects you're working on"})]}),t.jsxs(T,{variant:"outline",onClick:()=>n("/my-projects"),children:["View All",t.jsx(Ra,{className:"ml-2 h-4 w-4"})]})]})}),t.jsx(M,{children:t.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[a.slice(0,6).map(d=>t.jsxs("div",{className:"p-4 rounded-lg border border-border hover:bg-accent cursor-pointer transition-colors",onClick:()=>n(`/projects/${d.id}`),children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx($,{variant:"secondary",children:d.status}),t.jsx($,{variant:d.health==="healthy"?"success":d.health==="at_risk"?"warning":d.health==="critical"?"destructive":"secondary",children:d.health})]}),t.jsx("h3",{className:"font-semibold text-foreground",children:d.name}),t.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:d.description||"No description"}),t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground mb-1",children:[t.jsx("span",{children:"Progress"}),t.jsxs("span",{children:[d.progressPercent,"%"]})]}),t.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:t.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${d.progressPercent}%`}})})]})]},d.id)),a.length===0&&t.jsxs("div",{className:"col-span-full text-center py-8",children:[t.jsx(bt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),t.jsx("p",{className:"text-muted-foreground",children:"No projects assigned yet. Contact your company admin."})]})]})})]}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[t.jsx(P,{className:"cursor-pointer hover:border-primary transition-colors",onClick:()=>n("/my-projects"),children:t.jsxs(M,{className:"pt-6",children:[t.jsx(bt,{className:"h-8 w-8 text-primary mb-2"}),t.jsx("h3",{className:"font-semibold",children:"My Projects"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"View assigned projects"})]})}),t.jsx(P,{className:"cursor-pointer hover:border-primary transition-colors",onClick:()=>n("/my-tickets"),children:t.jsxs(M,{className:"pt-6",children:[t.jsx(rt,{className:"h-8 w-8 text-primary mb-2"}),t.jsx("h3",{className:"font-semibold",children:"My Tickets"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your tickets"})]})}),t.jsx(P,{className:"cursor-pointer hover:border-primary transition-colors",onClick:()=>n("/knowledge-base"),children:t.jsxs(M,{className:"pt-6",children:[t.jsx(ir,{className:"h-8 w-8 text-primary mb-2"}),t.jsx("h3",{className:"font-semibold",children:"Knowledge Base"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Documentation & guides"})]})})]})]})})}const XN={epic:{icon:t.jsx(Yr,{className:"h-3 w-3"}),label:"Epic"},story:{icon:t.jsx(qt,{className:"h-3 w-3"}),label:"Story"},bug:{icon:t.jsx(Wc,{className:"h-3 w-3"}),label:"Bug"},monitoring:{icon:t.jsx(Fa,{className:"h-3 w-3"}),label:"Monitoring"}};function ty(){const{user:e}=ft(),s=Qe(),[r,n]=f.useState("assigned"),[a,i]=f.useState(""),[o,l]=f.useState("all"),[c,d]=f.useState("all"),{data:u=[],isLoading:m}=fe({queryKey:["employee-tickets"],queryFn:async()=>{const{data:I,error:G}=await B.from("tickets").select(`
          *,
          organization:organizations(name),
          project:projects(name)
        `).order("created_at",{ascending:!1});if(G)throw G;const ee=new Set;I==null||I.forEach(D=>{D.assigned_to&&ee.add(D.assigned_to),D.reporter_id&&ee.add(D.reporter_id)});let K={};if(ee.size>0){const{data:D}=await B.from("profiles_safe").select("id, full_name, email").in("id",Array.from(ee));D==null||D.forEach(q=>{K[q.id]={full_name:q.full_name,email:q.email}})}return I==null?void 0:I.map(D=>({...D,assignee:D.assigned_to?K[D.assigned_to]:void 0,reporter:D.reporter_id?K[D.reporter_id]:void 0}))}}),h=new Map;u.forEach(I=>{var G;I.organization_id&&((G=I.organization)!=null&&G.name)&&h.set(I.organization_id,I.organization.name)});const p=Array.from(h.entries()),g=new Map;u.forEach(I=>{var G;I.project_id&&((G=I.project)!=null&&G.name)&&g.set(I.project_id,I.project.name)});const x=new Map;u.filter(I=>o==="all"||I.organization_id===o).forEach(I=>{var G;I.project_id&&((G=I.project)!=null&&G.name)&&x.set(I.project_id,I.project.name)});const v=Array.from(x.entries()),y=u.filter(I=>{var D,q,re;const G=a===""||I.title.toLowerCase().includes(a.toLowerCase())||((D=I.description)==null?void 0:D.toLowerCase().includes(a.toLowerCase()))||((re=(q=I.organization)==null?void 0:q.name)==null?void 0:re.toLowerCase().includes(a.toLowerCase())),ee=o==="all"||I.organization_id===o,K=c==="all"||I.project_id===c;return r==="assigned"?G&&ee&&K&&I.assigned_to===(e==null?void 0:e.id):r==="open"?G&&ee&&K&&["open","in_progress"].includes(I.status):r==="resolved"?G&&ee&&K&&["resolved","closed"].includes(I.status):G&&ee&&K}),j=I=>{l(I),d("all")},w=()=>{l("all"),d("all"),i("")},b=o!=="all"||c!=="all"||a!=="",N=u.filter(I=>I.assigned_to===(e==null?void 0:e.id)).length,_=u.filter(I=>["open","in_progress"].includes(I.status)).length,C=u.filter(I=>{if(!["resolved","closed"].includes(I.status))return!1;const G=new Date(I.updated_at),ee=new Date;return G.toDateString()===ee.toDateString()}).length,E=u.filter(I=>I.priority==="critical"&&!["resolved","closed"].includes(I.status)).length,k=I=>{switch(I){case"critical":return"destructive";case"high":return"warning";case"medium":return"info";default:return"secondary"}},A=I=>{switch(I){case"open":return"info";case"in_progress":return"warning";case"waiting_customer":return"secondary";case"waiting_internal":return"secondary";case"resolved":return"success";case"closed":return"outline";default:return"secondary"}},L=I=>I.split("_").map(G=>G.charAt(0).toUpperCase()+G.slice(1)).join(" "),H=I=>XN[I||"story"]||XN.story,F=I=>{s(`/employee/tickets/${I}`)};return m?t.jsx(we,{children:t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsx(Ie,{className:"h-8 w-8 animate-spin text-primary"})})}):t.jsxs(we,{children:[t.jsx(qn,{title:"Employee Dashboard",subtitle:"Manage and resolve customer tickets"}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"My Assigned"}),t.jsx(rt,{className:"h-4 w-4 text-primary"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold",children:N}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Tickets assigned to you"})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Open Tickets"}),t.jsx(Oe,{className:"h-4 w-4 text-warning"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold text-warning",children:_}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting resolution"})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Resolved Today"}),t.jsx(vt,{className:"h-4 w-4 text-success"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold text-success",children:C}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Closed today"})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Critical"}),t.jsx(fs,{className:"h-4 w-4 text-destructive"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold text-destructive",children:E}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Requires immediate attention"})]})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[t.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-md",children:[t.jsx(ns,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t.jsx(se,{placeholder:"Search tickets...",value:a,onChange:I=>i(I.target.value),className:"pl-9"})]}),t.jsxs($e,{value:o,onValueChange:j,children:[t.jsxs(Le,{className:"w-[200px]",children:[t.jsx(Qt,{className:"h-4 w-4 mr-2 text-muted-foreground"}),t.jsx(Ue,{placeholder:"All Companies"})]}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"all",children:"All Companies"}),p.map(([I,G])=>t.jsx(Z,{value:I,children:G},I))]})]}),t.jsxs($e,{value:c,onValueChange:d,children:[t.jsxs(Le,{className:"w-[200px]",children:[t.jsx(bt,{className:"h-4 w-4 mr-2 text-muted-foreground"}),t.jsx(Ue,{placeholder:"All Projects"})]}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"all",children:"All Projects"}),v.map(([I,G])=>t.jsx(Z,{value:I,children:G},I))]})]}),b&&t.jsxs(T,{variant:"ghost",size:"sm",onClick:w,className:"text-muted-foreground",children:[t.jsx(Ct,{className:"h-4 w-4 mr-1"}),"Clear filters"]})]}),t.jsxs(kt,{value:r,onValueChange:n,children:[t.jsxs(St,{children:[t.jsxs(he,{value:"assigned",children:["My Assigned",t.jsx($,{variant:"secondary",className:"ml-2",children:N})]}),t.jsxs(he,{value:"open",children:["All Open",t.jsx($,{variant:"warning",className:"ml-2",children:_})]}),t.jsx(he,{value:"resolved",children:"Resolved"}),t.jsx(he,{value:"all",children:"All Tickets"})]}),t.jsx(Ce,{value:r,className:"mt-4",children:t.jsx(P,{children:t.jsx(M,{className:"p-0",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-border",children:[t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Ticket"}),t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Type"}),t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Company"}),t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Priority"}),t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Status"}),t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Updated"}),t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Actions"})]})}),t.jsxs("tbody",{children:[y.map(I=>{var ee;const G=H(I.category);return t.jsxs("tr",{className:"border-b border-border last:border-0 hover:bg-accent/50 transition-colors cursor-pointer",onClick:()=>F(I.id),children:[t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:I.title}),t.jsx("p",{className:"text-xs text-muted-foreground truncate max-w-xs",children:I.description||"No description"})]})}),t.jsx("td",{className:"py-3 px-4",children:t.jsxs($,{variant:"outline",className:"gap-1",children:[G.icon,G.label]})}),t.jsx("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:((ee=I.organization)==null?void 0:ee.name)||"-"}),t.jsx("td",{className:"py-3 px-4",children:t.jsx($,{variant:k(I.priority),children:I.priority})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx($,{variant:A(I.status),children:L(I.status)})}),t.jsx("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:sd(new Date(I.updated_at),{addSuffix:!0})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx(T,{size:"sm",variant:"ghost",onClick:K=>{K.stopPropagation(),F(I.id)},children:t.jsx(Uu,{className:"h-4 w-4"})})})]},I.id)}),y.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"py-8 text-center text-muted-foreground",children:"No tickets found"})})]})]})})})})})]})]})]})}function e1(){const{role:e,isLoading:s}=Ze(),{signOut:r}=ft(),n=Qe(),a=async()=>{try{await r()}catch(i){console.error("Sign out error:",i)}n("/auth")};if(s)return t.jsx(we,{children:t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"animate-pulse space-y-4",children:[t.jsx("div",{className:"h-8 w-48 bg-muted rounded"}),t.jsx("div",{className:"h-64 bg-muted rounded"})]})})});if(!e)return t.jsx(we,{children:t.jsx("div",{className:"p-6 flex items-center justify-center min-h-[80vh]",children:t.jsxs(P,{className:"max-w-md",children:[t.jsxs(W,{className:"text-center",children:[t.jsx("div",{className:"mx-auto mb-4 h-16 w-16 rounded-full bg-primary/10 flex items-center justify-center",children:t.jsx(ys,{className:"h-8 w-8 text-primary"})}),t.jsx(V,{children:"Awaiting Invitation"}),t.jsx(ce,{children:"Your account has been created, but you haven't been added to a company yet."})]}),t.jsxs(M,{className:"space-y-4 text-center",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Please contact your company administrator to receive an invitation to join their organization."}),t.jsxs(T,{onClick:a,variant:"outline",className:"w-full",children:[t.jsx(al,{className:"mr-2 h-4 w-4"}),"Sign Out"]})]})]})})});switch(e){case"infraweave_admin":return t.jsx(RA,{});case"infraweave_employee":return t.jsx(ty,{});case"company_admin":return t.jsx(UW,{});case"engineer":return t.jsx(JN,{});default:return t.jsx(JN,{})}}var _p="Switch",[BW]=ks(_p),[zW,qW]=BW(_p),IA=f.forwardRef((e,s)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...m}=e,[h,p]=f.useState(null),g=Ve(s,w=>p(w)),x=f.useRef(!1),v=h?u||!!h.closest("form"):!0,[y,j]=_r({prop:a,defaultProp:i??!1,onChange:d,caller:_p});return t.jsxs(zW,{scope:r,checked:y,disabled:l,children:[t.jsx(Se.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":LA(y),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:g,onClick:de(e.onClick,w=>{j(b=>!b),v&&(x.current=w.isPropagationStopped(),x.current||w.stopPropagation())})}),v&&t.jsx(MA,{control:h,bubbles:!x.current,name:n,value:c,checked:y,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});IA.displayName=_p;var DA="SwitchThumb",OA=f.forwardRef((e,s)=>{const{__scopeSwitch:r,...n}=e,a=qW(DA,r);return t.jsx(Se.span,{"data-state":LA(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:s})});OA.displayName=DA;var WW="SwitchBubbleInput",MA=f.forwardRef(({__scopeSwitch:e,control:s,checked:r,bubbles:n=!0,...a},i)=>{const o=f.useRef(null),l=Ve(o,i),c=wp(r),d=Gf(s);return f.useEffect(()=>{const u=o.current;if(!u)return;const m=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==r&&p){const g=new Event("click",{bubbles:n});p.call(u,r),u.dispatchEvent(g)}},[c,r,n]),t.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});MA.displayName=WW;function LA(e){return e?"checked":"unchecked"}var FA=IA,VW=OA;const nt=f.forwardRef(({className:e,...s},r)=>t.jsx(FA,{className:J("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-border transition-all duration-200 data-[state=checked]:bg-primary data-[state=checked]:border-primary data-[state=checked]:shadow-[0_0_8px_hsl(var(--primary)/0.4)] data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/30 focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 hover:border-primary/50",e),...s,ref:r,children:t.jsx(VW,{className:J("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0 data-[state=checked]:bg-primary-foreground")})}));nt.displayName=FA.displayName;function HW(){const{user:e}=ft(),s=ht(),{data:r,isLoading:n}=fe({queryKey:["profile",e==null?void 0:e.id],queryFn:async()=>{if(!(e!=null&&e.id))return null;const{data:i,error:o}=await B.from("profiles_safe").select("*").eq("id",e.id).maybeSingle();return o?(console.error("Error fetching profile:",o),null):i},enabled:!!(e!=null&&e.id)}),a=_t({mutationFn:async i=>{if(!(e!=null&&e.id))throw new Error("Not authenticated");const{error:o}=await B.from("profiles").update({...i,updated_at:new Date().toISOString()}).eq("id",e.id);if(o)throw o},onSuccess:()=>{s.invalidateQueries({queryKey:["profile",e==null?void 0:e.id]}),z.success("Profile updated successfully")},onError:i=>{console.error("Error updating profile:",i),z.error("Failed to update profile")}});return{profile:r,isLoading:n,updateProfile:a.mutate,isUpdating:a.isPending}}function t1(){var k;const{user:e}=ft(),{profile:s,isLoading:r,updateProfile:n,isUpdating:a}=HW(),{role:i}=Ze(),[o,l]=f.useState(""),[c,d]=f.useState(""),[u,m]=f.useState(!0),[h,p]=f.useState(!0),[g,x]=f.useState(!0),[v,y]=f.useState(!1),[j,w]=f.useState(!1);f.useEffect(()=>{s&&(l(s.full_name||""),d(s.avatar_url||""))},[s]);const b=()=>{n({full_name:o,avatar_url:c||void 0})},N=(s==null?void 0:s.full_name)||((k=e==null?void 0:e.email)==null?void 0:k.split("@")[0])||"User",_=N.split(" ").map(A=>A[0]).join("").toUpperCase().slice(0,2),C={infraweave_admin:"Super Admin",company_admin:"Company Admin",engineer:"Engineer"},E={infraweave_admin:"destructive",company_admin:"info",engineer:"success"};return r?t.jsx(we,{children:t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsx(Ie,{className:"h-8 w-8 animate-spin text-primary"})})}):t.jsx(we,{children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"My Profile"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage your account settings and preferences"})]}),t.jsxs(kt,{defaultValue:"profile",className:"space-y-6",children:[t.jsxs(St,{className:"bg-secondary",children:[t.jsxs(he,{value:"profile",className:"gap-2 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[t.jsx(qs,{className:"h-4 w-4"}),"Profile"]}),t.jsxs(he,{value:"notifications",className:"gap-2 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[t.jsx(na,{className:"h-4 w-4"}),"Notifications"]}),t.jsxs(he,{value:"security",className:"gap-2 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[t.jsx(us,{className:"h-4 w-4"}),"Security"]})]}),t.jsx(Ce,{value:"profile",children:t.jsxs("div",{className:"glass rounded-xl p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-start gap-6",children:[t.jsxs("div",{className:"relative",children:[t.jsxs(Tt,{className:"h-24 w-24",children:[t.jsx(Ps,{src:c||(s==null?void 0:s.avatar_url)||void 0,alt:N}),t.jsx(Pt,{className:"bg-primary/20 text-primary text-2xl",children:_})]}),t.jsx(T,{size:"icon-sm",variant:"secondary",className:"absolute bottom-0 right-0 rounded-full h-8 w-8",children:t.jsx(bO,{className:"h-4 w-4"})})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-lg font-semibold text-foreground",children:N}),t.jsx("p",{className:"text-muted-foreground",children:e==null?void 0:e.email}),i&&t.jsx($,{variant:E[i]||"default",className:"mt-2",children:C[i]||i})]})]}),t.jsxs("div",{className:"border-t border-border pt-6",children:[t.jsx("h4",{className:"text-md font-semibold text-foreground mb-4",children:"Personal Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"full-name",children:"Full Name"}),t.jsx(se,{id:"full-name",value:o,onChange:A=>l(A.target.value),placeholder:"Enter your full name",className:"bg-secondary border-border"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"email",children:"Email Address"}),t.jsxs("div",{className:"relative",children:[t.jsx(ys,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t.jsx(se,{id:"email",value:(e==null?void 0:e.email)||"",disabled:!0,className:"bg-secondary border-border pl-10 opacity-60"})]}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Email cannot be changed"})]}),t.jsxs("div",{className:"space-y-2 md:col-span-2",children:[t.jsx(O,{htmlFor:"avatar-url",children:"Avatar URL"}),t.jsx(se,{id:"avatar-url",value:c,onChange:A=>d(A.target.value),placeholder:"https://example.com/avatar.jpg",className:"bg-secondary border-border"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter a URL for your profile picture"})]})]})]}),t.jsx("div",{className:"flex justify-end pt-4",children:t.jsxs(T,{onClick:b,disabled:a,children:[a&&t.jsx(Ie,{className:"h-4 w-4 mr-2 animate-spin"}),"Save Changes"]})})]})}),t.jsx(Ce,{value:"notifications",children:t.jsxs("div",{className:"glass rounded-xl p-6 space-y-6",children:[t.jsx("h4",{className:"text-lg font-semibold text-foreground",children:"Notification Preferences"}),t.jsx("p",{className:"text-muted-foreground",children:"Choose how you want to receive notifications"}),t.jsxs("div",{className:"space-y-4 pt-4",children:[t.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-border",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"Email Notifications"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via email"})]}),t.jsx(nt,{checked:u,onCheckedChange:m})]}),t.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-border",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"Ticket Assignments"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified when assigned to a ticket"})]}),t.jsx(nt,{checked:h,onCheckedChange:p})]}),t.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-border",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"SLA Alerts"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive alerts for SLA breaches"})]}),t.jsx(nt,{checked:g,onCheckedChange:x})]}),t.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-border",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"Weekly Digest"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive weekly summary reports"})]}),t.jsx(nt,{checked:v,onCheckedChange:y})]}),t.jsxs("div",{className:"flex items-center justify-between py-3",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"Push Notifications"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable browser push notifications"})]}),t.jsx(nt,{checked:j,onCheckedChange:w})]})]})]})}),t.jsx(Ce,{value:"security",children:t.jsxs("div",{className:"glass rounded-xl p-6 space-y-6",children:[t.jsx("h4",{className:"text-lg font-semibold text-foreground",children:"Security Settings"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-border",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"Password"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Last changed: Never"})]}),t.jsx(T,{variant:"outline",children:"Change Password"})]}),t.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-border",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"Two-Factor Authentication"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Add an extra layer of security"})]}),t.jsx(T,{variant:"outline",children:"Enable 2FA"})]}),t.jsxs("div",{className:"flex items-center justify-between py-3",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"Active Sessions"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your active sessions"})]}),t.jsx(T,{variant:"outline",children:"View Sessions"})]})]}),t.jsxs("div",{className:"border-t border-border pt-6",children:[t.jsx("h4",{className:"text-md font-semibold text-foreground mb-4",children:"Account Information"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-muted-foreground",children:"User ID"}),t.jsx("p",{className:"text-foreground font-mono text-xs mt-1",children:e==null?void 0:e.id})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-muted-foreground",children:"Account Created"}),t.jsx("p",{className:"text-foreground mt-1",children:s!=null&&s.created_at?new Date(s.created_at).toLocaleDateString():"Unknown"})]})]})]})]})})]})]})})}const Bt=f.forwardRef(({className:e,...s},r)=>t.jsx("textarea",{className:J("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...s}));Bt.displayName="Textarea";var Sp="Popover",[$A]=ks(Sp,[Xi]),rh=Xi(),[KW,ro]=$A(Sp),UA=e=>{const{__scopePopover:s,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,l=rh(s),c=f.useRef(null),[d,u]=f.useState(!1),[m,h]=_r({prop:n,defaultProp:a??!1,onChange:i,caller:Sp});return t.jsx(Cj,{...l,children:t.jsx(KW,{scope:s,contentId:Ss(),triggerRef:c,open:m,onOpenChange:h,onOpenToggle:f.useCallback(()=>h(p=>!p),[h]),hasCustomAnchor:d,onCustomAnchorAdd:f.useCallback(()=>u(!0),[]),onCustomAnchorRemove:f.useCallback(()=>u(!1),[]),modal:o,children:r})})};UA.displayName=Sp;var BA="PopoverAnchor",GW=f.forwardRef((e,s)=>{const{__scopePopover:r,...n}=e,a=ro(BA,r),i=rh(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return f.useEffect(()=>(o(),()=>l()),[o,l]),t.jsx(Hu,{...i,...n,ref:s})});GW.displayName=BA;var zA="PopoverTrigger",qA=f.forwardRef((e,s)=>{const{__scopePopover:r,...n}=e,a=ro(zA,r),i=rh(r),o=Ve(s,a.triggerRef),l=t.jsx(Se.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":GA(a.open),...n,ref:o,onClick:de(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:t.jsx(Hu,{asChild:!0,...i,children:l})});qA.displayName=zA;var pw="PopoverPortal",[YW,QW]=$A(pw,{forceMount:void 0}),WA=e=>{const{__scopePopover:s,forceMount:r,children:n,container:a}=e,i=ro(pw,s);return t.jsx(YW,{scope:s,forceMount:r,children:t.jsx(js,{present:r||i.open,children:t.jsx(qc,{asChild:!0,container:a,children:n})})})};WA.displayName=pw;var $c="PopoverContent",VA=f.forwardRef((e,s)=>{const r=QW($c,e.__scopePopover),{forceMount:n=r.forceMount,...a}=e,i=ro($c,e.__scopePopover);return t.jsx(js,{present:n||i.open,children:i.modal?t.jsx(JW,{...a,ref:s}):t.jsx(XW,{...a,ref:s})})});VA.displayName=$c;var ZW=$o("PopoverContent.RemoveScroll"),JW=f.forwardRef((e,s)=>{const r=ro($c,e.__scopePopover),n=f.useRef(null),a=Ve(s,n),i=f.useRef(!1);return f.useEffect(()=>{const o=n.current;if(o)return ap(o)},[]),t.jsx(Qu,{as:ZW,allowPinchZoom:!0,children:t.jsx(HA,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:de(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:de(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:de(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),XW=f.forwardRef((e,s)=>{const r=ro($c,e.__scopePopover),n=f.useRef(!1),a=f.useRef(!1);return t.jsx(HA,{...e,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),HA=f.forwardRef((e,s)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...m}=e,h=ro($c,r),p=rh(r);return np(),t.jsx(Gu,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:t.jsx(rl,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>h.onOpenChange(!1),children:t.jsx(Yf,{"data-state":GA(h.open),role:"dialog",id:h.contentId,...p,...m,ref:s,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),KA="PopoverClose",eV=f.forwardRef((e,s)=>{const{__scopePopover:r,...n}=e,a=ro(KA,r);return t.jsx(Se.button,{type:"button",...n,ref:s,onClick:de(e.onClick,()=>a.onOpenChange(!1))})});eV.displayName=KA;var tV="PopoverArrow",sV=f.forwardRef((e,s)=>{const{__scopePopover:r,...n}=e,a=rh(r);return t.jsx(Qf,{...a,...n,ref:s})});sV.displayName=tV;function GA(e){return e?"open":"closed"}var rV=UA,nV=qA,aV=WA,YA=VA;const mf=rV,ff=nV,Cu=f.forwardRef(({className:e,align:s="center",sideOffset:r=4,...n},a)=>t.jsx(aV,{children:t.jsx(YA,{ref:a,align:s,sideOffset:r,className:J("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Cu.displayName=YA.displayName;var He=function(){return He=Object.assign||function(s){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(s[i]=r[i])}return s},He.apply(this,arguments)};function iV(e,s){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&s.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)s.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function QA(e,s,r){for(var n=0,a=s.length,i;n<a;n++)(i||!(n in s))&&(i||(i=Array.prototype.slice.call(s,0,n)),i[n]=s[n]);return e.concat(i||Array.prototype.slice.call(s))}function nh(e){return e.mode==="multiple"}function ah(e){return e.mode==="range"}function kp(e){return e.mode==="single"}var oV={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function lV(e,s){return pe(e,"LLLL y",s)}function cV(e,s){return pe(e,"d",s)}function dV(e,s){return pe(e,"LLLL",s)}function uV(e){return"".concat(e)}function hV(e,s){return pe(e,"cccccc",s)}function mV(e,s){return pe(e,"yyyy",s)}var fV=Object.freeze({__proto__:null,formatCaption:lV,formatDay:cV,formatMonthCaption:dV,formatWeekNumber:uV,formatWeekdayName:hV,formatYearCaption:mV}),pV=function(e,s,r){return pe(e,"do MMMM (EEEE)",r)},xV=function(){return"Month: "},gV=function(){return"Go to next month"},vV=function(){return"Go to previous month"},yV=function(e,s){return pe(e,"cccc",s)},jV=function(e){return"Week n. ".concat(e)},wV=function(){return"Year: "},bV=Object.freeze({__proto__:null,labelDay:pV,labelMonthDropdown:xV,labelNext:gV,labelPrevious:vV,labelWeekNumber:jV,labelWeekday:yV,labelYearDropdown:wV});function NV(){var e="buttons",s=oV,r=uw,n={},a={},i=1,o={},l=new Date;return{captionLayout:e,classNames:s,formatters:fV,labels:bV,locale:r,modifiersClassNames:n,modifiers:a,numberOfMonths:i,styles:o,today:l,mode:"default"}}function CV(e){var s=e.fromYear,r=e.toYear,n=e.fromMonth,a=e.toMonth,i=e.fromDate,o=e.toDate;return n?i=Cr(n):s&&(i=new Date(s,0,1)),a?o=yp(a):r&&(o=new Date(r,11,31)),{fromDate:i?Oc(i):void 0,toDate:o?Oc(o):void 0}}var ZA=f.createContext(void 0);function _V(e){var s,r=e.initialProps,n=NV(),a=CV(r),i=a.fromDate,o=a.toDate,l=(s=r.captionLayout)!==null&&s!==void 0?s:n.captionLayout;l!=="buttons"&&(!i||!o)&&(l="buttons");var c;(kp(r)||nh(r)||ah(r))&&(c=r.onSelect);var d=He(He(He({},n),r),{captionLayout:l,classNames:He(He({},n.classNames),r.classNames),components:He({},r.components),formatters:He(He({},n.formatters),r.formatters),fromDate:i,labels:He(He({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:He(He({},n.modifiers),r.modifiers),modifiersClassNames:He(He({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:He(He({},n.styles),r.styles),toDate:o});return t.jsx(ZA.Provider,{value:d,children:e.children})}function It(){var e=f.useContext(ZA);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function JA(e){var s=It(),r=s.locale,n=s.classNames,a=s.styles,i=s.formatters.formatCaption;return t.jsx("div",{className:n.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:i(e.displayMonth,{locale:r})})}function SV(e){return t.jsx("svg",He({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:t.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function XA(e){var s,r,n=e.onChange,a=e.value,i=e.children,o=e.caption,l=e.className,c=e.style,d=It(),u=(r=(s=d.components)===null||s===void 0?void 0:s.IconDropdown)!==null&&r!==void 0?r:SV;return t.jsxs("div",{className:l,style:c,children:[t.jsx("span",{className:d.classNames.vhidden,children:e["aria-label"]}),t.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:a,onChange:n,children:i}),t.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[o,t.jsx(u,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function kV(e){var s,r=It(),n=r.fromDate,a=r.toDate,i=r.styles,o=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,d=r.components,u=r.labels.labelMonthDropdown;if(!n)return t.jsx(t.Fragment,{});if(!a)return t.jsx(t.Fragment,{});var m=[];if(G9(n,a))for(var h=Cr(n),p=n.getMonth();p<=a.getMonth();p++)m.push($x(h,p));else for(var h=Cr(new Date),p=0;p<=11;p++)m.push($x(h,p));var g=function(v){var y=Number(v.target.value),j=$x(Cr(e.displayMonth),y);e.onChange(j)},x=(s=d==null?void 0:d.Dropdown)!==null&&s!==void 0?s:XA;return t.jsx(x,{name:"months","aria-label":u(),className:c.dropdown_month,style:i.dropdown_month,onChange:g,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:o}),children:m.map(function(v){return t.jsx("option",{value:v.getMonth(),children:l(v,{locale:o})},v.getMonth())})})}function EV(e){var s,r=e.displayMonth,n=It(),a=n.fromDate,i=n.toDate,o=n.locale,l=n.styles,c=n.classNames,d=n.components,u=n.formatters.formatYearCaption,m=n.labels.labelYearDropdown,h=[];if(!a)return t.jsx(t.Fragment,{});if(!i)return t.jsx(t.Fragment,{});for(var p=a.getFullYear(),g=i.getFullYear(),x=p;x<=g;x++)h.push(ZN(AE(new Date),x));var v=function(j){var w=ZN(Cr(r),Number(j.target.value));e.onChange(w)},y=(s=d==null?void 0:d.Dropdown)!==null&&s!==void 0?s:XA;return t.jsx(y,{name:"years","aria-label":m(),className:c.dropdown_year,style:l.dropdown_year,onChange:v,value:r.getFullYear(),caption:u(r,{locale:o}),children:h.map(function(j){return t.jsx("option",{value:j.getFullYear(),children:u(j,{locale:o})},j.getFullYear())})})}function AV(e,s){var r=f.useState(e),n=r[0],a=r[1],i=s===void 0?n:s;return[i,a]}function TV(e){var s=e.month,r=e.defaultMonth,n=e.today,a=s||r||n||new Date,i=e.toDate,o=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(i&&Lc(i,a)<0){var d=-1*(c-1);a=Un(i,d)}return o&&Lc(a,o)<0&&(a=o),Cr(a)}function PV(){var e=It(),s=TV(e),r=AV(s,e.month),n=r[0],a=r[1],i=function(o){var l;if(!e.disableNavigation){var c=Cr(o);a(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[n,i]}function RV(e,s){for(var r=s.reverseMonths,n=s.numberOfMonths,a=Cr(e),i=Cr(Un(a,n)),o=Lc(i,a),l=[],c=0;c<o;c++){var d=Un(a,c);l.push(d)}return r&&(l=l.reverse()),l}function IV(e,s){if(!s.disableNavigation){var r=s.toDate,n=s.pagedNavigation,a=s.numberOfMonths,i=a===void 0?1:a,o=n?i:1,l=Cr(e);if(!r)return Un(l,o);var c=Lc(r,e);if(!(c<i))return Un(l,o)}}function DV(e,s){if(!s.disableNavigation){var r=s.fromDate,n=s.pagedNavigation,a=s.numberOfMonths,i=a===void 0?1:a,o=n?i:1,l=Cr(e);if(!r)return Un(l,-o);var c=Lc(l,r);if(!(c<=0))return Un(l,-o)}}var eT=f.createContext(void 0);function OV(e){var s=It(),r=PV(),n=r[0],a=r[1],i=RV(n,s),o=IV(n,s),l=DV(n,s),c=function(m){return i.some(function(h){return hw(m,h)})},d=function(m,h){c(m)||(h&&Nu(m,h)?a(Un(m,1+s.numberOfMonths*-1)):a(m))},u={currentMonth:n,displayMonths:i,goToMonth:a,goToDate:d,previousMonth:l,nextMonth:o,isDateDisplayed:c};return t.jsx(eT.Provider,{value:u,children:e.children})}function ih(){var e=f.useContext(eT);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function s1(e){var s,r=It(),n=r.classNames,a=r.styles,i=r.components,o=ih().goToMonth,l=function(u){o(Un(u,e.displayIndex?-e.displayIndex:0))},c=(s=i==null?void 0:i.CaptionLabel)!==null&&s!==void 0?s:JA,d=t.jsx(c,{id:e.id,displayMonth:e.displayMonth});return t.jsxs("div",{className:n.caption_dropdowns,style:a.caption_dropdowns,children:[t.jsx("div",{className:n.vhidden,children:d}),t.jsx(kV,{onChange:l,displayMonth:e.displayMonth}),t.jsx(EV,{onChange:l,displayMonth:e.displayMonth})]})}function MV(e){return t.jsx("svg",He({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:t.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function LV(e){return t.jsx("svg",He({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:t.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var pf=f.forwardRef(function(e,s){var r=It(),n=r.classNames,a=r.styles,i=[n.button_reset,n.button];e.className&&i.push(e.className);var o=i.join(" "),l=He(He({},a.button_reset),a.button);return e.style&&Object.assign(l,e.style),t.jsx("button",He({},e,{ref:s,type:"button",className:o,style:l}))});function FV(e){var s,r,n=It(),a=n.dir,i=n.locale,o=n.classNames,l=n.styles,c=n.labels,d=c.labelPrevious,u=c.labelNext,m=n.components;if(!e.nextMonth&&!e.previousMonth)return t.jsx(t.Fragment,{});var h=d(e.previousMonth,{locale:i}),p=[o.nav_button,o.nav_button_previous].join(" "),g=u(e.nextMonth,{locale:i}),x=[o.nav_button,o.nav_button_next].join(" "),v=(s=m==null?void 0:m.IconRight)!==null&&s!==void 0?s:LV,y=(r=m==null?void 0:m.IconLeft)!==null&&r!==void 0?r:MV;return t.jsxs("div",{className:o.nav,style:l.nav,children:[!e.hidePrevious&&t.jsx(pf,{name:"previous-month","aria-label":h,className:p,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?t.jsx(v,{className:o.nav_icon,style:l.nav_icon}):t.jsx(y,{className:o.nav_icon,style:l.nav_icon})}),!e.hideNext&&t.jsx(pf,{name:"next-month","aria-label":g,className:x,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?t.jsx(y,{className:o.nav_icon,style:l.nav_icon}):t.jsx(v,{className:o.nav_icon,style:l.nav_icon})})]})}function r1(e){var s=It().numberOfMonths,r=ih(),n=r.previousMonth,a=r.nextMonth,i=r.goToMonth,o=r.displayMonths,l=o.findIndex(function(g){return hw(e.displayMonth,g)}),c=l===0,d=l===o.length-1,u=s>1&&(c||!d),m=s>1&&(d||!c),h=function(){n&&i(n)},p=function(){a&&i(a)};return t.jsx(FV,{displayMonth:e.displayMonth,hideNext:u,hidePrevious:m,nextMonth:a,previousMonth:n,onPreviousClick:h,onNextClick:p})}function $V(e){var s,r=It(),n=r.classNames,a=r.disableNavigation,i=r.styles,o=r.captionLayout,l=r.components,c=(s=l==null?void 0:l.CaptionLabel)!==null&&s!==void 0?s:JA,d;return a?d=t.jsx(c,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?d=t.jsx(s1,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?d=t.jsxs(t.Fragment,{children:[t.jsx(s1,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),t.jsx(r1,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):d=t.jsxs(t.Fragment,{children:[t.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),t.jsx(r1,{displayMonth:e.displayMonth,id:e.id})]}),t.jsx("div",{className:n.caption,style:i.caption,children:d})}function UV(e){var s=It(),r=s.footer,n=s.styles,a=s.classNames.tfoot;return r?t.jsx("tfoot",{className:a,style:n.tfoot,children:t.jsx("tr",{children:t.jsx("td",{colSpan:8,children:r})})}):t.jsx(t.Fragment,{})}function BV(e,s,r){for(var n=r?Go(new Date):ua(new Date,{locale:e,weekStartsOn:s}),a=[],i=0;i<7;i++){var o=gs(n,i);a.push(o)}return a}function zV(){var e=It(),s=e.classNames,r=e.styles,n=e.showWeekNumber,a=e.locale,i=e.weekStartsOn,o=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,d=BV(a,i,o);return t.jsxs("tr",{style:r.head_row,className:s.head_row,children:[n&&t.jsx("td",{style:r.head_cell,className:s.head_cell}),d.map(function(u,m){return t.jsx("th",{scope:"col",className:s.head_cell,style:r.head_cell,"aria-label":c(u,{locale:a}),children:l(u,{locale:a})},m)})]})}function qV(){var e,s=It(),r=s.classNames,n=s.styles,a=s.components,i=(e=a==null?void 0:a.HeadRow)!==null&&e!==void 0?e:zV;return t.jsx("thead",{style:n.head,className:r.head,children:t.jsx(i,{})})}function WV(e){var s=It(),r=s.locale,n=s.formatters.formatDay;return t.jsx(t.Fragment,{children:n(e.date,{locale:r})})}var xw=f.createContext(void 0);function VV(e){if(!nh(e.initialProps)){var s={selected:void 0,modifiers:{disabled:[]}};return t.jsx(xw.Provider,{value:s,children:e.children})}return t.jsx(HV,{initialProps:e.initialProps,children:e.children})}function HV(e){var s=e.initialProps,r=e.children,n=s.selected,a=s.min,i=s.max,o=function(d,u,m){var h,p;(h=s.onDayClick)===null||h===void 0||h.call(s,d,u,m);var g=!!(u.selected&&a&&(n==null?void 0:n.length)===a);if(!g){var x=!!(!u.selected&&i&&(n==null?void 0:n.length)===i);if(!x){var v=n?QA([],n):[];if(u.selected){var y=v.findIndex(function(j){return nr(d,j)});v.splice(y,1)}else v.push(d);(p=s.onSelect)===null||p===void 0||p.call(s,v,d,u,m)}}},l={disabled:[]};n&&l.disabled.push(function(d){var u=i&&n.length>i-1,m=n.some(function(h){return nr(h,d)});return!!(u&&!m)});var c={selected:n,onDayClick:o,modifiers:l};return t.jsx(xw.Provider,{value:c,children:r})}function gw(){var e=f.useContext(xw);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function KV(e,s){var r=s||{},n=r.from,a=r.to;return n&&a?nr(a,e)&&nr(n,e)?void 0:nr(a,e)?{from:a,to:void 0}:nr(n,e)?void 0:uf(n,e)?{from:e,to:a}:{from:n,to:e}:a?uf(e,a)?{from:a,to:e}:{from:e,to:a}:n?Nu(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}var vw=f.createContext(void 0);function GV(e){if(!ah(e.initialProps)){var s={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return t.jsx(vw.Provider,{value:s,children:e.children})}return t.jsx(YV,{initialProps:e.initialProps,children:e.children})}function YV(e){var s=e.initialProps,r=e.children,n=s.selected,a=n||{},i=a.from,o=a.to,l=s.min,c=s.max,d=function(p,g,x){var v,y;(v=s.onDayClick)===null||v===void 0||v.call(s,p,g,x);var j=KV(p,n);(y=s.onSelect)===null||y===void 0||y.call(s,j,p,g,x)},u={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(u.range_start=[i],o?(u.range_end=[o],nr(i,o)||(u.range_middle=[{after:i,before:o}])):u.range_end=[i]):o&&(u.range_start=[o],u.range_end=[o]),l&&(i&&!o&&u.disabled.push({after:Fx(i,l-1),before:gs(i,l-1)}),i&&o&&u.disabled.push({after:i,before:gs(i,l-1)}),!i&&o&&u.disabled.push({after:Fx(o,l-1),before:gs(o,l-1)})),c){if(i&&!o&&(u.disabled.push({before:gs(i,-c+1)}),u.disabled.push({after:gs(i,c-1)})),i&&o){var m=En(o,i)+1,h=c-m;u.disabled.push({before:Fx(i,h)}),u.disabled.push({after:gs(o,h)})}!i&&o&&(u.disabled.push({before:gs(o,-c+1)}),u.disabled.push({after:gs(o,c-1)}))}return t.jsx(vw.Provider,{value:{selected:n,onDayClick:d,modifiers:u},children:r})}function yw(){var e=f.useContext(vw);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function dm(e){return Array.isArray(e)?QA([],e):e!==void 0?[e]:[]}function QV(e){var s={};return Object.entries(e).forEach(function(r){var n=r[0],a=r[1];s[n]=dm(a)}),s}var Bn;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Bn||(Bn={}));var ZV=Bn.Selected,ja=Bn.Disabled,JV=Bn.Hidden,XV=Bn.Today,Ux=Bn.RangeEnd,Bx=Bn.RangeMiddle,zx=Bn.RangeStart,e7=Bn.Outside;function t7(e,s,r){var n,a=(n={},n[ZV]=dm(e.selected),n[ja]=dm(e.disabled),n[JV]=dm(e.hidden),n[XV]=[e.today],n[Ux]=[],n[Bx]=[],n[zx]=[],n[e7]=[],n);return e.fromDate&&a[ja].push({before:e.fromDate}),e.toDate&&a[ja].push({after:e.toDate}),nh(e)?a[ja]=a[ja].concat(s.modifiers[ja]):ah(e)&&(a[ja]=a[ja].concat(r.modifiers[ja]),a[zx]=r.modifiers[zx],a[Bx]=r.modifiers[Bx],a[Ux]=r.modifiers[Ux]),a}var tT=f.createContext(void 0);function s7(e){var s=It(),r=gw(),n=yw(),a=t7(s,r,n),i=QV(s.modifiers),o=He(He({},a),i);return t.jsx(tT.Provider,{value:o,children:e.children})}function sT(){var e=f.useContext(tT);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function r7(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function n7(e){return!!(e&&typeof e=="object"&&"from"in e)}function a7(e){return!!(e&&typeof e=="object"&&"after"in e)}function i7(e){return!!(e&&typeof e=="object"&&"before"in e)}function o7(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function l7(e,s){var r,n=s.from,a=s.to;if(n&&a){var i=En(a,n)<0;i&&(r=[a,n],n=r[0],a=r[1]);var o=En(e,n)>=0&&En(a,e)>=0;return o}return a?nr(a,e):n?nr(n,e):!1}function c7(e){return ow(e)}function d7(e){return Array.isArray(e)&&e.every(ow)}function u7(e,s){return s.some(function(r){if(typeof r=="boolean")return r;if(c7(r))return nr(e,r);if(d7(r))return r.includes(e);if(n7(r))return l7(e,r);if(o7(r))return r.dayOfWeek.includes(e.getDay());if(r7(r)){var n=En(r.before,e),a=En(r.after,e),i=n>0,o=a<0,l=uf(r.before,r.after);return l?o&&i:i||o}return a7(r)?En(e,r.after)>0:i7(r)?En(r.before,e)>0:typeof r=="function"?r(e):!1})}function jw(e,s,r){var n=Object.keys(s).reduce(function(i,o){var l=s[o];return u7(e,l)&&i.push(o),i},[]),a={};return n.forEach(function(i){return a[i]=!0}),r&&!hw(e,r)&&(a.outside=!0),a}function h7(e,s){for(var r=Cr(e[0]),n=yp(e[e.length-1]),a,i,o=r;o<=n;){var l=jw(o,s),c=!l.disabled&&!l.hidden;if(!c){o=gs(o,1);continue}if(l.selected)return o;l.today&&!i&&(i=o),a||(a=o),o=gs(o,1)}return i||a}var m7=365;function rT(e,s){var r=s.moveBy,n=s.direction,a=s.context,i=s.modifiers,o=s.retry,l=o===void 0?{count:0,lastFocused:e}:o,c=a.weekStartsOn,d=a.fromDate,u=a.toDate,m=a.locale,h={day:gs,week:Gv,month:Un,year:Mq,startOfWeek:function(v){return a.ISOWeek?Go(v):ua(v,{locale:m,weekStartsOn:c})},endOfWeek:function(v){return a.ISOWeek?TE(v):dw(v,{locale:m,weekStartsOn:c})}},p=h[r](e,n==="after"?1:-1);n==="before"&&d?p=Lq([d,p]):n==="after"&&u&&(p=Fq([u,p]));var g=!0;if(i){var x=jw(p,i);g=!x.disabled&&!x.hidden}return g?p:l.count>m7?l.lastFocused:rT(p,{moveBy:r,direction:n,context:a,modifiers:i,retry:He(He({},l),{count:l.count+1})})}var nT=f.createContext(void 0);function f7(e){var s=ih(),r=sT(),n=f.useState(),a=n[0],i=n[1],o=f.useState(),l=o[0],c=o[1],d=h7(s.displayMonths,r),u=a??(l&&s.isDateDisplayed(l))?l:d,m=function(){c(a),i(void 0)},h=function(v){i(v)},p=It(),g=function(v,y){if(a){var j=rT(a,{moveBy:v,direction:y,context:p,modifiers:r});nr(a,j)||(s.goToDate(j,a),h(j))}},x={focusedDay:a,focusTarget:u,blur:m,focus:h,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return t.jsx(nT.Provider,{value:x,children:e.children})}function ww(){var e=f.useContext(nT);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function p7(e,s){var r=sT(),n=jw(e,r,s);return n}var bw=f.createContext(void 0);function x7(e){if(!kp(e.initialProps)){var s={selected:void 0};return t.jsx(bw.Provider,{value:s,children:e.children})}return t.jsx(g7,{initialProps:e.initialProps,children:e.children})}function g7(e){var s=e.initialProps,r=e.children,n=function(i,o,l){var c,d,u;if((c=s.onDayClick)===null||c===void 0||c.call(s,i,o,l),o.selected&&!s.required){(d=s.onSelect)===null||d===void 0||d.call(s,void 0,i,o,l);return}(u=s.onSelect)===null||u===void 0||u.call(s,i,i,o,l)},a={selected:s.selected,onDayClick:n};return t.jsx(bw.Provider,{value:a,children:r})}function aT(){var e=f.useContext(bw);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function v7(e,s){var r=It(),n=aT(),a=gw(),i=yw(),o=ww(),l=o.focusDayAfter,c=o.focusDayBefore,d=o.focusWeekAfter,u=o.focusWeekBefore,m=o.blur,h=o.focus,p=o.focusMonthBefore,g=o.focusMonthAfter,x=o.focusYearBefore,v=o.focusYearAfter,y=o.focusStartOfWeek,j=o.focusEndOfWeek,w=function(K){var D,q,re,S;kp(r)?(D=n.onDayClick)===null||D===void 0||D.call(n,e,s,K):nh(r)?(q=a.onDayClick)===null||q===void 0||q.call(a,e,s,K):ah(r)?(re=i.onDayClick)===null||re===void 0||re.call(i,e,s,K):(S=r.onDayClick)===null||S===void 0||S.call(r,e,s,K)},b=function(K){var D;h(e),(D=r.onDayFocus)===null||D===void 0||D.call(r,e,s,K)},N=function(K){var D;m(),(D=r.onDayBlur)===null||D===void 0||D.call(r,e,s,K)},_=function(K){var D;(D=r.onDayMouseEnter)===null||D===void 0||D.call(r,e,s,K)},C=function(K){var D;(D=r.onDayMouseLeave)===null||D===void 0||D.call(r,e,s,K)},E=function(K){var D;(D=r.onDayPointerEnter)===null||D===void 0||D.call(r,e,s,K)},k=function(K){var D;(D=r.onDayPointerLeave)===null||D===void 0||D.call(r,e,s,K)},A=function(K){var D;(D=r.onDayTouchCancel)===null||D===void 0||D.call(r,e,s,K)},L=function(K){var D;(D=r.onDayTouchEnd)===null||D===void 0||D.call(r,e,s,K)},H=function(K){var D;(D=r.onDayTouchMove)===null||D===void 0||D.call(r,e,s,K)},F=function(K){var D;(D=r.onDayTouchStart)===null||D===void 0||D.call(r,e,s,K)},I=function(K){var D;(D=r.onDayKeyUp)===null||D===void 0||D.call(r,e,s,K)},G=function(K){var D;switch(K.key){case"ArrowLeft":K.preventDefault(),K.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowRight":K.preventDefault(),K.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowDown":K.preventDefault(),K.stopPropagation(),d();break;case"ArrowUp":K.preventDefault(),K.stopPropagation(),u();break;case"PageUp":K.preventDefault(),K.stopPropagation(),K.shiftKey?x():p();break;case"PageDown":K.preventDefault(),K.stopPropagation(),K.shiftKey?v():g();break;case"Home":K.preventDefault(),K.stopPropagation(),y();break;case"End":K.preventDefault(),K.stopPropagation(),j();break}(D=r.onDayKeyDown)===null||D===void 0||D.call(r,e,s,K)},ee={onClick:w,onFocus:b,onBlur:N,onKeyDown:G,onKeyUp:I,onMouseEnter:_,onMouseLeave:C,onPointerEnter:E,onPointerLeave:k,onTouchCancel:A,onTouchEnd:L,onTouchMove:H,onTouchStart:F};return ee}function y7(){var e=It(),s=aT(),r=gw(),n=yw(),a=kp(e)?s.selected:nh(e)?r.selected:ah(e)?n.selected:void 0;return a}function j7(e){return Object.values(Bn).includes(e)}function w7(e,s){var r=[e.classNames.day];return Object.keys(s).forEach(function(n){var a=e.modifiersClassNames[n];if(a)r.push(a);else if(j7(n)){var i=e.classNames["day_".concat(n)];i&&r.push(i)}}),r}function b7(e,s){var r=He({},e.styles.day);return Object.keys(s).forEach(function(n){var a;r=He(He({},r),(a=e.modifiersStyles)===null||a===void 0?void 0:a[n])}),r}function N7(e,s,r){var n,a,i,o=It(),l=ww(),c=p7(e,s),d=v7(e,c),u=y7(),m=!!(o.onDayClick||o.mode!=="default");f.useEffect(function(){var _;c.outside||l.focusedDay&&m&&nr(l.focusedDay,e)&&((_=r.current)===null||_===void 0||_.focus())},[l.focusedDay,e,r,m,c.outside]);var h=w7(o,c).join(" "),p=b7(o,c),g=!!(c.outside&&!o.showOutsideDays||c.hidden),x=(i=(a=o.components)===null||a===void 0?void 0:a.DayContent)!==null&&i!==void 0?i:WV,v=t.jsx(x,{date:e,displayMonth:s,activeModifiers:c}),y={style:p,className:h,children:v,role:"gridcell"},j=l.focusTarget&&nr(l.focusTarget,e)&&!c.outside,w=l.focusedDay&&nr(l.focusedDay,e),b=He(He(He({},y),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=w||j?0:-1,n)),d),N={isButton:m,isHidden:g,activeModifiers:c,selectedDays:u,buttonProps:b,divProps:y};return N}function C7(e){var s=f.useRef(null),r=N7(e.date,e.displayMonth,s);return r.isHidden?t.jsx("div",{role:"gridcell"}):r.isButton?t.jsx(pf,He({name:"day",ref:s},r.buttonProps)):t.jsx("div",He({},r.divProps))}function _7(e){var s=e.number,r=e.dates,n=It(),a=n.onWeekNumberClick,i=n.styles,o=n.classNames,l=n.locale,c=n.labels.labelWeekNumber,d=n.formatters.formatWeekNumber,u=d(Number(s),{locale:l});if(!a)return t.jsx("span",{className:o.weeknumber,style:i.weeknumber,children:u});var m=c(Number(s),{locale:l}),h=function(p){a(s,r,p)};return t.jsx(pf,{name:"week-number","aria-label":m,className:o.weeknumber,style:i.weeknumber,onClick:h,children:u})}function S7(e){var s,r,n=It(),a=n.styles,i=n.classNames,o=n.showWeekNumber,l=n.components,c=(s=l==null?void 0:l.Day)!==null&&s!==void 0?s:C7,d=(r=l==null?void 0:l.WeekNumber)!==null&&r!==void 0?r:_7,u;return o&&(u=t.jsx("td",{className:i.cell,style:a.cell,children:t.jsx(d,{number:e.weekNumber,dates:e.dates})})),t.jsxs("tr",{className:i.row,style:a.row,children:[u,e.dates.map(function(m){return t.jsx("td",{className:i.cell,style:a.cell,role:"presentation",children:t.jsx(c,{displayMonth:e.displayMonth,date:m})},W9(m))})]})}function n1(e,s,r){for(var n=r!=null&&r.ISOWeek?TE(s):dw(s,r),a=r!=null&&r.ISOWeek?Go(e):ua(e,r),i=En(n,a),o=[],l=0;l<=i;l++)o.push(gs(a,l));var c=o.reduce(function(d,u){var m=r!=null&&r.ISOWeek?PE(u):IE(u,r),h=d.find(function(p){return p.weekNumber===m});return h?(h.dates.push(u),d):(d.push({weekNumber:m,dates:[u]}),d)},[]);return c}function k7(e,s){var r=n1(Cr(e),yp(e),s);if(s!=null&&s.useFixedWeeks){var n=H9(e,s);if(n<6){var a=r[r.length-1],i=a.dates[a.dates.length-1],o=Gv(i,6-n),l=n1(Gv(i,1),o,s);r.push.apply(r,l)}}return r}function E7(e){var s,r,n,a=It(),i=a.locale,o=a.classNames,l=a.styles,c=a.hideHead,d=a.fixedWeeks,u=a.components,m=a.weekStartsOn,h=a.firstWeekContainsDate,p=a.ISOWeek,g=k7(e.displayMonth,{useFixedWeeks:!!d,ISOWeek:p,locale:i,weekStartsOn:m,firstWeekContainsDate:h}),x=(s=u==null?void 0:u.Head)!==null&&s!==void 0?s:qV,v=(r=u==null?void 0:u.Row)!==null&&r!==void 0?r:S7,y=(n=u==null?void 0:u.Footer)!==null&&n!==void 0?n:UV;return t.jsxs("table",{id:e.id,className:o.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&t.jsx(x,{}),t.jsx("tbody",{className:o.tbody,style:l.tbody,children:g.map(function(j){return t.jsx(v,{displayMonth:e.displayMonth,dates:j.dates,weekNumber:j.weekNumber},j.weekNumber)})}),t.jsx(y,{displayMonth:e.displayMonth})]})}function A7(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var T7=A7()?f.useLayoutEffect:f.useEffect,qx=!1,P7=0;function a1(){return"react-day-picker-".concat(++P7)}function R7(e){var s,r=e??(qx?a1():null),n=f.useState(r),a=n[0],i=n[1];return T7(function(){a===null&&i(a1())},[]),f.useEffect(function(){qx===!1&&(qx=!0)},[]),(s=e??a)!==null&&s!==void 0?s:void 0}function I7(e){var s,r,n=It(),a=n.dir,i=n.classNames,o=n.styles,l=n.components,c=ih().displayMonths,d=R7(n.id?"".concat(n.id,"-").concat(e.displayIndex):void 0),u=n.id?"".concat(n.id,"-grid-").concat(e.displayIndex):void 0,m=[i.month],h=o.month,p=e.displayIndex===0,g=e.displayIndex===c.length-1,x=!p&&!g;a==="rtl"&&(s=[p,g],g=s[0],p=s[1]),p&&(m.push(i.caption_start),h=He(He({},h),o.caption_start)),g&&(m.push(i.caption_end),h=He(He({},h),o.caption_end)),x&&(m.push(i.caption_between),h=He(He({},h),o.caption_between));var v=(r=l==null?void 0:l.Caption)!==null&&r!==void 0?r:$V;return t.jsxs("div",{className:m.join(" "),style:h,children:[t.jsx(v,{id:d,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),t.jsx(E7,{id:u,"aria-labelledby":d,displayMonth:e.displayMonth})]},e.displayIndex)}function D7(e){var s=It(),r=s.classNames,n=s.styles;return t.jsx("div",{className:r.months,style:n.months,children:e.children})}function O7(e){var s,r,n=e.initialProps,a=It(),i=ww(),o=ih(),l=f.useState(!1),c=l[0],d=l[1];f.useEffect(function(){a.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),d(!0)))},[a.initialFocus,c,i.focus,i.focusTarget,i]);var u=[a.classNames.root,a.className];a.numberOfMonths>1&&u.push(a.classNames.multiple_months),a.showWeekNumber&&u.push(a.classNames.with_weeknumber);var m=He(He({},a.styles.root),a.style),h=Object.keys(n).filter(function(g){return g.startsWith("data-")}).reduce(function(g,x){var v;return He(He({},g),(v={},v[x]=n[x],v))},{}),p=(r=(s=n.components)===null||s===void 0?void 0:s.Months)!==null&&r!==void 0?r:D7;return t.jsx("div",He({className:u.join(" "),style:m,dir:a.dir,id:a.id,nonce:n.nonce,title:n.title,lang:n.lang},h,{children:t.jsx(p,{children:o.displayMonths.map(function(g,x){return t.jsx(I7,{displayIndex:x,displayMonth:g},x)})})}))}function M7(e){var s=e.children,r=iV(e,["children"]);return t.jsx(_V,{initialProps:r,children:t.jsx(OV,{children:t.jsx(x7,{initialProps:r,children:t.jsx(VV,{initialProps:r,children:t.jsx(GV,{initialProps:r,children:t.jsx(s7,{children:t.jsx(f7,{children:s})})})})})})})}function L7(e){return t.jsx(M7,He({},e,{children:t.jsx(O7,{initialProps:e})}))}function Nw({className:e,classNames:s,showOutsideDays:r=!0,...n}){return t.jsx(L7,{showOutsideDays:r,className:J("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:J(gu({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:J(gu({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:({...a})=>t.jsx(nl,{className:"h-4 w-4"}),IconRight:({...a})=>t.jsx(ln,{className:"h-4 w-4"})},...n})}Nw.displayName="Calendar";async function sy(e){var s;try{const n="https://zthuvqtshgcbgiuvypvw.supabase.co/functions/v1/send-ticket-notification",{data:a}=await B.auth.getSession(),i=(s=a==null?void 0:a.session)==null?void 0:s.access_token,o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",...i&&{Authorization:`Bearer ${i}`}},body:JSON.stringify(e)});if(o.ok)console.log("Ticket notification sent successfully");else{const l=await o.json();console.error("Failed to send ticket notification:",l)}}catch(r){console.error("Error sending ticket notification:",r)}}const F7={epic:{label:"Epic",icon:t.jsx(_c,{className:"h-4 w-4"}),description:"High-level project initiative",color:"bg-purple-500/10 text-purple-500 border-purple-500/20"},story:{label:"Story",icon:t.jsx(ir,{className:"h-4 w-4"}),description:"User story or feature request",color:"bg-blue-500/10 text-blue-500 border-blue-500/20"},bug:{label:"Bug",icon:t.jsx(Wc,{className:"h-4 w-4"}),description:"Issue with running system",color:"bg-red-500/10 text-red-500 border-red-500/20"},monitoring:{label:"Monitoring",icon:t.jsx(Fa,{className:"h-4 w-4"}),description:"Post-deployment monitoring task",color:"bg-green-500/10 text-green-500 border-green-500/20"}},i1=["image/jpeg","image/png","image/gif","image/webp","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain"],$7=10*1024*1024;function Cw({open:e,onOpenChange:s,preselectedProjectId:r}){const{company:n,isCompanyAdmin:a,isInfraweaveAdmin:i,isEngineer:o}=Ze(),{user:l}=ft(),{data:c=[]}=fp(),{data:d=[]}=pp(),u=ht(),m=f.useRef(null),h=i?d:c,{data:p}=fe({queryKey:["project",r],queryFn:async()=>{if(!r)return null;const{data:Y,error:oe}=await B.from("projects").select("*").eq("id",r).single();return oe?null:Y},enabled:!!r}),[g,x]=f.useState(""),[v,y]=f.useState(""),[j,w]=f.useState("story"),[b,N]=f.useState("medium"),[_,C]=f.useState(""),[E,k]=f.useState(""),[A,L]=f.useState(void 0),[H,F]=f.useState(!1),[I,G]=f.useState([]),{data:ee=[]}=fe({queryKey:["project-epics",_],queryFn:async()=>{if(!_)return[];const{data:Y,error:oe}=await B.from("tickets").select("id, title, status").eq("project_id",_).eq("category","epic").not("status","in",'("closed","resolved")').order("created_at",{ascending:!1});return oe?[]:Y},enabled:!!_&&j!=="epic"});f.useEffect(()=>{e&&r&&C(r)},[e,r]),f.useEffect(()=>{j==="epic"&&k("")},[j]),f.useEffect(()=>{e||(x(""),y(""),w("story"),N("medium"),C(r||""),k(""),L(void 0),G([]))},[e,r]);const K=a||i,D=K?["epic","story","bug","monitoring"]:["story","bug","monitoring"],q=Y=>{const oe=Array.from(Y.target.files||[]),X=[];for(const xe of oe){if(!i1.includes(xe.type)){z.error(`${xe.name}: File type not allowed`);continue}if(xe.size>$7){z.error(`${xe.name}: File size exceeds 10MB limit`);continue}const ve={file:xe,uploading:!1};xe.type.startsWith("image/")&&(ve.preview=URL.createObjectURL(xe)),X.push(ve)}G(xe=>[...xe,...X]),m.current&&(m.current.value="")},re=Y=>{G(oe=>{const X=[...oe];return X[Y].preview&&URL.revokeObjectURL(X[Y].preview),X.splice(Y,1),X})},S=async Y=>{const oe=[];for(let X=0;X<I.length;X++){const{file:xe}=I[X];G(ve=>{const Ae=[...ve];return Ae[X]={...Ae[X],uploading:!0},Ae});try{const ve=xe.name.split(".").pop(),Ae=`${l==null?void 0:l.id}/${Y}/${Date.now()}-${Math.random().toString(36).substr(2,9)}.${ve}`,{error:Be}=await B.storage.from("ticket-attachments").upload(Ae,xe);if(Be)throw Be;const{error:et}=await B.from("ticket_attachments").insert({ticket_id:Y,name:xe.name,file_path:Ae,file_size:xe.size,mime_type:xe.type,uploaded_by:l==null?void 0:l.id});if(et)throw et;oe.push(Ae)}catch(ve){console.error(`Failed to upload ${xe.name}:`,ve),G(Ae=>{const Be=[...Ae];return Be[X]={...Be[X],uploading:!1,error:"Upload failed"},Be})}}return oe},R=async Y=>{if(Y.preventDefault(),!g.trim()){z.error("Title is required");return}if(!_){z.error("Please select a project");return}const oe=(p==null?void 0:p.organization_id)||(n==null?void 0:n.id);if(!oe){z.error("Organization not found");return}if(!D.includes(j)){z.error("You do not have permission to create this ticket type");return}F(!0);try{const{data:X,error:xe}=await B.from("tickets").insert({title:g.trim(),description:v.trim()||null,category:j,priority:b,status:"open",project_id:_,organization_id:oe,reporter_id:l==null?void 0:l.id,parent_ticket_id:E||null,due_date:A?A.toISOString():null}).select("id").single();if(xe)throw xe;I.length>0&&(X!=null&&X.id)&&await S(X.id),z.success("Ticket created successfully"),u.invalidateQueries({queryKey:["company-tickets"]}),u.invalidateQueries({queryKey:["my-tickets"]}),u.invalidateQueries({queryKey:["project-tickets",_]});const{data:ve}=await B.from("profiles_safe").select("id, full_name, email").eq("id",l==null?void 0:l.id).single(),Ae=h.find(Be=>Be.id===_)||p;if(ve!=null&&ve.email&&(X!=null&&X.id)){const Be=[{email:ve.email,name:ve.full_name||void 0,role:"creator"}];sy({type:"created",ticketId:X.id,ticketTitle:g.trim(),ticketDescription:v.trim()||void 0,projectName:Ae==null?void 0:Ae.name,status:"open",priority:b,recipients:Be})}s(!1)}catch(X){console.error("Error creating ticket:",X),z.error("Failed to create ticket")}finally{F(!1)}},te=Y=>Y.type.startsWith("image/")?t.jsx(Bu,{className:"h-4 w-4"}):t.jsx(Zt,{className:"h-4 w-4"}),Q=h.find(Y=>Y.id===_)||p;return t.jsx(Xt,{open:e,onOpenChange:s,children:t.jsxs(zt,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",preventClose:!0,children:[t.jsxs(es,{children:[t.jsx(ts,{className:"text-xl font-semibold",children:"Create New Ticket"}),t.jsx(ss,{children:Q?`Create a new ticket for ${Q.name}`:o&&!K?"As an engineer, you can create Story, Bug, and Monitoring tickets.":"Create a new ticket for your project."})]}),t.jsxs("form",{onSubmit:R,className:"space-y-4 py-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Category *"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:D.map(Y=>{const oe=F7[Y];return t.jsxs("button",{type:"button",onClick:()=>w(Y),className:`flex items-center gap-2 p-3 rounded-lg border transition-all text-left ${j===Y?`${oe.color} border-2`:"border-border hover:border-primary/50 bg-card"}`,children:[oe.icon,t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-sm",children:oe.label}),t.jsx("div",{className:"text-xs text-muted-foreground",children:oe.description})]})]},Y)})}),!K&&t.jsx("p",{className:"text-xs text-muted-foreground",children:"Epic tickets can only be created by Company Admins."})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"ticket-title",children:"Title *"}),t.jsx(se,{id:"ticket-title",value:g,onChange:Y=>x(Y.target.value),placeholder:"Enter ticket title",autoFocus:!0})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"ticket-description",children:"Description"}),t.jsx(Bt,{id:"ticket-description",value:v,onChange:Y=>y(Y.target.value),placeholder:"Describe the ticket in detail...",className:"min-h-[100px]"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Project *"}),t.jsxs($e,{value:_,onValueChange:C,disabled:!!r,children:[t.jsx(Le,{children:t.jsx(Ue,{placeholder:"Select project"})}),t.jsx(Fe,{children:h.map(Y=>t.jsx(Z,{value:Y.id,children:Y.name},Y.id))})]}),r&&t.jsx("p",{className:"text-xs text-muted-foreground",children:"Project is pre-selected based on current context"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Priority"}),t.jsxs($e,{value:b,onValueChange:Y=>N(Y),children:[t.jsx(Le,{children:t.jsx(Ue,{placeholder:"Select priority"})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"low",children:"Low"}),t.jsx(Z,{value:"medium",children:"Medium"}),t.jsx(Z,{value:"high",children:"High"}),t.jsx(Z,{value:"critical",children:"Critical"})]})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Due Date (Optional)"}),t.jsxs(mf,{children:[t.jsx(ff,{asChild:!0,children:t.jsxs(T,{variant:"outline",className:J("w-full justify-start text-left font-normal",!A&&"text-muted-foreground"),children:[t.jsx(Lr,{className:"mr-2 h-4 w-4"}),A?pe(A,"PPP"):t.jsx("span",{children:"Select due date"})]})}),t.jsx(Cu,{className:"w-auto p-0",align:"start",children:t.jsx(Nw,{mode:"single",selected:A,onSelect:L,disabled:Y=>Y<new Date(new Date().setHours(0,0,0,0)),initialFocus:!0,className:J("p-3 pointer-events-auto")})})]}),A&&t.jsx(T,{type:"button",variant:"ghost",size:"sm",className:"text-xs text-muted-foreground h-auto p-0",onClick:()=>L(void 0),children:"Clear due date"})]}),j!=="epic"&&_&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs(O,{className:"flex items-center gap-2",children:[t.jsx(_c,{className:"h-4 w-4 text-purple-500"}),"Link to Epic (Optional)"]}),t.jsxs($e,{value:E||"none",onValueChange:Y=>k(Y==="none"?"":Y),children:[t.jsx(Le,{children:t.jsx(Ue,{placeholder:"Select parent Epic..."})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"none",children:"No parent Epic"}),ee.map(Y=>t.jsx(Z,{value:Y.id,children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(_c,{className:"h-3 w-3 text-purple-500"}),t.jsx("span",{className:"truncate",children:Y.title})]})},Y.id))]})]}),ee.length===0&&t.jsx("p",{className:"text-xs text-muted-foreground",children:"No open Epics found in this project. Create an Epic first to link tickets."}),E&&t.jsx("p",{className:"text-xs text-muted-foreground",children:"This ticket will be linked as a child of the selected Epic."})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Attachments"}),t.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-4 hover:border-primary/50 transition-colors",children:[t.jsx("input",{ref:m,type:"file",multiple:!0,accept:i1.join(","),onChange:q,className:"hidden",id:"ticket-files"}),t.jsxs("label",{htmlFor:"ticket-files",className:"flex flex-col items-center justify-center cursor-pointer gap-2",children:[t.jsx(IS,{className:"h-8 w-8 text-muted-foreground"}),t.jsx("span",{className:"text-sm text-muted-foreground",children:"Click to upload or drag and drop"}),t.jsx("span",{className:"text-xs text-muted-foreground",children:"Images, PDFs, DOC files up to 10MB"})]})]}),I.length>0&&t.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:I.map((Y,oe)=>t.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted rounded-lg group relative",children:[Y.preview?t.jsx("img",{src:Y.preview,alt:Y.file.name,className:"h-10 w-10 object-cover rounded"}):t.jsx("div",{className:"h-10 w-10 bg-background rounded flex items-center justify-center",children:te(Y.file)}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-xs font-medium truncate",children:Y.file.name}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[(Y.file.size/1024).toFixed(1)," KB"]})]}),Y.uploading?t.jsx(Ie,{className:"h-4 w-4 animate-spin text-muted-foreground"}):t.jsx(T,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>re(oe),children:t.jsx(Ct,{className:"h-3 w-3"})}),Y.error&&t.jsx("span",{className:"text-xs text-destructive",children:Y.error})]},oe))})]}),t.jsxs(In,{className:"pt-4",children:[t.jsx(T,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),t.jsx(T,{type:"submit",disabled:H,children:H?t.jsxs(t.Fragment,{children:[t.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Ticket"})]})]})]})})}const U7={draft:"bg-slate-500/10 text-slate-500 border-slate-500/20",active:"bg-green-500/10 text-green-500 border-green-500/20",archived:"bg-muted text-muted-foreground border-muted",completed:"bg-blue-500/10 text-blue-500 border-blue-500/20"},B7={healthy:"text-green-500",at_risk:"text-yellow-500",critical:"text-red-500",on_hold:"text-muted-foreground"},z7={open:"bg-blue-500 text-white",in_progress:"bg-amber-500 text-white",waiting_customer:"bg-purple-500 text-white",waiting_internal:"bg-orange-500 text-white",resolved:"bg-green-500 text-white",closed:"bg-slate-500 text-white"},q7={low:"bg-slate-500 text-white",medium:"bg-blue-500 text-white",high:"bg-orange-500 text-white",critical:"bg-red-600 text-white"},o1={epic:{icon:t.jsx(uj,{className:"h-3 w-3"}),label:"Epic",color:"bg-purple-600 text-white"},story:{icon:t.jsx(ir,{className:"h-3 w-3"}),label:"Story",color:"bg-blue-600 text-white"},bug:{icon:t.jsx(Wc,{className:"h-3 w-3"}),label:"Bug",color:"bg-red-600 text-white"},monitoring:{icon:t.jsx(EO,{className:"h-3 w-3"}),label:"Monitoring",color:"bg-teal-600 text-white"}};function l1(){const{id:e}=ma(),s=Qe(),r=ht(),{role:n}=Ze(),[a,i]=f.useState(!1),[o,l]=f.useState(!1),{data:c,isLoading:d}=fe({queryKey:["project",e],queryFn:async()=>{const{data:b,error:N}=await B.from("projects").select("*").eq("id",e).single();if(N)throw N;return b},enabled:!!e}),{data:u=[]}=fe({queryKey:["project-tickets",e],queryFn:async()=>{const{data:b,error:N}=await B.from("tickets").select("*").eq("project_id",e).order("created_at",{ascending:!1});if(N)throw N;if(!b||b.length===0)return[];const _=[...new Set(b.map(E=>E.assigned_to).filter(Boolean))];let C={};if(_.length>0){const{data:E}=await B.from("profiles_safe").select("id, full_name, email").in("id",_);E&&(C=E.reduce((k,A)=>(k[A.id]=A,k),{}))}return b.map(E=>({...E,assignee_profile:E.assigned_to&&C[E.assigned_to]||null}))},enabled:!!e}),{data:m=[]}=fe({queryKey:["project-members",e],queryFn:async()=>{const{data:b,error:N}=await B.from("project_members").select(`
          *,
          profiles (id, full_name, avatar_url)
        `).eq("project_id",e);if(N)throw N;return b},enabled:!!e}),[h,p]=f.useState({name:(c==null?void 0:c.name)||"",description:(c==null?void 0:c.description)||"",status:(c==null?void 0:c.status)||"draft"}),g=_t({mutationFn:async b=>{const{error:N}=await B.from("projects").update(b).eq("id",e);if(N)throw N},onSuccess:()=>{r.invalidateQueries({queryKey:["project",e]}),i(!1),z.success("Project updated successfully")}}),x=()=>n==="engineer"?"/my-projects":"/projects",v=()=>{g.mutate({name:h.name,description:h.description,status:h.status})},y=n==="infraweave_admin"||n==="company_admin";if(d)return t.jsx(we,{children:t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsx(je,{className:"h-10 w-64"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:Array.from({length:4}).map((b,N)=>t.jsx(je,{className:"h-24 w-full"},N))}),t.jsx(je,{className:"h-96 w-full"})]})});if(!c)return t.jsx(we,{children:t.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] gap-4",children:[t.jsx(fs,{className:"h-16 w-16 text-muted-foreground"}),t.jsx("h1",{className:"text-2xl font-bold",children:"Project Not Found"}),t.jsxs(T,{onClick:()=>s(x()),children:[t.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Back to Projects"]})]})});const j=u.filter(b=>b.status==="open").length,w=u.filter(b=>b.status==="in_progress").length;return t.jsx(we,{children:t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(T,{variant:"ghost",size:"icon",onClick:()=>s(x()),children:t.jsx(Ft,{className:"h-5 w-5"})}),t.jsxs("div",{children:[a?t.jsx(se,{value:h.name,onChange:b=>p({...h,name:b.target.value}),className:"text-2xl font-bold h-auto py-1"}):t.jsx("h1",{className:"text-2xl font-bold",children:c.name}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx($,{variant:"outline",className:U7[c.status],children:c.status}),c.health&&t.jsx($,{variant:"outline",className:B7[c.health],children:c.health.replace("_"," ")}),t.jsxs("span",{className:"text-muted-foreground text-sm",children:["Created ",pe(new Date(c.created_at),"MMM d, yyyy")]})]})]})]}),y&&t.jsx("div",{className:"flex items-center gap-2",children:a?t.jsxs(t.Fragment,{children:[t.jsxs(T,{variant:"ghost",onClick:()=>i(!1),children:[t.jsx(Ct,{className:"mr-2 h-4 w-4"}),"Cancel"]}),t.jsxs(T,{onClick:v,children:[t.jsx(Mn,{className:"mr-2 h-4 w-4"}),"Save"]})]}):t.jsxs(T,{variant:"outline",onClick:()=>i(!0),children:[t.jsx(Pn,{className:"mr-2 h-4 w-4"}),"Edit"]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx(P,{className:"glass-card",children:t.jsxs(W,{className:"pb-2",children:[t.jsx(ce,{children:"Total Tickets"}),t.jsx(V,{className:"text-3xl",children:u.length})]})}),t.jsx(P,{className:"glass-card",children:t.jsxs(W,{className:"pb-2",children:[t.jsx(ce,{children:"Open Tickets"}),t.jsx(V,{className:"text-3xl text-yellow-500",children:j})]})}),t.jsx(P,{className:"glass-card",children:t.jsxs(W,{className:"pb-2",children:[t.jsx(ce,{children:"In Progress"}),t.jsx(V,{className:"text-3xl text-blue-500",children:w})]})}),t.jsx(P,{className:"glass-card",children:t.jsxs(W,{className:"pb-2",children:[t.jsx(ce,{children:"Team Members"}),t.jsx(V,{className:"text-3xl",children:m.length})]})})]}),t.jsxs(kt,{defaultValue:"tickets",className:"space-y-4",children:[t.jsxs(St,{children:[t.jsxs(he,{value:"tickets",className:"gap-2",children:[t.jsx(rt,{className:"h-4 w-4"}),"Tickets"]}),t.jsxs(he,{value:"team",className:"gap-2",children:[t.jsx(Kt,{className:"h-4 w-4"}),"Team"]}),y&&t.jsxs(t.Fragment,{children:[t.jsxs(he,{value:"billing",className:"gap-2",children:[t.jsx(or,{className:"h-4 w-4"}),"Billing"]}),t.jsxs(he,{value:"settings",className:"gap-2",children:[t.jsx(Js,{className:"h-4 w-4"}),"Settings"]})]}),t.jsxs(he,{value:"activity",className:"gap-2",children:[t.jsx(Fa,{className:"h-4 w-4"}),"Activity"]})]}),t.jsxs(Ce,{value:"tickets",className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Project Tickets"}),t.jsxs(T,{onClick:()=>l(!0),children:[t.jsx(at,{className:"mr-2 h-4 w-4"}),"New Ticket"]})]}),u.length>0?t.jsx("div",{className:"grid gap-3",children:u.map(b=>{var H,F,I;const N=`TKT-${b.id.slice(0,8).toUpperCase()}`,_=o1[b.category]||o1.story,C=((H=b.assignee_profile)==null?void 0:H.full_name)||((I=(F=b.assignee_profile)==null?void 0:F.email)==null?void 0:I.split("@")[0])||null,E=!["resolved","closed"].includes(b.status),k=b.due_date?new Date(b.due_date):null,A=new Date;let L=null;return k&&E&&(Nu(k,A)&&!Fc(k)?L="overdue":Fc(k)?L="due-today":Nu(k,gs(A,3))&&(L="due-soon")),t.jsx(P,{className:`glass-card cursor-pointer hover:border-primary/50 transition-colors ${L==="overdue"?"border-red-500/50 bg-red-500/5":""}`,onClick:()=>s(`/tickets/${b.id}`),children:t.jsx(M,{className:"p-4",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-mono text-xs font-semibold text-muted-foreground bg-muted px-2 py-1 rounded",children:N}),t.jsxs($,{className:`${_.color} gap-1`,children:[_.icon,_.label]}),L==="overdue"&&t.jsxs($,{className:"bg-red-600 text-white gap-1 animate-pulse",children:[t.jsx(fs,{className:"h-3 w-3"}),"Overdue"]}),L==="due-today"&&t.jsxs($,{className:"bg-orange-500 text-white gap-1",children:[t.jsx(Oe,{className:"h-3 w-3"}),"Due Today"]}),L==="due-soon"&&t.jsxs($,{className:"bg-amber-500 text-white gap-1",children:[t.jsx(Oe,{className:"h-3 w-3"}),"Due Soon"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx($,{className:z7[b.status]||"bg-slate-500 text-white",children:b.status.replace("_"," ")}),t.jsx($,{className:q7[b.priority]||"bg-slate-500 text-white",children:b.priority})]})]}),t.jsx("h3",{className:"font-semibold text-base",children:b.title}),t.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground flex-wrap",children:[b.due_date&&t.jsxs("div",{className:`flex items-center gap-1.5 ${L==="overdue"?"text-red-500 font-medium":L==="due-today"?"text-orange-500 font-medium":""}`,children:[t.jsx(Lr,{className:"h-3.5 w-3.5"}),t.jsxs("span",{children:["Due: ",pe(new Date(b.due_date),"MMM d, yyyy")]})]}),C?t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(qs,{className:"h-3.5 w-3.5"}),t.jsx("span",{children:C})]}):t.jsxs("div",{className:"flex items-center gap-1.5 text-muted-foreground/60",children:[t.jsx(qs,{className:"h-3.5 w-3.5"}),t.jsx("span",{children:"Unassigned"})]}),t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(Oe,{className:"h-3.5 w-3.5"}),t.jsx("span",{children:pe(new Date(b.created_at),"MMM d")})]})]})]})})},b.id)})}):t.jsx(P,{className:"glass-card",children:t.jsxs(M,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(rt,{className:"h-12 w-12 text-muted-foreground mb-4"}),t.jsx("p",{className:"text-muted-foreground",children:"No tickets yet"}),t.jsxs(T,{className:"mt-4",onClick:()=>l(!0),children:[t.jsx(at,{className:"mr-2 h-4 w-4"}),"Create First Ticket"]})]})}),t.jsx(Cw,{open:o,onOpenChange:l,preselectedProjectId:c.id})]}),t.jsxs(Ce,{value:"team",className:"space-y-4",children:[t.jsx("div",{className:"flex justify-between items-center",children:t.jsx("h2",{className:"text-lg font-semibold",children:"Team Members"})}),t.jsxs("div",{className:"grid gap-4",children:[m.map(b=>{var N,_,C;return t.jsx(P,{className:"glass-card",children:t.jsxs(M,{className:"flex items-center justify-between p-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(Tt,{className:"h-10 w-10",children:t.jsx(Pt,{className:"bg-primary/20 text-primary",children:((_=(N=b.profiles)==null?void 0:N.full_name)==null?void 0:_.split(" ").map(E=>E[0]).join("").toUpperCase())||"?"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:((C=b.profiles)==null?void 0:C.full_name)||"Unknown"}),t.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:b.role})]})]}),t.jsx($,{variant:"outline",className:"capitalize",children:b.role})]})},b.user_id)}),m.length===0&&t.jsx(P,{className:"glass-card",children:t.jsxs(M,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(Kt,{className:"h-12 w-12 text-muted-foreground mb-4"}),t.jsx("p",{className:"text-muted-foreground",children:"No team members assigned"})]})})]})]}),y&&t.jsxs(t.Fragment,{children:[t.jsx(Ce,{value:"settings",className:"space-y-4",children:t.jsxs(P,{className:"glass-card",children:[t.jsxs(W,{children:[t.jsx(V,{children:"Project Settings"}),t.jsx(ce,{children:"Manage project configuration"})]}),t.jsxs(M,{className:"space-y-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Project Name"}),t.jsx(se,{value:h.name,onChange:b=>p({...h,name:b.target.value}),disabled:!a})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Description"}),t.jsx(Bt,{value:h.description,onChange:b=>p({...h,description:b.target.value}),disabled:!a,rows:4})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Status"}),t.jsxs($e,{value:h.status,onValueChange:b=>p({...h,status:b}),disabled:!a,children:[t.jsx(Le,{children:t.jsx(Ue,{})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"draft",children:"Draft"}),t.jsx(Z,{value:"active",children:"Active"}),t.jsx(Z,{value:"archived",children:"Archived"}),t.jsx(Z,{value:"completed",children:"Completed"})]})]})]}),!a&&t.jsxs(T,{onClick:()=>i(!0),children:[t.jsx(Pn,{className:"mr-2 h-4 w-4"}),"Edit Settings"]}),a&&t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(T,{onClick:v,children:[t.jsx(Mn,{className:"mr-2 h-4 w-4"}),"Save Changes"]}),t.jsx(T,{variant:"outline",onClick:()=>i(!1),children:"Cancel"})]})]})]})}),t.jsx(Ce,{value:"billing",className:"space-y-4",children:t.jsxs(P,{className:"glass-card",children:[t.jsxs(W,{children:[t.jsxs(V,{className:"flex items-center gap-2",children:[t.jsx(or,{className:"h-5 w-5"}),"Project Billing"]}),t.jsx(ce,{children:"Manage billing configuration, time tracking, and change orders"})]}),t.jsx(M,{children:t.jsx(T,{onClick:()=>s(`/projects/${e}/billing`),children:"Open Billing Dashboard"})})]})})]}),t.jsx(Ce,{value:"activity",className:"space-y-4",children:t.jsx(P,{className:"glass-card",children:t.jsx(M,{className:"pt-6",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"h-8 w-8 rounded-full bg-green-500/10 flex items-center justify-center",children:t.jsx(ES,{className:"h-4 w-4 text-green-500"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium",children:"Project created"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:pe(new Date(c.created_at),"MMM d, yyyy 'at' h:mm a")})]})]}),c.updated_at!==c.created_at&&t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-500/10 flex items-center justify-center",children:t.jsx(Oe,{className:"h-4 w-4 text-blue-500"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium",children:"Project updated"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:pe(new Date(c.updated_at),"MMM d, yyyy 'at' h:mm a")})]})]})]})})})})]})]})})}var W7="Separator",c1="horizontal",V7=["horizontal","vertical"],iT=f.forwardRef((e,s)=>{const{decorative:r,orientation:n=c1,...a}=e,i=H7(n)?n:c1,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return t.jsx(hr.div,{"data-orientation":i,...l,...a,ref:s})});iT.displayName=W7;function H7(e){return V7.includes(e)}var oT=iT;const yr=f.forwardRef(({className:e,orientation:s="horizontal",decorative:r=!0,...n},a)=>t.jsx(oT,{ref:a,decorative:r,orientation:s,className:J("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));yr.displayName=oT.displayName;var d1=1,K7=.9,G7=.8,Y7=.17,Wx=.1,Vx=.999,Q7=.9999,Z7=.99,J7=/[\\\/_+.#"@\[\(\{&]/,X7=/[\\\/_+.#"@\[\(\{&]/g,eH=/[\s-]/,lT=/[\s-]/g;function ry(e,s,r,n,a,i,o){if(i===s.length)return a===e.length?d1:Z7;var l=`${a},${i}`;if(o[l]!==void 0)return o[l];for(var c=n.charAt(i),d=r.indexOf(c,a),u=0,m,h,p,g;d>=0;)m=ry(e,s,r,n,d+1,i+1,o),m>u&&(d===a?m*=d1:J7.test(e.charAt(d-1))?(m*=G7,p=e.slice(a,d-1).match(X7),p&&a>0&&(m*=Math.pow(Vx,p.length))):eH.test(e.charAt(d-1))?(m*=K7,g=e.slice(a,d-1).match(lT),g&&a>0&&(m*=Math.pow(Vx,g.length))):(m*=Y7,a>0&&(m*=Math.pow(Vx,d-a))),e.charAt(d)!==s.charAt(i)&&(m*=Q7)),(m<Wx&&r.charAt(d-1)===n.charAt(i+1)||n.charAt(i+1)===n.charAt(i)&&r.charAt(d-1)!==n.charAt(i))&&(h=ry(e,s,r,n,d+1,i+2,o),h*Wx>m&&(m=h*Wx)),m>u&&(u=m),d=r.indexOf(c,d+1);return o[l]=u,u}function u1(e){return e.toLowerCase().replace(lT," ")}function tH(e,s,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,ry(e,s,u1(e),u1(s),0,0,{})}var vd='[cmdk-group=""]',Hx='[cmdk-group-items=""]',sH='[cmdk-group-heading=""]',cT='[cmdk-item=""]',h1=`${cT}:not([aria-disabled="true"])`,ny="cmdk-item-select",kl="data-value",rH=(e,s,r)=>tH(e,s,r),dT=f.createContext(void 0),oh=()=>f.useContext(dT),uT=f.createContext(void 0),_w=()=>f.useContext(uT),hT=f.createContext(void 0),mT=f.forwardRef((e,s)=>{let r=El(()=>{var R,te;return{search:"",value:(te=(R=e.value)!=null?R:e.defaultValue)!=null?te:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),n=El(()=>new Set),a=El(()=>new Map),i=El(()=>new Map),o=El(()=>new Set),l=fT(e),{label:c,children:d,value:u,onValueChange:m,filter:h,shouldFilter:p,loop:g,disablePointerSelection:x=!1,vimBindings:v=!0,...y}=e,j=Ss(),w=Ss(),b=Ss(),N=f.useRef(null),_=fH();Zo(()=>{if(u!==void 0){let R=u.trim();r.current.value=R,C.emit()}},[u]),Zo(()=>{_(6,F)},[]);let C=f.useMemo(()=>({subscribe:R=>(o.current.add(R),()=>o.current.delete(R)),snapshot:()=>r.current,setState:(R,te,Q)=>{var Y,oe,X,xe;if(!Object.is(r.current[R],te)){if(r.current[R]=te,R==="search")H(),A(),_(1,L);else if(R==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let ve=document.getElementById(b);ve?ve.focus():(Y=document.getElementById(j))==null||Y.focus()}if(_(7,()=>{var ve;r.current.selectedItemId=(ve=I())==null?void 0:ve.id,C.emit()}),Q||_(5,F),((oe=l.current)==null?void 0:oe.value)!==void 0){let ve=te??"";(xe=(X=l.current).onValueChange)==null||xe.call(X,ve);return}}C.emit()}},emit:()=>{o.current.forEach(R=>R())}}),[]),E=f.useMemo(()=>({value:(R,te,Q)=>{var Y;te!==((Y=i.current.get(R))==null?void 0:Y.value)&&(i.current.set(R,{value:te,keywords:Q}),r.current.filtered.items.set(R,k(te,Q)),_(2,()=>{A(),C.emit()}))},item:(R,te)=>(n.current.add(R),te&&(a.current.has(te)?a.current.get(te).add(R):a.current.set(te,new Set([R]))),_(3,()=>{H(),A(),r.current.value||L(),C.emit()}),()=>{i.current.delete(R),n.current.delete(R),r.current.filtered.items.delete(R);let Q=I();_(4,()=>{H(),(Q==null?void 0:Q.getAttribute("id"))===R&&L(),C.emit()})}),group:R=>(a.current.has(R)||a.current.set(R,new Set),()=>{i.current.delete(R),a.current.delete(R)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:j,inputId:b,labelId:w,listInnerRef:N}),[]);function k(R,te){var Q,Y;let oe=(Y=(Q=l.current)==null?void 0:Q.filter)!=null?Y:rH;return R?oe(R,r.current.search,te):0}function A(){if(!r.current.search||l.current.shouldFilter===!1)return;let R=r.current.filtered.items,te=[];r.current.filtered.groups.forEach(Y=>{let oe=a.current.get(Y),X=0;oe.forEach(xe=>{let ve=R.get(xe);X=Math.max(ve,X)}),te.push([Y,X])});let Q=N.current;G().sort((Y,oe)=>{var X,xe;let ve=Y.getAttribute("id"),Ae=oe.getAttribute("id");return((X=R.get(Ae))!=null?X:0)-((xe=R.get(ve))!=null?xe:0)}).forEach(Y=>{let oe=Y.closest(Hx);oe?oe.appendChild(Y.parentElement===oe?Y:Y.closest(`${Hx} > *`)):Q.appendChild(Y.parentElement===Q?Y:Y.closest(`${Hx} > *`))}),te.sort((Y,oe)=>oe[1]-Y[1]).forEach(Y=>{var oe;let X=(oe=N.current)==null?void 0:oe.querySelector(`${vd}[${kl}="${encodeURIComponent(Y[0])}"]`);X==null||X.parentElement.appendChild(X)})}function L(){let R=G().find(Q=>Q.getAttribute("aria-disabled")!=="true"),te=R==null?void 0:R.getAttribute(kl);C.setState("value",te||void 0)}function H(){var R,te,Q,Y;if(!r.current.search||l.current.shouldFilter===!1){r.current.filtered.count=n.current.size;return}r.current.filtered.groups=new Set;let oe=0;for(let X of n.current){let xe=(te=(R=i.current.get(X))==null?void 0:R.value)!=null?te:"",ve=(Y=(Q=i.current.get(X))==null?void 0:Q.keywords)!=null?Y:[],Ae=k(xe,ve);r.current.filtered.items.set(X,Ae),Ae>0&&oe++}for(let[X,xe]of a.current)for(let ve of xe)if(r.current.filtered.items.get(ve)>0){r.current.filtered.groups.add(X);break}r.current.filtered.count=oe}function F(){var R,te,Q;let Y=I();Y&&(((R=Y.parentElement)==null?void 0:R.firstChild)===Y&&((Q=(te=Y.closest(vd))==null?void 0:te.querySelector(sH))==null||Q.scrollIntoView({block:"nearest"})),Y.scrollIntoView({block:"nearest"}))}function I(){var R;return(R=N.current)==null?void 0:R.querySelector(`${cT}[aria-selected="true"]`)}function G(){var R;return Array.from(((R=N.current)==null?void 0:R.querySelectorAll(h1))||[])}function ee(R){let te=G()[R];te&&C.setState("value",te.getAttribute(kl))}function K(R){var te;let Q=I(),Y=G(),oe=Y.findIndex(xe=>xe===Q),X=Y[oe+R];(te=l.current)!=null&&te.loop&&(X=oe+R<0?Y[Y.length-1]:oe+R===Y.length?Y[0]:Y[oe+R]),X&&C.setState("value",X.getAttribute(kl))}function D(R){let te=I(),Q=te==null?void 0:te.closest(vd),Y;for(;Q&&!Y;)Q=R>0?hH(Q,vd):mH(Q,vd),Y=Q==null?void 0:Q.querySelector(h1);Y?C.setState("value",Y.getAttribute(kl)):K(R)}let q=()=>ee(G().length-1),re=R=>{R.preventDefault(),R.metaKey?q():R.altKey?D(1):K(1)},S=R=>{R.preventDefault(),R.metaKey?ee(0):R.altKey?D(-1):K(-1)};return f.createElement(hr.div,{ref:s,tabIndex:-1,...y,"cmdk-root":"",onKeyDown:R=>{var te;(te=y.onKeyDown)==null||te.call(y,R);let Q=R.nativeEvent.isComposing||R.keyCode===229;if(!(R.defaultPrevented||Q))switch(R.key){case"n":case"j":{v&&R.ctrlKey&&re(R);break}case"ArrowDown":{re(R);break}case"p":case"k":{v&&R.ctrlKey&&S(R);break}case"ArrowUp":{S(R);break}case"Home":{R.preventDefault(),ee(0);break}case"End":{R.preventDefault(),q();break}case"Enter":{R.preventDefault();let Y=I();if(Y){let oe=new Event(ny);Y.dispatchEvent(oe)}}}}},f.createElement("label",{"cmdk-label":"",htmlFor:E.inputId,id:E.labelId,style:xH},c),Ep(e,R=>f.createElement(uT.Provider,{value:C},f.createElement(dT.Provider,{value:E},R))))}),nH=f.forwardRef((e,s)=>{var r,n;let a=Ss(),i=f.useRef(null),o=f.useContext(hT),l=oh(),c=fT(e),d=(n=(r=c.current)==null?void 0:r.forceMount)!=null?n:o==null?void 0:o.forceMount;Zo(()=>{if(!d)return l.item(a,o==null?void 0:o.id)},[d]);let u=pT(a,i,[e.value,e.children,i],e.keywords),m=_w(),h=Gi(_=>_.value&&_.value===u.current),p=Gi(_=>d||l.filter()===!1?!0:_.search?_.filtered.items.get(a)>0:!0);f.useEffect(()=>{let _=i.current;if(!(!_||e.disabled))return _.addEventListener(ny,g),()=>_.removeEventListener(ny,g)},[p,e.onSelect,e.disabled]);function g(){var _,C;x(),(C=(_=c.current).onSelect)==null||C.call(_,u.current)}function x(){m.setState("value",u.current,!0)}if(!p)return null;let{disabled:v,value:y,onSelect:j,forceMount:w,keywords:b,...N}=e;return f.createElement(hr.div,{ref:la(i,s),...N,id:a,"cmdk-item":"",role:"option","aria-disabled":!!v,"aria-selected":!!h,"data-disabled":!!v,"data-selected":!!h,onPointerMove:v||l.getDisablePointerSelection()?void 0:x,onClick:v?void 0:g},e.children)}),aH=f.forwardRef((e,s)=>{let{heading:r,children:n,forceMount:a,...i}=e,o=Ss(),l=f.useRef(null),c=f.useRef(null),d=Ss(),u=oh(),m=Gi(p=>a||u.filter()===!1?!0:p.search?p.filtered.groups.has(o):!0);Zo(()=>u.group(o),[]),pT(o,l,[e.value,e.heading,c]);let h=f.useMemo(()=>({id:o,forceMount:a}),[a]);return f.createElement(hr.div,{ref:la(l,s),...i,"cmdk-group":"",role:"presentation",hidden:m?void 0:!0},r&&f.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:d},r),Ep(e,p=>f.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?d:void 0},f.createElement(hT.Provider,{value:h},p))))}),iH=f.forwardRef((e,s)=>{let{alwaysRender:r,...n}=e,a=f.useRef(null),i=Gi(o=>!o.search);return!r&&!i?null:f.createElement(hr.div,{ref:la(a,s),...n,"cmdk-separator":"",role:"separator"})}),oH=f.forwardRef((e,s)=>{let{onValueChange:r,...n}=e,a=e.value!=null,i=_w(),o=Gi(d=>d.search),l=Gi(d=>d.selectedItemId),c=oh();return f.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),f.createElement(hr.input,{ref:s,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:a?e.value:o,onChange:d=>{a||i.setState("search",d.target.value),r==null||r(d.target.value)}})}),lH=f.forwardRef((e,s)=>{let{children:r,label:n="Suggestions",...a}=e,i=f.useRef(null),o=f.useRef(null),l=Gi(d=>d.selectedItemId),c=oh();return f.useEffect(()=>{if(o.current&&i.current){let d=o.current,u=i.current,m,h=new ResizeObserver(()=>{m=requestAnimationFrame(()=>{let p=d.offsetHeight;u.style.setProperty("--cmdk-list-height",p.toFixed(1)+"px")})});return h.observe(d),()=>{cancelAnimationFrame(m),h.unobserve(d)}}},[]),f.createElement(hr.div,{ref:la(i,s),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":n,id:c.listId},Ep(e,d=>f.createElement("div",{ref:la(o,c.listInnerRef),"cmdk-list-sizer":""},d)))}),cH=f.forwardRef((e,s)=>{let{open:r,onOpenChange:n,overlayClassName:a,contentClassName:i,container:o,...l}=e;return f.createElement(up,{open:r,onOpenChange:n},f.createElement(hp,{container:o},f.createElement(Xc,{"cmdk-overlay":"",className:a}),f.createElement(ed,{"aria-label":e.label,"cmdk-dialog":"",className:i},f.createElement(mT,{ref:s,...l}))))}),dH=f.forwardRef((e,s)=>Gi(r=>r.filtered.count===0)?f.createElement(hr.div,{ref:s,...e,"cmdk-empty":"",role:"presentation"}):null),uH=f.forwardRef((e,s)=>{let{progress:r,children:n,label:a="Loading...",...i}=e;return f.createElement(hr.div,{ref:s,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},Ep(e,o=>f.createElement("div",{"aria-hidden":!0},o)))}),Sr=Object.assign(mT,{List:lH,Item:nH,Input:oH,Group:aH,Separator:iH,Dialog:cH,Empty:dH,Loading:uH});function hH(e,s){let r=e.nextElementSibling;for(;r;){if(r.matches(s))return r;r=r.nextElementSibling}}function mH(e,s){let r=e.previousElementSibling;for(;r;){if(r.matches(s))return r;r=r.previousElementSibling}}function fT(e){let s=f.useRef(e);return Zo(()=>{s.current=e}),s}var Zo=typeof window>"u"?f.useEffect:f.useLayoutEffect;function El(e){let s=f.useRef();return s.current===void 0&&(s.current=e()),s}function Gi(e){let s=_w(),r=()=>e(s.snapshot());return f.useSyncExternalStore(s.subscribe,r,r)}function pT(e,s,r,n=[]){let a=f.useRef(),i=oh();return Zo(()=>{var o;let l=(()=>{var d;for(let u of r){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(d=u.current.textContent)==null?void 0:d.trim():a.current}})(),c=n.map(d=>d.trim());i.value(e,l,c),(o=s.current)==null||o.setAttribute(kl,l),a.current=l}),a}var fH=()=>{let[e,s]=f.useState(),r=El(()=>new Map);return Zo(()=>{r.current.forEach(n=>n()),r.current=new Map},[e]),(n,a)=>{r.current.set(n,a),s({})}};function pH(e){let s=e.type;return typeof s=="function"?s(e.props):"render"in s?s.render(e.props):e}function Ep({asChild:e,children:s},r){return e&&f.isValidElement(s)?f.cloneElement(pH(s),{ref:s.ref},r(s.props.children)):r(s)}var xH={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const ay=f.forwardRef(({className:e,...s},r)=>t.jsx(Sr,{ref:r,className:J("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...s}));ay.displayName=Sr.displayName;const iy=f.forwardRef(({className:e,...s},r)=>t.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[t.jsx(ns,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),t.jsx(Sr.Input,{ref:r,className:J("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...s})]}));iy.displayName=Sr.Input.displayName;const oy=f.forwardRef(({className:e,...s},r)=>t.jsx(Sr.List,{ref:r,className:J("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...s}));oy.displayName=Sr.List.displayName;const ly=f.forwardRef((e,s)=>t.jsx(Sr.Empty,{ref:s,className:"py-6 text-center text-sm",...e}));ly.displayName=Sr.Empty.displayName;const um=f.forwardRef(({className:e,...s},r)=>t.jsx(Sr.Group,{ref:r,className:J("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...s}));um.displayName=Sr.Group.displayName;const gH=f.forwardRef(({className:e,...s},r)=>t.jsx(Sr.Separator,{ref:r,className:J("-mx-1 h-px bg-border",e),...s}));gH.displayName=Sr.Separator.displayName;const hm=f.forwardRef(({className:e,...s},r)=>t.jsx(Sr.Item,{ref:r,className:J("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...s}));hm.displayName=Sr.Item.displayName;function vH({ticketId:e,projectId:s,watcherIds:r,onWatchersChange:n,compact:a=!1}){const[i,o]=f.useState(!1),{data:l=[],isLoading:c}=fe({queryKey:["project-members-for-watchers",s],queryFn:async()=>{if(!s)return[];const{data:x,error:v}=await B.from("project_members").select("user_id").eq("project_id",s);if(v)return console.error("Error fetching project members:",v),[];const y=x.map(b=>b.user_id);if(y.length===0)return[];const{data:j,error:w}=await B.from("profiles_safe").select("id, email, full_name, avatar_url").in("id",y);return w?(console.error("Error fetching profiles:",w),[]):j.map(b=>({id:b.id,email:b.email,fullName:b.full_name,avatarUrl:b.avatar_url}))},enabled:!!s}),d=l.filter(x=>r.includes(x.id)),u=l.filter(x=>!r.includes(x.id)),m=x=>x.fullName||x.email.split("@")[0],h=x=>x.fullName?x.fullName.charAt(0).toUpperCase():x.email.charAt(0).toUpperCase(),p=x=>{const v=l.find(y=>y.id===x);v&&(n([...r,x]),z.success(`${m(v)} added as watcher`)),o(!1)},g=x=>{const v=l.find(y=>y.id===x);v&&(n(r.filter(y=>y!==x)),z.success(`${m(v)} removed from watchers`))};return c?t.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[t.jsx(Ie,{className:"h-4 w-4 animate-spin"}),t.jsx("span",{className:"text-sm",children:"Loading members..."})]}):l.length===0?t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[t.jsx(Kt,{className:"h-4 w-4"}),"Watchers"]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"No project members available. Add members to the project first."})]}):a?t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs(mf,{open:i,onOpenChange:o,children:[t.jsx(ff,{asChild:!0,children:t.jsxs(T,{variant:"outline",size:"sm",className:"gap-2",children:[t.jsx(rn,{className:"h-4 w-4"}),t.jsx("span",{children:d.length})]})}),t.jsx(Cu,{className:"w-72 p-0",align:"start",children:t.jsxs(ay,{children:[t.jsx(iy,{placeholder:"Search project members..."}),t.jsxs(oy,{children:[t.jsx(ly,{children:"No project members found."}),d.length>0&&t.jsx(um,{heading:"Current Watchers",children:d.map(x=>t.jsxs(hm,{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(Tt,{className:"h-6 w-6",children:[t.jsx(Ps,{src:x.avatarUrl||void 0}),t.jsx(Pt,{children:h(x)})]}),t.jsx("span",{className:"text-sm",children:m(x)})]}),t.jsx(T,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:v=>{v.stopPropagation(),g(x.id)},children:t.jsx(Ct,{className:"h-3 w-3"})})]},x.id))}),u.length>0&&t.jsx(um,{heading:"Add Watcher",children:u.map(x=>t.jsxs(hm,{onSelect:()=>p(x.id),className:"flex items-center gap-2",children:[t.jsxs(Tt,{className:"h-6 w-6",children:[t.jsx(Ps,{src:x.avatarUrl||void 0}),t.jsx(Pt,{children:h(x)})]}),t.jsx("span",{className:"text-sm",children:m(x)}),t.jsx(at,{className:"ml-auto h-4 w-4 text-muted-foreground"})]},x.id))})]})]})})]})}):t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[t.jsx(Kt,{className:"h-4 w-4"}),"Watchers",t.jsx($,{variant:"secondary",className:"ml-1",children:d.length})]}),t.jsxs(mf,{open:i,onOpenChange:o,children:[t.jsx(ff,{asChild:!0,children:t.jsxs(T,{variant:"outline",size:"sm",className:"gap-1",children:[t.jsx(at,{className:"h-4 w-4"}),"Add"]})}),t.jsx(Cu,{className:"w-64 p-0",align:"end",children:t.jsxs(ay,{children:[t.jsx(iy,{placeholder:"Search project members..."}),t.jsxs(oy,{children:[t.jsx(ly,{children:"No project members found."}),t.jsx(um,{heading:"Project Members Only",children:u.map(x=>t.jsxs(hm,{onSelect:()=>p(x.id),className:"flex items-center gap-2",children:[t.jsxs(Tt,{className:"h-6 w-6",children:[t.jsx(Ps,{src:x.avatarUrl||void 0}),t.jsx(Pt,{children:h(x)})]}),t.jsx("span",{className:"text-sm",children:m(x)})]},x.id))})]})]})})]})]}),d.length>0?t.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(x=>t.jsxs("div",{className:"flex items-center gap-2 bg-muted rounded-full pl-1 pr-2 py-1",children:[t.jsxs(Tt,{className:"h-6 w-6",children:[t.jsx(Ps,{src:x.avatarUrl||void 0}),t.jsx(Pt,{children:h(x)})]}),t.jsx("span",{className:"text-xs font-medium",children:m(x)}),t.jsx("button",{onClick:()=>g(x.id),className:"hover:bg-muted-foreground/20 rounded-full p-0.5",children:t.jsx(Ct,{className:"h-3 w-3 text-muted-foreground"})})]},x.id))}):t.jsx("p",{className:"text-sm text-muted-foreground",children:"No watchers yet. Add project members to keep them informed."})]})}function yH({open:e,onOpenChange:s,ticketId:r,ticketTitle:n,currentAssigneeId:a}){const i=ht(),[o,l]=f.useState(""),{data:c=[],isLoading:d}=fe({queryKey:["assignable-employees"],queryFn:async()=>{const{data:p,error:g}=await B.from("infraweave_employees").select("*").eq("is_active",!0);if(g)throw g;const x=p.map(j=>j.user_id),{data:v}=await B.from("profiles_safe").select("id, email, full_name").in("id",x),y=new Map((v==null?void 0:v.map(j=>[j.id,j]))||[]);return p.map(j=>({...j,profile:y.get(j.user_id)}))},enabled:e}),u=_t({mutationFn:async p=>{const{error:g}=await B.from("tickets").update({assigned_to:p}).eq("id",r);if(g)throw g},onSuccess:(p,g)=>{var v,y;const x=g?((y=(v=c.find(j=>j.user_id===g))==null?void 0:v.profile)==null?void 0:y.full_name)||"employee":null;x?z.success(`Ticket assigned to ${x}`):z.success("Ticket unassigned"),i.invalidateQueries({queryKey:["ticket",r]}),i.invalidateQueries({queryKey:["employee-tickets"]}),s(!1)},onError:p=>{z.error(`Failed to assign ticket: ${p.message}`)}}),m=c.filter(p=>{var x,v,y,j;if(!o)return!0;const g=o.toLowerCase();return((v=(x=p.profile)==null?void 0:x.full_name)==null?void 0:v.toLowerCase().includes(g))||((j=(y=p.profile)==null?void 0:y.email)==null?void 0:j.toLowerCase().includes(g))}),h=p=>{u.mutate(p)};return t.jsx(Xt,{open:e,onOpenChange:s,children:t.jsxs(zt,{className:"max-w-md",preventClose:!0,children:[t.jsxs(es,{children:[t.jsx(ts,{children:"Assign Ticket"}),t.jsxs(ss,{className:"truncate",children:['Assign "',n,'" to an InfraWeave employee']})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(ns,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t.jsx(se,{placeholder:"Search employees...",value:o,onChange:p=>l(p.target.value),className:"pl-9"})]}),a&&t.jsxs("div",{className:"flex items-center justify-between p-3 bg-primary/5 rounded-lg border border-primary/20",children:[t.jsx("div",{className:"flex items-center gap-2",children:t.jsx($,{variant:"outline",className:"text-primary",children:"Currently Assigned"})}),t.jsxs(T,{size:"sm",variant:"ghost",className:"text-destructive hover:text-destructive",onClick:()=>h(null),disabled:u.isPending,children:[t.jsx(Ct,{className:"h-4 w-4 mr-1"}),"Unassign"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Select Employee"}),t.jsx(vp,{className:"h-64 border rounded-lg",children:d?t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsx(Ie,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):m.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground p-4",children:[t.jsx("p",{className:"text-sm",children:"No employees found"}),t.jsx("p",{className:"text-xs",children:"Try a different search term"})]}):t.jsx("div",{className:"p-2 space-y-1",children:m.map(p=>{var v,y,j,w,b;const g=p.user_id===a,x=(v=p.profile)!=null&&v.full_name?p.profile.full_name.split(" ").map(N=>N[0]).join("").toUpperCase().slice(0,2):((j=(y=p.profile)==null?void 0:y.email)==null?void 0:j.substring(0,2).toUpperCase())||"E";return t.jsxs("button",{onClick:()=>h(p.user_id),disabled:u.isPending||g,className:`w-full flex items-center gap-3 p-3 rounded-lg transition-colors text-left ${g?"bg-primary/10 border border-primary/30":"hover:bg-accent"}`,children:[t.jsx(Tt,{className:"h-9 w-9",children:t.jsx(Pt,{className:"bg-info/10 text-info text-sm",children:x})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-medium text-foreground truncate",children:((w=p.profile)==null?void 0:w.full_name)||"Unnamed Employee"}),t.jsx("p",{className:"text-xs text-muted-foreground truncate",children:(b=p.profile)==null?void 0:b.email})]}),g&&t.jsx(DS,{className:"h-5 w-5 text-primary shrink-0"}),u.isPending&&u.variables===p.user_id&&t.jsx(Ie,{className:"h-4 w-4 animate-spin shrink-0"})]},p.id)})})})]}),t.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground pt-2 border-t",children:[t.jsxs("span",{children:[c.length," employees available"]}),t.jsx("span",{children:c.filter(p=>p.user_id===a).length>0?"Assigned":"Unassigned"})]})]})]})})}const m1=["image/jpeg","image/png","image/gif","image/webp","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain"],jH=10*1024*1024;function wH({ticketId:e}){const{user:s}=ft(),r=ht(),n=f.useRef(null),[a,i]=f.useState(""),[o,l]=f.useState(!1),[c,d]=f.useState([]),[u,m]=f.useState(!1),{data:h=[],isLoading:p}=fe({queryKey:["ticket-comments",e],queryFn:async()=>{const{data:N,error:_}=await B.from("ticket_comments").select("*").eq("ticket_id",e).order("created_at",{ascending:!0});if(_)throw _;if(!N||N.length===0)return[];const C=[...new Set(N.map(L=>L.author_id).filter(Boolean))];let E={};if(C.length>0){const{data:L}=await B.from("profiles_safe").select("id, full_name, avatar_url, email").in("id",C);L&&(E=L.reduce((H,F)=>(H[F.id]=F,H),{}))}const{data:k}=await B.from("ticket_attachments").select("*").eq("ticket_id",e).not("comment_id","is",null),A={};return k&&k.forEach(L=>{L.comment_id&&(A[L.comment_id]||(A[L.comment_id]=[]),A[L.comment_id].push(L))}),N.map(L=>({...L,profiles:L.author_id&&E[L.author_id]||null,attachments:A[L.id]||[]}))},enabled:!!e});f.useEffect(()=>{if(!e)return;const N=B.channel(`ticket-comments-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"ticket_comments",filter:`ticket_id=eq.${e}`},_=>{if(r.invalidateQueries({queryKey:["ticket-comments",e]}),_.eventType==="INSERT"&&_.new){const C=_.new;C.author_id&&C.author_id!==(s==null?void 0:s.id)&&z.info(" New comment added",{description:"Someone added a new comment to this ticket",duration:3e3})}}).subscribe();return()=>{B.removeChannel(N)}},[e,r,s==null?void 0:s.id]);const g=N=>{const _=Array.from(N.target.files||[]),C=[];for(const E of _){if(!m1.includes(E.type)){z.error(`${E.name}: File type not allowed`);continue}if(E.size>jH){z.error(`${E.name}: File size exceeds 10MB limit`);continue}const k={file:E,uploading:!1};E.type.startsWith("image/")&&(k.preview=URL.createObjectURL(E)),C.push(k)}d(E=>[...E,...C]),n.current&&(n.current.value="")},x=N=>{d(_=>{const C=[..._];return C[N].preview&&URL.revokeObjectURL(C[N].preview),C.splice(N,1),C})},v=async N=>{for(let _=0;_<c.length;_++){const{file:C}=c[_];d(E=>{const k=[...E];return k[_]={...k[_],uploading:!0},k});try{const E=C.name.split(".").pop(),k=`${s==null?void 0:s.id}/${e}/${N}/${Date.now()}-${Math.random().toString(36).substr(2,9)}.${E}`,{error:A}=await B.storage.from("ticket-attachments").upload(k,C);if(A)throw A;const{error:L}=await B.from("ticket_attachments").insert({ticket_id:e,comment_id:N,name:C.name,file_path:k,file_size:C.size,mime_type:C.type,uploaded_by:s==null?void 0:s.id});if(L)throw L}catch(E){console.error(`Failed to upload ${C.name}:`,E),z.error(`Failed to upload ${C.name}`)}}},y=async()=>{if(!a.trim()&&c.length===0){z.error("Please add a comment or attach files");return}m(!0);try{const{data:N,error:_}=await B.from("ticket_comments").insert({ticket_id:e,author_id:s==null?void 0:s.id,content:a.trim()||"[Attachment]",is_internal:o}).select("id").single();if(_)throw _;c.length>0&&(N!=null&&N.id)&&await v(N.id),i(""),l(!1),c.forEach(C=>C.preview&&URL.revokeObjectURL(C.preview)),d([]),r.invalidateQueries({queryKey:["ticket-comments",e]}),z.success("Comment added")}catch(N){console.error("Error adding comment:",N),z.error("Failed to add comment")}finally{m(!1)}},j=N=>N!=null&&N.startsWith("image/")?t.jsx(Bu,{className:"h-4 w-4"}):t.jsx(Zt,{className:"h-4 w-4"}),w=async N=>{try{const{data:_,error:C}=await B.storage.from("ticket-attachments").download(N.file_path);if(C)throw C;const E=URL.createObjectURL(_),k=document.createElement("a");k.href=E,k.download=N.name,document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(E)}catch(_){console.error("Download error:",_),z.error("Failed to download file")}},b=N=>{const{data:_}=B.storage.from("ticket-attachments").getPublicUrl(N);return _.publicUrl};return p?t.jsx("div",{className:"p-6",children:t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsx(Ie,{className:"h-6 w-6 animate-spin text-muted-foreground"})})}):t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsx("div",{className:"space-y-4",children:h.length===0?t.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No comments yet"}):h.map(N=>{var _,C,E,k,A;return t.jsxs("div",{className:`p-4 rounded-lg border ${N.is_internal?"bg-warning/5 border-warning/20":"bg-muted/50"}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Tt,{className:"h-8 w-8",children:t.jsx(Pt,{children:(((_=N.profiles)==null?void 0:_.full_name)||((C=N.profiles)==null?void 0:C.email)||"?").charAt(0).toUpperCase()})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-sm",children:((E=N.profiles)==null?void 0:E.full_name)||((A=(k=N.profiles)==null?void 0:k.email)==null?void 0:A.split("@")[0])||"Unknown"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:pe(new Date(N.created_at),"MMM d, yyyy 'at' h:mm a")})]})]}),N.is_internal&&t.jsx($,{variant:"outline",className:"text-warning border-warning/30 bg-warning/10",children:"Internal"})]}),t.jsx("p",{className:"text-sm text-muted-foreground ml-10 whitespace-pre-wrap",children:N.content}),N.attachments&&N.attachments.length>0&&t.jsx("div",{className:"mt-3 ml-10 flex flex-wrap gap-2",children:N.attachments.map(L=>{var H;return t.jsxs("div",{className:"flex items-center gap-2 p-2 bg-background rounded border cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>w(L),children:[(H=L.mime_type)!=null&&H.startsWith("image/")?t.jsx("img",{src:b(L.file_path),alt:L.name,className:"h-8 w-8 object-cover rounded"}):j(L.mime_type),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-xs font-medium truncate max-w-[150px]",children:L.name}),L.file_size&&t.jsxs("p",{className:"text-xs text-muted-foreground",children:[(L.file_size/1024).toFixed(1)," KB"]})]}),t.jsx($a,{className:"h-3 w-3 text-muted-foreground"})]},L.id)})})]},N.id)})}),t.jsx(yr,{className:"my-4"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(Bt,{placeholder:"Add a comment...",value:a,onChange:N=>i(N.target.value),rows:3}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("input",{ref:n,type:"file",multiple:!0,accept:m1.join(","),onChange:g,className:"hidden",id:"comment-files"}),c.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2",children:c.map((N,_)=>t.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted rounded-lg group relative",children:[N.preview?t.jsx("img",{src:N.preview,alt:N.file.name,className:"h-10 w-10 object-cover rounded"}):t.jsx("div",{className:"h-10 w-10 bg-background rounded flex items-center justify-center",children:t.jsx(Zt,{className:"h-4 w-4"})}),t.jsxs("div",{className:"max-w-[120px]",children:[t.jsx("p",{className:"text-xs font-medium truncate",children:N.file.name}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[(N.file.size/1024).toFixed(1)," KB"]})]}),N.uploading?t.jsx(Ie,{className:"h-4 w-4 animate-spin text-muted-foreground"}):t.jsx(T,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>x(_),children:t.jsx(Ct,{className:"h-3 w-3"})})]},_))})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[t.jsx("input",{type:"checkbox",checked:o,onChange:N=>l(N.target.checked),className:"rounded"}),"Internal note (not visible to customer)"]}),t.jsxs(T,{type:"button",variant:"ghost",size:"sm",onClick:()=>{var N;return(N=n.current)==null?void 0:N.click()},className:"text-muted-foreground",children:[t.jsx(tv,{className:"mr-1 h-4 w-4"}),"Attach"]})]}),t.jsx(T,{onClick:y,disabled:u||!a.trim()&&c.length===0,children:u?t.jsxs(t.Fragment,{children:[t.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):t.jsxs(t.Fragment,{children:[t.jsx(zf,{className:"mr-2 h-4 w-4"}),"Send"]})})]})]})]})}const bH=e=>e?e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`:"Unknown size",NH=e=>e?e.startsWith("image/")?t.jsx(Bu,{className:"h-8 w-8 text-primary"}):e==="application/pdf"?t.jsx(Zt,{className:"h-8 w-8 text-destructive"}):e.includes("word")||e.includes("document")?t.jsx(Zt,{className:"h-8 w-8 text-primary"}):t.jsx(ab,{className:"h-8 w-8 text-muted-foreground"}):t.jsx(ab,{className:"h-8 w-8 text-muted-foreground"});function CH({ticketId:e}){const{data:s=[],isLoading:r}=fe({queryKey:["ticket-attachments",e],queryFn:async()=>{const{data:i,error:o}=await B.from("ticket_attachments").select("*").eq("ticket_id",e).is("comment_id",null).order("created_at",{ascending:!1});if(o)throw o;return i},enabled:!!e}),n=async i=>{try{const{data:o,error:l}=await B.storage.from("ticket-attachments").download(i.file_path);if(l)throw l;const c=URL.createObjectURL(o),d=document.createElement("a");d.href=c,d.download=i.name,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(c),z.success("File downloaded successfully")}catch(o){console.error("Download error:",o),z.error("Failed to download file")}},a=async i=>{try{const{data:o}=B.storage.from("ticket-attachments").getPublicUrl(i.file_path);window.open(o.publicUrl,"_blank")}catch(o){console.error("Preview error:",o),z.error("Failed to preview file")}};return r?t.jsxs(P,{children:[t.jsx(W,{children:t.jsxs(V,{className:"flex items-center gap-2",children:[t.jsx(tv,{className:"h-5 w-5"}),"Attachments"]})}),t.jsx(M,{children:t.jsxs("div",{className:"space-y-3",children:[t.jsx(je,{className:"h-16 w-full"}),t.jsx(je,{className:"h-16 w-full"})]})})]}):s.length===0?null:t.jsxs(P,{children:[t.jsx(W,{children:t.jsxs(V,{className:"flex items-center gap-2",children:[t.jsx(tv,{className:"h-5 w-5"}),"Attachments (",s.length,")"]})}),t.jsx(M,{children:t.jsx("div",{className:"space-y-3",children:s.map(i=>{var l,c;const o=(l=i.mime_type)==null?void 0:l.startsWith("image/");return t.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[o?t.jsx("div",{className:"h-12 w-12 rounded-md overflow-hidden bg-muted cursor-pointer flex-shrink-0",onClick:()=>a(i),children:t.jsx("img",{src:B.storage.from("ticket-attachments").getPublicUrl(i.file_path).data.publicUrl,alt:i.name,className:"h-full w-full object-cover",onError:d=>{d.currentTarget.style.display="none"}})}):t.jsx("div",{className:"h-12 w-12 rounded-md bg-muted flex items-center justify-center flex-shrink-0",children:NH(i.mime_type)}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-medium text-sm truncate",children:i.name}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[bH(i.file_size),i.mime_type&&`  ${(c=i.mime_type.split("/")[1])==null?void 0:c.toUpperCase()}`]})]}),t.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[o&&t.jsx(T,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>a(i),title:"Preview",children:t.jsx(Uu,{className:"h-4 w-4"})}),t.jsx(T,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>n(i),title:"Download",children:t.jsx($a,{className:"h-4 w-4"})})]})]},i.id)})})})]})}function _H({dueDate:e,slaResponseDue:s,slaResolutionDue:r,status:n}){const a=["resolved","closed"].includes(n),i=d=>{if(!d)return null;const u=new Date(d),m=new Date;if(oa(u)&&!a)return{status:"overdue",label:"Overdue",variant:"destructive",icon:t.jsx(qt,{className:"h-4 w-4"}),className:"bg-destructive/10 text-destructive border-destructive/20"};const h=EE(u,m),p=Bq(u,m);return Fc(u)?{status:"due_today",label:`Due today (${p}h left)`,variant:"warning",icon:t.jsx(Oe,{className:"h-4 w-4"}),className:"bg-orange-500/10 text-orange-500 border-orange-500/20"}:h<=2?{status:"due_soon",label:`Due in ${h} day${h===1?"":"s"}`,variant:"warning",icon:t.jsx(Oe,{className:"h-4 w-4"}),className:"bg-yellow-500/10 text-yellow-500 border-yellow-500/20"}:{status:"on_track",label:`Due ${pe(u,"MMM d, yyyy")}`,variant:"secondary",icon:t.jsx(Oe,{className:"h-4 w-4"}),className:"bg-muted text-muted-foreground"}},o=i(e),l=i(s),c=i(r);return!e&&!s&&!r?null:t.jsxs(P,{children:[t.jsx(W,{className:"pb-3",children:t.jsxs(V,{className:"text-sm flex items-center gap-2",children:[t.jsx(Oe,{className:"h-4 w-4"}),"Deadlines"]})}),t.jsxs(M,{className:"space-y-3",children:[e&&o&&t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-muted-foreground",children:"Due Date"}),t.jsx("div",{className:"flex items-center gap-2",children:a?t.jsxs($,{variant:"secondary",className:"gap-1 bg-green-500/10 text-green-500 border-green-500/20",children:[t.jsx(vt,{className:"h-3 w-3"}),"Completed"]}):t.jsxs($,{variant:"outline",className:`gap-1 ${o.className}`,children:[o.icon,o.label]})})]}),s&&l&&t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-muted-foreground",children:"First Response SLA"}),t.jsxs($,{variant:"outline",className:`gap-1 ${l.className}`,children:[l.icon,pe(new Date(s),"MMM d, h:mm a")]})]}),r&&c&&t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-muted-foreground",children:"Resolution SLA"}),t.jsxs($,{variant:"outline",className:`gap-1 ${c.className}`,children:[c.icon,pe(new Date(r),"MMM d, h:mm a")]})]}),e&&t.jsx("div",{className:"pt-2 border-t",children:t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Full deadline: ",pe(new Date(e),"EEEE, MMMM d, yyyy 'at' h:mm a")]})})]})]})}const Xs={open:{label:"Open",bgColor:"bg-blue-500",textColor:"text-white"},in_progress:{label:"In Progress",bgColor:"bg-yellow-500",textColor:"text-black"},waiting_customer:{label:"Waiting Customer",bgColor:"bg-purple-500",textColor:"text-white"},waiting_internal:{label:"Waiting Internal",bgColor:"bg-orange-500",textColor:"text-white"},resolved:{label:"Resolved",bgColor:"bg-green-500",textColor:"text-white"},closed:{label:"Closed",bgColor:"bg-gray-500",textColor:"text-white"}},er={low:{label:"Low",bgColor:"bg-slate-400",textColor:"text-white"},medium:{label:"Medium",bgColor:"bg-blue-500",textColor:"text-white"},high:{label:"High",bgColor:"bg-orange-500",textColor:"text-white"},critical:{label:"Critical",bgColor:"bg-red-600",textColor:"text-white"}},ni={epic:{icon:t.jsx(Yr,{className:"h-4 w-4"}),label:"Epic",color:"bg-purple-500/10 text-purple-500 border-purple-500/20"},story:{icon:t.jsx(qt,{className:"h-4 w-4"}),label:"Story",color:"bg-blue-500/10 text-blue-500 border-blue-500/20"},bug:{icon:t.jsx(Wc,{className:"h-4 w-4"}),label:"Bug",color:"bg-red-500/10 text-red-500 border-red-500/20"},monitoring:{icon:t.jsx(Fa,{className:"h-4 w-4"}),label:"Monitoring",color:"bg-orange-500/10 text-orange-500 border-orange-500/20"}};function Kx(){var S,R,te,Q,Y,oe,X,xe,ve,Ae,Be,et,as,Es,Qr,fr,be,ke,jt,pt,Vn,xa,Hn,lh;const{id:e}=ma(),s=Qe(),r=ht(),{role:n}=Ze(),{user:a}=ft(),[i,o]=f.useState(!1),[l,c]=f.useState(!1),d=n==="infraweave_admin"||n==="infraweave_employee"||n==="company_admin",u=e?`TKT-${e.slice(0,8).toUpperCase()}`:"",m=typeof window<"u"?`${window.location.origin}/tickets/${e}`:"",{data:h,isLoading:p}=fe({queryKey:["ticket",e],queryFn:async()=>{const{data:Ne,error:Me}=await B.from("tickets").select(`
          *,
          projects (id, name),
          organizations (id, name)
        `).eq("id",e).single();if(Me)throw Me;return Ne},enabled:!!e}),{data:g}=fe({queryKey:["ticket-parent",h==null?void 0:h.parent_ticket_id],queryFn:async()=>{if(!(h!=null&&h.parent_ticket_id))return null;const{data:Ne,error:Me}=await B.from("tickets").select("id, title, status, priority, category, assigned_to").eq("id",h.parent_ticket_id).single();return Me?null:Ne},enabled:!!(h!=null&&h.parent_ticket_id)}),{data:x=[]}=fe({queryKey:["ticket-children",e],queryFn:async()=>{const{data:Ne,error:Me}=await B.from("tickets").select("id, title, status, priority, category, assigned_to").eq("parent_ticket_id",e).order("created_at",{ascending:!0});return Me?[]:Ne},enabled:!!e}),v=[g==null?void 0:g.assigned_to,...x.map(Ne=>Ne.assigned_to)].filter(Boolean),{data:y={}}=fe({queryKey:["profiles-linked",v],queryFn:async()=>{if(v.length===0)return{};const{data:Ne}=await B.from("profiles_safe").select("id, full_name, email").in("id",v),Me={};return Ne==null||Ne.forEach(Dt=>{Me[Dt.id]=Dt}),Me},enabled:v.length>0}),{data:j}=fe({queryKey:["profile",h==null?void 0:h.assigned_to],queryFn:async()=>{if(!(h!=null&&h.assigned_to))return null;const{data:Ne,error:Me}=await B.from("profiles_safe").select("*").eq("id",h.assigned_to).single();return Me?null:Ne},enabled:!!(h!=null&&h.assigned_to)}),{data:w}=fe({queryKey:["profile-reporter",h==null?void 0:h.reporter_id],queryFn:async()=>{if(!(h!=null&&h.reporter_id))return null;const{data:Ne,error:Me}=await B.from("profiles_safe").select("*").eq("id",h.reporter_id).single();return Me?null:Ne},enabled:!!(h!=null&&h.reporter_id)}),b=(h==null?void 0:h.watchers)||[],{data:N=[]}=fe({queryKey:["profiles-watchers",b],queryFn:async()=>{if(b.length===0)return[];const{data:Ne,error:Me}=await B.from("profiles_safe").select("id, full_name, email").in("id",b);return Me?[]:Ne||[]},enabled:b.length>0}),{data:_}=fe({queryKey:["profile-current",a==null?void 0:a.id],queryFn:async()=>{if(!(a!=null&&a.id))return null;const{data:Ne,error:Me}=await B.from("profiles_safe").select("*").eq("id",a.id).single();return Me?null:Ne},enabled:!!(a!=null&&a.id)}),C=_t({mutationFn:async Ne=>{const{error:Me}=await B.from("tickets").update(Ne).eq("id",e);if(Me)throw Me},onSuccess:()=>{r.invalidateQueries({queryKey:["ticket",e]})}}),E=f.useCallback(()=>{const Ne=[],Me=new Set;return w!=null&&w.email&&w.id!==(a==null?void 0:a.id)&&!Me.has(w.email)&&(Ne.push({email:w.email,name:w.full_name||void 0,role:"creator"}),Me.add(w.email)),j!=null&&j.email&&(h==null?void 0:h.assigned_to)!==(a==null?void 0:a.id)&&!Me.has(j.email)&&(Ne.push({email:j.email,name:j.full_name||void 0,role:"assignee"}),Me.add(j.email)),N.forEach(Dt=>{Dt.email&&Dt.id!==(a==null?void 0:a.id)&&!Me.has(Dt.email)&&(Ne.push({email:Dt.email,name:Dt.full_name||void 0,role:"watcher"}),Me.add(Dt.email))}),Ne},[w,j,N,a==null?void 0:a.id,h==null?void 0:h.assigned_to]),k=async Ne=>{var Kn,no;const Me=(h==null?void 0:h.status)||"open";C.mutate({status:Ne,...Ne==="resolved"?{resolved_at:new Date().toISOString()}:{},...Ne==="closed"?{closed_at:new Date().toISOString()}:{}}),z.success(`Status updated to ${((Kn=Xs[Ne])==null?void 0:Kn.label)||Ne}`);const Dt=E();Dt.length>0&&h&&sy({type:"status_changed",ticketId:h.id,ticketTitle:h.title,projectName:(no=h.projects)==null?void 0:no.name,status:Ne,previousStatus:Me,priority:h.priority,recipients:Dt,updatedBy:(_==null?void 0:_.full_name)||(a==null?void 0:a.email)||"Unknown"})},A=Ne=>{var Dt,Kn;C.mutate({priority:Ne}),z.success(`Priority updated to ${((Dt=er[Ne])==null?void 0:Dt.label)||Ne}`);const Me=E();Me.length>0&&h&&sy({type:"updated",ticketId:h.id,ticketTitle:h.title,projectName:(Kn=h.projects)==null?void 0:Kn.name,status:h.status,priority:Ne,recipients:Me,updatedBy:(_==null?void 0:_.full_name)||(a==null?void 0:a.email)||"Unknown"})},L=f.useCallback(Ne=>{C.mutate({watchers:Ne})},[C]),H=()=>{navigator.clipboard.writeText(m),c(!0),z.success("Link copied to clipboard!"),setTimeout(()=>c(!1),2e3)},F=()=>{navigator.clipboard.writeText(u),z.success("Ticket number copied!")},I=()=>window.location.pathname.startsWith("/employee")?"/employee":window.location.pathname.startsWith("/admin")?"/admin":n==="engineer"?"/my-tickets":n==="infraweave_employee"?"/employee":n==="infraweave_admin"?"/admin":"/tickets",G=Ne=>{s(`/tickets/${Ne}`)};if(p)return t.jsx(we,{children:t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsx(je,{className:"h-16 w-full"}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[t.jsx(je,{className:"h-48 w-full"}),t.jsx(je,{className:"h-64 w-full"})]}),t.jsx("div",{className:"space-y-4",children:t.jsx(je,{className:"h-64 w-full"})})]})]})});if(!h)return t.jsx(we,{children:t.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] gap-4",children:[t.jsx(fs,{className:"h-16 w-16 text-muted-foreground"}),t.jsx("h2",{className:"text-2xl font-semibold",children:"Ticket Not Found"}),t.jsx("p",{className:"text-muted-foreground",children:"The ticket you're looking for doesn't exist."}),t.jsxs(T,{onClick:()=>s(I()),children:[t.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Back to Tickets"]})]})});const ee=h.category||"story",K=ni[ee]||ni.story,D=Xs[h.status]||Xs.open,q=er[h.priority]||er.medium,re=g||x.length>0;return t.jsx(we,{children:t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(T,{variant:"ghost",size:"icon",onClick:()=>s(I()),children:t.jsx(Ft,{className:"h-4 w-4"})}),t.jsxs($,{variant:"outline",className:`gap-1 ${K.color}`,children:[K.icon,K.label]})]}),t.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[t.jsx("h1",{className:"text-3xl font-bold font-mono tracking-tight",children:u}),t.jsxs(T,{variant:"outline",size:"sm",onClick:F,className:"gap-1",children:[t.jsx(Uo,{className:"h-3 w-3"}),"Copy ID"]}),t.jsxs(T,{variant:"outline",size:"sm",onClick:H,className:"gap-1",children:[l?t.jsx(On,{className:"h-3 w-3"}):t.jsx(Uu,{className:"h-3 w-3"}),l?"Copied!":"Share Link"]})]}),t.jsx("h2",{className:"text-xl text-foreground",children:h.title}),t.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground flex-wrap",children:[h.organizations&&t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Qt,{className:"h-3 w-3"}),h.organizations.name]}),h.projects&&t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(bt,{className:"h-3 w-3"}),h.projects.name]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Lr,{className:"h-3 w-3"}),"Created ",pe(new Date(h.created_at),"MMM d, yyyy")]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsx($,{className:`${D.bgColor} ${D.textColor} border-0 px-3 py-1`,children:D.label}),t.jsxs($,{className:`${q.bgColor} ${q.textColor} border-0 px-3 py-1`,children:[q.label," Priority"]}),(n==="infraweave_admin"||n==="infraweave_employee"||n==="company_admin")&&t.jsxs(T,{variant:"outline",size:"sm",children:[t.jsx(zo,{className:"mr-2 h-4 w-4"}),"Edit"]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[t.jsxs(P,{children:[t.jsx(W,{children:t.jsx(V,{children:"Description"})}),t.jsx(M,{children:t.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:h.description||"No description provided."})})]}),t.jsx(CH,{ticketId:h.id}),re&&t.jsxs(P,{children:[t.jsx(W,{children:t.jsxs(V,{className:"flex items-center gap-2",children:[t.jsx(ob,{className:"h-4 w-4"}),"Linked Tickets"]})}),t.jsxs(M,{className:"space-y-3",children:[g&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase",children:"Parent Epic"}),t.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg hover:bg-accent/50 cursor-pointer transition-colors",onClick:()=>G(g.id),children:[t.jsxs($,{variant:"outline",className:(S=ni[g.category||"epic"])==null?void 0:S.color,children:[(R=ni[g.category||"epic"])==null?void 0:R.icon,(te=ni[g.category||"epic"])==null?void 0:te.label]}),t.jsx("span",{className:"font-medium flex-1 truncate",children:g.title}),t.jsx($,{className:`${(Q=Xs[g.status])==null?void 0:Q.bgColor} ${(Y=Xs[g.status])==null?void 0:Y.textColor} border-0 text-xs`,children:(oe=Xs[g.status])==null?void 0:oe.label}),t.jsx($,{className:`${(X=er[g.priority])==null?void 0:X.bgColor} ${(xe=er[g.priority])==null?void 0:xe.textColor} border-0 text-xs`,children:(ve=er[g.priority])==null?void 0:ve.label}),g.assigned_to&&y[g.assigned_to]&&t.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[t.jsx(Tt,{className:"h-5 w-5",children:t.jsx(Pt,{className:"text-xs",children:((Be=(Ae=y[g.assigned_to])==null?void 0:Ae.full_name)==null?void 0:Be.charAt(0))||"?"})}),t.jsx("span",{className:"hidden sm:inline",children:(et=y[g.assigned_to])==null?void 0:et.full_name})]}),t.jsx(ln,{className:"h-4 w-4 text-muted-foreground"})]})]}),x.length>0&&t.jsxs("div",{className:"space-y-2",children:[g&&t.jsx(yr,{className:"my-3"}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase",children:ee==="epic"?"Stories & Bugs":"Child Tickets"}),t.jsx($,{variant:"secondary",children:x.length})]}),t.jsx("div",{className:"space-y-2",children:x.map(Ne=>{var Me,Dt,Kn,no,ao,ch,nd,cl,ga,ad,va,dh;return t.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg hover:bg-accent/50 cursor-pointer transition-colors",onClick:()=>G(Ne.id),children:[t.jsxs($,{variant:"outline",className:(Me=ni[Ne.category||"story"])==null?void 0:Me.color,children:[(Dt=ni[Ne.category||"story"])==null?void 0:Dt.icon,(Kn=ni[Ne.category||"story"])==null?void 0:Kn.label]}),t.jsx("span",{className:"font-medium flex-1 truncate",children:Ne.title}),t.jsx($,{className:`${(no=Xs[Ne.status])==null?void 0:no.bgColor} ${(ao=Xs[Ne.status])==null?void 0:ao.textColor} border-0 text-xs`,children:(ch=Xs[Ne.status])==null?void 0:ch.label}),t.jsx($,{className:`${(nd=er[Ne.priority])==null?void 0:nd.bgColor} ${(cl=er[Ne.priority])==null?void 0:cl.textColor} border-0 text-xs`,children:(ga=er[Ne.priority])==null?void 0:ga.label}),Ne.assigned_to&&y[Ne.assigned_to]&&t.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[t.jsx(Tt,{className:"h-5 w-5",children:t.jsx(Pt,{className:"text-xs",children:((va=(ad=y[Ne.assigned_to])==null?void 0:ad.full_name)==null?void 0:va.charAt(0))||"?"})}),t.jsx("span",{className:"hidden sm:inline",children:(dh=y[Ne.assigned_to])==null?void 0:dh.full_name})]}),t.jsx(ln,{className:"h-4 w-4 text-muted-foreground"})]},Ne.id)})})]})]})]}),t.jsxs(P,{children:[t.jsx(W,{children:t.jsx(V,{children:"Comments & Discussion"})}),t.jsx(M,{className:"p-0",children:t.jsx(wH,{ticketId:h.id})})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs(P,{children:[t.jsx(W,{children:t.jsx(V,{children:"Properties"})}),t.jsxs(M,{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm font-medium",children:"Status"}),d?t.jsxs($e,{value:h.status,onValueChange:k,children:[t.jsx(Le,{className:`${(as=Xs[h.status])==null?void 0:as.bgColor} ${(Es=Xs[h.status])==null?void 0:Es.textColor} border-0`,children:t.jsx(Ue,{})}),t.jsx(Fe,{children:Object.entries(Xs).map(([Ne,Me])=>t.jsx(Z,{value:Ne,children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:`w-2 h-2 rounded-full ${Me.bgColor}`}),Me.label]})},Ne))})]}):t.jsx($,{className:`${(Qr=Xs[h.status])==null?void 0:Qr.bgColor} ${(fr=Xs[h.status])==null?void 0:fr.textColor} border-0 w-full justify-center py-2`,children:(be=Xs[h.status])==null?void 0:be.label})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm font-medium",children:"Priority"}),d?t.jsxs($e,{value:h.priority,onValueChange:A,children:[t.jsx(Le,{className:`${(ke=er[h.priority])==null?void 0:ke.bgColor} ${(jt=er[h.priority])==null?void 0:jt.textColor} border-0`,children:t.jsx(Ue,{})}),t.jsx(Fe,{children:Object.entries(er).map(([Ne,Me])=>t.jsx(Z,{value:Ne,children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:`w-2 h-2 rounded-full ${Me.bgColor}`}),Me.label]})},Ne))})]}):t.jsxs($,{className:`${(pt=er[h.priority])==null?void 0:pt.bgColor} ${(Vn=er[h.priority])==null?void 0:Vn.textColor} border-0 w-full justify-center py-2`,children:[(xa=er[h.priority])==null?void 0:xa.label," Priority"]})]}),t.jsx(yr,{}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[t.jsx(qs,{className:"h-4 w-4"}),"Assignee"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Tt,{className:"h-6 w-6",children:t.jsx(Pt,{className:"text-xs",children:((Hn=j==null?void 0:j.full_name)==null?void 0:Hn.charAt(0))||"?"})}),t.jsx("span",{className:"text-sm",children:(j==null?void 0:j.full_name)||"Unassigned"}),(n==="infraweave_admin"||n==="infraweave_employee"||n==="company_admin")&&t.jsx(T,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:()=>o(!0),children:t.jsx(Wu,{className:"h-3 w-3"})})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[t.jsx(ob,{className:"h-4 w-4"}),"Project"]}),t.jsx("span",{className:"text-sm",children:((lh=h.projects)==null?void 0:lh.name)||"None"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[t.jsx(Lr,{className:"h-4 w-4"}),"Created"]}),t.jsx("span",{className:"text-sm",children:pe(new Date(h.created_at),"MMM d, yyyy")})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[t.jsx(Oe,{className:"h-4 w-4"}),"Updated"]}),t.jsx("span",{className:"text-sm",children:pe(new Date(h.updated_at),"MMM d, yyyy")})]})]})]})]}),t.jsx(_H,{dueDate:h.due_date,slaResponseDue:h.sla_response_due,slaResolutionDue:h.sla_resolution_due,status:h.status}),h.project_id&&t.jsx(vH,{ticketId:h.id,projectId:h.project_id,watcherIds:h.watchers||[],onWatchersChange:L})]})]}),(n==="infraweave_admin"||n==="infraweave_employee"||n==="company_admin")&&t.jsx(yH,{open:i,onOpenChange:o,ticketId:h.id,ticketTitle:h.title,currentAssigneeId:h.assigned_to})]})})}var xT="AlertDialog",[SH]=ks(xT,[P4]),Qa=P4(),gT=e=>{const{__scopeAlertDialog:s,...r}=e,n=Qa(s);return t.jsx(up,{...n,...r,modal:!0})};gT.displayName=xT;var kH="AlertDialogTrigger",vT=f.forwardRef((e,s)=>{const{__scopeAlertDialog:r,...n}=e,a=Qa(r);return t.jsx(K4,{...a,...n,ref:s})});vT.displayName=kH;var EH="AlertDialogPortal",yT=e=>{const{__scopeAlertDialog:s,...r}=e,n=Qa(s);return t.jsx(hp,{...n,...r})};yT.displayName=EH;var AH="AlertDialogOverlay",jT=f.forwardRef((e,s)=>{const{__scopeAlertDialog:r,...n}=e,a=Qa(r);return t.jsx(Xc,{...a,...n,ref:s})});jT.displayName=AH;var sc="AlertDialogContent",[TH,PH]=SH(sc),RH=eS("AlertDialogContent"),wT=f.forwardRef((e,s)=>{const{__scopeAlertDialog:r,children:n,...a}=e,i=Qa(r),o=f.useRef(null),l=Ve(s,o),c=f.useRef(null);return t.jsx(Pz,{contentName:sc,titleName:bT,docsSlug:"alert-dialog",children:t.jsx(TH,{scope:r,cancelRef:c,children:t.jsxs(ed,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:de(a.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[t.jsx(RH,{children:n}),t.jsx(DH,{contentRef:o})]})})})});wT.displayName=sc;var bT="AlertDialogTitle",NT=f.forwardRef((e,s)=>{const{__scopeAlertDialog:r,...n}=e,a=Qa(r);return t.jsx(Xu,{...a,...n,ref:s})});NT.displayName=bT;var CT="AlertDialogDescription",_T=f.forwardRef((e,s)=>{const{__scopeAlertDialog:r,...n}=e,a=Qa(r);return t.jsx(eh,{...a,...n,ref:s})});_T.displayName=CT;var IH="AlertDialogAction",ST=f.forwardRef((e,s)=>{const{__scopeAlertDialog:r,...n}=e,a=Qa(r);return t.jsx(mp,{...a,...n,ref:s})});ST.displayName=IH;var kT="AlertDialogCancel",ET=f.forwardRef((e,s)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:a}=PH(kT,r),i=Qa(r),o=Ve(s,a);return t.jsx(mp,{...i,...n,ref:o})});ET.displayName=kT;var DH=({contentRef:e})=>{const s=`\`${sc}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${sc}\` by passing a \`${CT}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${sc}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return f.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(s)},[s,e]),null},OH=gT,MH=vT,LH=yT,AT=jT,TT=wT,PT=ST,RT=ET,IT=NT,DT=_T;const cn=OH,Jo=MH,FH=LH,OT=f.forwardRef(({className:e,...s},r)=>t.jsx(AT,{className:J("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s,ref:r}));OT.displayName=AT.displayName;const Ur=f.forwardRef(({className:e,...s},r)=>t.jsxs(FH,{children:[t.jsx(OT,{}),t.jsx(TT,{ref:r,className:J("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s})]}));Ur.displayName=TT.displayName;const Br=({className:e,...s})=>t.jsx("div",{className:J("flex flex-col space-y-2 text-center sm:text-left",e),...s});Br.displayName="AlertDialogHeader";const zr=({className:e,...s})=>t.jsx("div",{className:J("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});zr.displayName="AlertDialogFooter";const qr=f.forwardRef(({className:e,...s},r)=>t.jsx(IT,{ref:r,className:J("text-lg font-semibold",e),...s}));qr.displayName=IT.displayName;const Wr=f.forwardRef(({className:e,...s},r)=>t.jsx(DT,{ref:r,className:J("text-sm text-muted-foreground",e),...s}));Wr.displayName=DT.displayName;const Vr=f.forwardRef(({className:e,...s},r)=>t.jsx(PT,{ref:r,className:J(gu(),e),...s}));Vr.displayName=PT.displayName;const Hr=f.forwardRef(({className:e,...s},r)=>t.jsx(RT,{ref:r,className:J(gu({variant:"outline"}),"mt-2 sm:mt-0",e),...s}));Hr.displayName=RT.displayName;function $H({company:e,variant:s="outline",size:r="sm"}){const{canImpersonate:n,startImpersonation:a,isImpersonating:i,impersonatedCompany:o}=u2(),[l,c]=f.useState(!1);if(!n)return null;if(i&&(o==null?void 0:o.id)===e.id)return t.jsxs(T,{variant:"secondary",size:r,disabled:!0,children:[t.jsx(rn,{className:"mr-2 h-4 w-4"}),"Currently Viewing"]});const d=async()=>{await a(e),c(!1)};return t.jsxs(cn,{open:l,onOpenChange:c,children:[t.jsx(Jo,{asChild:!0,children:t.jsxs(T,{variant:s,size:r,children:[t.jsx(rn,{className:"mr-2 h-4 w-4"}),"View as Company"]})}),t.jsxs(Ur,{children:[t.jsxs(Br,{children:[t.jsxs(qr,{className:"flex items-center gap-2",children:[t.jsx(qt,{className:"h-5 w-5 text-warning"}),"Start Impersonation Mode"]}),t.jsxs(Wr,{className:"space-y-3",children:[t.jsxs("p",{children:["You are about to view the application as ",t.jsx("strong",{children:e.name}),"."]}),t.jsxs("div",{className:"bg-muted p-3 rounded-lg text-sm space-y-2",children:[t.jsx("p",{className:"font-medium text-foreground",children:"Important:"}),t.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground",children:[t.jsx("li",{children:"All your actions will be logged for audit purposes"}),t.jsx("li",{children:"You will see the app exactly as a Company Admin would"}),t.jsx("li",{children:"Any changes you make will affect the company's data"}),t.jsx("li",{children:"A banner will remain visible while impersonating"})]})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"This action is logged with your admin credentials for security compliance."})]})]}),t.jsxs(zr,{children:[t.jsx(Hr,{children:"Cancel"}),t.jsxs(Vr,{onClick:d,className:"bg-warning text-warning-foreground hover:bg-warning/90",children:[t.jsx(rn,{className:"mr-2 h-4 w-4"}),"Start Impersonation"]})]})]})]})}function UH(){const[e,s]=f.useState(!1),[r,n]=f.useState(""),[a,i]=f.useState(""),[o,l]=f.useState(""),[c,d]=f.useState(""),[u,m]=f.useState("standard"),h=ht(),p=_t({mutationFn:async()=>{const{data:v,error:y}=await B.from("organizations").insert({name:r,slug:a||r.toLowerCase().replace(/\s+/g,"-"),domain:o||null,billing_email:c||null,subscription_tier:u,subscription_status:"active"}).select().single();if(y)throw y;return v},onSuccess:()=>{z.success("Company created successfully"),h.invalidateQueries({queryKey:["all-companies"]}),s(!1),g()},onError:v=>{z.error(`Failed to create company: ${v.message}`)}}),g=()=>{n(""),i(""),l(""),d(""),m("standard")},x=v=>{if(v.preventDefault(),!r.trim()){z.error("Company name is required");return}p.mutate()};return t.jsxs(Xt,{open:e,onOpenChange:s,children:[t.jsx($r,{asChild:!0,children:t.jsxs(T,{children:[t.jsx(at,{className:"h-4 w-4 mr-2"}),"Add Company"]})}),t.jsxs(zt,{className:"sm:max-w-md",preventClose:!0,children:[t.jsxs(es,{children:[t.jsx(ts,{children:"Create New Company"}),t.jsx(ss,{children:"Add a new tenant company to the platform."})]}),t.jsxs("form",{onSubmit:x,className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"name",children:"Company Name *"}),t.jsx(se,{id:"name",value:r,onChange:v=>n(v.target.value),placeholder:"Acme Corporation",required:!0})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"slug",children:"Slug"}),t.jsx(se,{id:"slug",value:a,onChange:v=>i(v.target.value),placeholder:"acme-corporation"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Leave empty to auto-generate from name"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"domain",children:"Domain"}),t.jsx(se,{id:"domain",value:o,onChange:v=>l(v.target.value),placeholder:"acme.com"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"billingEmail",children:"Billing Email"}),t.jsx(se,{id:"billingEmail",type:"email",value:c,onChange:v=>d(v.target.value),placeholder:"billing@acme.com"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"tier",children:"Subscription Tier"}),t.jsxs($e,{value:u,onValueChange:m,children:[t.jsx(Le,{children:t.jsx(Ue,{})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"free",children:"Free"}),t.jsx(Z,{value:"standard",children:"Standard"}),t.jsx(Z,{value:"professional",children:"Professional"}),t.jsx(Z,{value:"enterprise",children:"Enterprise"})]})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[t.jsx(T,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),t.jsxs(T,{type:"submit",disabled:p.isPending,children:[p.isPending&&t.jsx(Ie,{className:"h-4 w-4 mr-2 animate-spin"}),"Create Company"]})]})]})]})]})}function BH({company:e,open:s,onOpenChange:r}){const[n,a]=f.useState(""),[i,o]=f.useState(""),[l,c]=f.useState(""),[d,u]=f.useState(""),[m,h]=f.useState("active"),[p,g]=f.useState("standard"),x=ht();f.useEffect(()=>{e&&(a(e.name),o(e.slug),c(e.domain||""),u(e.billingEmail||""),h(e.subscriptionStatus),g(e.subscriptionTier))},[e]);const v=_t({mutationFn:async()=>{if(!e)throw new Error("No company selected");const{error:j}=await B.from("organizations").update({name:n,slug:i,domain:l||null,billing_email:d||null,subscription_status:m,subscription_tier:p}).eq("id",e.id);if(j)throw j},onSuccess:()=>{z.success("Company updated successfully"),x.invalidateQueries({queryKey:["all-companies"]}),r(!1)},onError:j=>{z.error(`Failed to update company: ${j.message}`)}}),y=j=>{if(j.preventDefault(),!n.trim()){z.error("Company name is required");return}v.mutate()};return t.jsx(Xt,{open:s,onOpenChange:r,children:t.jsxs(zt,{className:"sm:max-w-md",preventClose:!0,children:[t.jsxs(es,{children:[t.jsx(ts,{children:"Edit Company"}),t.jsx(ss,{children:"Update company details and subscription."})]}),t.jsxs("form",{onSubmit:y,className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"edit-name",children:"Company Name *"}),t.jsx(se,{id:"edit-name",value:n,onChange:j=>a(j.target.value),required:!0})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"edit-slug",children:"Slug"}),t.jsx(se,{id:"edit-slug",value:i,onChange:j=>o(j.target.value)})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"edit-domain",children:"Domain"}),t.jsx(se,{id:"edit-domain",value:l,onChange:j=>c(j.target.value)})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"edit-billingEmail",children:"Billing Email"}),t.jsx(se,{id:"edit-billingEmail",type:"email",value:d,onChange:j=>u(j.target.value)})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"edit-status",children:"Status"}),t.jsxs($e,{value:m,onValueChange:h,children:[t.jsx(Le,{children:t.jsx(Ue,{})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"active",children:"Active"}),t.jsx(Z,{value:"inactive",children:"Inactive"}),t.jsx(Z,{value:"suspended",children:"Suspended"}),t.jsx(Z,{value:"cancelled",children:"Cancelled"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"edit-tier",children:"Tier"}),t.jsxs($e,{value:p,onValueChange:g,children:[t.jsx(Le,{children:t.jsx(Ue,{})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"free",children:"Free"}),t.jsx(Z,{value:"standard",children:"Standard"}),t.jsx(Z,{value:"professional",children:"Professional"}),t.jsx(Z,{value:"enterprise",children:"Enterprise"})]})]})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[t.jsx(T,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Cancel"}),t.jsxs(T,{type:"submit",disabled:v.isPending,children:[v.isPending&&t.jsx(Ie,{className:"h-4 w-4 mr-2 animate-spin"}),"Save Changes"]})]})]})]})})}function zH({company:e,open:s,onOpenChange:r}){const n=ht(),a=_t({mutationFn:async()=>{if(!e)throw new Error("No company selected");const{error:i}=await B.from("organizations").delete().eq("id",e.id);if(i)throw i},onSuccess:()=>{z.success("Company deleted successfully"),n.invalidateQueries({queryKey:["all-companies"]}),r(!1)},onError:i=>{z.error(`Failed to delete company: ${i.message}`)}});return t.jsx(cn,{open:s,onOpenChange:r,children:t.jsxs(Ur,{children:[t.jsxs(Br,{children:[t.jsx(qr,{children:"Delete Company"}),t.jsxs(Wr,{children:["Are you sure you want to delete ",t.jsx("strong",{children:e==null?void 0:e.name}),"? This action cannot be undone. All associated projects, members, and data will be permanently removed."]})]}),t.jsxs(zr,{children:[t.jsx(Hr,{children:"Cancel"}),t.jsxs(Vr,{onClick:()=>a.mutate(),disabled:a.isPending,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:[a.isPending&&t.jsx(Ie,{className:"h-4 w-4 mr-2 animate-spin"}),"Delete Company"]})]})]})})}function qH(){const{isInfraweaveAdmin:e,isLoading:s}=Ze(),r=Qe(),[n,a]=f.useState(""),[i,o]=f.useState(null),[l,c]=f.useState(null),{data:d=[],isLoading:u}=th();if(s||u)return t.jsx(we,{children:t.jsx("div",{className:"p-6",children:"Loading..."})});if(!e)return t.jsx(we,{children:t.jsxs("div",{className:"p-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-destructive",children:"Access Denied"}),t.jsx("p",{className:"text-muted-foreground",children:"Only InfraWeave Admins can access this page."})]})});const m=d.filter(h=>h.name.toLowerCase().includes(n.toLowerCase())||h.slug.toLowerCase().includes(n.toLowerCase()));return t.jsxs(we,{children:[t.jsx(qn,{title:"Companies",subtitle:"Manage all tenant companies",customAction:t.jsx(UH,{})}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"relative max-w-md",children:[t.jsx(ns,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t.jsx(se,{placeholder:"Search companies...",value:n,onChange:h=>a(h.target.value),className:"pl-9"})]}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Total Companies"}),t.jsx(Qt,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsx(M,{children:t.jsx("div",{className:"text-2xl font-bold",children:d.length})})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Active"}),t.jsx(Kt,{className:"h-4 w-4 text-success"})]}),t.jsx(M,{children:t.jsx("div",{className:"text-2xl font-bold text-success",children:d.filter(h=>h.subscriptionStatus==="active").length})})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Standard Tier"}),t.jsx(bt,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsx(M,{children:t.jsx("div",{className:"text-2xl font-bold",children:d.filter(h=>h.subscriptionTier==="standard").length})})]})]}),t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsx(V,{children:"All Companies"}),t.jsx(ce,{children:"Click on a company to view details and projects"})]}),t.jsx(M,{children:t.jsx("div",{className:"space-y-3",children:m.length===0?t.jsx("p",{className:"text-muted-foreground text-center py-8",children:n?"No companies found":"No companies registered yet"}):m.map(h=>t.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-border hover:bg-accent transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-4 flex-1 cursor-pointer",onClick:()=>r(`/admin/companies/${h.id}`),children:[t.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center",children:t.jsx(Qt,{className:"h-5 w-5 text-primary"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:h.name}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:[h.slug,"  Created ",pe(new Date(h.createdAt),"MMM d, yyyy")]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(T,{variant:"ghost",size:"icon-sm",onClick:p=>{p.stopPropagation(),o(h)},children:t.jsx(Bf,{className:"h-4 w-4"})}),t.jsx(T,{variant:"ghost",size:"icon-sm",onClick:p=>{p.stopPropagation(),c(h)},className:"text-destructive hover:text-destructive",children:t.jsx(Rt,{className:"h-4 w-4"})}),t.jsx($H,{company:{id:h.id,name:h.name,slug:h.slug}}),t.jsx($,{variant:h.subscriptionStatus==="active"?"success":"secondary",children:h.subscriptionStatus}),t.jsx($,{variant:"outline",children:h.subscriptionTier}),t.jsx(Ra,{className:"h-4 w-4 text-muted-foreground"})]})]},h.id))})})]}),t.jsx(BH,{company:i,open:!!i,onOpenChange:h=>!h&&o(null)}),t.jsx(zH,{company:l,open:!!l,onOpenChange:h=>!h&&c(null)})]})]})}const rc=[{id:1,title:"Ticket Info",description:"Type, priority & status"},{id:2,title:"Client",description:"Client & contact details"},{id:3,title:"Business",description:"Objectives & impact"},{id:4,title:"Scope",description:"In/out of scope items"},{id:5,title:"Technical",description:"Technology overview"},{id:6,title:"Current State",description:"Existing issues & tools"},{id:7,title:"Desired State",description:"Expected outcomes"},{id:8,title:"Access",description:"Prerequisites & approvals"},{id:9,title:"Deliverables",description:"Expected outputs"},{id:10,title:"Timeline",description:"Dates & deadlines"},{id:11,title:"Ownership",description:"Team assignments"},{id:12,title:"Risk",description:"Risk assessment"},{id:13,title:"Dependencies",description:"Blockers & dependencies"},{id:14,title:"Acceptance",description:"Completion criteria"},{id:15,title:"Attachments",description:"Files & references"},{id:16,title:"Communication",description:"Notes & notifications"},{id:17,title:"Post-Completion",description:"Follow-up items"}],WH=[{value:"discovery",label:"Discovery"},{value:"design",label:"Design"},{value:"implementation",label:"Implementation"},{value:"migration",label:"Migration"},{value:"assessment",label:"Assessment"},{value:"support_change",label:"Support / Change"}],VH=[{value:"low",label:"Low",color:"bg-slate-500"},{value:"medium",label:"Medium",color:"bg-blue-500"},{value:"high",label:"High",color:"bg-orange-500"},{value:"critical",label:"Critical",color:"bg-red-500"}],HH=[{value:"new",label:"New"},{value:"in_review",label:"In Review"},{value:"approved",label:"Approved"},{value:"in_progress",label:"In Progress"},{value:"blocked",label:"Blocked"},{value:"completed",label:"Completed"}],KH=[{value:"data_center",label:"Data Center"},{value:"campus",label:"Campus"},{value:"wan",label:"WAN"},{value:"cloud",label:"Cloud"},{value:"hybrid",label:"Hybrid"}],GH=[{value:"new_build",label:"New Build"},{value:"upgrade",label:"Upgrade"},{value:"issue",label:"Issue Resolution"},{value:"compliance",label:"Compliance"},{value:"optimization",label:"Optimization"}],YH=[{value:"routing_switching",label:"Routing & Switching"},{value:"security_firewall",label:"Security / Firewall"},{value:"wireless",label:"Wireless"},{value:"cloud",label:"Cloud"},{value:"automation",label:"Automation"}],QH=[{value:"production",label:"Production"},{value:"dr",label:"DR"},{value:"lab",label:"Lab"}],ZH=[{value:"low",label:"Low",color:"text-green-500"},{value:"medium",label:"Medium",color:"text-yellow-500"},{value:"high",label:"High",color:"text-red-500"}],ps=()=>({ticketType:"",priority:"",status:"",clientName:"",projectName:"",clientEnvironment:"",clientContact:{name:"",role:"",email:"",phone:""},businessContext:{objective:"",reasonForRequest:"",businessImpact:"",targetOutcome:""},scopeSummary:{inScopeItems:[],outOfScopeItems:[],affectedEnvironments:[],affectedLocations:[]},technicalOverview:{technologyDomains:[],vendorsPlatforms:[],architectureNotes:"",constraintsDependencies:""},currentState:{existingIssues:"",knownRisks:"",currentTools:"",documentationAvailable:!1,documentationLinks:""},desiredState:{solutionApproach:"",performanceExpectations:"",securityRequirements:"",automationExpectations:""},accessPrerequisites:{accessRequired:[],changeWindowRequired:!1,maintenanceWindowDetails:"",approvalsRequired:""},deliverables:{expectedOutputs:{designDoc:!1,diagrams:!1,configurations:!1,scripts:!1,report:!1},validationRequired:""},timeline:{requestedStartDate:"",targetCompletionDate:"",hardDeadlines:"",businessCriticalDates:""},ownership:{infraweaveOwner:"",supportingEngineers:[],clientOwner:"",escalationContact:""},riskAssessment:{riskLevel:"",impactOfFailure:"",rollbackRequired:!1,rollbackNotes:""},dependencies:{externalDependencies:"",internalDependencies:"",knownBlockers:""},acceptanceCriteria:{completionDefinition:"",validationSteps:"",clientSignOffRequired:!1},attachments:{networkDiagrams:[],screenshots:[],configs:[],contracts:[]},communication:{communicationPlan:"",changeNotificationsRequired:!1,internalNotes:""},postCompletion:{documentationUpdated:!1,knowledgeTransferCompleted:!1,followUpTicketsNeeded:!1,followUpNotes:""}});function JH({currentStep:e,completedSteps:s,validatedSteps:r=[],onStepClick:n,showCompanyStep:a=!1,companySelected:i=!1,showOnlyCompleted:o=!0}){const l=rc.filter(d=>{if(!o)return!0;const u=d.id,m=r.includes(u),h=e===d.id;return m||h}),c=r.length>0||i;return t.jsx("div",{className:"w-64 border-r border-border bg-muted/30 overflow-y-auto",children:t.jsxs("div",{className:"p-4",children:[t.jsx("h3",{className:"font-semibold text-sm text-muted-foreground uppercase tracking-wide mb-4",children:c?"Completed Steps":"Current Step"}),t.jsxs("nav",{className:"space-y-1",children:[a&&(i||e===0)&&t.jsx("button",{onClick:()=>n(0),className:J("w-full text-left px-3 py-2 rounded-lg transition-all duration-200 group","hover:bg-accent/50",e===0&&"bg-primary/10 border border-primary/30",i&&e!==0&&"bg-success/10 border border-success/30"),children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:J("w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium transition-colors",i&&e!==0&&"bg-success text-success-foreground",e===0&&"bg-primary text-primary-foreground"),children:i&&e!==0?t.jsx(On,{className:"h-3 w-3"}):t.jsx(Qt,{className:"h-3 w-3"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:J("text-sm font-medium truncate",e===0&&"text-primary",i&&e!==0&&"text-success"),children:"Select Company"}),t.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Choose target company"})]})]})}),l.map(d=>{const u=r.includes(d.id),m=e===d.id;return t.jsx("button",{onClick:()=>n(d.id),className:J("w-full text-left px-3 py-2 rounded-lg transition-all duration-200 group","hover:bg-accent/50",m&&!u&&"bg-primary/10 border border-primary/30",u&&!m&&"bg-success/10 border border-success/30",u&&m&&"bg-success/10 border border-success/30"),children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:J("w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium transition-colors",u&&"bg-success text-success-foreground",m&&!u&&"bg-primary text-primary-foreground"),children:u?t.jsx(On,{className:"h-3 w-3"}):d.id}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:J("text-sm font-medium truncate",m&&!u&&"text-primary",u&&"text-success"),children:d.title}),t.jsx("p",{className:"text-xs text-muted-foreground truncate",children:d.description})]})]})},d.id)}),o&&rc.length-l.length>0&&t.jsxs("div",{className:"px-3 py-2 text-xs text-muted-foreground",children:[rc.length-l.length," more steps remaining"]})]})]})})}var Sw="Radio",[XH,MT]=ks(Sw),[eK,tK]=XH(Sw),LT=f.forwardRef((e,s)=>{const{__scopeRadio:r,name:n,checked:a=!1,required:i,disabled:o,value:l="on",onCheck:c,form:d,...u}=e,[m,h]=f.useState(null),p=Ve(s,v=>h(v)),g=f.useRef(!1),x=m?d||!!m.closest("form"):!0;return t.jsxs(eK,{scope:r,checked:a,disabled:o,children:[t.jsx(Se.button,{type:"button",role:"radio","aria-checked":a,"data-state":BT(a),"data-disabled":o?"":void 0,disabled:o,value:l,...u,ref:p,onClick:de(e.onClick,v=>{a||c==null||c(),x&&(g.current=v.isPropagationStopped(),g.current||v.stopPropagation())})}),x&&t.jsx(UT,{control:m,bubbles:!g.current,name:n,value:l,checked:a,required:i,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});LT.displayName=Sw;var FT="RadioIndicator",$T=f.forwardRef((e,s)=>{const{__scopeRadio:r,forceMount:n,...a}=e,i=tK(FT,r);return t.jsx(js,{present:n||i.checked,children:t.jsx(Se.span,{"data-state":BT(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:s})})});$T.displayName=FT;var sK="RadioBubbleInput",UT=f.forwardRef(({__scopeRadio:e,control:s,checked:r,bubbles:n=!0,...a},i)=>{const o=f.useRef(null),l=Ve(o,i),c=wp(r),d=Gf(s);return f.useEffect(()=>{const u=o.current;if(!u)return;const m=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==r&&p){const g=new Event("click",{bubbles:n});p.call(u,r),u.dispatchEvent(g)}},[c,r,n]),t.jsx(Se.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});UT.displayName=sK;function BT(e){return e?"checked":"unchecked"}var rK=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ap="RadioGroup",[nK]=ks(Ap,[Jc,MT]),zT=Jc(),qT=MT(),[aK,iK]=nK(Ap),WT=f.forwardRef((e,s)=>{const{__scopeRadioGroup:r,name:n,defaultValue:a,value:i,required:o=!1,disabled:l=!1,orientation:c,dir:d,loop:u=!0,onValueChange:m,...h}=e,p=zT(r),g=il(d),[x,v]=_r({prop:i,defaultProp:a??null,onChange:m,caller:Ap});return t.jsx(aK,{scope:r,name:n,required:o,disabled:l,value:x,onValueChange:v,children:t.jsx(zj,{asChild:!0,...p,orientation:c,dir:g,loop:u,children:t.jsx(Se.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:g,...h,ref:s})})})});WT.displayName=Ap;var VT="RadioGroupItem",HT=f.forwardRef((e,s)=>{const{__scopeRadioGroup:r,disabled:n,...a}=e,i=iK(VT,r),o=i.disabled||n,l=zT(r),c=qT(r),d=f.useRef(null),u=Ve(s,d),m=i.value===a.value,h=f.useRef(!1);return f.useEffect(()=>{const p=x=>{rK.includes(x.key)&&(h.current=!0)},g=()=>h.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",g)}},[]),t.jsx(qj,{asChild:!0,...l,focusable:!o,active:m,children:t.jsx(LT,{disabled:o,required:i.required,checked:m,...c,...a,name:i.name,ref:u,onCheck:()=>i.onValueChange(a.value),onKeyDown:de(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:de(a.onFocus,()=>{var p;h.current&&((p=d.current)==null||p.click())})})})});HT.displayName=VT;var oK="RadioGroupIndicator",KT=f.forwardRef((e,s)=>{const{__scopeRadioGroup:r,...n}=e,a=qT(r);return t.jsx($T,{...a,...n,ref:s})});KT.displayName=oK;var GT=WT,YT=HT,lK=KT;const kw=f.forwardRef(({className:e,...s},r)=>t.jsx(GT,{className:J("grid gap-2",e),...s,ref:r}));kw.displayName=GT.displayName;const Ew=f.forwardRef(({className:e,...s},r)=>t.jsx(YT,{ref:r,className:J("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...s,children:t.jsx(lK,{className:"flex items-center justify-center",children:t.jsx(AS,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Ew.displayName=YT.displayName;function _u({value:e,onValueChange:s,placeholder:r,options:n,hasError:a,isFilled:i,className:o,id:l}){return t.jsxs($e,{value:e,onValueChange:s,children:[t.jsx(Le,{id:l,className:J("transition-all duration-200","bg-background border-2","border-primary/30 focus:border-primary focus:ring-2 focus:ring-primary/20",i&&e&&"border-success/50 bg-success/5",a&&"border-destructive/50 bg-destructive/5 focus:border-destructive focus:ring-destructive/20",o),children:t.jsx(Ue,{placeholder:r})}),t.jsx(Fe,{children:n.map(c=>t.jsx(Z,{value:c.value,children:c.label},c.value))})]})}function cK({data:e,onChange:s,errors:r=[]}){const n=a=>r.some(i=>i.toLowerCase().includes(a.toLowerCase()));return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Ticket Identification"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Define the type, priority, and status of this project ticket"}),r.length>0&&t.jsxs("div",{className:"mt-2 p-3 rounded-lg bg-destructive/10 border border-destructive/30",children:[t.jsx("p",{className:"text-sm font-medium text-destructive",children:"Please fix the following:"}),t.jsx("ul",{className:"text-sm text-destructive list-disc list-inside mt-1",children:r.map((a,i)=>t.jsx("li",{children:a},i))})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs(O,{className:"flex items-center gap-1",children:["Ticket Type ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx(_u,{value:e.ticketType||"",onValueChange:a=>s({ticketType:a}),placeholder:"Select your choice",options:WH.map(a=>({value:a.value,label:a.label})),hasError:n("ticket type"),isFilled:!!e.ticketType})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs(O,{className:"flex items-center gap-1",children:["Priority ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx(kw,{value:e.priority,onValueChange:a=>s({priority:a}),className:"flex flex-wrap gap-3",children:VH.map(a=>t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ew,{value:a.value,id:`priority-${a.value}`,className:"peer sr-only"}),t.jsxs(O,{htmlFor:`priority-${a.value}`,className:J("flex items-center gap-2 px-4 py-2.5 rounded-lg border-2 cursor-pointer transition-all","border-primary/30 hover:bg-accent","peer-data-[state=checked]:border-primary peer-data-[state=checked]:bg-primary/10",e.priority===a.value&&"border-success/50 bg-success/5"),children:[t.jsx("span",{className:J("w-2.5 h-2.5 rounded-full",a.color)}),a.label]})]},a.value))})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(O,{className:"flex items-center gap-1",children:["Status ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx(_u,{value:e.status||"",onValueChange:a=>s({status:a}),placeholder:"Select your choice",options:HH.map(a=>({value:a.value,label:a.label})),hasError:n("status"),isFilled:!!e.status})]})]})]})}const $s=f.forwardRef(({className:e,hasError:s,isFilled:r,...n},a)=>t.jsx(se,{className:J("transition-all duration-200","bg-background border-2","border-primary/30 focus:border-primary focus:ring-2 focus:ring-primary/20",r&&"border-success/50 bg-success/5",s&&"border-destructive/50 bg-destructive/5 focus:border-destructive focus:ring-destructive/20",e),ref:a,...n}));$s.displayName="FormInput";const Gt=f.forwardRef(({className:e,hasError:s,isFilled:r,...n},a)=>t.jsx(Bt,{className:J("transition-all duration-200","bg-background border-2","border-primary/30 focus:border-primary focus:ring-2 focus:ring-primary/20",r&&"border-success/50 bg-success/5",s&&"border-destructive/50 bg-destructive/5 focus:border-destructive focus:ring-destructive/20",e),ref:a,...n}));Gt.displayName="FormTextarea";function dK({data:e,onChange:s,errors:r=[]}){var i,o;const n=l=>r.some(c=>c.toLowerCase().includes(l.toLowerCase())),a=(l,c)=>{s({clientContact:{...e.clientContact,[l]:c}})};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Client Information"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Provide client and project identification details"}),r.length>0&&t.jsxs("div",{className:"mt-2 p-3 rounded-lg bg-destructive/10 border border-destructive/30",children:[t.jsx("p",{className:"text-sm font-medium text-destructive",children:"Please fix the following:"}),t.jsx("ul",{className:"text-sm text-destructive list-disc list-inside mt-1",children:r.map((l,c)=>t.jsx("li",{children:l},c))})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs(O,{htmlFor:"clientName",className:"flex items-center gap-1",children:["Client Name ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx($s,{id:"clientName",value:e.clientName,onChange:l=>s({clientName:l.target.value}),placeholder:"Enter client name",hasError:n("client name"),isFilled:!!e.clientName.trim()})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(O,{htmlFor:"projectName",className:"flex items-center gap-1",children:["Project Name ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx($s,{id:"projectName",value:e.projectName,onChange:l=>s({projectName:l.target.value}),placeholder:"Enter project name",hasError:n("project name"),isFilled:!!e.projectName.trim()})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(O,{className:"flex items-center gap-1",children:["Client Environment Type ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx(_u,{value:e.clientEnvironment||"",onValueChange:l=>s({clientEnvironment:l}),placeholder:"Select your choice",options:KH.map(l=>({value:l.value,label:l.label})),hasError:n("environment"),isFilled:!!e.clientEnvironment})]}),t.jsxs("div",{className:"border-t border-border pt-4",children:[t.jsx("h3",{className:"font-medium mb-4",children:"Client Point of Contact"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs(O,{htmlFor:"contactName",className:"flex items-center gap-1",children:["Contact Name ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx($s,{id:"contactName",value:e.clientContact.name,onChange:l=>a("name",l.target.value),placeholder:"Contact person name",hasError:n("contact name"),isFilled:!!e.clientContact.name.trim()})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(O,{htmlFor:"contactRole",className:"flex items-center gap-1",children:["Role ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx($s,{id:"contactRole",value:e.clientContact.role,onChange:l=>a("role",l.target.value),placeholder:"e.g., IT Manager",hasError:n("role"),isFilled:!!e.clientContact.role.trim()})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"contactEmail",children:"Email"}),t.jsx($s,{id:"contactEmail",type:"email",value:e.clientContact.email||"",onChange:l=>a("email",l.target.value),placeholder:"contact@example.com",isFilled:!!((i=e.clientContact.email)!=null&&i.trim())})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"contactPhone",children:"Phone"}),t.jsx($s,{id:"contactPhone",type:"tel",value:e.clientContact.phone||"",onChange:l=>a("phone",l.target.value),placeholder:"+1 (555) 000-0000",isFilled:!!((o=e.clientContact.phone)!=null&&o.trim())})]})]})]})]})}function uK({data:e,onChange:s,errors:r=[]}){const n=i=>r.some(o=>o.toLowerCase().includes(i.toLowerCase())),a=(i,o)=>{s({businessContext:{...e.businessContext,[i]:o}})};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Business Context"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Define the business objectives and expected outcomes"}),r.length>0&&t.jsxs("div",{className:"mt-2 p-3 rounded-lg bg-destructive/10 border border-destructive/30",children:[t.jsx("p",{className:"text-sm font-medium text-destructive",children:"Please fix the following:"}),t.jsx("ul",{className:"text-sm text-destructive list-disc list-inside mt-1",children:r.map((i,o)=>t.jsx("li",{children:i},o))})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs(O,{htmlFor:"objective",className:"flex items-center gap-1",children:["Business Objective ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx(Bt,{id:"objective",value:e.businessContext.objective,onChange:i=>a("objective",i.target.value),placeholder:"Provide a short summary of the business objective...",className:"min-h-[80px]"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(O,{className:"flex items-center gap-1",children:["Reason for Request ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx(_u,{value:e.businessContext.reasonForRequest||"",onValueChange:i=>a("reasonForRequest",i),placeholder:"Select your choice",options:GH.map(i=>({value:i.value,label:i.label})),hasError:n("reason"),isFilled:!!e.businessContext.reasonForRequest})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"businessImpact",children:"Business Impact if Not Completed *"}),t.jsx(Bt,{id:"businessImpact",value:e.businessContext.businessImpact,onChange:i=>a("businessImpact",i.target.value),placeholder:"Describe the impact if this project is not completed...",className:"min-h-[80px]"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"targetOutcome",children:"Target Outcome / Success Definition *"}),t.jsx(Bt,{id:"targetOutcome",value:e.businessContext.targetOutcome,onChange:i=>a("targetOutcome",i.target.value),placeholder:"Define what success looks like for this project...",className:"min-h-[80px]"})]})]})]})}var Tp="Checkbox",[hK]=ks(Tp),[mK,Aw]=hK(Tp);function fK(e){const{__scopeCheckbox:s,checked:r,children:n,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:d,value:u="on",internal_do_not_use_render:m}=e,[h,p]=_r({prop:r,defaultProp:a??!1,onChange:c,caller:Tp}),[g,x]=f.useState(null),[v,y]=f.useState(null),j=f.useRef(!1),w=g?!!o||!!g.closest("form"):!0,b={checked:h,disabled:i,setChecked:p,control:g,setControl:x,name:l,form:o,value:u,hasConsumerStoppedPropagationRef:j,required:d,defaultChecked:$i(a)?!1:a,isFormControl:w,bubbleInput:v,setBubbleInput:y};return t.jsx(mK,{scope:s,...b,children:pK(m)?m(b):n})}var QT="CheckboxTrigger",ZT=f.forwardRef(({__scopeCheckbox:e,onKeyDown:s,onClick:r,...n},a)=>{const{control:i,value:o,disabled:l,checked:c,required:d,setControl:u,setChecked:m,hasConsumerStoppedPropagationRef:h,isFormControl:p,bubbleInput:g}=Aw(QT,e),x=Ve(a,u),v=f.useRef(c);return f.useEffect(()=>{const y=i==null?void 0:i.form;if(y){const j=()=>m(v.current);return y.addEventListener("reset",j),()=>y.removeEventListener("reset",j)}},[i,m]),t.jsx(Se.button,{type:"button",role:"checkbox","aria-checked":$i(c)?"mixed":c,"aria-required":d,"data-state":sP(c),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:x,onKeyDown:de(s,y=>{y.key==="Enter"&&y.preventDefault()}),onClick:de(r,y=>{m(j=>$i(j)?!0:!j),g&&p&&(h.current=y.isPropagationStopped(),h.current||y.stopPropagation())})})});ZT.displayName=QT;var Tw=f.forwardRef((e,s)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:d,form:u,...m}=e;return t.jsx(fK,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:d,name:n,form:u,value:c,internal_do_not_use_render:({isFormControl:h})=>t.jsxs(t.Fragment,{children:[t.jsx(ZT,{...m,ref:s,__scopeCheckbox:r}),h&&t.jsx(tP,{__scopeCheckbox:r})]})})});Tw.displayName=Tp;var JT="CheckboxIndicator",XT=f.forwardRef((e,s)=>{const{__scopeCheckbox:r,forceMount:n,...a}=e,i=Aw(JT,r);return t.jsx(js,{present:n||$i(i.checked)||i.checked===!0,children:t.jsx(Se.span,{"data-state":sP(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:s,style:{pointerEvents:"none",...e.style}})})});XT.displayName=JT;var eP="CheckboxBubbleInput",tP=f.forwardRef(({__scopeCheckbox:e,...s},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:d,value:u,form:m,bubbleInput:h,setBubbleInput:p}=Aw(eP,e),g=Ve(r,p),x=wp(i),v=Gf(n);f.useEffect(()=>{const j=h;if(!j)return;const w=window.HTMLInputElement.prototype,N=Object.getOwnPropertyDescriptor(w,"checked").set,_=!a.current;if(x!==i&&N){const C=new Event("click",{bubbles:_});j.indeterminate=$i(i),N.call(j,$i(i)?!1:i),j.dispatchEvent(C)}},[h,x,i,a]);const y=f.useRef($i(i)?!1:i);return t.jsx(Se.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??y.current,required:l,disabled:c,name:d,value:u,form:m,...s,tabIndex:-1,ref:g,style:{...s.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});tP.displayName=eP;function pK(e){return typeof e=="function"}function $i(e){return e==="indeterminate"}function sP(e){return $i(e)?"indeterminate":e?"checked":"unchecked"}const Xo=f.forwardRef(({className:e,...s},r)=>t.jsx(Tw,{ref:r,className:J("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...s,children:t.jsx(XT,{className:J("flex items-center justify-center text-current"),children:t.jsx(On,{className:"h-4 w-4"})})}));Xo.displayName=Tw.displayName;function xK({data:e,onChange:s}){const[r,n]=f.useState(""),[a,i]=f.useState(""),[o,l]=f.useState(""),c=f.useRef(null),d=f.useRef(null),u=f.useRef(null),m=(_,C)=>{s({scopeSummary:{...e.scopeSummary,[_]:C}})},h=()=>{r.trim()&&(m("inScopeItems",[...e.scopeSummary.inScopeItems,r.trim()]),n(""))},p=_=>{m("inScopeItems",e.scopeSummary.inScopeItems.filter((C,E)=>E!==_))},g=()=>{a.trim()&&(m("outOfScopeItems",[...e.scopeSummary.outOfScopeItems,a.trim()]),i(""))},x=_=>{m("outOfScopeItems",e.scopeSummary.outOfScopeItems.filter((C,E)=>E!==_))},v=()=>{o.trim()&&(m("affectedLocations",[...e.scopeSummary.affectedLocations,o.trim()]),l(""))},y=_=>{m("affectedLocations",e.scopeSummary.affectedLocations.filter((C,E)=>E!==_))},j=_=>{const C=e.scopeSummary.affectedEnvironments;C.includes(_)?m("affectedEnvironments",C.filter(E=>E!==_)):m("affectedEnvironments",[...C,_])},w=()=>{r.trim()&&h()},b=()=>{a.trim()&&g()},N=()=>{o.trim()&&v()};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Scope Summary"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Define what is and isn't included in this project"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"In-Scope Items"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(se,{ref:c,value:r,onChange:_=>n(_.target.value),placeholder:"Add an in-scope item",onKeyDown:_=>_.key==="Enter"&&(_.preventDefault(),h()),onBlur:w}),t.jsx(T,{type:"button",size:"icon",onClick:h,children:t.jsx(at,{className:"h-4 w-4"})})]}),t.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:e.scopeSummary.inScopeItems.map((_,C)=>t.jsxs($,{variant:"secondary",className:"gap-1",children:[_,t.jsx("button",{onClick:()=>p(C),className:"hover:text-destructive",children:t.jsx(Ct,{className:"h-3 w-3"})})]},C))})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Out-of-Scope Items (Explicit)"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(se,{ref:d,value:a,onChange:_=>i(_.target.value),placeholder:"Add an out-of-scope item",onKeyDown:_=>_.key==="Enter"&&(_.preventDefault(),g()),onBlur:b}),t.jsx(T,{type:"button",size:"icon",onClick:g,children:t.jsx(at,{className:"h-4 w-4"})})]}),t.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:e.scopeSummary.outOfScopeItems.map((_,C)=>t.jsxs($,{variant:"outline",className:"gap-1",children:[_,t.jsx("button",{onClick:()=>x(C),className:"hover:text-destructive",children:t.jsx(Ct,{className:"h-3 w-3"})})]},C))})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(O,{children:"Affected Environments"}),t.jsx("div",{className:"flex flex-wrap gap-4",children:QH.map(_=>t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Xo,{id:`env-${_.value}`,checked:e.scopeSummary.affectedEnvironments.includes(_.value),onCheckedChange:()=>j(_.value)}),t.jsx(O,{htmlFor:`env-${_.value}`,className:"cursor-pointer",children:_.label})]},_.value))})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Affected Locations / Sites"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(se,{ref:u,value:o,onChange:_=>l(_.target.value),placeholder:"Add a location or site",onKeyDown:_=>_.key==="Enter"&&(_.preventDefault(),v()),onBlur:N}),t.jsx(T,{type:"button",size:"icon",onClick:v,children:t.jsx(at,{className:"h-4 w-4"})})]}),t.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:e.scopeSummary.affectedLocations.map((_,C)=>t.jsxs($,{variant:"secondary",className:"gap-1",children:[_,t.jsx("button",{onClick:()=>y(C),className:"hover:text-destructive",children:t.jsx(Ct,{className:"h-3 w-3"})})]},C))})]})]})]})}function gK({data:e,onChange:s,errors:r=[]}){const[n,a]=f.useState(""),i=(h,p)=>{s({technicalOverview:{...e.technicalOverview,[h]:p}})},o=h=>{const p=e.technicalOverview.technologyDomains;p.includes(h)?i("technologyDomains",p.filter(g=>g!==h)):i("technologyDomains",[...p,h])},l=()=>{n.trim()&&(i("vendorsPlatforms",[...e.technicalOverview.vendorsPlatforms,n.trim()]),a(""))},c=()=>{n.trim()&&l()},d=h=>{i("vendorsPlatforms",e.technicalOverview.vendorsPlatforms.filter((p,g)=>g!==h))},u=r.some(h=>h.toLowerCase().includes("technology domain")),m=e.technicalOverview.technologyDomains.length>0;return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Technical Overview"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Define the technology stack and technical requirements"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsxs(O,{className:"flex items-center gap-1",children:["Technology Domains Involved ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx("div",{className:`grid grid-cols-2 gap-3 p-3 rounded-lg border-2 transition-colors ${u?"border-destructive/50 bg-destructive/5":m?"border-success/50 bg-success/5":"border-primary/30"}`,children:YH.map(h=>t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Xo,{id:`domain-${h.value}`,checked:e.technicalOverview.technologyDomains.includes(h.value),onCheckedChange:()=>o(h.value)}),t.jsx(O,{htmlFor:`domain-${h.value}`,className:"cursor-pointer text-sm",children:h.label})]},h.value))}),u&&t.jsx("p",{className:"text-sm text-destructive",children:"Select at least one technology domain"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Vendors / Platforms Involved"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx($s,{value:n,onChange:h=>a(h.target.value),placeholder:"Add a vendor or platform (e.g., Cisco, AWS, Palo Alto)",onKeyDown:h=>h.key==="Enter"&&(h.preventDefault(),l()),onBlur:c,isFilled:e.technicalOverview.vendorsPlatforms.length>0}),t.jsx(T,{type:"button",size:"icon",onClick:l,variant:"outline",children:t.jsx(at,{className:"h-4 w-4"})})]}),t.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:e.technicalOverview.vendorsPlatforms.map((h,p)=>t.jsxs($,{variant:"secondary",className:"gap-1",children:[h,t.jsx("button",{onClick:()=>d(p),className:"hover:text-destructive",children:t.jsx(Ct,{className:"h-3 w-3"})})]},p))})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"architectureNotes",children:"High-Level Architecture Notes"}),t.jsx(Gt,{id:"architectureNotes",value:e.technicalOverview.architectureNotes,onChange:h=>i("architectureNotes",h.target.value),placeholder:"Describe the high-level architecture approach...",className:"min-h-[100px]",isFilled:!!e.technicalOverview.architectureNotes.trim()})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"constraints",children:"Known Constraints or Dependencies"}),t.jsx(Gt,{id:"constraints",value:e.technicalOverview.constraintsDependencies,onChange:h=>i("constraintsDependencies",h.target.value),placeholder:"List any known technical constraints or dependencies...",className:"min-h-[80px]",isFilled:!!e.technicalOverview.constraintsDependencies.trim()})]})]})]})}function vK({data:e,onChange:s}){var n;const r=(a,i)=>{s({currentState:{...e.currentState,[a]:i}})};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Current State (As-Is)"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Document the existing environment and known issues"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"existingIssues",children:"Existing Issues / Pain Points"}),t.jsx(Gt,{id:"existingIssues",value:e.currentState.existingIssues,onChange:a=>r("existingIssues",a.target.value),placeholder:"Describe current issues or pain points...",className:"min-h-[80px]",isFilled:!!e.currentState.existingIssues.trim()})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"knownRisks",children:"Known Risks or Limitations"}),t.jsx(Gt,{id:"knownRisks",value:e.currentState.knownRisks,onChange:a=>r("knownRisks",a.target.value),placeholder:"List any known risks or limitations...",className:"min-h-[80px]",isFilled:!!e.currentState.knownRisks.trim()})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"currentTools",children:"Current Tools / Platforms"}),t.jsx(Gt,{id:"currentTools",value:e.currentState.currentTools,onChange:a=>r("currentTools",a.target.value),placeholder:"List current tools and platforms in use...",className:"min-h-[80px]",isFilled:!!e.currentState.currentTools.trim()})]}),t.jsxs("div",{className:"border-t pt-4 space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx(O,{children:"Existing Documentation Available"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Is there existing documentation for this system?"})]}),t.jsx(nt,{checked:e.currentState.documentationAvailable,onCheckedChange:a=>r("documentationAvailable",a)})]}),e.currentState.documentationAvailable&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"docLinks",children:"Documentation Links"}),t.jsx($s,{id:"docLinks",value:e.currentState.documentationLinks||"",onChange:a=>r("documentationLinks",a.target.value),placeholder:"Provide links to existing documentation...",isFilled:!!((n=e.currentState.documentationLinks)!=null&&n.trim())})]})]})]})]})}function yK({data:e,onChange:s,errors:r=[]}){const n=(i,o)=>{s({desiredState:{...e.desiredState,[i]:o}})},a=r.some(i=>i.toLowerCase().includes("solution approach"));return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Desired State (To-Be)"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Define the expected solution and requirements"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs(O,{htmlFor:"solutionApproach",className:"flex items-center gap-1",children:["Expected Design or Solution Approach ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx(Gt,{id:"solutionApproach",value:e.desiredState.solutionApproach,onChange:i=>n("solutionApproach",i.target.value),placeholder:"Describe the expected design or solution approach...",className:"min-h-[100px]",hasError:a,isFilled:!!e.desiredState.solutionApproach.trim()}),a&&t.jsx("p",{className:"text-sm text-destructive",children:"Solution approach is required"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"performanceExpectations",children:"Performance / Availability Expectations"}),t.jsx(Gt,{id:"performanceExpectations",value:e.desiredState.performanceExpectations,onChange:i=>n("performanceExpectations",i.target.value),placeholder:"Define performance and availability requirements...",className:"min-h-[80px]",isFilled:!!e.desiredState.performanceExpectations.trim()})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"securityRequirements",children:"Security or Compliance Requirements"}),t.jsx(Gt,{id:"securityRequirements",value:e.desiredState.securityRequirements,onChange:i=>n("securityRequirements",i.target.value),placeholder:"List security and compliance requirements...",className:"min-h-[80px]",isFilled:!!e.desiredState.securityRequirements.trim()})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"automationExpectations",children:"Automation / Observability Expectations"}),t.jsx(Gt,{id:"automationExpectations",value:e.desiredState.automationExpectations,onChange:i=>n("automationExpectations",i.target.value),placeholder:"Define automation and observability requirements...",className:"min-h-[80px]",isFilled:!!e.desiredState.automationExpectations.trim()})]})]})]})}function jK({data:e,onChange:s}){var c;const[r,n]=f.useState(""),a=(d,u)=>{s({accessPrerequisites:{...e.accessPrerequisites,[d]:u}})},i=()=>{r.trim()&&(a("accessRequired",[...e.accessPrerequisites.accessRequired,r.trim()]),n(""))},o=()=>{r.trim()&&i()},l=d=>{a("accessRequired",e.accessPrerequisites.accessRequired.filter((u,m)=>m!==d))};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Access & Prerequisites"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Define access requirements and approval needs"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Access Required"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx($s,{value:r,onChange:d=>n(d.target.value),placeholder:"Add access requirement (e.g., VPN, admin credentials)",onKeyDown:d=>d.key==="Enter"&&(d.preventDefault(),i()),onBlur:o,isFilled:e.accessPrerequisites.accessRequired.length>0}),t.jsx(T,{type:"button",size:"icon",onClick:i,variant:"outline",children:t.jsx(at,{className:"h-4 w-4"})})]}),t.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:e.accessPrerequisites.accessRequired.map((d,u)=>t.jsxs($,{variant:"secondary",className:"gap-1",children:[d,t.jsx("button",{onClick:()=>l(u),className:"hover:text-destructive",children:t.jsx(Ct,{className:"h-3 w-3"})})]},u))})]}),t.jsxs("div",{className:"border-t pt-4 space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx(O,{children:"Change Window Required"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Does this work require a scheduled change window?"})]}),t.jsx(nt,{checked:e.accessPrerequisites.changeWindowRequired,onCheckedChange:d=>a("changeWindowRequired",d)})]}),e.accessPrerequisites.changeWindowRequired&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"maintenanceWindow",children:"Maintenance Window Details"}),t.jsx(Gt,{id:"maintenanceWindow",value:e.accessPrerequisites.maintenanceWindowDetails||"",onChange:d=>a("maintenanceWindowDetails",d.target.value),placeholder:"Describe maintenance window requirements...",className:"min-h-[80px]",isFilled:!!((c=e.accessPrerequisites.maintenanceWindowDetails)!=null&&c.trim())})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"approvalsRequired",children:"Approvals Required Before Execution"}),t.jsx(Gt,{id:"approvalsRequired",value:e.accessPrerequisites.approvalsRequired,onChange:d=>a("approvalsRequired",d.target.value),placeholder:"List any approvals needed before work can begin...",className:"min-h-[80px]",isFilled:!!e.accessPrerequisites.approvalsRequired.trim()})]})]})]})}function wK({data:e,onChange:s,errors:r=[]}){const n=(c,d)=>{s({deliverables:{...e.deliverables,[c]:d}})},a=c=>{n("expectedOutputs",{...e.deliverables.expectedOutputs,[c]:!e.deliverables.expectedOutputs[c]})},i=[{key:"designDoc",label:"Design Document"},{key:"diagrams",label:"Network Diagrams"},{key:"configurations",label:"Configurations"},{key:"scripts",label:"Scripts / Automation"},{key:"report",label:"Report / Assessment"}],o=Object.values(e.deliverables.expectedOutputs).some(Boolean),l=r.some(c=>c.toLowerCase().includes("output"));return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Deliverables"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Define expected outputs and validation requirements"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsxs(O,{className:"flex items-center gap-1",children:["Expected Outputs ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx("div",{className:`grid grid-cols-2 gap-3 p-3 rounded-lg border-2 transition-colors ${l?"border-destructive/50 bg-destructive/5":o?"border-success/50 bg-success/5":"border-primary/30"}`,children:i.map(c=>t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Xo,{id:`output-${c.key}`,checked:e.deliverables.expectedOutputs[c.key],onCheckedChange:()=>a(c.key)}),t.jsx(O,{htmlFor:`output-${c.key}`,className:"cursor-pointer text-sm",children:c.label})]},c.key))}),l&&t.jsx("p",{className:"text-sm text-destructive",children:"Select at least one expected output"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"validationRequired",children:"Validation / Testing Required"}),t.jsx(Gt,{id:"validationRequired",value:e.deliverables.validationRequired,onChange:c=>n("validationRequired",c.target.value),placeholder:"Describe required validation and testing procedures...",className:"min-h-[100px]",isFilled:!!e.deliverables.validationRequired.trim()})]})]})]})}function bK({data:e,onChange:s}){var n,a;const r=(i,o)=>{s({timeline:{...e.timeline,[i]:o}})};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Timeline & Urgency"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Set project dates and deadlines"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"requestedStartDate",children:"Requested Start Date"}),t.jsx($s,{id:"requestedStartDate",type:"date",value:e.timeline.requestedStartDate||"",onChange:i=>r("requestedStartDate",i.target.value),isFilled:!!e.timeline.requestedStartDate})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"targetCompletionDate",children:"Target Completion Date"}),t.jsx($s,{id:"targetCompletionDate",type:"date",value:e.timeline.targetCompletionDate||"",onChange:i=>r("targetCompletionDate",i.target.value),isFilled:!!e.timeline.targetCompletionDate})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"hardDeadlines",children:"Hard Deadlines (if any)"}),t.jsx(Gt,{id:"hardDeadlines",value:e.timeline.hardDeadlines||"",onChange:i=>r("hardDeadlines",i.target.value),placeholder:"List any hard deadlines that cannot be missed...",className:"min-h-[80px]",isFilled:!!((n=e.timeline.hardDeadlines)!=null&&n.trim())})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"businessCriticalDates",children:"Business Critical Dates"}),t.jsx(Gt,{id:"businessCriticalDates",value:e.timeline.businessCriticalDates||"",onChange:i=>r("businessCriticalDates",i.target.value),placeholder:"List business critical dates (launch, audit, blackout periods)...",className:"min-h-[80px]",isFilled:!!((a=e.timeline.businessCriticalDates)!=null&&a.trim())})]})]})]})}function NK({data:e,onChange:s}){var c,d,u;const[r,n]=f.useState(""),a=(m,h)=>{s({ownership:{...e.ownership,[m]:h}})},i=()=>{r.trim()&&(a("supportingEngineers",[...e.ownership.supportingEngineers,r.trim()]),n(""))},o=()=>{r.trim()&&i()},l=m=>{a("supportingEngineers",e.ownership.supportingEngineers.filter((h,p)=>p!==m))};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Ownership & Assignment"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Define project ownership and team assignments"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"infraweaveOwner",children:"InfraWeave Owner"}),t.jsx($s,{id:"infraweaveOwner",value:e.ownership.infraweaveOwner||"",onChange:m=>a("infraweaveOwner",m.target.value),placeholder:"Primary InfraWeave owner",isFilled:!!((c=e.ownership.infraweaveOwner)!=null&&c.trim())})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"clientOwner",children:"Client Owner"}),t.jsx($s,{id:"clientOwner",value:e.ownership.clientOwner||"",onChange:m=>a("clientOwner",m.target.value),placeholder:"Client-side owner",isFilled:!!((d=e.ownership.clientOwner)!=null&&d.trim())})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Supporting Engineers"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx($s,{value:r,onChange:m=>n(m.target.value),placeholder:"Add supporting engineer",onKeyDown:m=>m.key==="Enter"&&(m.preventDefault(),i()),onBlur:o,isFilled:e.ownership.supportingEngineers.length>0}),t.jsx(T,{type:"button",size:"icon",onClick:i,variant:"outline",children:t.jsx(at,{className:"h-4 w-4"})})]}),t.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:e.ownership.supportingEngineers.map((m,h)=>t.jsxs($,{variant:"secondary",className:"gap-1",children:[m,t.jsx("button",{onClick:()=>l(h),className:"hover:text-destructive",children:t.jsx(Ct,{className:"h-3 w-3"})})]},h))})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"escalationContact",children:"Escalation Contact"}),t.jsx($s,{id:"escalationContact",value:e.ownership.escalationContact||"",onChange:m=>a("escalationContact",m.target.value),placeholder:"Person to escalate issues to",isFilled:!!((u=e.ownership.escalationContact)!=null&&u.trim())})]})]})]})}function CK({data:e,onChange:s,errors:r=[]}){const n=(a,i)=>{s({riskAssessment:{...e.riskAssessment,[a]:i}})};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Risk & Impact Assessment"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Assess project risks and rollback requirements"}),r.length>0&&t.jsxs("div",{className:"mt-2 p-3 rounded-lg bg-destructive/10 border border-destructive/30",children:[t.jsx("p",{className:"text-sm font-medium text-destructive",children:"Please fix the following:"}),t.jsx("ul",{className:"text-sm text-destructive list-disc list-inside mt-1",children:r.map((a,i)=>t.jsx("li",{children:a},i))})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx(O,{children:"Risk Level *"}),t.jsx(kw,{value:e.riskAssessment.riskLevel,onValueChange:a=>n("riskLevel",a),className:"flex flex-wrap gap-4",children:ZH.map(a=>t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ew,{value:a.value,id:`risk-${a.value}`,className:"peer sr-only"}),t.jsx(O,{htmlFor:`risk-${a.value}`,className:J("flex items-center gap-2 px-4 py-2 rounded-lg border cursor-pointer transition-all","hover:bg-accent peer-data-[state=checked]:border-primary peer-data-[state=checked]:bg-primary/10"),children:t.jsx("span",{className:a.color,children:a.label})})]},a.value))})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"impactOfFailure",children:"Impact of Failure *"}),t.jsx(Bt,{id:"impactOfFailure",value:e.riskAssessment.impactOfFailure,onChange:a=>n("impactOfFailure",a.target.value),placeholder:"Describe the potential impact if this project fails...",className:"min-h-[80px]"})]}),t.jsxs("div",{className:"border-t pt-4 space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx(O,{children:"Rollback Required"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Is a rollback plan required for this project?"})]}),t.jsx(nt,{checked:e.riskAssessment.rollbackRequired,onCheckedChange:a=>n("rollbackRequired",a)})]}),e.riskAssessment.rollbackRequired&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"rollbackNotes",children:"Rollback Notes"}),t.jsx(Bt,{id:"rollbackNotes",value:e.riskAssessment.rollbackNotes||"",onChange:a=>n("rollbackNotes",a.target.value),placeholder:"Document the rollback procedure...",className:"min-h-[80px]"})]})]})]})]})}function _K({data:e,onChange:s}){const r=(n,a)=>{s({dependencies:{...e.dependencies,[n]:a}})};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Dependencies & Blockers"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Identify project dependencies and potential blockers"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"externalDependencies",children:"External Dependencies"}),t.jsx(Gt,{id:"externalDependencies",value:e.dependencies.externalDependencies,onChange:n=>r("externalDependencies",n.target.value),placeholder:"List external dependencies (vendor, client, ISP, cloud provider)...",className:"min-h-[80px]",isFilled:!!e.dependencies.externalDependencies.trim()})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"internalDependencies",children:"Internal Dependencies"}),t.jsx(Gt,{id:"internalDependencies",value:e.dependencies.internalDependencies,onChange:n=>r("internalDependencies",n.target.value),placeholder:"List internal dependencies (other InfraWeave tickets/projects)...",className:"min-h-[80px]",isFilled:!!e.dependencies.internalDependencies.trim()})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"knownBlockers",children:"Known Blockers"}),t.jsx(Gt,{id:"knownBlockers",value:e.dependencies.knownBlockers,onChange:n=>r("knownBlockers",n.target.value),placeholder:"List any known blockers that need to be resolved...",className:"min-h-[80px]",isFilled:!!e.dependencies.knownBlockers.trim()})]})]})]})}function SK({data:e,onChange:s,errors:r=[]}){const n=(i,o)=>{s({acceptanceCriteria:{...e.acceptanceCriteria,[i]:o}})},a=r.some(i=>i.toLowerCase().includes("completion"));return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Acceptance Criteria"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Define what constitutes project completion"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs(O,{htmlFor:"completionDefinition",className:"flex items-center gap-1",children:["Completion Definition ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx(Gt,{id:"completionDefinition",value:e.acceptanceCriteria.completionDefinition,onChange:i=>n("completionDefinition",i.target.value),placeholder:"Define what it means for this project to be complete...",className:"min-h-[100px]",hasError:a,isFilled:!!e.acceptanceCriteria.completionDefinition.trim()}),a&&t.jsx("p",{className:"text-sm text-destructive",children:"Completion definition is required"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"validationSteps",children:"Validation Steps"}),t.jsx(Gt,{id:"validationSteps",value:e.acceptanceCriteria.validationSteps,onChange:i=>n("validationSteps",i.target.value),placeholder:"List the steps to validate project completion...",className:"min-h-[100px]",isFilled:!!e.acceptanceCriteria.validationSteps.trim()})]}),t.jsxs("div",{className:"flex items-center justify-between border-t pt-4",children:[t.jsxs("div",{children:[t.jsx(O,{children:"Client Sign-Off Required"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Does this project require client sign-off for completion?"})]}),t.jsx(nt,{checked:e.acceptanceCriteria.clientSignOffRequired,onCheckedChange:i=>n("clientSignOffRequired",i)})]})]})]})}function kK({data:e,onChange:s}){const[r,n]=f.useState(""),[a,i]=f.useState(""),[o,l]=f.useState(""),[c,d]=f.useState(""),u=(g,x)=>{s({attachments:{...e.attachments,[g]:x}})},m=(g,x,v)=>{x.trim()&&(u(g,[...e.attachments[g],x.trim()]),v())},h=(g,x)=>{u(g,e.attachments[g].filter((v,y)=>y!==x))},p=[{field:"networkDiagrams",label:"Network Diagrams",icon:Zt,input:r,setInput:n,placeholder:"Add network diagram link or file reference"},{field:"screenshots",label:"Screenshots / Logs",icon:Bu,input:a,setInput:i,placeholder:"Add screenshot or log reference"},{field:"configs",label:"Existing Configurations",icon:Js,input:o,setInput:l,placeholder:"Add configuration file reference"},{field:"contracts",label:"Contracts / SOW References",icon:SO,input:c,setInput:d,placeholder:"Add contract or SOW reference"}];return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Attachments & References"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Add links to relevant documents and files"})]}),t.jsx("div",{className:"space-y-6",children:p.map(g=>t.jsxs("div",{className:"space-y-2",children:[t.jsxs(O,{className:"flex items-center gap-2",children:[t.jsx(g.icon,{className:"h-4 w-4 text-muted-foreground"}),g.label]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx($s,{value:g.input,onChange:x=>g.setInput(x.target.value),placeholder:g.placeholder,onKeyDown:x=>x.key==="Enter"&&(x.preventDefault(),m(g.field,g.input,()=>g.setInput(""))),onBlur:()=>{g.input.trim()&&m(g.field,g.input,()=>g.setInput(""))},isFilled:e.attachments[g.field].length>0}),t.jsx(T,{type:"button",size:"icon",variant:"outline",onClick:()=>m(g.field,g.input,()=>g.setInput("")),children:t.jsx(at,{className:"h-4 w-4"})})]}),t.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:e.attachments[g.field].map((x,v)=>t.jsxs($,{variant:"secondary",className:"gap-1 max-w-full",children:[t.jsx("span",{className:"truncate",children:x}),t.jsx("button",{onClick:()=>h(g.field,v),className:"hover:text-destructive flex-shrink-0",children:t.jsx(Ct,{className:"h-3 w-3"})})]},v))})]},g.field))})]})}function EK({data:e,onChange:s}){const r=(n,a)=>{s({communication:{...e.communication,[n]:a}})};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Communication & Notes"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Define communication preferences and internal notes"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"communicationPlan",children:"Communication Plan"}),t.jsx(Gt,{id:"communicationPlan",value:e.communication.communicationPlan,onChange:n=>r("communicationPlan",n.target.value),placeholder:"Define the communication plan (email, Slack, meetings)...",className:"min-h-[80px]",isFilled:!!e.communication.communicationPlan.trim()})]}),t.jsxs("div",{className:"flex items-center justify-between border-t pt-4",children:[t.jsxs("div",{children:[t.jsx(O,{children:"Change Notifications Required"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Are change notifications required for stakeholders?"})]}),t.jsx(nt,{checked:e.communication.changeNotificationsRequired,onCheckedChange:n=>r("changeNotificationsRequired",n)})]}),t.jsxs("div",{className:"space-y-2 border-t pt-4",children:[t.jsx(O,{htmlFor:"internalNotes",children:"Internal Notes (InfraWeave-Only)"}),t.jsx(Gt,{id:"internalNotes",value:e.communication.internalNotes,onChange:n=>r("internalNotes",n.target.value),placeholder:"Add internal notes visible only to InfraWeave team...",className:"min-h-[100px]",isFilled:!!e.communication.internalNotes.trim()}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"These notes are internal and will not be visible to the client"})]})]})]})}function AK({data:e,onChange:s}){var n;const r=(a,i)=>{s({postCompletion:{...e.postCompletion,[a]:i}})};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Post-Completion"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Track post-completion requirements and follow-ups"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between py-2",children:[t.jsxs("div",{children:[t.jsx(O,{children:"Documentation Updated"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Has all documentation been updated?"})]}),t.jsx(nt,{checked:e.postCompletion.documentationUpdated,onCheckedChange:a=>r("documentationUpdated",a)})]}),t.jsxs("div",{className:"flex items-center justify-between py-2 border-t",children:[t.jsxs("div",{children:[t.jsx(O,{children:"Knowledge Transfer Completed"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Has knowledge transfer been completed?"})]}),t.jsx(nt,{checked:e.postCompletion.knowledgeTransferCompleted,onCheckedChange:a=>r("knowledgeTransferCompleted",a)})]}),t.jsxs("div",{className:"border-t pt-4 space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx(O,{children:"Follow-Up Tickets Needed"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Are there follow-up or enhancement tickets needed?"})]}),t.jsx(nt,{checked:e.postCompletion.followUpTicketsNeeded,onCheckedChange:a=>r("followUpTicketsNeeded",a)})]}),e.postCompletion.followUpTicketsNeeded&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"followUpNotes",children:"Follow-Up Notes"}),t.jsx(Gt,{id:"followUpNotes",value:e.postCompletion.followUpNotes||"",onChange:a=>r("followUpNotes",a.target.value),placeholder:"Describe the follow-up work needed...",className:"min-h-[80px]",isFilled:!!((n=e.postCompletion.followUpNotes)!=null&&n.trim())})]})]})]})]})}function Gx(e,s){switch(e){case 1:return TK(s);case 2:return PK(s);case 3:return RK(s);case 4:return IK();case 5:return DK(s);case 6:return OK();case 7:return MK(s);case 8:return LK();case 9:return FK(s);case 10:return $K();case 11:return UK();case 12:return BK(s);case 13:return zK();case 14:return qK(s);case 15:return WK();case 16:return VK();case 17:return HK();default:return{isValid:!0,errors:[]}}}function TK(e){const s=[];return e.ticketType||s.push("Ticket type is required"),e.priority||s.push("Priority is required"),e.status||s.push("Status is required"),{isValid:s.length===0,errors:s}}function PK(e){const s=[];return e.clientName.trim()||s.push("Client name is required"),e.projectName.trim()||s.push("Project name is required"),e.clientEnvironment||s.push("Client environment is required"),e.clientContact.name.trim()||s.push("Contact name is required"),e.clientContact.role.trim()||s.push("Contact role is required"),{isValid:s.length===0,errors:s}}function RK(e){const s=[];return e.businessContext.objective.trim()||s.push("Business objective is required"),e.businessContext.reasonForRequest||s.push("Reason for request is required"),{isValid:s.length===0,errors:s}}function IK(e){return{isValid:!0,errors:[]}}function DK(e){const s=[];return e.technicalOverview.technologyDomains.length===0&&s.push("Select at least one technology domain"),{isValid:s.length===0,errors:s}}function OK(e){return{isValid:!0,errors:[]}}function MK(e){const s=[];return e.desiredState.solutionApproach.trim()||s.push("Solution approach is required"),{isValid:s.length===0,errors:s}}function LK(e){return{isValid:!0,errors:[]}}function FK(e){const s=e.deliverables.expectedOutputs;return s.designDoc||s.diagrams||s.configurations||s.scripts||s.report?{isValid:!0,errors:[]}:{isValid:!1,errors:["Select at least one expected output"]}}function $K(e){return{isValid:!0,errors:[]}}function UK(e){return{isValid:!0,errors:[]}}function BK(e){const s=[];return e.riskAssessment.riskLevel||s.push("Risk level is required"),{isValid:s.length===0,errors:s}}function zK(e){return{isValid:!0,errors:[]}}function qK(e){const s=[];return e.acceptanceCriteria.completionDefinition.trim()||s.push("Completion definition is required"),{isValid:s.length===0,errors:s}}function WK(e){return{isValid:!0,errors:[]}}function VK(e){return{isValid:!0,errors:[]}}function HK(e){return{isValid:!0,errors:[]}}function KK(e){return[1,2,3,5,7,9,12,14].includes(e)}function rP({open:e,onOpenChange:s,companyId:r,companyName:n,companies:a,onCompanySelect:i,showCompanySelector:o=!1,draftProjectId:l,onDraftSaved:c,onSaveComplete:d}){var fr;const{user:u}=ft(),m=ht(),[h,p]=f.useState(0),[g,x]=f.useState([]),[v,y]=f.useState(ps()),[j,w]=f.useState(!1),[b,N]=f.useState(!1),[_,C]=f.useState([]),[E,k]=f.useState([]),[A,L]=f.useState(l||null),H=o&&a&&a.length>0,F=H?rc.length+1:rc.length,[I,G]=f.useState(!0);f.useEffect(()=>{if(e&&l)ee(l),G(!1);else if(e&&!l){const be=ps();y(be),p(0),x([]),k([]),L(null),G(!0)}},[e,l,H]),f.useEffect(()=>{I&&y(be=>{if(be.clientName)return be;if(r&&a){const ke=a.find(jt=>jt.id===r);if(ke)return{...be,clientName:ke.name}}else if(n)return{...be,clientName:n};return be})},[r,a,n,I]);const ee=async be=>{try{const{data:ke,error:jt}=await B.from("projects").select("*").eq("id",be).single();if(jt)throw jt;if(ke){const pt=ke.client_contact||{},Vn={ticketType:ke.ticket_type||"",priority:ke.priority||"",status:"new",clientName:(pt==null?void 0:pt.clientName)||ke.name||"",projectName:ke.name||"",clientEnvironment:ke.client_environment||"",clientContact:{name:(pt==null?void 0:pt.name)||"",role:(pt==null?void 0:pt.role)||"",email:(pt==null?void 0:pt.email)||"",phone:(pt==null?void 0:pt.phone)||""},businessContext:{...ps().businessContext,...ke.business_context||{}},scopeSummary:{...ps().scopeSummary,...ke.scope_summary||{}},technicalOverview:{...ps().technicalOverview,...ke.technical_overview||{}},currentState:{...ps().currentState,...ke.current_state||{}},desiredState:{...ps().desiredState,...ke.desired_state||{}},accessPrerequisites:{...ps().accessPrerequisites,...ke.access_prerequisites||{}},deliverables:{...ps().deliverables,...ke.deliverables||{}},timeline:{...ps().timeline,...ke.timeline||{}},ownership:{...ps().ownership,...ke.ownership||{}},riskAssessment:{...ps().riskAssessment,...ke.risk_assessment||{}},dependencies:{...ps().dependencies,...ke.dependencies||{}},acceptanceCriteria:{...ps().acceptanceCriteria,...ke.acceptance_criteria||{}},attachments:{...ps().attachments,...ke.attachments||{}},communication:{...ps().communication,...ke.communication||{}},postCompletion:{...ps().postCompletion,...ke.post_completion||{}}};if(y(Vn),L(be),ke.form_progress){const xa=ke.form_progress;p(xa.currentStep||0),x(xa.completedSteps||[]),k(xa.validatedSteps||[])}z.info("Draft loaded",{description:"Continue from where you left off."})}}catch(ke){console.error("Failed to load draft:",ke),z.error("Failed to load draft")}},K=f.useCallback(be=>{y(ke=>({...ke,...be})),_.length>0&&C([])},[_.length]),D=()=>H?h:h+1,q=be=>{if(H&&!r&&be>0){z.error("Please select a company first");return}p(be),C([])},re=()=>{const be=D();if(H&&h===0)return r?!0:(C(["Please select a company"]),!1);const ke=Gx(be,v);return ke.isValid?(C([]),!0):(C(ke.errors),!1)},S=async()=>{if(!re()){z.error("Please complete required fields before continuing");return}g.includes(h)||x(be=>[...be,h]),E.includes(h)||k(be=>[...be,h]),r&&await te(),h<F-1&&(p(h+1),C([]))},R=()=>{h>0&&(p(h-1),C([]))},te=async()=>{if(r)try{const be={...Q(),status:"draft",health:"healthy",is_draft:!0};if(A)await B.from("projects").update(be).eq("id",A);else{const{data:ke}=await B.from("projects").insert([be]).select("id").single();ke&&(L(ke.id),G(!1))}m.invalidateQueries({queryKey:["admin-projects"]}),m.invalidateQueries({queryKey:["company-projects"]}),m.invalidateQueries({queryKey:["draft-projects"]})}catch(be){console.error("Auto-save failed:",be)}},Q=()=>({name:v.projectName.trim()||"Untitled Project",description:v.businessContext.objective||null,organization_id:r,ticket_type:v.ticketType,priority:v.priority,client_environment:v.clientEnvironment,client_contact:JSON.parse(JSON.stringify({...v.clientContact,clientName:v.clientName})),business_context:JSON.parse(JSON.stringify(v.businessContext)),scope_summary:JSON.parse(JSON.stringify(v.scopeSummary)),technical_overview:JSON.parse(JSON.stringify(v.technicalOverview)),current_state:JSON.parse(JSON.stringify(v.currentState)),desired_state:JSON.parse(JSON.stringify(v.desiredState)),access_prerequisites:JSON.parse(JSON.stringify(v.accessPrerequisites)),deliverables:JSON.parse(JSON.stringify(v.deliverables)),timeline:JSON.parse(JSON.stringify(v.timeline)),ownership:JSON.parse(JSON.stringify(v.ownership)),risk_assessment:JSON.parse(JSON.stringify(v.riskAssessment)),dependencies:JSON.parse(JSON.stringify(v.dependencies)),acceptance_criteria:JSON.parse(JSON.stringify(v.acceptanceCriteria)),attachments:JSON.parse(JSON.stringify(v.attachments)),communication:JSON.parse(JSON.stringify(v.communication)),post_completion:JSON.parse(JSON.stringify(v.postCompletion)),start_date:v.timeline.requestedStartDate||null,target_end_date:v.timeline.targetCompletionDate||null,form_progress:JSON.parse(JSON.stringify({currentStep:h,completedSteps:g,validatedSteps:E,savedAt:new Date().toISOString()})),last_edited_by:(u==null?void 0:u.id)||null,last_edited_at:new Date().toISOString()}),Y=async()=>{if(!r){z.error("Please select a company first");return}N(!0);try{const be={...Q(),status:"draft",health:"healthy",is_draft:!0};if(A){const{error:ke}=await B.from("projects").update(be).eq("id",A);if(ke)throw ke;z.success("Draft saved",{description:"Your progress has been saved."})}else{const{data:ke,error:jt}=await B.from("projects").insert([be]).select("id").single();if(jt)throw jt;L(ke.id),z.success("Draft created",{description:"Your progress has been saved."})}m.invalidateQueries({queryKey:["admin-projects"]}),m.invalidateQueries({queryKey:["company-projects"]}),m.invalidateQueries({queryKey:["draft-projects"]}),m.invalidateQueries({queryKey:["draft-projects-admin"]}),c==null||c(),y(ps()),p(0),x([]),k([]),C([]),L(null),s(!1),d==null||d()}catch(be){console.error("Failed to save draft:",be),z.error("Failed to save draft")}finally{N(!1)}},oe=async()=>{var ke;if(!r){z.error("Please select a company first"),p(0);return}const be=[1,2,3,5,7,9,12,14];for(const jt of be){const pt=Gx(jt,v);if(!pt.isValid){z.error(`Please complete Step ${jt}: ${(ke=rc[jt-1])==null?void 0:ke.title}`),p(H?jt:jt-1),C(pt.errors);return}}w(!0);try{const jt={...Q(),status:v.status==="new"?"draft":v.status==="in_progress"?"active":"draft",health:"healthy",is_draft:!1,form_progress:null};if(A){const{error:pt}=await B.from("projects").update(jt).eq("id",A);if(pt)throw pt}else{const{error:pt}=await B.from("projects").insert([jt]);if(pt)throw pt}z.success("Project created successfully"),m.invalidateQueries({queryKey:["admin-projects"]}),m.invalidateQueries({queryKey:["company-projects"]}),m.invalidateQueries({queryKey:["draft-projects"]}),y(ps()),p(0),x([]),k([]),C([]),L(null),s(!1)}catch(jt){console.error("Error creating project:",jt),z.error("Failed to create project")}finally{w(!1)}},X=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Select Company"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose the company this project will belong to."}),_.length>0&&t.jsx("div",{className:"mt-2 p-3 rounded-lg bg-destructive/10 border border-destructive/30",children:t.jsx("ul",{className:"text-sm text-destructive list-disc list-inside",children:_.map((be,ke)=>t.jsx("li",{children:be},ke))})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(O,{htmlFor:"company-select",className:"flex items-center gap-1",children:["Company ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx(_u,{id:"company-select",value:r,onValueChange:i||(()=>{}),placeholder:"Select a company...",options:(a==null?void 0:a.map(be=>({value:be.id,label:be.name})))||[],hasError:_.length>0,isFilled:!!r})]})]}),xe=()=>{if(H&&h===0)return X();const be=H?h:h+1,ke=_;switch(be){case 1:return t.jsx(cK,{data:v,onChange:K,errors:ke});case 2:return t.jsx(dK,{data:v,onChange:K,errors:ke});case 3:return t.jsx(uK,{data:v,onChange:K,errors:ke});case 4:return t.jsx(xK,{data:v,onChange:K});case 5:return t.jsx(gK,{data:v,onChange:K,errors:ke});case 6:return t.jsx(vK,{data:v,onChange:K});case 7:return t.jsx(yK,{data:v,onChange:K,errors:ke});case 8:return t.jsx(jK,{data:v,onChange:K});case 9:return t.jsx(wK,{data:v,onChange:K,errors:ke});case 10:return t.jsx(bK,{data:v,onChange:K});case 11:return t.jsx(NK,{data:v,onChange:K});case 12:return t.jsx(CK,{data:v,onChange:K,errors:ke});case 13:return t.jsx(_K,{data:v,onChange:K});case 14:return t.jsx(SK,{data:v,onChange:K,errors:ke});case 15:return t.jsx(kK,{data:v,onChange:K});case 16:return t.jsx(EK,{data:v,onChange:K});case 17:return t.jsx(AK,{data:v,onChange:K});default:return null}},ve=()=>h+1,Ae=((fr=a==null?void 0:a.find(be=>be.id===r))==null?void 0:fr.name)||n,Be=D(),et=KK(Be),as=h===F-1,Es=H&&h===0?!!r:Gx(Be,v).isValid,Qr=()=>{y(ps()),p(0),x([]),k([]),C([]),L(null),s(!1)};return t.jsx(Xt,{open:e,onOpenChange:()=>{},children:t.jsx(zt,{className:"max-w-5xl h-[85vh] p-0 gap-0 flex flex-col overflow-hidden",onPointerDownOutside:be=>be.preventDefault(),onEscapeKeyDown:be=>be.preventDefault(),children:t.jsxs("div",{className:"flex flex-1 min-h-0",children:[t.jsx(JH,{currentStep:H?h:h+1,completedSteps:g.map(be=>H?be:be+1),validatedSteps:E.map(be=>H?be:be+1),onStepClick:be=>q(H?be:be-1),showCompanyStep:H,companySelected:!!r,showOnlyCompleted:!0}),t.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[t.jsx("div",{className:"shrink-0 px-6 py-4 border-b border-border bg-muted/30",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-semibold",children:A?"Edit Draft Project":"Create New Project"}),Ae&&t.jsxs("p",{className:"text-sm text-muted-foreground",children:["For company: ",Ae]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[et&&t.jsx("span",{className:"text-xs text-muted-foreground bg-warning/10 text-warning px-2 py-1 rounded",children:"Required fields"}),A&&t.jsx("span",{className:"text-xs bg-primary/10 text-primary px-2 py-1 rounded",children:"Draft"})]})]})}),t.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto px-6 py-6 scroll-smooth",children:xe()}),t.jsx("div",{className:"shrink-0 px-6 py-4 border-t border-border bg-background shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("span",{className:"text-sm text-muted-foreground",children:["Step ",ve()," of ",F]}),E.length>0&&t.jsxs("span",{className:"text-xs bg-success/10 text-success px-2 py-1 rounded",children:[E.length," completed"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(T,{variant:"ghost",onClick:Qr,className:"text-muted-foreground hover:text-destructive",children:"Cancel"}),(r||h>0)&&t.jsxs(T,{variant:"outline",onClick:Y,disabled:b||!r,className:"border-primary/30",children:[b?t.jsx(Ie,{className:"h-4 w-4 mr-2 animate-spin"}):t.jsx(Mn,{className:"h-4 w-4 mr-2"}),"Save Draft"]}),h>0&&t.jsxs(T,{variant:"outline",onClick:R,children:[t.jsx(nl,{className:"h-4 w-4 mr-1"}),"Previous"]}),!as&&t.jsxs(T,{onClick:S,disabled:!Es,className:J("transition-all duration-200",Es?"bg-success hover:bg-success/90 text-success-foreground shadow-lg shadow-success/25 ring-2 ring-success/30":"opacity-50 cursor-not-allowed"),children:["Next",t.jsx(ln,{className:"h-4 w-4 ml-1"})]}),as&&t.jsx(T,{onClick:oe,disabled:j||!r,className:"bg-success hover:bg-success/90 text-success-foreground shadow-lg shadow-success/25",children:j?t.jsxs(t.Fragment,{children:[t.jsx(Ie,{className:"h-4 w-4 mr-2 animate-spin"}),"Submitting..."]}):t.jsxs(t.Fragment,{children:[t.jsx(zf,{className:"h-4 w-4 mr-2"}),"Submit Project"]})})]})]})})]})]})})})}function nP({open:e,onOpenChange:s,draftName:r,isDeleting:n,onConfirm:a}){return t.jsx(cn,{open:e,onOpenChange:s,children:t.jsxs(Ur,{children:[t.jsxs(Br,{children:[t.jsxs(qr,{className:"flex items-center gap-2",children:[t.jsx(Rt,{className:"h-5 w-5 text-destructive"}),"Delete Draft Project"]}),t.jsxs(Wr,{children:["Are you sure you want to delete the draft project"," ",t.jsxs("span",{className:"font-semibold text-foreground",children:['"',r,'"']}),"?",t.jsx("br",{}),t.jsx("br",{}),"This action cannot be undone. All progress on this draft will be permanently lost."]})]}),t.jsxs(zr,{children:[t.jsx(Hr,{disabled:n,children:"Cancel"}),t.jsx(Vr,{onClick:a,disabled:n,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:n?t.jsxs(t.Fragment,{children:[t.jsx(Ie,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Delete Draft"]})})]})]})})}function f1(){const{isInfraweaveAdmin:e,isLoading:s}=Ze(),r=Qe(),n=ht(),[a,i]=f.useState(""),[o,l]=f.useState("all"),[c,d]=f.useState(!1),[u,m]=f.useState(""),[h,p]=f.useState(null),[g,x]=f.useState("all"),[v,y]=f.useState(!1),[j,w]=f.useState(null),[b,N]=f.useState(!1),{data:_=[],isLoading:C}=pp(a),{data:E=[]}=th(),{data:k=[]}=fe({queryKey:["draft-projects-admin"],queryFn:async()=>{const{data:S,error:R}=await B.from("projects").select(`
          *,
          company:organizations(id, name)
        `).eq("is_draft",!0).order("last_edited_at",{ascending:!1});if(R)throw R;return S||[]},enabled:e});if(s||C)return t.jsx(we,{children:t.jsx("div",{className:"p-6",children:"Loading..."})});if(!e)return t.jsx(we,{children:t.jsxs("div",{className:"p-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-destructive",children:"Access Denied"}),t.jsx("p",{className:"text-muted-foreground",children:"Only InfraWeave Admins can access this page."})]})});const A=_.filter(S=>!S.isDraft),L=A.filter(S=>!(o!=="all"&&S.health!==o)),H={healthy:A.filter(S=>S.health==="healthy").length,at_risk:A.filter(S=>S.health==="at_risk").length,critical:A.filter(S=>S.health==="critical").length,on_hold:A.filter(S=>S.health==="on_hold").length},F=()=>{p(null),d(!0)},I=(S,R)=>{m(R),p(S),d(!0)},G=S=>{m(S)},ee=S=>{d(S),S||(m(""),p(null))},K=()=>{n.invalidateQueries({queryKey:["draft-projects-admin"]})},D=(S,R)=>{S.stopPropagation(),w(R),y(!0)},q=async()=>{if(j){N(!0);try{const{error:S}=await B.from("projects").delete().eq("id",j.id).eq("is_draft",!0);if(S)throw S;z.success("Draft deleted",{description:`"${j.name}" has been permanently deleted.`}),n.invalidateQueries({queryKey:["draft-projects-admin"]}),n.invalidateQueries({queryKey:["admin-projects"]})}catch(S){console.error("Failed to delete draft:",S),z.error("Failed to delete draft")}finally{N(!1),y(!1),w(null)}}},re=E.find(S=>S.id===u);return t.jsxs(we,{children:[t.jsx(qn,{title:"All Projects",subtitle:"View and manage projects across all companies",customAction:t.jsxs(T,{onClick:F,children:[t.jsx(at,{className:"h-4 w-4 mr-2"}),"New Project"]})}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsx(rP,{open:c,onOpenChange:ee,companyId:u,companyName:re==null?void 0:re.name,companies:E,onCompanySelect:G,showCompanySelector:!0,draftProjectId:h||void 0,onDraftSaved:K,onSaveComplete:()=>x("drafts")}),t.jsx(nP,{open:v,onOpenChange:y,draftName:(j==null?void 0:j.name)||"Untitled Project",isDeleting:b,onConfirm:q}),t.jsxs(kt,{value:g,onValueChange:x,children:[t.jsxs(St,{children:[t.jsxs(he,{value:"all",className:"gap-2",children:[t.jsx(bt,{className:"h-4 w-4"}),"Submitted Projects",t.jsx($,{variant:"secondary",className:"ml-1",children:A.length})]}),t.jsxs(he,{value:"drafts",className:"gap-2",children:[t.jsx(_i,{className:"h-4 w-4"}),"Drafts",t.jsx($,{variant:"warning",className:"ml-1",children:k.length})]})]}),t.jsxs(Ce,{value:"all",className:"space-y-6 mt-4",children:[t.jsxs("div",{className:"flex gap-4 flex-wrap",children:[t.jsxs("div",{className:"relative flex-1 max-w-md",children:[t.jsx(ns,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t.jsx(se,{placeholder:"Search projects...",value:a,onChange:S=>i(S.target.value),className:"pl-9"})]}),t.jsxs($e,{value:o,onValueChange:l,children:[t.jsx(Le,{className:"w-[180px]",children:t.jsx(Ue,{placeholder:"Filter by health"})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"all",children:"All Health"}),t.jsx(Z,{value:"healthy",children:"Healthy"}),t.jsx(Z,{value:"at_risk",children:"At Risk"}),t.jsx(Z,{value:"critical",children:"Critical"}),t.jsx(Z,{value:"on_hold",children:"On Hold"})]})]})]}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Healthy"}),t.jsx(vt,{className:"h-4 w-4 text-success"})]}),t.jsx(M,{children:t.jsx("div",{className:"text-2xl font-bold text-success",children:H.healthy})})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"At Risk"}),t.jsx(qt,{className:"h-4 w-4 text-warning"})]}),t.jsx(M,{children:t.jsx("div",{className:"text-2xl font-bold text-warning",children:H.at_risk})})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Critical"}),t.jsx(qt,{className:"h-4 w-4 text-destructive"})]}),t.jsx(M,{children:t.jsx("div",{className:"text-2xl font-bold text-destructive",children:H.critical})})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"On Hold"}),t.jsx(Oe,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsx(M,{children:t.jsx("div",{className:"text-2xl font-bold",children:H.on_hold})})]})]}),t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsx(V,{children:"Projects"}),t.jsxs(ce,{children:[L.length," projects found"]})]}),t.jsx(M,{children:t.jsx("div",{className:"space-y-3",children:L.length===0?t.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No projects found"}):L.map(S=>{var R;return t.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-border hover:bg-accent cursor-pointer transition-colors",onClick:()=>r(`/admin/projects/${S.id}`),children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center",children:t.jsx(bt,{className:"h-5 w-5 text-primary"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:S.name}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:[(R=S.company)==null?void 0:R.name,"  ",S.progressPercent,"% complete"]})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx($,{variant:S.health==="healthy"?"success":S.health==="at_risk"?"warning":S.health==="critical"?"destructive":"secondary",children:S.health}),t.jsx($,{variant:"outline",children:S.status})]})]},S.id)})})})]})]}),t.jsx(Ce,{value:"drafts",className:"space-y-6 mt-4",children:t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsxs(V,{className:"flex items-center gap-2",children:[t.jsx(_i,{className:"h-5 w-5"}),"Draft Projects"]}),t.jsxs(ce,{children:[k.length," drafts in progress across all companies"]})]}),t.jsx(M,{children:t.jsx("div",{className:"space-y-3",children:k.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(_i,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4 opacity-50"}),t.jsx("p",{className:"text-muted-foreground",children:"No draft projects"}),t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Start a new project and save it as a draft to see it here."})]}):k.map(S=>{var oe,X;const R=S.form_progress,te=((oe=R==null?void 0:R.completedSteps)==null?void 0:oe.length)||0,Q=17,Y=Math.round(te/Q*100);return t.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border-2 border-dashed border-warning/30 bg-warning/5 hover:bg-warning/10 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"h-10 w-10 rounded-lg bg-warning/20 flex items-center justify-center",children:t.jsx(_i,{className:"h-5 w-5 text-warning"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:S.name||"Untitled Project"}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:[((X=S.company)==null?void 0:X.name)||"Unknown Company","  Step ",(R==null?void 0:R.currentStep)+1||1," of ",Q," (",Y,"% complete)"]}),t.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Last edited: ",S.last_edited_at?pe(new Date(S.last_edited_at),"MMM d, yyyy h:mm a"):"Unknown"]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx($,{variant:"warning",children:"Draft"}),t.jsx(T,{size:"sm",variant:"outline",className:"text-destructive hover:text-destructive hover:bg-destructive/10",onClick:xe=>D(xe,{id:S.id,name:S.name||"Untitled Project"}),children:t.jsx(Rt,{className:"h-4 w-4"})}),t.jsxs(T,{size:"sm",onClick:()=>I(S.id,S.organization_id),children:[t.jsx(Bf,{className:"h-4 w-4 mr-1"}),"Resume"]})]})]},S.id)})})})]})})]})]})]})}function GK(){const{isInfraweaveAdmin:e,isLoading:s}=Ze(),[r,n]=f.useState(""),[a,i]=f.useState(!1),{data:o=[],isLoading:l}=Q4({isSensitive:a,limit:200});if(s||l)return t.jsx(we,{children:t.jsx("div",{className:"p-6",children:"Loading..."})});if(!e)return t.jsx(we,{children:t.jsxs("div",{className:"p-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-destructive",children:"Access Denied"}),t.jsx("p",{className:"text-muted-foreground",children:"Only InfraWeave Admins can access audit logs."})]})});const c=o.filter(u=>{var m;return u.entityType.toLowerCase().includes(r.toLowerCase())||u.action.toLowerCase().includes(r.toLowerCase())||((m=u.entityId)==null?void 0:m.toLowerCase().includes(r.toLowerCase()))}),d=o.filter(u=>u.isSensitive).length;return t.jsxs(we,{children:[t.jsx(qn,{title:"Audit Logs",subtitle:"Complete audit trail of all sensitive actions across the platform"}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[t.jsxs("div",{className:"relative flex-1 max-w-md",children:[t.jsx(ns,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t.jsx(se,{placeholder:"Search by entity, action...",value:r,onChange:u=>n(u.target.value),className:"pl-9"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(nt,{id:"sensitive",checked:a,onCheckedChange:i}),t.jsx(O,{htmlFor:"sensitive",children:"Sensitive only"})]})]}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Total Logs"}),t.jsx(us,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsx(M,{children:t.jsx("div",{className:"text-2xl font-bold",children:o.length})})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Sensitive Actions"}),t.jsx(qt,{className:"h-4 w-4 text-warning"})]}),t.jsx(M,{children:t.jsx("div",{className:"text-2xl font-bold text-warning",children:d})})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Shown"}),t.jsx(Oe,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsx(M,{children:t.jsx("div",{className:"text-2xl font-bold",children:c.length})})]})]}),t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsx(V,{children:"Audit Trail"}),t.jsx(ce,{children:"All actions are logged and cannot be modified"})]}),t.jsx(M,{children:t.jsx("div",{className:"space-y-2",children:c.length===0?t.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No audit logs found"}):c.map(u=>t.jsxs("div",{className:"flex items-start justify-between p-4 rounded-lg border border-border",children:[t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:`h-10 w-10 rounded-lg flex items-center justify-center ${u.isSensitive?"bg-warning/10":"bg-muted"}`,children:u.isSensitive?t.jsx(qt,{className:"h-5 w-5 text-warning"}):t.jsx(qs,{className:"h-5 w-5 text-muted-foreground"})}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("p",{className:"font-medium text-foreground",children:u.action}),u.isSensitive&&t.jsx($,{variant:"warning",children:"Sensitive"})]}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Entity: ",u.entityType,u.entityId&&`  ID: ${u.entityId.slice(0,8)}...`]}),u.actionCategory&&t.jsx($,{variant:"outline",className:"mt-1",children:u.actionCategory})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm text-foreground",children:pe(new Date(u.createdAt),"MMM d, yyyy")}),t.jsx("p",{className:"text-xs text-muted-foreground",children:pe(new Date(u.createdAt),"HH:mm:ss")}),u.impersonatedBy&&t.jsx($,{variant:"destructive",className:"mt-1",children:"Impersonated"})]})]},u.id))})})]})]})]})}function yd(e,s=1e3){return typeof e!="string"?"":e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F]/g,"").slice(0,s)}const YK=Vs().trim().min(1,"Email is required").max(320,"Email is too long").email("Please enter a valid email address").refine(e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),"Please enter a valid email address");Vs().min(8,"Password must be at least 8 characters").max(128,"Password is too long").refine(e=>/[A-Z]/.test(e),"Password must contain at least one uppercase letter").refine(e=>/[a-z]/.test(e),"Password must contain at least one lowercase letter").refine(e=>/[0-9]/.test(e),"Password must contain at least one number");Vs().min(6,"Password must be at least 6 characters").max(128,"Password is too long");const QK=Vs().trim().min(1,"Name is required").max(100,"Name is too long").refine(e=>!/[<>]/.test(e),"Name contains invalid characters"),ZK=Vs().trim().max(20,"Phone number is too long").refine(e=>!e||/^[+]?[\d\s\-().]{7,20}$/.test(e),"Please enter a valid phone number").optional().or(Bj(""));Vs().trim().max(2048,"URL is too long").refine(e=>{if(!e)return!0;try{const s=new URL(e);return["http:","https:"].includes(s.protocol)}catch{return!1}},"Please enter a valid URL (http or https)").optional().or(Bj(""));Vs().trim().min(1,"Slug is required").max(100,"Slug is too long").refine(e=>/^[a-z0-9]+(?:-[a-z0-9]+)*$/.test(e.toLowerCase()),"Slug must only contain lowercase letters, numbers, and hyphens");Vs().trim().max(20,"Version is too long").refine(e=>/^\d+\.\d+\.\d+(?:-[a-zA-Z0-9]+)?$/.test(e),"Please enter a valid version (e.g., 1.0.0)").optional().or(Bj(""));Vs().uuid("Invalid ID format");function aP(e){var r;const s=YK.safeParse(e);return s.success?{isValid:!0}:{isValid:!1,error:(r=s.error.errors[0])==null?void 0:r.message}}function JK(e){var r;const s=QK.safeParse(e);return s.success?{isValid:!0}:{isValid:!1,error:(r=s.error.errors[0])==null?void 0:r.message}}function XK(e){var r;const s=ZK.safeParse(e);return s.success?{isValid:!0}:{isValid:!1,error:(r=s.error.errors[0])==null?void 0:r.message}}function eG(){const[e,s]=f.useState(!1),[r,n]=f.useState(""),[a,i]=f.useState("engineer"),[o,l]=f.useState(""),{user:c}=ft(),d=ht(),{data:u=[]}=fe({queryKey:["admin-organizations-list"],queryFn:async()=>{const{data:x,error:v}=await B.from("organizations").select("id, name").order("name");if(v)throw v;return x}}),m=_t({mutationFn:async()=>{if(a==="infraweave_admin"||a==="infraweave_employee"){const{data:x,error:v}=await B.from("invitations").insert({email:r,role:a,company_id:null,invited_by:c==null?void 0:c.id,status:"pending"}).select().single();if(v)throw v;const{error:y}=await B.functions.invoke("send-invitation",{body:{email:r,role:a,invitationId:x.id,token:x.token}});return y&&(console.error("Failed to send email:",y),z.warning("Invitation created but email delivery failed. User can use the invitation link.")),x}else{if(!o)throw new Error("Company is required for company admin and engineer roles");const{data:x,error:v}=await B.from("invitations").insert({email:r,role:a,company_id:o,invited_by:c==null?void 0:c.id,status:"pending"}).select().single();if(v)throw v;const{error:y}=await B.functions.invoke("send-invitation",{body:{email:r,role:a,companyId:o,invitationId:x.id,token:x.token}});return y&&(console.error("Failed to send email:",y),z.warning("Invitation created but email delivery failed. User can use the invitation link.")),x}},onSuccess:()=>{z.success("Invitation sent successfully"),d.invalidateQueries({queryKey:["admin-all-profiles"]}),d.invalidateQueries({queryKey:["all-invitations"]}),s(!1),h()},onError:x=>{z.error(`Failed to send invitation: ${x.message}`)}}),h=()=>{n(""),i("engineer"),l("")},p=x=>{x.preventDefault();const v=aP(r);if(!v.isValid){z.error(v.error||"Invalid email address");return}if(a!=="infraweave_admin"&&a!=="infraweave_employee"&&!o){z.error("Please select a company for company admin or engineer roles");return}m.mutate()},g={infraweave_admin:"Full platform access across all companies",infraweave_employee:"InfraWeave support staff with cross-company ticket access",company_admin:"Full access within a specific company",engineer:"Limited access within a specific company"};return t.jsxs(Xt,{open:e,onOpenChange:s,children:[t.jsx($r,{asChild:!0,children:t.jsxs(T,{children:[t.jsx(Wu,{className:"h-4 w-4 mr-2"}),"Invite User"]})}),t.jsxs(zt,{className:"sm:max-w-md",preventClose:!0,children:[t.jsxs(es,{children:[t.jsx(ts,{children:"Invite User"}),t.jsx(ss,{children:"Send an invitation to a new user to join the platform."})]}),t.jsxs("form",{onSubmit:p,className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"email",children:"Email Address *"}),t.jsx(se,{id:"email",type:"email",value:r,onChange:x=>n(x.target.value),placeholder:"user@example.com",required:!0})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"role",children:"Role *"}),t.jsxs($e,{value:a,onValueChange:x=>i(x),children:[t.jsx(Le,{children:t.jsx(Ue,{})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"infraweave_admin",children:"InfraWeave Admin (Super Admin)"}),t.jsx(Z,{value:"infraweave_employee",children:"InfraWeave Employee"}),t.jsx(Z,{value:"company_admin",children:"Company Admin"}),t.jsx(Z,{value:"engineer",children:"Engineer"})]})]}),t.jsx("p",{className:"text-xs text-muted-foreground",children:g[a]})]}),a!=="infraweave_admin"&&a!=="infraweave_employee"&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"company",children:"Company *"}),t.jsxs($e,{value:o,onValueChange:l,children:[t.jsx(Le,{children:t.jsx(Ue,{placeholder:"Select a company"})}),t.jsx(Fe,{children:u.map(x=>t.jsx(Z,{value:x.id,children:x.name},x.id))})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[t.jsx(T,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),t.jsxs(T,{type:"submit",disabled:m.isPending,children:[m.isPending&&t.jsx(Ie,{className:"h-4 w-4 mr-2 animate-spin"}),"Send Invitation"]})]})]})]})]})}function tG({open:e,onOpenChange:s,userId:r,userName:n,currentRole:a,currentCompanyId:i}){const[o,l]=f.useState("none"),[c,d]=f.useState(""),{user:u}=ft(),m=ht();f.useEffect(()=>{a==="InfraWeave Admin"?l("infraweave_admin"):a==="InfraWeave Employee"?l("infraweave_employee"):a==="Company Admin"?(l("company_admin"),d(i||"")):a==="Engineer"?(l("engineer"),d(i||"")):l("none")},[a,i,e]);const{data:h=[]}=fe({queryKey:["admin-organizations-list"],queryFn:async()=>{const{data:y,error:j}=await B.from("organizations").select("id, name").order("name");if(j)throw j;return y}}),p=_t({mutationFn:async()=>{if(await B.from("infraweave_admins").delete().eq("user_id",r),await B.from("infraweave_employees").delete().eq("user_id",r),await B.from("company_members").delete().eq("user_id",r),o==="infraweave_admin"){const{error:y}=await B.from("infraweave_admins").insert({user_id:r,granted_by:u==null?void 0:u.id,is_active:!0});if(y)throw y}else if(o==="infraweave_employee"){const{error:y}=await B.from("infraweave_employees").insert({user_id:r,granted_by:u==null?void 0:u.id,is_active:!0});if(y)throw y}else if(o==="company_admin"||o==="engineer"){if(!c)throw new Error("Company is required for company roles");const{error:y}=await B.from("company_members").insert({user_id:r,company_id:c,role:o,is_active:!0,joined_at:new Date().toISOString()});if(y)throw y}},onSuccess:()=>{z.success("User role updated successfully"),m.invalidateQueries({queryKey:["admin-all-profiles"]}),m.invalidateQueries({queryKey:["admin-all-company-members"]}),m.invalidateQueries({queryKey:["admin-infraweave-admins"]}),m.invalidateQueries({queryKey:["admin-infraweave-employees"]}),s(!1)},onError:y=>{z.error(`Failed to update role: ${y.message}`)}}),g=y=>{if(y.preventDefault(),(o==="company_admin"||o==="engineer")&&!c){z.error("Please select a company for company roles");return}p.mutate()},x={infraweave_admin:"Full platform access across all companies (Super Admin)",infraweave_employee:"InfraWeave support staff with cross-company ticket access",company_admin:"Full access within a specific company",engineer:"Limited access within a specific company",none:"No role assigned - user cannot access the platform"},v=o==="company_admin"||o==="engineer";return t.jsx(Xt,{open:e,onOpenChange:s,children:t.jsxs(zt,{className:"sm:max-w-md",preventClose:!0,children:[t.jsxs(es,{children:[t.jsx(ts,{children:"Edit User Role"}),t.jsxs(ss,{children:["Change the role for ",t.jsx("span",{className:"font-medium",children:n})]})]}),t.jsxs("form",{onSubmit:g,className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"role",children:"Role"}),t.jsxs($e,{value:o,onValueChange:y=>l(y),children:[t.jsx(Le,{children:t.jsx(Ue,{})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"infraweave_admin",children:"InfraWeave Admin"}),t.jsx(Z,{value:"infraweave_employee",children:"InfraWeave Employee"}),t.jsx(Z,{value:"company_admin",children:"Company Admin"}),t.jsx(Z,{value:"engineer",children:"Engineer"}),t.jsx(Z,{value:"none",children:"No Role"})]})]}),t.jsx("p",{className:"text-xs text-muted-foreground",children:x[o]})]}),v&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"company",children:"Company *"}),t.jsxs($e,{value:c,onValueChange:d,children:[t.jsx(Le,{children:t.jsx(Ue,{placeholder:"Select a company"})}),t.jsx(Fe,{children:h.map(y=>t.jsx(Z,{value:y.id,children:y.name},y.id))})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[t.jsx(T,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),t.jsxs(T,{type:"submit",disabled:p.isPending,children:[p.isPending&&t.jsx(Ie,{className:"h-4 w-4 mr-2 animate-spin"}),"Save Changes"]})]})]})]})})}function sG({open:e,onOpenChange:s,userId:r,userName:n,userEmail:a}){const i=ht(),o=_t({mutationFn:async()=>{const{error:l}=await B.from("infraweave_admins").delete().eq("user_id",r);l&&console.error("Error removing admin role:",l);const{error:c}=await B.from("infraweave_employees").delete().eq("user_id",r);c&&console.error("Error removing employee role:",c);const{error:d}=await B.from("company_members").update({is_active:!1}).eq("user_id",r);return d&&console.error("Error deactivating company membership:",d),!0},onSuccess:()=>{z.success("User roles removed successfully"),i.invalidateQueries({queryKey:["admin-all-profiles"]}),i.invalidateQueries({queryKey:["admin-all-company-members"]}),i.invalidateQueries({queryKey:["admin-infraweave-admins"]}),i.invalidateQueries({queryKey:["admin-infraweave-employees"]}),s(!1)},onError:l=>{z.error(`Failed to remove user roles: ${l.message}`)}});return t.jsx(cn,{open:e,onOpenChange:s,children:t.jsxs(Ur,{children:[t.jsxs(Br,{children:[t.jsx(qr,{children:"Remove User Access"}),t.jsxs(Wr,{className:"space-y-2",children:[t.jsxs("p",{children:["Are you sure you want to remove all roles from"," ",t.jsx("span",{className:"font-medium text-foreground",children:n||a}),"?"]}),t.jsx("p",{className:"text-sm",children:"This will revoke their access to the platform. The user account will still exist but they won't be able to access any features until a new role is assigned."})]})]}),t.jsxs(zr,{children:[t.jsx(Hr,{children:"Cancel"}),t.jsxs(Vr,{onClick:l=>{l.preventDefault(),o.mutate()},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:o.isPending,children:[o.isPending&&t.jsx(Ie,{className:"h-4 w-4 mr-2 animate-spin"}),"Remove Access"]})]})]})})}const rG=Vs().email("Please enter a valid email address");function iP({triggerButton:e,defaultEmail:s=""}){const[r,n]=f.useState(!1),[a,i]=f.useState(s),[o,l]=f.useState(!1),[c,d]=f.useState(!1),u=async h=>{h.preventDefault();try{rG.parse(a)}catch(x){if(x instanceof lr){z.error(x.errors[0].message);return}}l(!0);const p=`${window.location.origin}/reset-password`,{error:g}=await B.auth.resetPasswordForEmail(a,{redirectTo:p});l(!1),g?z.error(g.message):(d(!0),z.success("Password reset email sent successfully!"))},m=()=>{n(!1),i(s),d(!1)};return t.jsxs(Xt,{open:r,onOpenChange:h=>{h?(n(!0),i(s)):m()},children:[t.jsx($r,{asChild:!0,children:e||t.jsxs(T,{variant:"outline",size:"sm",children:[t.jsx(Bo,{className:"h-4 w-4 mr-2"}),"Send Password Reset"]})}),t.jsxs(zt,{className:"sm:max-w-md",preventClose:!0,children:[t.jsxs(es,{children:[t.jsx("div",{className:"mx-auto h-12 w-12 rounded-xl flex items-center justify-center mb-2 bg-gradient-to-br from-primary to-primary/60",children:t.jsx(Bo,{className:"h-6 w-6 text-primary-foreground"})}),t.jsx(ts,{className:"text-center",children:"Send Password Reset"}),t.jsx(ss,{className:"text-center",children:c?"Password reset instructions have been sent.":"Enter the user's email address to send them password reset instructions."})]}),c?t.jsxs("div",{className:"space-y-4 pt-4",children:[t.jsxs("div",{className:"flex flex-col items-center gap-4 py-6",children:[t.jsx("div",{className:"h-16 w-16 rounded-full bg-primary/10 flex items-center justify-center",children:t.jsx(ys,{className:"h-8 w-8 text-primary"})}),t.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:["Password reset instructions have been sent to ",t.jsx("strong",{children:a}),". The user should check their inbox and spam folder."]})]}),t.jsx(T,{onClick:m,className:"w-full",variant:"outline",children:"Close"})]}):t.jsxs("form",{onSubmit:u,className:"space-y-4 pt-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"reset-email",children:"User's Email Address"}),t.jsx(se,{id:"reset-email",type:"email",placeholder:"user@company.com",value:a,onChange:h=>i(h.target.value),className:"bg-input border-border",required:!0})]}),t.jsx(T,{type:"submit",className:"w-full",disabled:o,children:o?t.jsxs(t.Fragment,{children:[t.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):t.jsxs(t.Fragment,{children:[t.jsx(ys,{className:"mr-2 h-4 w-4"}),"Send Reset Instructions"]})})]})]})]})}function nG(){const{user:e}=ft(),s=ht(),[r,n]=f.useState(""),[a,i]=f.useState("users"),[o,l]=f.useState(!1),[c,d]=f.useState(!1),[u,m]=f.useState(null),{data:h=[],isLoading:p}=fe({queryKey:["admin-all-profiles"],queryFn:async()=>{const{data:S,error:R}=await B.from("profiles_safe").select("*").order("created_at",{ascending:!1});if(R)throw R;return S}}),{data:g=[]}=fe({queryKey:["admin-all-company-members"],queryFn:async()=>{const{data:S,error:R}=await B.from("company_members").select(`
          id,
          user_id,
          company_id,
          role,
          is_active,
          company:organizations (
            id,
            name,
            slug
          )
        `).eq("is_active",!0);if(R)throw R;return S}}),{data:x=[]}=fe({queryKey:["admin-infraweave-admins"],queryFn:async()=>{const{data:S,error:R}=await B.from("infraweave_admins").select("*").eq("is_active",!0);if(R)throw R;return S}}),{data:v=[]}=fe({queryKey:["admin-infraweave-employees"],queryFn:async()=>{const{data:S,error:R}=await B.from("infraweave_employees").select("*").eq("is_active",!0);if(R)throw R;return S}}),{data:y=[],isLoading:j}=fe({queryKey:["admin-all-invitations"],queryFn:async()=>{const{data:S,error:R}=await B.from("invitations").select(`
          id,
          email,
          role,
          status,
          token,
          expires_at,
          created_at,
          company:organizations (
            id,
            name
          ),
          inviter:profiles!invited_by (
            full_name,
            email
          )
        `).order("created_at",{ascending:!1});if(R)throw R;return S}}),w=_t({mutationFn:async S=>{var Y,oe,X;const R=new Date;R.setDate(R.getDate()+7);const{error:te}=await B.from("invitations").update({expires_at:R.toISOString(),status:"pending"}).eq("id",S.id);if(te)throw te;const{error:Q}=await B.functions.invoke("send-invitation",{body:{email:S.email,role:S.role,companyId:((Y=S.company)==null?void 0:Y.id)||null,companyName:((oe=S.company)==null?void 0:oe.name)||"InfraWeave",inviterName:((X=e==null?void 0:e.user_metadata)==null?void 0:X.full_name)||(e==null?void 0:e.email)||"An admin",isResend:!0,invitationId:S.id}});if(Q)throw Q},onSuccess:()=>{z.success("Invitation resent successfully"),s.invalidateQueries({queryKey:["admin-all-invitations"]})},onError:S=>{z.error(S.message||"Failed to resend invitation")}}),b=_t({mutationFn:async S=>{const{error:R}=await B.from("invitations").update({status:"cancelled"}).eq("id",S);if(R)throw R},onSuccess:()=>{z.success("Invitation cancelled"),s.invalidateQueries({queryKey:["admin-all-invitations"]})},onError:()=>{z.error("Failed to cancel invitation")}}),N=h.filter(S=>{var te,Q;const R=r.toLowerCase();return((te=S.email)==null?void 0:te.toLowerCase().includes(R))||((Q=S.full_name)==null?void 0:Q.toLowerCase().includes(R))}),C=y.filter(S=>{var te;const R=r.toLowerCase();return(te=S.email)==null?void 0:te.toLowerCase().includes(R)}).filter(S=>S.status==="pending"),E=C.filter(S=>oa(new Date(S.expires_at))),k=C.filter(S=>!oa(new Date(S.expires_at))),A=S=>{var Y;const R=x.some(oe=>oe.user_id===S),te=v.some(oe=>oe.user_id===S),Q=g.find(oe=>oe.user_id===S);return R?{role:"InfraWeave Admin",variant:"destructive",company:null,companyId:null}:te?{role:"InfraWeave Employee",variant:"info",company:"InfraWeave",companyId:null}:Q?{role:Q.role==="company_admin"?"Company Admin":"Engineer",variant:Q.role==="company_admin"?"success":"info",company:((Y=Q.company)==null?void 0:Y.name)||"Unknown Company",companyId:Q.company_id}:{role:"No Role",variant:"secondary",company:null,companyId:null}},L=(S,R)=>{m({id:S.id,name:S.full_name||S.email,email:S.email,role:R.role,companyId:R.companyId}),l(!0)},H=S=>{m({id:S.id,name:S.full_name||S.email,email:S.email,role:"",companyId:null}),d(!0)},F=h.length,I=x.length,G=v.length,ee=g.filter(S=>S.role==="company_admin").length,K=g.filter(S=>S.role==="engineer").length,D=C.length,q=S=>{switch(S){case"infraweave_admin":return"InfraWeave Admin";case"infraweave_employee":return"InfraWeave Employee";case"company_admin":return"Company Admin";case"engineer":return"Engineer";default:return S}},re=S=>{switch(S){case"infraweave_admin":return"destructive";case"infraweave_employee":return"info";case"company_admin":return"success";case"engineer":return"info";default:return"secondary"}};return p||j?t.jsx(we,{children:t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsx(Ie,{className:"h-8 w-8 animate-spin text-primary"})})}):t.jsxs(we,{children:[t.jsx(qn,{title:"User Management",subtitle:"Manage all platform users across companies",customAction:t.jsx(eG,{})}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"grid gap-4 md:grid-cols-5",children:[t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Total Users"}),t.jsx(Kt,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold",children:F}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all companies"})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"InfraWeave Admins"}),t.jsx(us,{className:"h-4 w-4 text-destructive"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold text-destructive",children:I}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Super administrators"})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Employees"}),t.jsx(Kt,{className:"h-4 w-4 text-info"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold text-info",children:G}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Support staff"})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Company Admins"}),t.jsx(Qt,{className:"h-4 w-4 text-success"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold text-success",children:ee}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Tenant administrators"})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Engineers"}),t.jsx(Kt,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold",children:K}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Active team members"})]})]})]}),t.jsxs(kt,{value:a,onValueChange:i,className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between gap-4",children:[t.jsxs(St,{children:[t.jsxs(he,{value:"users",className:"gap-2",children:[t.jsx(Kt,{className:"h-4 w-4"}),"Users"]}),t.jsxs(he,{value:"invitations",className:"gap-2",children:[t.jsx(ys,{className:"h-4 w-4"}),"Pending Invitations",D>0&&t.jsx($,{variant:"secondary",className:"ml-1 h-5 px-1.5",children:D})]})]}),t.jsxs("div",{className:"relative flex-1 max-w-md",children:[t.jsx(ns,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t.jsx(se,{placeholder:a==="users"?"Search users by name or email...":"Search invitations by email...",value:r,onChange:S=>n(S.target.value),className:"pl-9"})]})]}),t.jsx(Ce,{value:"users",className:"mt-0",children:t.jsxs(P,{children:[t.jsx(W,{children:t.jsx(V,{children:"All Users"})}),t.jsx(M,{children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-border",children:[t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"User"}),t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Email"}),t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Role"}),t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Company"}),t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Joined"}),t.jsx("th",{className:"text-right py-3 px-4 text-sm font-medium text-muted-foreground",children:"Actions"})]})}),t.jsxs("tbody",{children:[N.map(S=>{var Q;const R=A(S.id),te=S.full_name?S.full_name.split(" ").map(Y=>Y[0]).join("").toUpperCase().slice(0,2):((Q=S.email)==null?void 0:Q.substring(0,2).toUpperCase())||"U";return t.jsxs("tr",{className:"border-b border-border last:border-0 hover:bg-accent/50 transition-colors",children:[t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs(Tt,{className:"h-9 w-9",children:[t.jsx(Ps,{src:S.avatar_url||void 0}),t.jsx(Pt,{className:"bg-primary/10 text-primary text-sm",children:te})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:S.full_name||"Unnamed User"}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[S.id.slice(0,8),"..."]})]})]})}),t.jsx("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:S.email}),t.jsx("td",{className:"py-3 px-4",children:t.jsx($,{variant:R.variant,children:R.role})}),t.jsx("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:R.company||"-"}),t.jsx("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:pe(new Date(S.created_at),"MMM d, yyyy")}),t.jsx("td",{className:"py-3 px-4 text-right",children:t.jsxs(Ga,{children:[t.jsx(Ya,{asChild:!0,children:t.jsxs(T,{variant:"ghost",size:"icon",className:"h-8 w-8",children:[t.jsx(dj,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Open menu"})]})}),t.jsxs(fa,{align:"end",children:[t.jsxs(mt,{onClick:()=>L(S,R),children:[t.jsx(Bf,{className:"h-4 w-4 mr-2"}),"Edit Role"]}),t.jsx(iP,{defaultEmail:S.email,triggerButton:t.jsxs(mt,{onSelect:Y=>Y.preventDefault(),children:[t.jsx(Bo,{className:"h-4 w-4 mr-2"}),"Send Password Reset"]})}),t.jsx(za,{}),t.jsxs(mt,{onClick:()=>H(S),className:"text-destructive focus:text-destructive",children:[t.jsx($O,{className:"h-4 w-4 mr-2"}),"Remove Access"]})]})]})})]},S.id)}),N.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"py-8 text-center text-muted-foreground",children:"No users found"})})]})]})})})]})}),t.jsx(Ce,{value:"invitations",className:"mt-0",children:t.jsxs(P,{children:[t.jsx(W,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs(V,{className:"flex items-center gap-2",children:[t.jsx(ys,{className:"h-5 w-5"}),"Pending Invitations"]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[t.jsxs("span",{children:[k.length," active"]}),E.length>0&&t.jsxs($,{variant:"outline",className:"text-amber-600 border-amber-300",children:[E.length," expired"]})]})]})}),t.jsx(M,{children:C.length===0?t.jsxs("div",{className:"py-12 text-center",children:[t.jsx(ys,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),t.jsx("p",{className:"text-muted-foreground",children:"No pending invitations"}),t.jsx("p",{className:"text-sm text-muted-foreground/70 mt-1",children:"New invitations will appear here"})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-border",children:[t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Email"}),t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Role"}),t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Company"}),t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Invited By"}),t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Status"}),t.jsx("th",{className:"text-right py-3 px-4 text-sm font-medium text-muted-foreground",children:"Actions"})]})}),t.jsx("tbody",{children:C.map(S=>{var Q,Y,oe;const R=oa(new Date(S.expires_at)),te=sd(new Date(S.expires_at),{addSuffix:!0});return t.jsxs("tr",{className:"border-b border-border last:border-0 hover:bg-accent/50 transition-colors",children:[t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:t.jsx(ys,{className:"h-4 w-4 text-primary"})}),t.jsx("span",{className:"font-medium",children:S.email})]})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx($,{variant:re(S.role),children:q(S.role)})}),t.jsx("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:((Q=S.company)==null?void 0:Q.name)||"InfraWeave"}),t.jsx("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:((Y=S.inviter)==null?void 0:Y.full_name)||((oe=S.inviter)==null?void 0:oe.email)||"Unknown"}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("div",{className:"flex items-center gap-2",children:R?t.jsxs($,{variant:"outline",className:"text-amber-600 border-amber-300 bg-amber-50 dark:bg-amber-950/20",children:[t.jsx(Oe,{className:"h-3 w-3 mr-1"}),"Expired"]}):t.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[t.jsx(Oe,{className:"h-3.5 w-3.5"}),t.jsxs("span",{children:["Expires ",te]})]})})}),t.jsx("td",{className:"py-3 px-4 text-right",children:t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.jsxs(T,{variant:"outline",size:"sm",onClick:()=>w.mutate(S),disabled:w.isPending,className:"gap-1.5",children:[w.isPending?t.jsx(Ie,{className:"h-3.5 w-3.5 animate-spin"}):t.jsx(PO,{className:"h-3.5 w-3.5"}),"Resend"]}),t.jsxs(T,{variant:"ghost",size:"sm",onClick:()=>b.mutate(S.id),disabled:b.isPending,className:"text-destructive hover:text-destructive gap-1.5",children:[b.isPending?t.jsx(Ie,{className:"h-3.5 w-3.5 animate-spin"}):t.jsx(Nc,{className:"h-3.5 w-3.5"}),"Cancel"]})]})})]},S.id)})})]})})})]})})]})]}),u&&t.jsx(tG,{open:o,onOpenChange:l,userId:u.id,userName:u.name,currentRole:u.role,currentCompanyId:u.companyId}),u&&t.jsx(sG,{open:c,onOpenChange:d,userId:u.id,userName:u.name,userEmail:u.email})]})}function aG(){const[e,s]=f.useState("InfraWeave"),r=()=>{z.success("Platform settings saved")};return t.jsxs(we,{children:[t.jsx(qn,{title:"Platform Settings",subtitle:"Global platform configuration and settings"}),t.jsx("div",{className:"p-6",children:t.jsxs(kt,{defaultValue:"platform",className:"space-y-6",children:[t.jsxs(St,{className:"bg-secondary",children:[t.jsxs(he,{value:"platform",className:"gap-2 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[t.jsx(Uf,{className:"h-4 w-4"}),"Platform"]}),t.jsxs(he,{value:"defaults",className:"gap-2 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[t.jsx(Qt,{className:"h-4 w-4"}),"Company Defaults"]}),t.jsxs(he,{value:"notifications",className:"gap-2 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[t.jsx(na,{className:"h-4 w-4"}),"Notifications"]}),t.jsxs(he,{value:"security",className:"gap-2 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[t.jsx(us,{className:"h-4 w-4"}),"Security"]})]}),t.jsx(Ce,{value:"platform",children:t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsx(V,{children:"Platform Configuration"}),t.jsx(ce,{children:"Configure global platform settings that affect all companies"})]}),t.jsxs(M,{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"platform-name",children:"Platform Name"}),t.jsx(se,{id:"platform-name",value:e,onChange:n=>s(n.target.value),className:"bg-secondary border-border"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"support-email",children:"Support Email"}),t.jsx(se,{id:"support-email",type:"email",placeholder:"support@infraweave.com",className:"bg-secondary border-border"})]})]}),t.jsxs("div",{className:"border-t border-border pt-6",children:[t.jsx("h4",{className:"text-sm font-semibold text-foreground mb-4",children:"Feature Flags"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"Multi-tenancy"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable company-level isolation"})]}),t.jsx(nt,{defaultChecked:!0,disabled:!0})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"Client Portal"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable client self-service portal"})]}),t.jsx(nt,{defaultChecked:!0})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"Licensing Module"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable software licensing features"})]}),t.jsx(nt,{defaultChecked:!0})]})]})]}),t.jsx("div",{className:"flex justify-end pt-4",children:t.jsx(T,{onClick:r,children:"Save Changes"})})]})]})}),t.jsx(Ce,{value:"defaults",children:t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsx(V,{children:"Company Defaults"}),t.jsx(ce,{children:"Default settings applied to new companies"})]}),t.jsx(M,{className:"space-y-6",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"Default Subscription Tier"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Standard tier for new companies"})]}),t.jsx("span",{className:"text-sm text-muted-foreground",children:"Standard"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"Trial Period"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Free trial duration for new signups"})]}),t.jsx("span",{className:"text-sm text-muted-foreground",children:"14 days"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"Max Users per Company"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Default user limit"})]}),t.jsx("span",{className:"text-sm text-muted-foreground",children:"Unlimited"})]})]})})]})}),t.jsx(Ce,{value:"notifications",children:t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsx(V,{children:"Global Notification Settings"}),t.jsx(ce,{children:"Configure system-wide notification preferences"})]}),t.jsxs(M,{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"System Alerts"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive critical system notifications"})]}),t.jsx(nt,{defaultChecked:!0})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"New Company Signups"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified of new company registrations"})]}),t.jsx(nt,{defaultChecked:!0})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"Critical Audit Events"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Alerts for sensitive security events"})]}),t.jsx(nt,{defaultChecked:!0})]})]})]})}),t.jsx(Ce,{value:"security",children:t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsx(V,{children:"Security Settings"}),t.jsx(ce,{children:"Platform-wide security configuration"})]}),t.jsxs(M,{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"Enforce 2FA for Admins"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Require two-factor authentication for all admins"})]}),t.jsx(nt,{})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"Session Timeout"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Auto-logout after 10 minutes of inactivity"})]}),t.jsx(nt,{defaultChecked:!0})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"Audit Logging"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Log all sensitive actions"})]}),t.jsx(nt,{defaultChecked:!0,disabled:!0})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"IP Whitelisting"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Restrict access to specific IP addresses"})]}),t.jsx(T,{variant:"outline",onClick:()=>z.info("IP whitelist configuration coming soon"),children:"Configure"})]})]})]})})]})})]})}function Yx(e,s){const r=s.map(a=>`"${a.header}"`).join(","),n=e.map(a=>s.map(i=>{const o=a[i.key];return o==null?'""':typeof o=="string"?`"${o.replace(/"/g,'""')}"`:typeof o=="object"?`"${JSON.stringify(o).replace(/"/g,'""')}"`:`"${String(o)}"`}).join(","));return[r,...n].join(`
`)}function Qx(e,s){const r=new Blob([e],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),a=URL.createObjectURL(r);n.setAttribute("href",a),n.setAttribute("download",`${s}.csv`),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n)}function oP(e,s){const r=window.open("","_blank");if(!r){alert("Please allow popups to generate PDF reports");return}const n=`
    <!DOCTYPE html>
    <html>
    <head>
      <title>${e}</title>
      <style>
        body {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
          padding: 40px;
          color: #1a1a1a;
          line-height: 1.6;
        }
        h1 { 
          color: #0f172a; 
          border-bottom: 2px solid #e2e8f0; 
          padding-bottom: 16px;
          margin-bottom: 24px;
        }
        h2 { 
          color: #334155; 
          margin-top: 32px;
          margin-bottom: 16px;
        }
        .meta {
          color: #64748b;
          font-size: 14px;
          margin-bottom: 32px;
        }
        table {
          width: 100%;
          border-collapse: collapse;
          margin: 16px 0;
        }
        th, td {
          border: 1px solid #e2e8f0;
          padding: 12px;
          text-align: left;
        }
        th {
          background-color: #f8fafc;
          font-weight: 600;
          color: #334155;
        }
        tr:nth-child(even) {
          background-color: #f8fafc;
        }
        .metric-grid {
          display: grid;
          grid-template-columns: repeat(4, 1fr);
          gap: 16px;
          margin: 24px 0;
        }
        .metric-card {
          border: 1px solid #e2e8f0;
          border-radius: 8px;
          padding: 16px;
          text-align: center;
        }
        .metric-value {
          font-size: 28px;
          font-weight: 700;
          color: #0f172a;
        }
        .metric-label {
          font-size: 14px;
          color: #64748b;
          margin-top: 4px;
        }
        .badge {
          display: inline-block;
          padding: 2px 8px;
          border-radius: 4px;
          font-size: 12px;
          font-weight: 500;
        }
        .badge-success { background: #dcfce7; color: #166534; }
        .badge-warning { background: #fef3c7; color: #92400e; }
        .badge-danger { background: #fee2e2; color: #991b1b; }
        .badge-info { background: #dbeafe; color: #1e40af; }
        @media print {
          body { padding: 20px; }
          .no-print { display: none; }
        }
      </style>
    </head>
    <body>
      <h1>${e}</h1>
      <div class="meta">Generated on ${new Date().toLocaleString()}</div>
      ${s.map(a=>iG(a)).join("")}
      <script>
        window.onload = function() { 
          window.print(); 
        }
      <\/script>
    </body>
    </html>
  `;r.document.write(n),r.document.close()}function iG(e){switch(e.type){case"metrics":return oG(e.title,e.data);case"table":return lG(e.title,e.data);case"text":return`<h2>${e.title}</h2><p>${e.data}</p>`;default:return""}}function oG(e,s){return`
    <h2>${e}</h2>
    <div class="metric-grid">
      ${s.map(r=>`
        <div class="metric-card">
          <div class="metric-value">${r.value}</div>
          <div class="metric-label">${r.label}</div>
        </div>
      `).join("")}
    </div>
  `}function lG(e,s){return`
    <h2>${e}</h2>
    <table>
      <thead>
        <tr>${s.headers.map(r=>`<th>${r}</th>`).join("")}</tr>
      </thead>
      <tbody>
        ${s.rows.map(r=>`
          <tr>${r.map(n=>`<td>${n}</td>`).join("")}</tr>
        `).join("")}
      </tbody>
    </table>
  `}function cG(){const[e,s]=f.useState("overview"),{data:r=[],isLoading:n}=th(),{data:a=[],isLoading:i}=pp(),{data:o=[],isLoading:l}=fe({queryKey:["admin-reports-tickets"],queryFn:async()=>{const{data:N,error:_}=await B.from("tickets").select("*, organization:organizations(name)");if(_)throw _;return N}}),{data:c=[],isLoading:d}=fe({queryKey:["admin-reports-profiles"],queryFn:async()=>{const{data:N,error:_}=await B.from("profiles_safe").select("*");if(_)throw _;return N}}),u=n||i||l||d,m=r.filter(N=>N.subscriptionStatus==="active").length,h=a.filter(N=>N.status==="active").length,p=o.filter(N=>N.status==="open"||N.status==="in_progress").length,g=a.filter(N=>N.health==="critical"||N.health==="at_risk").length,x={open:o.filter(N=>N.status==="open").length,in_progress:o.filter(N=>N.status==="in_progress").length,waiting_customer:o.filter(N=>N.status==="waiting_customer").length,resolved:o.filter(N=>N.status==="resolved").length,closed:o.filter(N=>N.status==="closed").length},v={healthy:a.filter(N=>N.health==="healthy").length,at_risk:a.filter(N=>N.health==="at_risk").length,critical:a.filter(N=>N.health==="critical").length,on_hold:a.filter(N=>N.health==="on_hold").length},y=()=>{const N=Yx(r,[{key:"name",header:"Company Name"},{key:"slug",header:"Slug"},{key:"subscriptionStatus",header:"Status"},{key:"subscriptionTier",header:"Tier"},{key:"createdAt",header:"Created At"}]);Qx(N,`companies-report-${pe(new Date,"yyyy-MM-dd")}`)},j=()=>{const N=Yx(a,[{key:"name",header:"Project Name"},{key:"status",header:"Status"},{key:"health",header:"Health"},{key:"progressPercent",header:"Progress (%)"},{key:"createdAt",header:"Created At"}]);Qx(N,`projects-report-${pe(new Date,"yyyy-MM-dd")}`)},w=()=>{const N=o.map(C=>{var E;return{...C,companyName:((E=C.organization)==null?void 0:E.name)||"N/A"}}),_=Yx(N,[{key:"title",header:"Title"},{key:"status",header:"Status"},{key:"priority",header:"Priority"},{key:"category",header:"Category"},{key:"companyName",header:"Company"},{key:"created_at",header:"Created At"}]);Qx(_,`tickets-report-${pe(new Date,"yyyy-MM-dd")}`)},b=()=>{const N=[{title:"Overview Metrics",type:"metrics",data:[{label:"Total Companies",value:r.length},{label:"Active Companies",value:m},{label:"Total Projects",value:a.length},{label:"Active Projects",value:h},{label:"Open Tickets",value:p},{label:"Total Tickets",value:o.length},{label:"Total Users",value:c.length},{label:"Critical Projects",value:g}]},{title:"Projects by Health Status",type:"table",data:{headers:["Status","Count","Percentage"],rows:[["Healthy",v.healthy,`${a.length?Math.round(v.healthy/a.length*100):0}%`],["At Risk",v.at_risk,`${a.length?Math.round(v.at_risk/a.length*100):0}%`],["Critical",v.critical,`${a.length?Math.round(v.critical/a.length*100):0}%`],["On Hold",v.on_hold,`${a.length?Math.round(v.on_hold/a.length*100):0}%`]]}},{title:"Tickets by Status",type:"table",data:{headers:["Status","Count","Percentage"],rows:[["Open",x.open,`${o.length?Math.round(x.open/o.length*100):0}%`],["In Progress",x.in_progress,`${o.length?Math.round(x.in_progress/o.length*100):0}%`],["Waiting Customer",x.waiting_customer,`${o.length?Math.round(x.waiting_customer/o.length*100):0}%`],["Resolved",x.resolved,`${o.length?Math.round(x.resolved/o.length*100):0}%`],["Closed",x.closed,`${o.length?Math.round(x.closed/o.length*100):0}%`]]}},{title:"Company Summary",type:"table",data:{headers:["Company","Status","Tier"],rows:r.slice(0,20).map(_=>[_.name,_.subscriptionStatus,_.subscriptionTier])}}];oP("InfraWeave Platform Report",N)};return u?t.jsx(we,{children:t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsx(Ie,{className:"h-8 w-8 animate-spin text-primary"})})}):t.jsxs(we,{children:[t.jsx(qn,{title:"Global Reports",subtitle:"Platform-wide analytics with export capabilities",customAction:t.jsxs(T,{onClick:b,className:"gap-2",children:[t.jsx(Zt,{className:"h-4 w-4"}),"Export Full Report (PDF)"]})}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Total Companies"}),t.jsx(Qt,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold",children:r.length}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.jsx("span",{className:"text-success",children:m})," active"]})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Total Projects"}),t.jsx(bt,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold",children:a.length}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.jsx("span",{className:"text-success",children:h})," active"]})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Open Tickets"}),t.jsx(rt,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold",children:p}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:["of ",o.length," total"]})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Platform Users"}),t.jsx(Kt,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold",children:c.length}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Registered users"})]})]})]}),t.jsxs(kt,{value:e,onValueChange:s,children:[t.jsxs(St,{children:[t.jsx(he,{value:"overview",children:"Overview"}),t.jsx(he,{value:"companies",children:"Companies"}),t.jsx(he,{value:"projects",children:"Projects"}),t.jsx(he,{value:"tickets",children:"Tickets"})]}),t.jsxs(Ce,{value:"overview",className:"space-y-6",children:[t.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsxs(V,{className:"flex items-center gap-2",children:[t.jsx(qu,{className:"h-5 w-5"}),"Projects by Health"]}),t.jsx(ce,{children:"Current health status of all projects"})]}),t.jsx(M,{children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-success"}),t.jsx("span",{className:"text-sm",children:"Healthy"})]}),t.jsx($,{variant:"success",children:v.healthy})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-warning"}),t.jsx("span",{className:"text-sm",children:"At Risk"})]}),t.jsx($,{variant:"warning",children:v.at_risk})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-destructive"}),t.jsx("span",{className:"text-sm",children:"Critical"})]}),t.jsx($,{variant:"destructive",children:v.critical})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-muted-foreground"}),t.jsx("span",{className:"text-sm",children:"On Hold"})]}),t.jsx($,{variant:"secondary",children:v.on_hold})]})]})})]}),t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsxs(V,{className:"flex items-center gap-2",children:[t.jsx(rt,{className:"h-5 w-5"}),"Tickets by Status"]}),t.jsx(ce,{children:"Current status distribution of all tickets"})]}),t.jsx(M,{children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-info"}),t.jsx("span",{className:"text-sm",children:"Open"})]}),t.jsx($,{variant:"info",children:x.open})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-warning"}),t.jsx("span",{className:"text-sm",children:"In Progress"})]}),t.jsx($,{variant:"warning",children:x.in_progress})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-success"}),t.jsx("span",{className:"text-sm",children:"Resolved"})]}),t.jsx($,{variant:"success",children:x.resolved})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-muted-foreground"}),t.jsx("span",{className:"text-sm",children:"Closed"})]}),t.jsx($,{variant:"secondary",children:x.closed})]})]})})]})]}),g>0&&t.jsxs(P,{className:"border-warning",children:[t.jsx(W,{children:t.jsxs(V,{className:"flex items-center gap-2 text-warning",children:[t.jsx(qt,{className:"h-5 w-5"}),"Attention Required"]})}),t.jsx(M,{children:t.jsxs("p",{className:"text-sm text-muted-foreground",children:["There are ",t.jsx("span",{className:"font-bold text-warning",children:g})," projects that require immediate attention due to health status."]})})]})]}),t.jsxs(Ce,{value:"companies",className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Company Details"}),t.jsxs(T,{variant:"outline",onClick:y,className:"gap-2",children:[t.jsx(hx,{className:"h-4 w-4"}),"Export CSV"]})]}),t.jsx(P,{children:t.jsx(M,{className:"p-0",children:t.jsxs(Rs,{children:[t.jsx(Is,{children:t.jsxs(ot,{children:[t.jsx(ae,{children:"Company Name"}),t.jsx(ae,{children:"Slug"}),t.jsx(ae,{children:"Status"}),t.jsx(ae,{children:"Tier"}),t.jsx(ae,{children:"Created"})]})}),t.jsx(Ds,{children:r.map(N=>t.jsxs(ot,{children:[t.jsx(ne,{className:"font-medium",children:N.name}),t.jsx(ne,{className:"text-muted-foreground",children:N.slug}),t.jsx(ne,{children:t.jsx($,{variant:N.subscriptionStatus==="active"?"success":"secondary",children:N.subscriptionStatus})}),t.jsx(ne,{children:N.subscriptionTier}),t.jsx(ne,{className:"text-muted-foreground",children:pe(new Date(N.createdAt),"MMM d, yyyy")})]},N.id))})]})})})]}),t.jsxs(Ce,{value:"projects",className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Project Details"}),t.jsxs(T,{variant:"outline",onClick:j,className:"gap-2",children:[t.jsx(hx,{className:"h-4 w-4"}),"Export CSV"]})]}),t.jsx(P,{children:t.jsx(M,{className:"p-0",children:t.jsxs(Rs,{children:[t.jsx(Is,{children:t.jsxs(ot,{children:[t.jsx(ae,{children:"Project Name"}),t.jsx(ae,{children:"Company"}),t.jsx(ae,{children:"Status"}),t.jsx(ae,{children:"Health"}),t.jsx(ae,{children:"Progress"}),t.jsx(ae,{children:"Created"})]})}),t.jsx(Ds,{children:a.map(N=>{var _;return t.jsxs(ot,{children:[t.jsx(ne,{className:"font-medium",children:N.name}),t.jsx(ne,{className:"text-muted-foreground",children:((_=N.company)==null?void 0:_.name)||"N/A"}),t.jsx(ne,{children:t.jsx($,{variant:N.status==="active"?"success":"secondary",children:N.status})}),t.jsx(ne,{children:t.jsx($,{variant:N.health==="healthy"?"success":N.health==="at_risk"?"warning":N.health==="critical"?"destructive":"secondary",children:N.health})}),t.jsxs(ne,{children:[N.progressPercent,"%"]}),t.jsx(ne,{className:"text-muted-foreground",children:pe(new Date(N.createdAt),"MMM d, yyyy")})]},N.id)})})]})})})]}),t.jsxs(Ce,{value:"tickets",className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Ticket Details"}),t.jsxs(T,{variant:"outline",onClick:w,className:"gap-2",children:[t.jsx(hx,{className:"h-4 w-4"}),"Export CSV"]})]}),t.jsx(P,{children:t.jsxs(M,{className:"p-0",children:[t.jsxs(Rs,{children:[t.jsx(Is,{children:t.jsxs(ot,{children:[t.jsx(ae,{children:"Title"}),t.jsx(ae,{children:"Company"}),t.jsx(ae,{children:"Status"}),t.jsx(ae,{children:"Priority"}),t.jsx(ae,{children:"Category"}),t.jsx(ae,{children:"Created"})]})}),t.jsx(Ds,{children:o.slice(0,50).map(N=>{var _;return t.jsxs(ot,{children:[t.jsx(ne,{className:"font-medium max-w-[200px] truncate",children:N.title}),t.jsx(ne,{className:"text-muted-foreground",children:((_=N.organization)==null?void 0:_.name)||"N/A"}),t.jsx(ne,{children:t.jsx($,{variant:N.status==="open"?"info":N.status==="in_progress"?"warning":N.status==="resolved"?"success":"secondary",children:N.status})}),t.jsx(ne,{children:t.jsx($,{variant:N.priority==="critical"?"destructive":N.priority==="high"?"warning":"secondary",children:N.priority})}),t.jsx(ne,{children:N.category||"N/A"}),t.jsx(ne,{className:"text-muted-foreground",children:pe(new Date(N.created_at),"MMM d, yyyy")})]},N.id)})})]}),o.length>50&&t.jsxs("div",{className:"p-4 text-center text-sm text-muted-foreground border-t",children:["Showing 50 of ",o.length," tickets. Export CSV for full data."]})]})})]})]})]})]})}function dG(){var j,w;const{user:e}=ft(),s=Qe(),r=ht(),[n,a]=f.useState(""),[i,o]=f.useState(!1),[l,c]=f.useState(""),[d,u]=f.useState(null),{data:m=[],isLoading:h}=fe({queryKey:["infraweave-employees"],queryFn:async()=>{const{data:b,error:N}=await B.from("infraweave_employees").select("*").order("created_at",{ascending:!1});if(N)throw N;const _=b.map(L=>L.user_id),{data:C}=await B.from("profiles_safe").select("id, email, full_name, avatar_url").in("id",_),{data:E}=await B.from("tickets").select("assigned_to").in("assigned_to",_),k=new Map((C==null?void 0:C.map(L=>[L.id,L]))||[]),A=new Map;return E==null||E.forEach(L=>{L.assigned_to&&A.set(L.assigned_to,(A.get(L.assigned_to)||0)+1)}),b.map(L=>({...L,profile:k.get(L.user_id),ticketCount:A.get(L.user_id)||0}))}}),p=_t({mutationFn:async()=>{const{data:b,error:N}=await B.from("invitations").insert({email:l,role:"infraweave_employee",company_id:null,invited_by:e==null?void 0:e.id,status:"pending"}).select().single();if(N)throw N;const{error:_}=await B.functions.invoke("send-invitation",{body:{email:l,role:"infraweave_employee",invitationId:b.id,token:b.token}});return _&&(console.error("Failed to send email:",_),z.warning("Invitation created but email delivery failed.")),b},onSuccess:()=>{z.success("Invitation sent successfully"),o(!1),c(""),r.invalidateQueries({queryKey:["infraweave-employees"]})},onError:b=>{z.error(`Failed to send invitation: ${b.message}`)}}),g=_t({mutationFn:async b=>{const{error:N}=await B.from("infraweave_employees").update({is_active:!1}).eq("id",b);if(N)throw N},onSuccess:()=>{z.success("Employee removed successfully"),u(null),r.invalidateQueries({queryKey:["infraweave-employees"]})},onError:b=>{z.error(`Failed to remove employee: ${b.message}`)}}),x=m.filter(b=>{var _,C,E,k;if(!b.is_active)return!1;const N=n.toLowerCase();return((C=(_=b.profile)==null?void 0:_.email)==null?void 0:C.toLowerCase().includes(N))||((k=(E=b.profile)==null?void 0:E.full_name)==null?void 0:k.toLowerCase().includes(N))}),v=m.filter(b=>b.is_active).length,y=m.reduce((b,N)=>b+(N.ticketCount||0),0);return h?t.jsx(we,{children:t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsx(Ie,{className:"h-8 w-8 animate-spin text-primary"})})}):t.jsxs(we,{children:[t.jsx(qn,{title:"Employee Management",subtitle:"Manage InfraWeave support employees",customAction:t.jsxs(Xt,{open:i,onOpenChange:o,children:[t.jsx($r,{asChild:!0,children:t.jsxs(T,{children:[t.jsx(Wu,{className:"h-4 w-4 mr-2"}),"Invite Employee"]})}),t.jsxs(zt,{children:[t.jsxs(es,{children:[t.jsx(ts,{children:"Invite Employee"}),t.jsx(ss,{children:"Send an invitation to a new InfraWeave support employee."})]}),t.jsxs("form",{onSubmit:b=>{b.preventDefault(),p.mutate()},className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"email",children:"Email Address *"}),t.jsx(se,{id:"email",type:"email",value:l,onChange:b=>c(b.target.value),placeholder:"employee@infraweave.net",required:!0})]}),t.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg text-sm",children:[t.jsx("p",{className:"font-medium mb-1",children:"Employee Permissions:"}),t.jsxs("ul",{className:"text-muted-foreground space-y-1 text-xs",children:[t.jsx("li",{children:" View all customer tickets"}),t.jsx("li",{children:" Update ticket status"}),t.jsx("li",{children:" Add comments to tickets"}),t.jsx("li",{children:" Cannot delete tickets"}),t.jsx("li",{children:" Cannot manage companies or users"})]})]}),t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx(T,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),t.jsxs(T,{type:"submit",disabled:p.isPending,children:[p.isPending&&t.jsx(Ie,{className:"h-4 w-4 mr-2 animate-spin"}),"Send Invitation"]})]})]})]})]})}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Active Employees"}),t.jsx(Kt,{className:"h-4 w-4 text-info"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold",children:v}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"InfraWeave support staff"})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Assigned Tickets"}),t.jsx(rt,{className:"h-4 w-4 text-primary"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold",children:y}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all employees"})]})]})]}),t.jsxs("div",{className:"relative max-w-md",children:[t.jsx(ns,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t.jsx(se,{placeholder:"Search employees...",value:n,onChange:b=>a(b.target.value),className:"pl-9"})]}),t.jsxs(P,{children:[t.jsx(W,{children:t.jsx(V,{children:"All Employees"})}),t.jsx(M,{children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-border",children:[t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Employee"}),t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Email"}),t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Tickets"}),t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Status"}),t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Added"}),t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Actions"})]})}),t.jsxs("tbody",{children:[x.map(b=>{var _,C,E,k,A,L;const N=(_=b.profile)!=null&&_.full_name?b.profile.full_name.split(" ").map(H=>H[0]).join("").toUpperCase().slice(0,2):((E=(C=b.profile)==null?void 0:C.email)==null?void 0:E.substring(0,2).toUpperCase())||"E";return t.jsxs("tr",{className:"border-b border-border last:border-0 hover:bg-accent/50 transition-colors",children:[t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>s(`/admin/employees/${b.user_id}`),children:[t.jsxs(Tt,{className:"h-9 w-9",children:[t.jsx(Ps,{src:((k=b.profile)==null?void 0:k.avatar_url)||void 0}),t.jsx(Pt,{className:"bg-info/10 text-info text-sm",children:N})]}),t.jsx("div",{children:t.jsx("p",{className:"font-medium text-foreground hover:text-primary transition-colors",children:((A=b.profile)==null?void 0:A.full_name)||"Unnamed User"})})]})}),t.jsx("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:((L=b.profile)==null?void 0:L.email)||"Unknown"}),t.jsx("td",{className:"py-3 px-4",children:t.jsxs($,{variant:"outline",className:"gap-1",children:[t.jsx(rt,{className:"h-3 w-3"}),b.ticketCount||0]})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx($,{variant:b.is_active?"success":"secondary",children:b.is_active?"Active":"Inactive"})}),t.jsx("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:pe(new Date(b.granted_at),"MMM d, yyyy")}),t.jsx("td",{className:"py-3 px-4",children:t.jsx(T,{size:"sm",variant:"ghost",className:"text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>u(b),children:t.jsx(Rt,{className:"h-4 w-4"})})})]},b.id)}),x.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"py-8 text-center text-muted-foreground",children:"No employees found"})})]})]})})})]})]}),t.jsx(cn,{open:!!d,onOpenChange:b=>!b&&u(null),children:t.jsxs(Ur,{children:[t.jsxs(Br,{children:[t.jsx(qr,{children:"Remove Employee"}),t.jsxs(Wr,{children:["Are you sure you want to remove ",((j=d==null?void 0:d.profile)==null?void 0:j.full_name)||((w=d==null?void 0:d.profile)==null?void 0:w.email),"? They will no longer be able to access the employee dashboard."]})]}),t.jsxs(zr,{children:[t.jsx(Hr,{children:"Cancel"}),t.jsxs(Vr,{onClick:()=>d&&g.mutate(d.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:[g.isPending&&t.jsx(Ie,{className:"h-4 w-4 mr-2 animate-spin"}),"Remove"]})]})]})})]})}const uG={open:"bg-blue-500/10 text-blue-500 border-blue-500/20",in_progress:"bg-yellow-500/10 text-yellow-500 border-yellow-500/20",waiting_customer:"bg-purple-500/10 text-purple-500 border-purple-500/20",waiting_internal:"bg-orange-500/10 text-orange-500 border-orange-500/20",resolved:"bg-green-500/10 text-green-500 border-green-500/20",closed:"bg-muted text-muted-foreground border-muted"},hG={low:"bg-slate-500/10 text-slate-500 border-slate-500/20",medium:"bg-blue-500/10 text-blue-500 border-blue-500/20",high:"bg-orange-500/10 text-orange-500 border-orange-500/20",urgent:"bg-red-500/10 text-red-500 border-red-500/20",critical:"bg-red-500/10 text-red-500 border-red-500/20"};function mG(){var d,u,m,h,p,g;const{id:e}=ma(),s=Qe(),{data:r,isLoading:n}=fe({queryKey:["employee-detail",e],queryFn:async()=>{const{data:x,error:v}=await B.from("infraweave_employees").select("*").eq("user_id",e).single();if(v)throw v;const{data:y}=await B.from("profiles_safe").select("*").eq("id",x.user_id).single();return{...x,profile:y}},enabled:!!e}),{data:a=[],isLoading:i}=fe({queryKey:["employee-tickets",e],queryFn:async()=>{const{data:x,error:v}=await B.from("tickets").select(`
          *,
          projects (id, name),
          organization:organizations (id, name)
        `).eq("assigned_to",e).order("created_at",{ascending:!1});if(v)throw v;return x},enabled:!!e}),o=a.filter(x=>x.status==="open"||x.status==="in_progress"),l=a.filter(x=>x.status==="resolved"||x.status==="closed");if(n)return t.jsx(we,{children:t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsx(je,{className:"h-10 w-64"}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsx(je,{className:"h-48"}),t.jsx("div",{className:"lg:col-span-2",children:t.jsx(je,{className:"h-96"})})]})]})});if(!r)return t.jsx(we,{children:t.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] gap-4",children:[t.jsx(fs,{className:"h-16 w-16 text-muted-foreground"}),t.jsx("h2",{className:"text-2xl font-semibold",children:"Employee Not Found"}),t.jsx("p",{className:"text-muted-foreground",children:"The employee you're looking for doesn't exist."}),t.jsxs(T,{onClick:()=>s("/admin/employees"),children:[t.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Back to Employees"]})]})});const c=(d=r.profile)!=null&&d.full_name?r.profile.full_name.split(" ").map(x=>x[0]).join("").toUpperCase().slice(0,2):((m=(u=r.profile)==null?void 0:u.email)==null?void 0:m.substring(0,2).toUpperCase())||"E";return t.jsx(we,{children:t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(T,{variant:"ghost",size:"icon",onClick:()=>s("/admin/employees"),children:t.jsx(Ft,{className:"h-4 w-4"})}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs(Tt,{className:"h-12 w-12",children:[t.jsx(Ps,{src:((h=r.profile)==null?void 0:h.avatar_url)||void 0}),t.jsx(Pt,{className:"bg-info/10 text-info text-lg",children:c})]}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:((p=r.profile)==null?void 0:p.full_name)||"Unnamed Employee"}),t.jsx("p",{className:"text-muted-foreground",children:"InfraWeave Support Employee"})]})]}),t.jsx($,{variant:r.is_active?"success":"secondary",className:"ml-auto",children:r.is_active?"Active":"Inactive"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[t.jsxs(P,{children:[t.jsx(W,{children:t.jsx(V,{children:"Profile Information"})}),t.jsxs(M,{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(ys,{className:"h-4 w-4 text-muted-foreground"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:"Email"}),t.jsx("p",{className:"text-sm font-medium",children:((g=r.profile)==null?void 0:g.email)||"Unknown"})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Lr,{className:"h-4 w-4 text-muted-foreground"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:"Added"}),t.jsx("p",{className:"text-sm font-medium",children:pe(new Date(r.granted_at),"MMM d, yyyy")})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(rt,{className:"h-4 w-4 text-muted-foreground"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Tickets"}),t.jsx("p",{className:"text-sm font-medium",children:a.length})]})]})]})]}),t.jsxs("div",{className:"lg:col-span-3",children:[t.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[t.jsx(P,{children:t.jsx(M,{className:"pt-6",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:t.jsx(rt,{className:"h-5 w-5 text-primary"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold",children:a.length}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Assigned"})]})]})})}),t.jsx(P,{children:t.jsx(M,{className:"pt-6",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"h-10 w-10 rounded-full bg-warning/10 flex items-center justify-center",children:t.jsx(Oe,{className:"h-5 w-5 text-warning"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold",children:o.length}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Open Tickets"})]})]})})}),t.jsx(P,{children:t.jsx(M,{className:"pt-6",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"h-10 w-10 rounded-full bg-success/10 flex items-center justify-center",children:t.jsx(vt,{className:"h-5 w-5 text-success"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold",children:l.length}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Resolved"})]})]})})})]}),t.jsxs(P,{children:[t.jsx(W,{children:t.jsx(V,{children:"Assigned Tickets"})}),t.jsx(M,{children:t.jsxs(kt,{defaultValue:"all",children:[t.jsxs(St,{children:[t.jsxs(he,{value:"all",children:["All (",a.length,")"]}),t.jsxs(he,{value:"open",children:["Open (",o.length,")"]}),t.jsxs(he,{value:"resolved",children:["Resolved (",l.length,")"]})]}),t.jsx(Ce,{value:"all",className:"mt-4",children:t.jsx(Zx,{tickets:a,onTicketClick:x=>s(`/tickets/${x}`)})}),t.jsx(Ce,{value:"open",className:"mt-4",children:t.jsx(Zx,{tickets:o,onTicketClick:x=>s(`/tickets/${x}`)})}),t.jsx(Ce,{value:"resolved",className:"mt-4",children:t.jsx(Zx,{tickets:l,onTicketClick:x=>s(`/tickets/${x}`)})})]})})]})]})]})]})})}function Zx({tickets:e,onTicketClick:s}){return e.length===0?t.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No tickets found"}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-border",children:[t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Ticket"}),t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Project"}),t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Company"}),t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Status"}),t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Priority"}),t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Created"})]})}),t.jsx("tbody",{children:e.map(r=>{var n,a;return t.jsxs("tr",{className:"border-b border-border last:border-0 hover:bg-accent/50 transition-colors cursor-pointer",onClick:()=>s(r.id),children:[t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground text-sm",children:r.title}),t.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:r.id.slice(0,8).toUpperCase()})]})}),t.jsx("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:((n=r.projects)==null?void 0:n.name)||"-"}),t.jsx("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:((a=r.organization)==null?void 0:a.name)||"-"}),t.jsx("td",{className:"py-3 px-4",children:t.jsx($,{variant:"outline",className:uG[r.status]||"",children:r.status.replace("_"," ")})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx($,{variant:"outline",className:hG[r.priority]||"",children:r.priority})}),t.jsx("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:pe(new Date(r.created_at),"MMM d, yyyy")})]},r.id)})})]})})}var Pw="Progress",Rw=100,[fG]=X4(Pw),[pG,xG]=fG(Pw),lP=f.forwardRef((e,s)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:i=gG,...o}=e;(a||a===0)&&!p1(a)&&console.error(vG(`${a}`,"Progress"));const l=p1(a)?a:Rw;n!==null&&!x1(n,l)&&console.error(yG(`${n}`,"Progress"));const c=x1(n,l)?n:null,d=xf(c)?i(c,l):void 0;return t.jsx(pG,{scope:r,value:c,max:l,children:t.jsx(hr.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":xf(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":uP(c,l),"data-value":c??void 0,"data-max":l,...o,ref:s})})});lP.displayName=Pw;var cP="ProgressIndicator",dP=f.forwardRef((e,s)=>{const{__scopeProgress:r,...n}=e,a=xG(cP,r);return t.jsx(hr.div,{"data-state":uP(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:s})});dP.displayName=cP;function gG(e,s){return`${Math.round(e/s*100)}%`}function uP(e,s){return e==null?"indeterminate":e===s?"complete":"loading"}function xf(e){return typeof e=="number"}function p1(e){return xf(e)&&!isNaN(e)&&e>0}function x1(e,s){return xf(e)&&!isNaN(e)&&e<=s&&e>=0}function vG(e,s){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${s}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Rw}\`.`}function yG(e,s){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${s}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Rw} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var hP=lP,jG=dP;const gf=f.forwardRef(({className:e,value:s,...r},n)=>t.jsx(hP,{ref:n,className:J("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:t.jsx(jG,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));gf.displayName=hP.displayName;function wG(){const{id:e}=ma(),s=Qe(),{isInfraweaveAdmin:r,isLoading:n}=Ze(),{data:a,isLoading:i}=fe({queryKey:["company-detail",e],queryFn:async()=>{const{data:k,error:A}=await B.from("organizations").select("*").eq("id",e).single();if(A)throw A;return k},enabled:!!e&&r}),{data:o=[]}=fe({queryKey:["company-projects",e],queryFn:async()=>{const{data:k,error:A}=await B.from("projects").select(`
          *,
          project_milestones (*)
        `).eq("organization_id",e).order("created_at",{ascending:!1});if(A)throw A;return k},enabled:!!e&&r}),{data:l=[]}=fe({queryKey:["company-tickets",e],queryFn:async()=>{const{data:k,error:A}=await B.from("tickets").select("*").eq("organization_id",e).order("created_at",{ascending:!1});if(A)throw A;return k},enabled:!!e&&r}),{data:c=[]}=fe({queryKey:["company-members",e],queryFn:async()=>{const{data:k,error:A}=await B.from("company_members").select(`
          *,
          profiles:user_id (id, email, full_name, avatar_url)
        `).eq("company_id",e).eq("is_active",!0);if(A)throw A;return k},enabled:!!e&&r}),{data:d=[]}=fe({queryKey:["company-billing",e],queryFn:async()=>{const{data:k,error:A}=await B.from("billing_transactions").select("*").eq("company_id",e).order("transaction_date",{ascending:!1}).limit(10);if(A)throw A;return k},enabled:!!e&&r}),{data:u=[]}=fe({queryKey:["company-dues",e],queryFn:async()=>{const{data:k,error:A}=await B.from("upcoming_dues").select("*").eq("company_id",e).order("due_date",{ascending:!0});if(A)throw A;return k},enabled:!!e&&r}),{data:m=[]}=fe({queryKey:["company-invoices",e],queryFn:async()=>{const{data:k,error:A}=await B.from("invoices").select("*").eq("company_id",e).order("issue_date",{ascending:!1}).limit(5);if(A)throw A;return k},enabled:!!e&&r});if(n||i)return t.jsx(we,{children:t.jsx("div",{className:"p-6",children:"Loading..."})});if(!r)return t.jsx(we,{children:t.jsxs("div",{className:"p-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-destructive",children:"Access Denied"}),t.jsx("p",{className:"text-muted-foreground",children:"Only Super Admins can access this page."})]})});if(!a)return t.jsx(we,{children:t.jsxs("div",{className:"p-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-destructive",children:"Company Not Found"}),t.jsxs(T,{variant:"ghost",onClick:()=>s("/admin/companies"),children:[t.jsx(Ft,{className:"h-4 w-4 mr-2"})," Back to Companies"]})]})});const p=o.filter(k=>k.status==="active"),g=o.filter(k=>k.health==="at_risk"||k.health==="critical"),x=l.filter(k=>k.status==="open"||k.status==="in_progress"),v=l.filter(k=>k.priority==="critical"||k.priority==="high"),y=p.length>0?Math.round(p.reduce((k,A)=>k+(A.progress_percent||0),0)/p.length):0,j=d.filter(k=>k.status==="completed"&&k.type==="payment").reduce((k,A)=>k+Number(A.amount||0),0),w=u.filter(k=>k.status!=="paid").reduce((k,A)=>k+Number(A.amount||0),0),b=o.flatMap(k=>(k.project_milestones||[]).map(A=>({...A,projectName:k.name,projectId:k.id}))),N=b.filter(k=>k.status!=="completed"&&k.due_date).sort((k,A)=>new Date(k.due_date).getTime()-new Date(A.due_date).getTime()).slice(0,5),_=b.filter(k=>k.status!=="completed"&&k.due_date&&oa(new Date(k.due_date))),C=k=>{switch(k){case"healthy":return t.jsx($,{variant:"success",children:"Healthy"});case"at_risk":return t.jsx($,{variant:"warning",children:"At Risk"});case"critical":return t.jsx($,{variant:"destructive",children:"Critical"});default:return t.jsx($,{variant:"secondary",children:k})}},E=k=>{switch(k){case"critical":return t.jsx($,{variant:"destructive",children:"Critical"});case"high":return t.jsx($,{variant:"warning",children:"High"});case"medium":return t.jsx($,{variant:"secondary",children:"Medium"});default:return t.jsx($,{variant:"outline",children:"Low"})}};return t.jsx(we,{children:t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(T,{variant:"ghost",size:"icon",onClick:()=>s("/admin/companies"),children:t.jsx(Ft,{className:"h-5 w-5"})}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center",children:t.jsx(Qt,{className:"h-6 w-6 text-primary"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-foreground",children:a.name}),t.jsx("p",{className:"text-muted-foreground",children:a.slug})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx($,{variant:a.subscription_status==="active"?"success":"secondary",children:a.subscription_status}),t.jsx($,{variant:"outline",children:a.subscription_tier})]})]}),t.jsxs(P,{children:[t.jsx(W,{children:t.jsx(V,{className:"text-lg",children:"Company Information"})}),t.jsx(M,{children:t.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[a.domain&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Uf,{className:"h-4 w-4 text-muted-foreground"}),t.jsx("span",{className:"text-sm",children:a.domain})]}),a.billing_email&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ys,{className:"h-4 w-4 text-muted-foreground"}),t.jsx("span",{className:"text-sm",children:a.billing_email})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Lr,{className:"h-4 w-4 text-muted-foreground"}),t.jsxs("span",{className:"text-sm",children:["Created ",pe(new Date(a.created_at),"MMM d, yyyy")]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Kt,{className:"h-4 w-4 text-muted-foreground"}),t.jsxs("span",{className:"text-sm",children:[c.length," team member",c.length!==1?"s":""]})]})]})})]}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Active Projects"}),t.jsx(bt,{className:"h-4 w-4 text-primary"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold",children:p.length}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[g.length>0&&t.jsxs("span",{className:"text-warning",children:[g.length," at risk"]}),g.length===0&&"All projects healthy"]})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Open Tickets"}),t.jsx(rt,{className:"h-4 w-4 text-primary"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold",children:x.length}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[v.length>0&&t.jsxs("span",{className:"text-destructive",children:[v.length," critical/high priority"]}),v.length===0&&`${l.length} total tickets`]})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Avg. Progress"}),t.jsx(qu,{className:"h-4 w-4 text-primary"})]}),t.jsxs(M,{children:[t.jsxs("div",{className:"text-2xl font-bold",children:[y,"%"]}),t.jsx(gf,{value:y,className:"mt-2 h-2"})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Pending Dues"}),t.jsx(or,{className:"h-4 w-4 text-primary"})]}),t.jsxs(M,{children:[t.jsxs("div",{className:"text-2xl font-bold",children:["$",w.toLocaleString()]}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:["$",j.toLocaleString()," total revenue"]})]})]})]}),t.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(V,{className:"text-lg",children:"Projects"}),t.jsxs($,{variant:"outline",children:[o.length," total"]})]}),t.jsx(ce,{children:"Project status and health overview"})]}),t.jsx(M,{children:t.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:o.length===0?t.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No projects yet"}):o.slice(0,8).map(k=>t.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-border hover:bg-accent/50 cursor-pointer transition-colors",onClick:()=>s(`/admin/projects/${k.id}`),children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-medium text-foreground truncate",children:k.name}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx(gf,{value:k.progress_percent||0,className:"h-1.5 w-24"}),t.jsxs("span",{className:"text-xs text-muted-foreground",children:[k.progress_percent||0,"%"]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[C(k.health||"healthy"),k.target_end_date&&t.jsxs("span",{className:"text-xs text-muted-foreground",children:["Due ",pe(new Date(k.target_end_date),"MMM d")]})]})]},k.id))})})]}),t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(V,{className:"text-lg",children:"Upcoming Milestones"}),_.length>0&&t.jsxs($,{variant:"destructive",children:[_.length," overdue"]})]}),t.jsx(ce,{children:"Key deadlines across all projects"})]}),t.jsx(M,{children:t.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:N.length===0?t.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No upcoming milestones"}):N.map(k=>{const A=k.due_date&&oa(new Date(k.due_date)),L=k.due_date?EE(new Date(k.due_date),new Date):null;return t.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-border hover:bg-accent/50 cursor-pointer transition-colors",onClick:()=>s(`/admin/projects/${k.projectId}`),children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-medium text-foreground truncate",children:k.title}),t.jsx("p",{className:"text-xs text-muted-foreground truncate",children:k.projectName})]}),t.jsx("div",{className:"flex items-center gap-2 ml-2",children:A?t.jsxs($,{variant:"destructive",className:"flex items-center gap-1",children:[t.jsx(qt,{className:"h-3 w-3"}),"Overdue"]}):L!==null&&L<=7?t.jsxs($,{variant:"warning",className:"flex items-center gap-1",children:[t.jsx(Oe,{className:"h-3 w-3"}),L,"d"]}):t.jsx("span",{className:"text-xs text-muted-foreground",children:k.due_date&&pe(new Date(k.due_date),"MMM d")})})]},k.id)})})})]})]}),t.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsx(V,{className:"text-lg",children:"Billing Overview"}),t.jsx(ce,{children:"Recent transactions and invoices"})]}),t.jsx(M,{children:t.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:d.length===0&&m.length===0?t.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No billing history"}):t.jsxs(t.Fragment,{children:[m.slice(0,3).map(k=>t.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-border",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(or,{className:"h-4 w-4 text-muted-foreground"}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm font-medium",children:["Invoice #",k.invoice_number]}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Due ",pe(new Date(k.due_date),"MMM d, yyyy")]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"font-medium",children:["$",Number(k.total_amount).toLocaleString()]}),t.jsx($,{variant:k.status==="paid"?"success":k.status==="overdue"?"destructive":"secondary",children:k.status})]})]},k.id)),t.jsx(yr,{className:"my-2"}),d.slice(0,3).map(k=>t.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[k.type==="payment"?t.jsx(ES,{className:"h-4 w-4 text-success"}):t.jsx(fs,{className:"h-4 w-4 text-muted-foreground"}),t.jsx("span",{className:"text-sm",children:k.description||k.type})]}),t.jsxs("span",{className:`text-sm font-medium ${k.type==="payment"?"text-success":""}`,children:["$",Number(k.amount).toLocaleString()]})]},k.id))]})})})]}),t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(V,{className:"text-lg",children:"Priority Tickets"}),t.jsxs($,{variant:"outline",children:[x.length," open"]})]}),t.jsx(ce,{children:"High priority items requiring attention"})]}),t.jsx(M,{children:t.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:v.length===0?t.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No critical tickets"}):v.slice(0,5).map(k=>t.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-border hover:bg-accent/50 cursor-pointer transition-colors",onClick:()=>s(`/admin/tickets/${k.id}`),children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-medium text-foreground truncate",children:k.title}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Created ",pe(new Date(k.created_at),"MMM d")]})]}),t.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[E(k.priority),t.jsx($,{variant:k.status==="open"?"warning":"secondary",children:k.status})]})]},k.id))})})]})]}),t.jsxs(P,{children:[t.jsx(W,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(V,{className:"text-lg",children:"Team Members"}),t.jsxs($,{variant:"outline",children:[c.length," members"]})]})}),t.jsx(M,{children:t.jsx("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:c.slice(0,6).map(k=>{var A,L,H,F,I,G;return t.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-border",children:[t.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:t.jsx("span",{className:"text-sm font-medium text-primary",children:((L=(A=k.profiles)==null?void 0:A.full_name)==null?void 0:L.charAt(0))||((F=(H=k.profiles)==null?void 0:H.email)==null?void 0:F.charAt(0))||"?"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-medium text-foreground truncate",children:((I=k.profiles)==null?void 0:I.full_name)||"Unknown"}),t.jsx("p",{className:"text-xs text-muted-foreground truncate",children:(G=k.profiles)==null?void 0:G.email})]}),t.jsx($,{variant:"outline",children:k.role})]},k.id)})})})]})]})})}function mP({open:e,onOpenChange:s,onSuccess:r,preselectedCompanyId:n}){const[a,i]=f.useState(n||""),[o,l]=f.useState(pe(new Date,"yyyy-MM-dd")),[c,d]=f.useState(pe(gs(new Date,30),"yyyy-MM-dd")),[u,m]=f.useState(""),[h,p]=f.useState([{description:"",quantity:1,unitPrice:0}]),{data:g=[]}=fe({queryKey:["invoice-companies"],queryFn:async()=>{const{data:N,error:_}=await B.from("organizations").select("id, name").order("name");if(_)throw _;return N},enabled:e}),x=_t({mutationFn:async()=>{if(!a)throw new Error("Please select a company");const N=h.filter(A=>A.description.trim()&&A.quantity>0&&A.unitPrice>0);if(N.length===0)throw new Error("Please add at least one valid line item");const _=N.reduce((A,L)=>A+L.quantity*L.unitPrice,0),C=`INV-${Date.now().toString(36).toUpperCase()}`,{data:E,error:k}=await B.from("invoices").insert({company_id:a,invoice_number:C,issue_date:o,due_date:c,subtotal:_,total_amount:_,line_items:N.map(A=>({description:A.description,quantity:A.quantity,unit_price:A.unitPrice,amount:A.quantity*A.unitPrice})),notes:u,status:"draft"}).select().single();if(k)throw k;return E},onSuccess:()=>{z.success("Invoice created successfully"),s(!1),v(),r==null||r()},onError:N=>{z.error(N instanceof Error?N.message:"Failed to create invoice")}}),v=()=>{i(n||""),l(pe(new Date,"yyyy-MM-dd")),d(pe(gs(new Date,30),"yyyy-MM-dd")),m(""),p([{description:"",quantity:1,unitPrice:0}])},y=()=>{p([...h,{description:"",quantity:1,unitPrice:0}])},j=N=>{h.length>1&&p(h.filter((_,C)=>C!==N))},w=(N,_,C)=>{const E=[...h];E[N]={...E[N],[_]:C},p(E)},b=h.reduce((N,_)=>N+_.quantity*_.unitPrice,0);return t.jsx(Xt,{open:e,onOpenChange:s,children:t.jsxs(zt,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",preventClose:!0,children:[t.jsxs(es,{children:[t.jsxs(ts,{className:"flex items-center gap-2",children:[t.jsx(Zt,{className:"h-5 w-5"}),"Create New Invoice"]}),t.jsx(ss,{children:"Generate a new invoice for a company"})]}),t.jsxs("div",{className:"space-y-6 py-4",children:[t.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Company *"}),t.jsxs($e,{value:a,onValueChange:i,disabled:!!n,children:[t.jsx(Le,{children:t.jsx(Ue,{placeholder:"Select company"})}),t.jsx(Fe,{children:g.map(N=>t.jsx(Z,{value:N.id,children:N.name},N.id))})]})]})}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Issue Date"}),t.jsx(se,{type:"date",value:o,onChange:N=>l(N.target.value)})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Due Date"}),t.jsx(se,{type:"date",value:c,onChange:N=>d(N.target.value)})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(O,{children:"Line Items"}),t.jsxs(T,{type:"button",variant:"outline",size:"sm",onClick:y,children:[t.jsx(at,{className:"h-4 w-4 mr-1"}),"Add Item"]})]}),t.jsxs(Rs,{children:[t.jsx(Is,{children:t.jsxs(ot,{children:[t.jsx(ae,{className:"w-[40%]",children:"Description"}),t.jsx(ae,{children:"Quantity"}),t.jsx(ae,{children:"Unit Price"}),t.jsx(ae,{children:"Amount"}),t.jsx(ae,{className:"w-[50px]"})]})}),t.jsx(Ds,{children:h.map((N,_)=>t.jsxs(ot,{children:[t.jsx(ne,{children:t.jsx(se,{placeholder:"Service description",value:N.description,onChange:C=>w(_,"description",C.target.value)})}),t.jsx(ne,{children:t.jsx(se,{type:"number",min:"0",step:"0.5",value:N.quantity,onChange:C=>w(_,"quantity",parseFloat(C.target.value)||0),className:"w-20"})}),t.jsx(ne,{children:t.jsx(se,{type:"number",min:"0",step:"0.01",value:N.unitPrice,onChange:C=>w(_,"unitPrice",parseFloat(C.target.value)||0),className:"w-28",placeholder:"0.00"})}),t.jsxs(ne,{className:"font-medium",children:["$",(N.quantity*N.unitPrice).toFixed(2)]}),t.jsx(ne,{children:t.jsx(T,{type:"button",variant:"ghost",size:"sm",onClick:()=>j(_),disabled:h.length===1,children:t.jsx(Rt,{className:"h-4 w-4 text-destructive"})})})]},_))})]}),t.jsx("div",{className:"flex justify-end border-t pt-4",children:t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Subtotal"}),t.jsxs("p",{className:"text-2xl font-bold",children:["$",b.toFixed(2)]})]})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Notes (Optional)"}),t.jsx(Bt,{placeholder:"Additional notes or payment instructions...",value:u,onChange:N=>m(N.target.value),rows:3})]})]}),t.jsxs(In,{children:[t.jsx(T,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),t.jsx(T,{onClick:()=>x.mutate(),disabled:x.isPending||!a,children:x.isPending?"Creating...":"Create Invoice"})]})]})})}const bG=up,NG=hp,fP=f.forwardRef(({className:e,...s},r)=>t.jsx(Xc,{className:J("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s,ref:r}));fP.displayName=Xc.displayName;const CG=$u("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),pP=f.forwardRef(({side:e="right",className:s,children:r,...n},a)=>t.jsxs(NG,{children:[t.jsx(fP,{}),t.jsxs(ed,{ref:a,className:J(CG({side:e}),s),...n,children:[r,t.jsxs(mp,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[t.jsx(Ct,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));pP.displayName=ed.displayName;const xP=({className:e,...s})=>t.jsx("div",{className:J("flex flex-col space-y-2 text-center sm:text-left",e),...s});xP.displayName="SheetHeader";const gP=f.forwardRef(({className:e,...s},r)=>t.jsx(Xu,{ref:r,className:J("text-lg font-semibold text-foreground",e),...s}));gP.displayName=Xu.displayName;const vP=f.forwardRef(({className:e,...s},r)=>t.jsx(eh,{ref:r,className:J("text-sm text-muted-foreground",e),...s}));vP.displayName=eh.displayName;const g1={draft:{label:"Draft",variant:"secondary"},sent:{label:"Sent",variant:"default"},paid:{label:"Paid",variant:"default"},overdue:{label:"Overdue",variant:"destructive"},cancelled:{label:"Cancelled",variant:"outline"}};function _G({invoice:e,open:s,onOpenChange:r}){var u,m;const n=ht(),a=_t({mutationFn:async()=>{if(!e)throw new Error("No invoice selected");const{data:h,error:p}=await B.functions.invoke("send-invoice-reminder",{body:{invoiceId:e.id}});if(p)throw p;return h},onSuccess:()=>{z.success("Payment reminder sent successfully"),n.invalidateQueries({queryKey:["invoices"]})},onError:h=>{z.error(h instanceof Error?h.message:"Failed to send reminder")}}),i=_t({mutationFn:async h=>{if(!e)throw new Error("No invoice selected");const p={status:h};h==="paid"&&(p.paid_at=new Date().toISOString());const{error:g}=await B.from("invoices").update(p).eq("id",e.id);if(g)throw g},onSuccess:()=>{z.success("Invoice status updated"),n.invalidateQueries({queryKey:["invoices"]}),n.invalidateQueries({queryKey:["admin-invoices"]})},onError:h=>{z.error(h instanceof Error?h.message:"Failed to update status")}}),o=()=>{var p,g;if(!e)return;const h=e.line_items||[];oP(`Invoice ${e.invoice_number}`,[{title:"Invoice Details",type:"metrics",data:[{label:"Invoice Number",value:e.invoice_number},{label:"Company",value:((p=e.company)==null?void 0:p.name)||"N/A"},{label:"Status",value:((g=g1[e.status])==null?void 0:g.label)||e.status},{label:"Total",value:`$${e.total_amount.toLocaleString()}`}]},{title:"Dates",type:"metrics",data:[{label:"Issue Date",value:pe(new Date(e.issue_date),"MMM d, yyyy")},{label:"Due Date",value:pe(new Date(e.due_date),"MMM d, yyyy")},{label:"Created",value:pe(new Date(e.created_at),"MMM d, yyyy")},{label:"Paid At",value:e.paid_at?pe(new Date(e.paid_at),"MMM d, yyyy"):"Not paid"}]},{title:"Line Items",type:"table",data:{headers:["Description","Quantity","Unit Price","Amount"],rows:h.map(x=>[x.description,x.quantity.toString(),`$${x.unitPrice.toFixed(2)}`,`$${x.amount.toFixed(2)}`])}},{title:"Summary",type:"metrics",data:[{label:"Subtotal",value:`$${e.subtotal.toLocaleString()}`},{label:"Tax",value:`$${(e.tax_amount||0).toLocaleString()}`},{label:"Total Amount",value:`$${e.total_amount.toLocaleString()}`}]},...e.notes?[{title:"Notes",type:"text",data:e.notes}]:[]])};if(!e)return null;const l=e.line_items||[],c=g1[e.status]||{label:e.status,variant:"secondary"},d=new Date(e.due_date)<new Date&&e.status!=="paid";return t.jsx(bG,{open:s,onOpenChange:r,children:t.jsxs(pP,{className:"w-full sm:max-w-xl overflow-y-auto",children:[t.jsx(xP,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:t.jsx(Zt,{className:"h-5 w-5 text-primary"})}),t.jsxs("div",{children:[t.jsx(gP,{className:"text-xl",children:e.invoice_number}),t.jsx(vP,{children:((u=e.company)==null?void 0:u.name)||"Unknown Company"})]})]}),t.jsx($,{variant:d&&e.status!=="paid"?"destructive":c.variant,children:d&&e.status!=="paid"?"Overdue":c.label})]})}),t.jsxs("div",{className:"mt-6 space-y-6",children:[t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsxs(T,{variant:"outline",size:"sm",onClick:o,children:[t.jsx($a,{className:"h-4 w-4 mr-2"}),"Download PDF"]}),e.status!=="paid"&&t.jsxs(T,{variant:"outline",size:"sm",onClick:()=>a.mutate(),disabled:a.isPending,children:[a.isPending?t.jsx(Ie,{className:"h-4 w-4 mr-2 animate-spin"}):t.jsx(zf,{className:"h-4 w-4 mr-2"}),"Send Reminder"]}),e.status==="draft"&&t.jsxs(T,{variant:"default",size:"sm",onClick:()=>i.mutate("sent"),disabled:i.isPending,children:[t.jsx(ys,{className:"h-4 w-4 mr-2"}),"Mark as Sent"]}),e.status!=="paid"&&e.status!=="cancelled"&&t.jsxs(T,{variant:"default",size:"sm",onClick:()=>i.mutate("paid"),disabled:i.isPending,children:[t.jsx(or,{className:"h-4 w-4 mr-2"}),"Mark as Paid"]})]}),t.jsx(yr,{}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[t.jsx(Lr,{className:"h-4 w-4"}),"Issue Date"]}),t.jsx("p",{className:"font-medium",children:pe(new Date(e.issue_date),"MMMM d, yyyy")})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[t.jsx(Oe,{className:"h-4 w-4"}),"Due Date"]}),t.jsx("p",{className:`font-medium ${d&&e.status!=="paid"?"text-destructive":""}`,children:pe(new Date(e.due_date),"MMMM d, yyyy")})]})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[t.jsx(Qt,{className:"h-4 w-4"}),"Billed To"]}),t.jsx("p",{className:"font-medium",children:((m=e.company)==null?void 0:m.name)||"Unknown Company"})]}),t.jsx(yr,{}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[t.jsx(Zt,{className:"h-4 w-4"}),"Line Items"]}),t.jsx("div",{className:"border rounded-lg overflow-hidden",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"bg-muted/50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left p-3 font-medium",children:"Description"}),t.jsx("th",{className:"text-right p-3 font-medium",children:"Qty"}),t.jsx("th",{className:"text-right p-3 font-medium",children:"Price"}),t.jsx("th",{className:"text-right p-3 font-medium",children:"Amount"})]})}),t.jsx("tbody",{children:l.length>0?l.map((h,p)=>{var g,x;return t.jsxs("tr",{className:"border-t",children:[t.jsx("td",{className:"p-3",children:h.description}),t.jsx("td",{className:"p-3 text-right",children:h.quantity}),t.jsxs("td",{className:"p-3 text-right",children:["$",((g=h.unitPrice)==null?void 0:g.toFixed(2))||"0.00"]}),t.jsxs("td",{className:"p-3 text-right font-medium",children:["$",((x=h.amount)==null?void 0:x.toFixed(2))||"0.00"]})]},p)}):t.jsx("tr",{children:t.jsx("td",{colSpan:4,className:"p-3 text-center text-muted-foreground",children:"No line items"})})})]})})]}),t.jsx(yr,{}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),t.jsxs("span",{children:["$",e.subtotal.toLocaleString()]})]}),e.tax_amount>0&&t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-muted-foreground",children:"Tax"}),t.jsxs("span",{children:["$",e.tax_amount.toLocaleString()]})]}),t.jsx(yr,{}),t.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[t.jsx("span",{children:"Total"}),t.jsxs("span",{className:"text-primary",children:["$",e.total_amount.toLocaleString()]})]})]}),e.notes&&t.jsxs(t.Fragment,{children:[t.jsx(yr,{}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("h3",{className:"font-semibold",children:"Notes"}),t.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:e.notes})]})]}),e.paid_at&&t.jsxs(t.Fragment,{children:[t.jsx(yr,{}),t.jsxs("div",{className:"p-4 bg-primary/10 rounded-lg border border-primary/20",children:[t.jsxs("div",{className:"flex items-center gap-2 text-primary",children:[t.jsx(or,{className:"h-4 w-4"}),t.jsx("span",{className:"font-medium",children:"Payment Received"})]}),t.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Paid on ",pe(new Date(e.paid_at),"MMMM d, yyyy")]})]})]})]})]})})}const Pp={fixed_price:{label:"Fixed Price",description:"Milestone-based billing for defined deliverables",icon:"Target"},time_materials:{label:"Time & Materials",description:"Billing based on actual effort at agreed rates",icon:"Clock"},managed_services:{label:"Managed Services",description:"Monthly recurring fees aligned with SLAs",icon:"Settings"},retainer:{label:"Engineering Retainer",description:"Prepaid hours consumed as services are delivered",icon:"Wallet"}},yP={per_hour:{label:"Per Hour",shortLabel:"/hr"},per_device:{label:"Per Device",shortLabel:"/device"},per_site:{label:"Per Site",shortLabel:"/site"},per_service:{label:"Per Service",shortLabel:"/service"},per_engagement:{label:"Per Engagement",shortLabel:"/engagement"},milestone:{label:"Milestone",shortLabel:"milestone"},monthly_recurring:{label:"Monthly Recurring",shortLabel:"/month"}};function SG(){return fe({queryKey:["admin-all-project-billings"],queryFn:async()=>{const{data:e,error:s}=await B.from("project_billing").select(`
          *,
          project:projects!inner(
            id, name, status, organization_id,
            organization:organizations(id, name)
          )
        `).order("created_at",{ascending:!1});if(s)throw s;return e||[]}})}function kG(){return fe({queryKey:["admin-all-invoices"],queryFn:async()=>{const{data:e,error:s}=await B.from("invoices").select(`
          *,
          company:organizations(id, name)
        `).order("issue_date",{ascending:!1});if(s)throw s;return e||[]}})}function EG(){return fe({queryKey:["admin-all-time-entries"],queryFn:async()=>{const{data:e,error:s}=await B.from("time_entries").select(`
          *,
          project:projects(id, name, organization:organizations(id, name)),
          profiles:user_id(id, full_name, email)
        `).order("date",{ascending:!1}).limit(100);if(s)throw s;return e||[]}})}function AG(){return fe({queryKey:["admin-all-change-orders"],queryFn:async()=>{const{data:e,error:s}=await B.from("change_orders").select(`
          *,
          project:projects(id, name, organization:organizations(id, name))
        `).order("created_at",{ascending:!1});if(s)throw s;return e||[]}})}function TG(){return fe({queryKey:["admin-companies-filter"],queryFn:async()=>{const{data:e,error:s}=await B.from("organizations").select("id, name").order("name");if(s)throw s;return e||[]}})}const PG={Target:Yr,Clock:Oe,Settings:Js,Wallet:qf};function RG(){const[e,s]=f.useState(""),[r,n]=f.useState("all"),[a,i]=f.useState(!1),[o,l]=f.useState(null),[c,d]=f.useState(!1),u=ht(),{data:m=[],isLoading:h}=SG(),{data:p=[],isLoading:g}=kG(),{data:x=[],isLoading:v}=EG(),{data:y=[],isLoading:j}=AG(),{data:w=[]}=TG(),b=m.reduce((F,I)=>F+Number(I.contract_value||0),0),N=p.reduce((F,I)=>F+Number(I.total_amount||0),0),_=p.filter(F=>F.status==="sent"||F.status==="draft"),C=x.filter(F=>F.is_billable).reduce((F,I)=>F+Number(I.hours||0),0),E=m.filter(F=>{var ee,K,D,q,re,S,R;const I=e===""||((K=(ee=F.project)==null?void 0:ee.name)==null?void 0:K.toLowerCase().includes(e.toLowerCase()))||((re=(q=(D=F.project)==null?void 0:D.organization)==null?void 0:q.name)==null?void 0:re.toLowerCase().includes(e.toLowerCase())),G=r==="all"||((R=(S=F.project)==null?void 0:S.organization)==null?void 0:R.id)===r;return I&&G}),k=p.filter(F=>{var ee,K,D;const I=e===""||((ee=F.invoice_number)==null?void 0:ee.toLowerCase().includes(e.toLowerCase()))||((D=(K=F.company)==null?void 0:K.name)==null?void 0:D.toLowerCase().includes(e.toLowerCase())),G=r==="all"||F.company_id===r;return I&&G}),A=x.filter(F=>{var ee,K,D,q,re;const I=e===""||((ee=F.description)==null?void 0:ee.toLowerCase().includes(e.toLowerCase()))||((D=(K=F.project)==null?void 0:K.name)==null?void 0:D.toLowerCase().includes(e.toLowerCase())),G=r==="all"||((re=(q=F.project)==null?void 0:q.organization)==null?void 0:re.id)===r;return I&&G}),L=y.filter(F=>{var ee,K,D,q;const I=e===""||((ee=F.title)==null?void 0:ee.toLowerCase().includes(e.toLowerCase()))||((K=F.order_number)==null?void 0:K.toLowerCase().includes(e.toLowerCase())),G=r==="all"||((q=(D=F.project)==null?void 0:D.organization)==null?void 0:q.id)===r;return I&&G}),H=F=>{const I={paid:"success",sent:"warning",draft:"secondary",overdue:"destructive",approved:"success",submitted:"warning",rejected:"destructive",implemented:"success"};return t.jsx($,{variant:I[F]||"secondary",children:F})};return t.jsxs(we,{children:[t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Global Billing Management"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage billing across all companies and projects"})]}),t.jsxs(T,{onClick:()=>i(!0),children:[t.jsx(at,{className:"h-4 w-4 mr-2"}),"Create Invoice"]})]}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Total Contract Value"}),t.jsx(or,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(M,{children:[t.jsxs("div",{className:"text-2xl font-bold",children:["$",b.toLocaleString()]}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Across ",m.length," projects"]})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Total Invoiced"}),t.jsx(qu,{className:"h-4 w-4 text-success"})]}),t.jsxs(M,{children:[t.jsxs("div",{className:"text-2xl font-bold text-success",children:["$",N.toLocaleString()]}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[p.length," invoices generated"]})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Pending Invoices"}),t.jsx(Oe,{className:"h-4 w-4 text-warning"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold text-warning",children:_.length}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:["$",_.reduce((F,I)=>F+Number(I.total_amount||0),0).toLocaleString()," pending"]})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Billable Hours"}),t.jsx(Oe,{className:"h-4 w-4 text-primary"})]}),t.jsxs(M,{children:[t.jsxs("div",{className:"text-2xl font-bold",children:[C.toFixed(1),"h"]}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"This period"})]})]})]}),t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("div",{className:"relative flex-1 max-w-md",children:[t.jsx(ns,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t.jsx(se,{placeholder:"Search billing records...",value:e,onChange:F=>s(F.target.value),className:"pl-9"})]}),t.jsxs($e,{value:r,onValueChange:n,children:[t.jsxs(Le,{className:"w-[200px]",children:[t.jsx(Qt,{className:"h-4 w-4 mr-2"}),t.jsx(Ue,{placeholder:"All Companies"})]}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"all",children:"All Companies"}),w.map(F=>t.jsx(Z,{value:F.id,children:F.name},F.id))]})]})]}),t.jsxs(kt,{defaultValue:"projects",children:[t.jsxs(St,{children:[t.jsxs(he,{value:"projects",children:[t.jsx(ca,{className:"h-4 w-4 mr-2"}),"Project Billing (",E.length,")"]}),t.jsxs(he,{value:"invoices",children:[t.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Invoices (",k.length,")"]}),t.jsxs(he,{value:"time-entries",children:[t.jsx(Oe,{className:"h-4 w-4 mr-2"}),"Time Entries (",A.length,")"]}),t.jsxs(he,{value:"change-orders",children:[t.jsx(qt,{className:"h-4 w-4 mr-2"}),"Change Orders (",L.length,")"]})]}),t.jsx(Ce,{value:"projects",className:"mt-6",children:t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsx(V,{children:"Project Billing Configurations"}),t.jsx(ce,{children:"All project billing setups across companies"})]}),t.jsx(M,{children:h?t.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):E.length===0?t.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No billing configurations found"}):t.jsxs(Rs,{children:[t.jsx(Is,{children:t.jsxs(ot,{children:[t.jsx(ae,{children:"Project"}),t.jsx(ae,{children:"Company"}),t.jsx(ae,{children:"Engagement Model"}),t.jsx(ae,{children:"Contract Value"}),t.jsx(ae,{children:"Payment Terms"}),t.jsx(ae,{children:"Deposit"})]})}),t.jsx(Ds,{children:E.map(F=>{var K,D,q;const I=F.engagement_model,G=Pp[I],ee=G?PG[G.icon]:Yr;return t.jsxs(ot,{children:[t.jsx(ne,{className:"font-medium",children:(K=F.project)==null?void 0:K.name}),t.jsx(ne,{children:t.jsx($,{variant:"outline",children:(q=(D=F.project)==null?void 0:D.organization)==null?void 0:q.name})}),t.jsx(ne,{children:t.jsxs("div",{className:"flex items-center gap-2",children:[ee&&t.jsx(ee,{className:"h-4 w-4 text-muted-foreground"}),t.jsx("span",{children:(G==null?void 0:G.label)||I})]})}),t.jsxs(ne,{children:["$",Number(F.contract_value||0).toLocaleString()]}),t.jsx(ne,{children:F.payment_terms}),t.jsx(ne,{children:F.deposit_paid?t.jsx($,{variant:"success",children:"Paid"}):F.deposit_required?t.jsxs($,{variant:"warning",children:["$",Number(F.deposit_required).toLocaleString()," Required"]}):t.jsx("span",{className:"text-muted-foreground",children:"None"})})]},F.id)})})]})})]})}),t.jsx(Ce,{value:"invoices",className:"mt-6",children:t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsx(V,{children:"All Invoices"}),t.jsx(ce,{children:"Invoices across all companies"})]}),t.jsx(M,{children:g?t.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):k.length===0?t.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No invoices found"}):t.jsxs(Rs,{children:[t.jsx(Is,{children:t.jsxs(ot,{children:[t.jsx(ae,{children:"Invoice #"}),t.jsx(ae,{children:"Company"}),t.jsx(ae,{children:"Issue Date"}),t.jsx(ae,{children:"Due Date"}),t.jsx(ae,{children:"Amount"}),t.jsx(ae,{children:"Status"}),t.jsx(ae,{})]})}),t.jsx(Ds,{children:k.map(F=>{var I;return t.jsxs(ot,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>{l(F),d(!0)},children:[t.jsx(ne,{className:"font-medium",children:F.invoice_number}),t.jsx(ne,{children:t.jsx($,{variant:"outline",children:(I=F.company)==null?void 0:I.name})}),t.jsx(ne,{children:pe(new Date(F.issue_date),"MMM d, yyyy")}),t.jsx(ne,{children:pe(new Date(F.due_date),"MMM d, yyyy")}),t.jsxs(ne,{className:"font-semibold",children:["$",Number(F.total_amount).toLocaleString()]}),t.jsx(ne,{children:H(F.status)}),t.jsx(ne,{children:t.jsx(T,{variant:"ghost",size:"sm",children:t.jsx(rn,{className:"h-4 w-4"})})})]},F.id)})})]})})]})}),t.jsx(Ce,{value:"time-entries",className:"mt-6",children:t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsx(V,{children:"Time Entries"}),t.jsx(ce,{children:"Recent time entries across all projects"})]}),t.jsx(M,{children:v?t.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):A.length===0?t.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No time entries found"}):t.jsxs(Rs,{children:[t.jsx(Is,{children:t.jsxs(ot,{children:[t.jsx(ae,{children:"Date"}),t.jsx(ae,{children:"Project"}),t.jsx(ae,{children:"Company"}),t.jsx(ae,{children:"User"}),t.jsx(ae,{children:"Hours"}),t.jsx(ae,{children:"Description"}),t.jsx(ae,{children:"Status"})]})}),t.jsx(Ds,{children:A.map(F=>{var I,G,ee,K;return t.jsxs(ot,{children:[t.jsx(ne,{children:pe(new Date(F.date),"MMM d, yyyy")}),t.jsx(ne,{className:"font-medium",children:(I=F.project)==null?void 0:I.name}),t.jsx(ne,{children:t.jsx($,{variant:"outline",children:(ee=(G=F.project)==null?void 0:G.organization)==null?void 0:ee.name})}),t.jsx(ne,{children:((K=F.profiles)==null?void 0:K.full_name)||"Unknown"}),t.jsxs(ne,{children:[Number(F.hours).toFixed(1),"h"]}),t.jsx(ne,{className:"max-w-[200px] truncate",children:F.description}),t.jsx(ne,{children:t.jsxs("div",{className:"flex gap-1",children:[F.is_billable&&t.jsx($,{variant:"outline",className:"text-xs",children:"Billable"}),F.is_approved?t.jsx($,{variant:"success",className:"text-xs",children:"Approved"}):t.jsx($,{variant:"warning",className:"text-xs",children:"Pending"})]})})]},F.id)})})]})})]})}),t.jsx(Ce,{value:"change-orders",className:"mt-6",children:t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsx(V,{children:"Change Orders"}),t.jsx(ce,{children:"Scope changes across all projects"})]}),t.jsx(M,{children:j?t.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):L.length===0?t.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No change orders found"}):t.jsxs(Rs,{children:[t.jsx(Is,{children:t.jsxs(ot,{children:[t.jsx(ae,{children:"Order #"}),t.jsx(ae,{children:"Title"}),t.jsx(ae,{children:"Project"}),t.jsx(ae,{children:"Company"}),t.jsx(ae,{children:"Cost Impact"}),t.jsx(ae,{children:"Hours Impact"}),t.jsx(ae,{children:"Status"})]})}),t.jsx(Ds,{children:L.map(F=>{var I,G,ee;return t.jsxs(ot,{children:[t.jsx(ne,{className:"font-mono text-sm",children:F.order_number}),t.jsx(ne,{className:"font-medium",children:F.title}),t.jsx(ne,{children:(I=F.project)==null?void 0:I.name}),t.jsx(ne,{children:t.jsx($,{variant:"outline",children:(ee=(G=F.project)==null?void 0:G.organization)==null?void 0:ee.name})}),t.jsx(ne,{children:Number(F.additional_cost)>0?t.jsxs("span",{className:"text-warning",children:["+$",Number(F.additional_cost).toLocaleString()]}):t.jsx("span",{className:"text-muted-foreground",children:"$0"})}),t.jsx(ne,{children:Number(F.additional_hours)>0?t.jsxs("span",{className:"text-warning",children:["+",Number(F.additional_hours),"h"]}):t.jsx("span",{className:"text-muted-foreground",children:"0h"})}),t.jsx(ne,{children:H(F.status||"draft")})]},F.id)})})]})})]})})]})]}),t.jsx(mP,{open:a,onOpenChange:i,onSuccess:()=>{u.invalidateQueries({queryKey:["admin-all-invoices"]})}}),t.jsx(_G,{invoice:o,open:c,onOpenChange:d})]})}function IG(){const{isInfraweaveAdmin:e,isLoading:s}=Ze();return s?t.jsx(we,{children:t.jsx("div",{className:"p-6",children:"Loading..."})}):e?t.jsxs(we,{children:[t.jsx(qn,{title:"All Tickets",subtitle:"View and manage tickets across all companies"}),t.jsx("div",{className:"p-6",children:t.jsx(PA,{})})]}):t.jsx(we,{children:t.jsxs("div",{className:"p-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-destructive",children:"Access Denied"}),t.jsx("p",{className:"text-muted-foreground",children:"You don't have permission to access this page."})]})})}function DG(){const[e,s]=f.useState(!1),[r,n]=f.useState(null),[a,i]=f.useState("all"),{company:o,isLoading:l,isCompanyAdmin:c,isInfraweaveAdmin:d}=Ze(),{data:u=[],isLoading:m}=fp(),h=Qe(),p=ht(),[g,x]=f.useState(""),[v,y]=f.useState("all"),[j,w]=f.useState("all"),[b,N]=f.useState(!1),[_,C]=f.useState(null),[E,k]=f.useState(!1),A=d||c,{data:L=[]}=fe({queryKey:["draft-projects",o==null?void 0:o.id],queryFn:async()=>{if(!(o!=null&&o.id))return[];const{data:Q,error:Y}=await B.from("projects").select("*").eq("organization_id",o.id).eq("is_draft",!0).order("last_edited_at",{ascending:!1});if(Y)throw Y;return Q||[]},enabled:!!(o!=null&&o.id)&&A}),H=u.filter(Q=>!Q.is_draft&&!Q.isDraft),F=H.filter(Q=>{var xe;const Y=Q.name.toLowerCase().includes(g.toLowerCase())||(((xe=Q.description)==null?void 0:xe.toLowerCase().includes(g.toLowerCase()))??!1),oe=v==="all"||Q.status===v,X=j==="all"||Q.health===j;return Y&&oe&&X}),I={active:H.filter(Q=>Q.status==="active").length,draft:H.filter(Q=>Q.status==="draft").length,completed:H.filter(Q=>Q.status==="completed").length,archived:H.filter(Q=>Q.status==="archived").length},G=Q=>{switch(Q){case"critical":return t.jsx(fs,{className:"h-4 w-4 text-destructive"});case"at_risk":return t.jsx(fs,{className:"h-4 w-4 text-warning"});case"healthy":return t.jsx(vt,{className:"h-4 w-4 text-success"});default:return t.jsx(Oe,{className:"h-4 w-4 text-muted-foreground"})}},ee=()=>{n(null),s(!0)},K=Q=>{n(Q),s(!0)},D=Q=>{s(Q),Q||n(null)},q=()=>{p.invalidateQueries({queryKey:["draft-projects",o==null?void 0:o.id]}),p.invalidateQueries({queryKey:["company-projects",o==null?void 0:o.id]})},re=(Q,Y)=>{Q.stopPropagation(),C(Y),N(!0)},S=async()=>{if(_){k(!0);try{const{error:Q}=await B.from("projects").delete().eq("id",_.id).eq("is_draft",!0);if(Q)throw Q;z.success("Draft deleted",{description:`"${_.name}" has been permanently deleted.`}),p.invalidateQueries({queryKey:["draft-projects",o==null?void 0:o.id]}),p.invalidateQueries({queryKey:["company-projects",o==null?void 0:o.id]})}catch(Q){console.error("Failed to delete draft:",Q),z.error("Failed to delete draft")}finally{k(!1),N(!1),C(null)}}};if(l||m)return t.jsx(we,{children:t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsx(je,{className:"h-8 w-48"}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx(je,{className:"h-10 w-64"}),t.jsx(je,{className:"h-10 w-32"}),t.jsx(je,{className:"h-10 w-32"})]}),t.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((Q,Y)=>t.jsx(je,{className:"h-48"},Y))})]})});return t.jsx(we,{children:t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Projects"}),t.jsxs("p",{className:"text-muted-foreground",children:["Manage projects for ",(o==null?void 0:o.name)||"your company"]})]}),A&&t.jsxs(T,{onClick:ee,children:[t.jsx(at,{className:"h-4 w-4 mr-2"}),"New Project"]})]}),A&&o&&t.jsx(rP,{open:e,onOpenChange:D,companyId:o.id,companyName:o.name,draftProjectId:r||void 0,onDraftSaved:q,onSaveComplete:()=>i("drafts")}),t.jsx(nP,{open:b,onOpenChange:N,draftName:(_==null?void 0:_.name)||"Untitled Project",isDeleting:E,onConfirm:S}),A&&t.jsxs(kt,{value:a,onValueChange:i,children:[t.jsxs(St,{children:[t.jsxs(he,{value:"all",className:"gap-2",children:[t.jsx(bt,{className:"h-4 w-4"}),"Submitted Projects",t.jsx($,{variant:"secondary",className:"ml-1",children:H.length})]}),t.jsxs(he,{value:"drafts",className:"gap-2",children:[t.jsx(_i,{className:"h-4 w-4"}),"Drafts",t.jsx($,{variant:"warning",className:"ml-1",children:L.length})]})]}),t.jsx(Ce,{value:"all",className:"space-y-6 mt-4",children:R()}),t.jsx(Ce,{value:"drafts",className:"space-y-6 mt-4",children:te()})]}),!A&&R()]})});function R(){return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[t.jsx(P,{className:"cursor-pointer hover:border-primary transition-colors",onClick:()=>y("all"),children:t.jsxs(M,{className:"pt-4 pb-4",children:[t.jsx("div",{className:"text-2xl font-bold",children:H.length}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Projects"})]})}),t.jsx(P,{className:"cursor-pointer hover:border-primary transition-colors",onClick:()=>y("active"),children:t.jsxs(M,{className:"pt-4 pb-4",children:[t.jsx("div",{className:"text-2xl font-bold text-success",children:I.active}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Active"})]})}),t.jsx(P,{className:"cursor-pointer hover:border-primary transition-colors",onClick:()=>y("draft"),children:t.jsxs(M,{className:"pt-4 pb-4",children:[t.jsx("div",{className:"text-2xl font-bold text-warning",children:I.draft}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Draft"})]})}),t.jsx(P,{className:"cursor-pointer hover:border-primary transition-colors",onClick:()=>y("completed"),children:t.jsxs(M,{className:"pt-4 pb-4",children:[t.jsx("div",{className:"text-2xl font-bold text-info",children:I.completed}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed"})]})})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[t.jsxs("div",{className:"relative flex-1 max-w-md",children:[t.jsx(ns,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t.jsx(se,{placeholder:"Search projects...",value:g,onChange:Q=>x(Q.target.value),className:"pl-9"})]}),t.jsxs($e,{value:v,onValueChange:y,children:[t.jsx(Le,{className:"w-[150px]",children:t.jsx(Ue,{placeholder:"Status"})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"all",children:"All Status"}),t.jsx(Z,{value:"active",children:"Active"}),t.jsx(Z,{value:"draft",children:"Draft"}),t.jsx(Z,{value:"completed",children:"Completed"}),t.jsx(Z,{value:"archived",children:"Archived"})]})]}),t.jsxs($e,{value:j,onValueChange:w,children:[t.jsx(Le,{className:"w-[150px]",children:t.jsx(Ue,{placeholder:"Health"})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"all",children:"All Health"}),t.jsx(Z,{value:"healthy",children:"Healthy"}),t.jsx(Z,{value:"at_risk",children:"At Risk"}),t.jsx(Z,{value:"critical",children:"Critical"}),t.jsx(Z,{value:"on_hold",children:"On Hold"})]})]})]}),F.length>0?t.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:F.map(Q=>t.jsxs(P,{className:"cursor-pointer hover:border-primary transition-colors",onClick:()=>h(`/projects/${Q.id}`),children:[t.jsxs(W,{className:"pb-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx($,{variant:"secondary",children:Q.status}),t.jsxs("div",{className:"flex items-center gap-1",children:[G(Q.health||"healthy"),t.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:Q.health||"healthy"})]})]}),t.jsx(V,{className:"text-lg",children:Q.name}),t.jsx(ce,{className:"line-clamp-2",children:Q.description||"No description"})]}),t.jsx(M,{children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground mb-1",children:[t.jsx("span",{children:"Progress"}),t.jsxs("span",{children:[Q.progressPercent||0,"%"]})]}),t.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:t.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${Q.progressPercent||0}%`}})})]}),t.jsx("div",{className:"flex justify-between text-xs text-muted-foreground",children:t.jsxs("span",{children:["Created: ",pe(new Date(Q.createdAt),"MMM d, yyyy")]})})]})})]},Q.id))}):t.jsx(P,{children:t.jsxs(M,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(bt,{className:"h-12 w-12 text-muted-foreground mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No Projects Found"}),t.jsx("p",{className:"text-muted-foreground text-center max-w-md",children:g||v!=="all"||j!=="all"?"No projects match your search criteria. Try adjusting your filters.":"No projects yet. Create your first project to get started."})]})})]})}function te(){return t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsxs(V,{className:"flex items-center gap-2",children:[t.jsx(_i,{className:"h-5 w-5"}),"Draft Projects"]}),t.jsxs(ce,{children:[L.length," drafts in progress - Pick up where you or your team left off"]})]}),t.jsx(M,{children:t.jsx("div",{className:"space-y-3",children:L.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(_i,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4 opacity-50"}),t.jsx("p",{className:"text-muted-foreground",children:"No draft projects"}),t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Start a new project and save it as a draft to see it here."})]}):L.map(Q=>{var ve;const Y=Q.form_progress,oe=((ve=Y==null?void 0:Y.completedSteps)==null?void 0:ve.length)||0,X=17,xe=Math.round(oe/X*100);return t.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border-2 border-dashed border-warning/30 bg-warning/5 hover:bg-warning/10 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"h-10 w-10 rounded-lg bg-warning/20 flex items-center justify-center",children:t.jsx(_i,{className:"h-5 w-5 text-warning"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:Q.name||"Untitled Project"}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Step ",((Y==null?void 0:Y.currentStep)||0)+1," of ",X," (",xe,"% complete)"]}),t.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Last edited: ",Q.last_edited_at?pe(new Date(Q.last_edited_at),"MMM d, yyyy h:mm a"):"Unknown"]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx($,{variant:"warning",children:"Draft"}),t.jsx(T,{size:"sm",variant:"outline",className:"text-destructive hover:text-destructive hover:bg-destructive/10",onClick:Ae=>re(Ae,{id:Q.id,name:Q.name||"Untitled Project"}),children:t.jsx(Rt,{className:"h-4 w-4"})}),t.jsxs(T,{size:"sm",onClick:()=>K(Q.id),children:[t.jsx(Bf,{className:"h-4 w-4 mr-1"}),"Resume"]})]})]},Q.id)})})})]})}}const v1={epic:{icon:t.jsx(_c,{className:"h-4 w-4"}),color:"bg-purple-500/10 text-purple-500",label:"Epic"},story:{icon:t.jsx(ir,{className:"h-4 w-4"}),color:"bg-blue-500/10 text-blue-500",label:"Story"},bug:{icon:t.jsx(Wc,{className:"h-4 w-4"}),color:"bg-red-500/10 text-red-500",label:"Bug"},monitoring:{icon:t.jsx(Fa,{className:"h-4 w-4"}),color:"bg-green-500/10 text-green-500",label:"Monitoring"}},OG={low:"bg-slate-400 text-white",medium:"bg-blue-500 text-white",high:"bg-orange-500 text-white",critical:"bg-red-600 text-white"},MG={open:"bg-blue-500 text-white",in_progress:"bg-yellow-500 text-black",waiting_customer:"bg-purple-500 text-white",waiting_internal:"bg-orange-500 text-white",resolved:"bg-green-500 text-white",closed:"bg-gray-500 text-white"},LG={open:"Open",in_progress:"In Progress",waiting_customer:"Waiting Customer",waiting_internal:"Waiting Internal",resolved:"Resolved",closed:"Closed"};function FG(){const{company:e,isLoading:s}=Ze(),{data:r=[],isLoading:n}=ew(),a=Qe(),[i,o]=f.useState(""),[l,c]=f.useState("all"),[d,u]=f.useState("all"),[m,h]=f.useState("all"),[p,g]=f.useState("all"),[x,v]=f.useState(!1),y=r.map(A=>A.assigned_to).filter(Boolean),{data:j={}}=fe({queryKey:["assignee-profiles",y],queryFn:async()=>{if(y.length===0)return{};const A=[...new Set(y)],{data:L}=await B.from("profiles_safe").select("id, full_name, email, avatar_url").in("id",A),H={};return L==null||L.forEach(F=>{H[F.id]=F}),H},enabled:y.length>0}),w=r.map(A=>A.project_id).filter(Boolean),{data:b={}}=fe({queryKey:["project-names",w],queryFn:async()=>{if(w.length===0)return{};const A=[...new Set(w)],{data:L}=await B.from("projects").select("id, name").in("id",A),H={};return L==null||L.forEach(F=>{H[F.id]=F.name}),H},enabled:w.length>0}),N=r.filter(A=>{var ee;const L=A.title.toLowerCase().includes(i.toLowerCase())||(((ee=A.description)==null?void 0:ee.toLowerCase().includes(i.toLowerCase()))??!1),H=l==="all"||A.status===l,F=d==="all"||A.priority===d,I=m==="all"||A.category===m;let G=!0;return p==="open"?G=A.status==="open"||A.status==="in_progress":p==="critical"?G=A.priority==="critical":p==="resolved"&&(G=A.status==="resolved"||A.status==="closed"),L&&H&&F&&I&&G}),_=r.filter(A=>A.status==="open"||A.status==="in_progress").length,C=r.filter(A=>A.priority==="critical").length,E=r.filter(A=>A.status==="resolved"||A.status==="closed").length,k=(A,L)=>{L.stopPropagation();const H=`TKT-${A.slice(0,8).toUpperCase()}`;navigator.clipboard.writeText(H),z.success("Ticket ID copied!")};return s||n?t.jsx(we,{children:t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsx(je,{className:"h-8 w-48"}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx(je,{className:"h-10 w-64"}),t.jsx(je,{className:"h-10 w-32"}),t.jsx(je,{className:"h-10 w-32"})]}),t.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((A,L)=>t.jsx(je,{className:"h-32"},L))})]})}):t.jsx(we,{children:t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Tickets"}),t.jsxs("p",{className:"text-muted-foreground",children:["Manage support tickets for ",(e==null?void 0:e.name)||"your company"]})]}),t.jsxs(T,{onClick:()=>v(!0),children:[t.jsx(at,{className:"h-4 w-4 mr-2"}),"New Ticket"]})]}),t.jsx(Cw,{open:x,onOpenChange:v}),t.jsxs(kt,{value:p,onValueChange:g,children:[t.jsxs(St,{children:[t.jsxs(he,{value:"all",children:["All",t.jsx($,{variant:"secondary",className:"ml-2",children:r.length})]}),t.jsxs(he,{value:"open",children:["Open",t.jsx($,{variant:"secondary",className:"ml-2",children:_})]}),t.jsxs(he,{value:"critical",children:["Critical",t.jsx($,{variant:"destructive",className:"ml-2",children:C})]}),t.jsxs(he,{value:"resolved",children:["Resolved",t.jsx($,{variant:"secondary",className:"ml-2",children:E})]})]}),t.jsxs(Ce,{value:p,className:"space-y-4 mt-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[t.jsxs("div",{className:"relative flex-1 max-w-md",children:[t.jsx(ns,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t.jsx(se,{placeholder:"Search tickets...",value:i,onChange:A=>o(A.target.value),className:"pl-9"})]}),t.jsxs($e,{value:l,onValueChange:c,children:[t.jsx(Le,{className:"w-[150px]",children:t.jsx(Ue,{placeholder:"Status"})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"all",children:"All Status"}),t.jsx(Z,{value:"open",children:"Open"}),t.jsx(Z,{value:"in_progress",children:"In Progress"}),t.jsx(Z,{value:"waiting_customer",children:"Waiting Customer"}),t.jsx(Z,{value:"waiting_internal",children:"Waiting Internal"}),t.jsx(Z,{value:"resolved",children:"Resolved"}),t.jsx(Z,{value:"closed",children:"Closed"})]})]}),t.jsxs($e,{value:d,onValueChange:u,children:[t.jsx(Le,{className:"w-[150px]",children:t.jsx(Ue,{placeholder:"Priority"})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"all",children:"All Priority"}),t.jsx(Z,{value:"low",children:"Low"}),t.jsx(Z,{value:"medium",children:"Medium"}),t.jsx(Z,{value:"high",children:"High"}),t.jsx(Z,{value:"critical",children:"Critical"})]})]}),t.jsxs($e,{value:m,onValueChange:h,children:[t.jsx(Le,{className:"w-[150px]",children:t.jsx(Ue,{placeholder:"Category"})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"all",children:"All Categories"}),t.jsx(Z,{value:"epic",children:"Epic"}),t.jsx(Z,{value:"story",children:"Story"}),t.jsx(Z,{value:"bug",children:"Bug"}),t.jsx(Z,{value:"monitoring",children:"Monitoring"})]})]})]}),N.length>0?t.jsx("div",{className:"space-y-3",children:N.map(A=>{var K;const L=`TKT-${A.id.slice(0,8).toUpperCase()}`,H=A.category||"story",F=v1[H]||v1.story,I=A.assigned_to?j[A.assigned_to]:null,G=A.project_id?b[A.project_id]:null,ee=A.due_date&&new Date(A.due_date)<new Date(Date.now()+4*60*60*1e3);return t.jsx(P,{className:"cursor-pointer hover:border-primary transition-colors group",onClick:()=>a(`/tickets/${A.id}`),children:t.jsx(M,{className:"p-4",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsx("span",{className:"text-sm font-mono font-semibold text-primary",children:L}),t.jsx(T,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",onClick:D=>k(A.id,D),children:t.jsx(Uo,{className:"h-3 w-3"})}),t.jsxs($,{className:`${F.color} gap-1`,children:[F.icon,F.label]}),ee&&t.jsx($,{variant:"destructive",className:"text-xs",children:"SLA at risk"})]}),t.jsx("h3",{className:"font-medium text-foreground group-hover:text-primary transition-colors line-clamp-1",children:A.title}),t.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:A.description||"No description"}),t.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground flex-wrap",children:[G&&t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(bt,{className:"h-3 w-3"}),G]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Oe,{className:"h-3 w-3"}),sd(new Date(A.created_at),{addSuffix:!0})]}),A.due_date&&t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Lr,{className:"h-3 w-3"}),"Due: ",pe(new Date(A.due_date),"MMM d, yyyy")]})]})]}),t.jsxs("div",{className:"flex flex-col items-end gap-2 flex-shrink-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx($,{className:`${MG[A.status]} border-0`,children:LG[A.status]}),t.jsx($,{className:`${OG[A.priority]} border-0`,children:A.priority.charAt(0).toUpperCase()+A.priority.slice(1)})]}),t.jsx("div",{className:"flex items-center gap-2",children:I?t.jsxs(t.Fragment,{children:[t.jsx(Tt,{className:"h-6 w-6",children:t.jsx(Pt,{className:"text-xs bg-primary/20 text-primary",children:((K=I.full_name)==null?void 0:K.charAt(0))||"?"})}),t.jsx("span",{className:"text-xs text-muted-foreground",children:I.full_name||I.email})]}):t.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[t.jsx(qs,{className:"h-3 w-3"}),"Unassigned"]})})]})]})})},A.id)})}):t.jsx(P,{children:t.jsxs(M,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(rt,{className:"h-12 w-12 text-muted-foreground mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No Tickets Found"}),t.jsx("p",{className:"text-muted-foreground text-center max-w-md",children:i||l!=="all"||d!=="all"?"No tickets match your search criteria. Try adjusting your filters.":"No support tickets yet. Create a ticket when you need assistance."})]})})]})]})]})})}function $G(e){return fe({queryKey:["company-billings",e],queryFn:async()=>{const{data:s,error:r}=await B.from("project_billing").select(`
          *,
          project:projects!inner(id, name, status, organization_id)
        `).eq("project.organization_id",e).order("created_at",{ascending:!1});if(r)throw r;return s||[]},enabled:!!e})}function UG(e){return fe({queryKey:["company-invoices",e],queryFn:async()=>{const{data:s,error:r}=await B.from("invoices").select("*").eq("company_id",e).order("issue_date",{ascending:!1});if(r)throw r;return s||[]},enabled:!!e})}function BG(e){return fe({queryKey:["company-time-entries",e],queryFn:async()=>{const{data:s,error:r}=await B.from("time_entries").select(`
          *,
          project:projects!inner(id, name, organization_id),
          profiles:user_id(id, full_name, email)
        `).eq("project.organization_id",e).order("date",{ascending:!1}).limit(50);if(r)throw r;return s||[]},enabled:!!e})}function zG(e){return fe({queryKey:["company-change-orders",e],queryFn:async()=>{const{data:s,error:r}=await B.from("change_orders").select(`
          *,
          project:projects!inner(id, name, organization_id)
        `).eq("project.organization_id",e).order("created_at",{ascending:!1});if(r)throw r;return s||[]},enabled:!!e})}const qG={Target:Yr,Clock:Oe,Settings:Js,Wallet:qf};function WG(){const{isCompanyAdmin:e,company:s,isLoading:r}=Ze(),[n,a]=f.useState(!1),i=ht(),{data:o=[],isLoading:l}=$G(s==null?void 0:s.id),{data:c=[],isLoading:d}=UG(s==null?void 0:s.id),{data:u=[],isLoading:m}=BG(s==null?void 0:s.id),{data:h=[],isLoading:p}=zG(s==null?void 0:s.id);if(r)return t.jsx(we,{children:t.jsx("div",{className:"p-6",children:"Loading..."})});if(!e)return t.jsx(we,{children:t.jsxs("div",{className:"p-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-destructive",children:"Access Denied"}),t.jsx("p",{className:"text-muted-foreground",children:"Only Company Admins can access billing information."})]})});const g=o.reduce((N,_)=>N+Number(_.contract_value||0),0),x=c.reduce((N,_)=>N+Number(_.total_amount||0),0),v=c.filter(N=>N.status==="paid"),y=c.filter(N=>N.status==="sent"||N.status==="draft"),j=c.filter(N=>N.status==="overdue"),w=u.filter(N=>N.is_billable).reduce((N,_)=>N+Number(_.hours||0),0),b=N=>{const _={paid:"success",sent:"warning",draft:"secondary",overdue:"destructive",approved:"success",submitted:"warning",rejected:"destructive",implemented:"success"};return t.jsx($,{variant:_[N]||"secondary",children:N})};return t.jsxs(we,{children:[t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Billing & Invoices"}),t.jsxs("p",{className:"text-muted-foreground",children:["Manage billing, invoices, and payment history for ",s==null?void 0:s.name]})]}),t.jsxs(T,{onClick:()=>a(!0),children:[t.jsx(at,{className:"h-4 w-4 mr-2"}),"Create Invoice"]})]}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Contract Value"}),t.jsx(or,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(M,{children:[t.jsxs("div",{className:"text-2xl font-bold",children:["$",g.toLocaleString()]}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Across ",o.length," projects"]})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Total Invoiced"}),t.jsx(Zt,{className:"h-4 w-4 text-success"})]}),t.jsxs(M,{children:[t.jsxs("div",{className:"text-2xl font-bold text-success",children:["$",x.toLocaleString()]}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[v.length," paid, ",y.length," pending"]})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Overdue"}),t.jsx(qt,{className:"h-4 w-4 text-destructive"})]}),t.jsxs(M,{children:[t.jsx("div",{className:"text-2xl font-bold text-destructive",children:j.length}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:["$",j.reduce((N,_)=>N+Number(_.total_amount||0),0).toLocaleString()," outstanding"]})]})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Billable Hours"}),t.jsx(Oe,{className:"h-4 w-4 text-primary"})]}),t.jsxs(M,{children:[t.jsxs("div",{className:"text-2xl font-bold",children:[w.toFixed(1),"h"]}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"This period"})]})]})]}),t.jsxs(kt,{defaultValue:"projects",children:[t.jsxs(St,{children:[t.jsxs(he,{value:"projects",children:[t.jsx(ca,{className:"h-4 w-4 mr-2"}),"Project Billing (",o.length,")"]}),t.jsxs(he,{value:"invoices",children:[t.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Invoices (",c.length,")"]}),t.jsxs(he,{value:"time-entries",children:[t.jsx(Oe,{className:"h-4 w-4 mr-2"}),"Time Entries (",u.length,")"]}),t.jsxs(he,{value:"change-orders",children:[t.jsx(qt,{className:"h-4 w-4 mr-2"}),"Change Orders (",h.length,")"]})]}),t.jsx(Ce,{value:"projects",className:"mt-6",children:t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsx(V,{children:"Project Billing Configurations"}),t.jsx(ce,{children:"Billing setup for your projects"})]}),t.jsx(M,{children:l?t.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):o.length===0?t.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[t.jsx(ca,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{children:"No billing configurations yet"}),t.jsx("p",{className:"text-sm",children:"Configure billing on individual project pages"})]}):t.jsxs(Rs,{children:[t.jsx(Is,{children:t.jsxs(ot,{children:[t.jsx(ae,{children:"Project"}),t.jsx(ae,{children:"Engagement Model"}),t.jsx(ae,{children:"Contract Value"}),t.jsx(ae,{children:"Payment Terms"}),t.jsx(ae,{children:"Deposit"})]})}),t.jsx(Ds,{children:o.map(N=>{var k;const _=N.engagement_model,C=Pp[_],E=C?qG[C.icon]:Yr;return t.jsxs(ot,{children:[t.jsx(ne,{className:"font-medium",children:(k=N.project)==null?void 0:k.name}),t.jsx(ne,{children:t.jsxs("div",{className:"flex items-center gap-2",children:[E&&t.jsx(E,{className:"h-4 w-4 text-muted-foreground"}),t.jsx("span",{children:(C==null?void 0:C.label)||_})]})}),t.jsxs(ne,{children:["$",Number(N.contract_value||0).toLocaleString()]}),t.jsx(ne,{children:N.payment_terms}),t.jsx(ne,{children:N.deposit_paid?t.jsx($,{variant:"success",children:"Paid"}):N.deposit_required?t.jsxs($,{variant:"warning",children:["$",Number(N.deposit_required).toLocaleString()," Required"]}):t.jsx("span",{className:"text-muted-foreground",children:"None"})})]},N.id)})})]})})]})}),t.jsx(Ce,{value:"invoices",className:"mt-6",children:t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsx(V,{children:"Invoices"}),t.jsx(ce,{children:"View and manage your invoices"})]}),t.jsx(M,{children:d?t.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):c.length===0?t.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[t.jsx(Zt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{children:"No invoices yet"}),t.jsxs(T,{variant:"outline",className:"mt-4",onClick:()=>a(!0),children:[t.jsx(at,{className:"h-4 w-4 mr-2"}),"Create First Invoice"]})]}):t.jsxs(Rs,{children:[t.jsx(Is,{children:t.jsxs(ot,{children:[t.jsx(ae,{children:"Invoice #"}),t.jsx(ae,{children:"Issue Date"}),t.jsx(ae,{children:"Due Date"}),t.jsx(ae,{children:"Amount"}),t.jsx(ae,{children:"Status"}),t.jsx(ae,{})]})}),t.jsx(Ds,{children:c.map(N=>t.jsxs(ot,{children:[t.jsx(ne,{className:"font-medium font-mono",children:N.invoice_number}),t.jsx(ne,{children:pe(new Date(N.issue_date),"MMM d, yyyy")}),t.jsx(ne,{children:pe(new Date(N.due_date),"MMM d, yyyy")}),t.jsxs(ne,{className:"font-semibold",children:["$",Number(N.total_amount).toLocaleString()]}),t.jsx(ne,{children:b(N.status)}),t.jsx(ne,{children:t.jsx(T,{variant:"ghost",size:"sm",children:t.jsx($a,{className:"h-4 w-4"})})})]},N.id))})]})})]})}),t.jsx(Ce,{value:"time-entries",className:"mt-6",children:t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsx(V,{children:"Time Entries"}),t.jsx(ce,{children:"Recent time logged on your projects"})]}),t.jsx(M,{children:m?t.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):u.length===0?t.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[t.jsx(Oe,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{children:"No time entries yet"})]}):t.jsxs(Rs,{children:[t.jsx(Is,{children:t.jsxs(ot,{children:[t.jsx(ae,{children:"Date"}),t.jsx(ae,{children:"Project"}),t.jsx(ae,{children:"User"}),t.jsx(ae,{children:"Hours"}),t.jsx(ae,{children:"Description"}),t.jsx(ae,{children:"Status"})]})}),t.jsx(Ds,{children:u.map(N=>{var _,C;return t.jsxs(ot,{children:[t.jsx(ne,{children:pe(new Date(N.date),"MMM d, yyyy")}),t.jsx(ne,{className:"font-medium",children:(_=N.project)==null?void 0:_.name}),t.jsx(ne,{children:((C=N.profiles)==null?void 0:C.full_name)||"Unknown"}),t.jsxs(ne,{children:[Number(N.hours).toFixed(1),"h"]}),t.jsx(ne,{className:"max-w-[200px] truncate",children:N.description}),t.jsx(ne,{children:t.jsxs("div",{className:"flex gap-1",children:[N.is_billable&&t.jsx($,{variant:"outline",className:"text-xs",children:"Billable"}),N.is_approved?t.jsx($,{variant:"success",className:"text-xs",children:"Approved"}):t.jsx($,{variant:"warning",className:"text-xs",children:"Pending"})]})})]},N.id)})})]})})]})}),t.jsx(Ce,{value:"change-orders",className:"mt-6",children:t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsx(V,{children:"Change Orders"}),t.jsx(ce,{children:"Scope changes and their impact"})]}),t.jsx(M,{children:p?t.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):h.length===0?t.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[t.jsx(vt,{className:"h-12 w-12 mx-auto mb-4 text-success opacity-50"}),t.jsx("p",{children:"No change orders"}),t.jsx("p",{className:"text-sm",children:"Your projects are on track!"})]}):t.jsxs(Rs,{children:[t.jsx(Is,{children:t.jsxs(ot,{children:[t.jsx(ae,{children:"Order #"}),t.jsx(ae,{children:"Title"}),t.jsx(ae,{children:"Project"}),t.jsx(ae,{children:"Cost Impact"}),t.jsx(ae,{children:"Hours Impact"}),t.jsx(ae,{children:"Status"})]})}),t.jsx(Ds,{children:h.map(N=>{var _;return t.jsxs(ot,{children:[t.jsx(ne,{className:"font-mono text-sm",children:N.order_number}),t.jsx(ne,{className:"font-medium",children:N.title}),t.jsx(ne,{children:(_=N.project)==null?void 0:_.name}),t.jsx(ne,{children:Number(N.additional_cost)>0?t.jsxs("span",{className:"text-warning",children:["+$",Number(N.additional_cost).toLocaleString()]}):t.jsx("span",{className:"text-muted-foreground",children:"$0"})}),t.jsx(ne,{children:Number(N.additional_hours)>0?t.jsxs("span",{className:"text-warning",children:["+",Number(N.additional_hours),"h"]}):t.jsx("span",{className:"text-muted-foreground",children:"0h"})}),t.jsx(ne,{children:b(N.status||"draft")})]},N.id)})})]})})]})})]})]}),t.jsx(mP,{open:n,onOpenChange:a,preselectedCompanyId:s==null?void 0:s.id,onSuccess:()=>{i.invalidateQueries({queryKey:["company-invoices"]})}})]})}const VG={Target:Yr,Clock:Oe,Settings:Js,Wallet:qf};function HG({billing:e,isLoading:s,onSetup:r,onEdit:n}){if(s)return t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsx(je,{className:"h-5 w-32"}),t.jsx(je,{className:"h-4 w-48 mt-2"})]}),t.jsx(M,{children:t.jsxs("div",{className:"space-y-3",children:[t.jsx(je,{className:"h-4 w-full"}),t.jsx(je,{className:"h-4 w-3/4"})]})})]});if(!e)return t.jsxs(P,{className:"border-dashed",children:[t.jsxs(W,{children:[t.jsxs(V,{className:"flex items-center gap-2",children:[t.jsx(fs,{className:"h-5 w-5 text-muted-foreground"}),"Billing Not Configured"]}),t.jsx(ce,{children:"Set up billing to track engagement model, rates, and invoicing"})]}),t.jsx(M,{children:t.jsx(T,{onClick:r,children:"Configure Billing"})})]});const a=Pp[e.engagementModel],i=yP[e.billingUnit],o=VG[a.icon],l=c=>c?new Intl.NumberFormat("en-US",{style:"currency",currency:e.currency||"USD"}).format(c):"-";return t.jsxs(P,{children:[t.jsx(W,{className:"pb-3",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center",children:t.jsx(o,{className:"h-5 w-5 text-primary"})}),t.jsxs("div",{children:[t.jsx(V,{className:"text-lg",children:a.label}),t.jsx(ce,{children:a.description})]})]}),t.jsx(T,{variant:"ghost",size:"sm",onClick:n,children:"Edit"})]})}),t.jsxs(M,{children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Billing Unit"}),t.jsx($,{variant:"secondary",children:i.label})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Contract Value"}),t.jsxs("p",{className:"font-semibold flex items-center gap-1",children:[t.jsx(or,{className:"h-4 w-4"}),l(e.contractValue)]})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Deposit"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("p",{className:"font-semibold",children:l(e.depositRequired)}),e.depositRequired&&t.jsx($,{variant:e.depositPaid?"success":"warning",children:e.depositPaid?"Paid":"Pending"})]})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Payment Terms"}),t.jsxs("p",{className:"font-semibold flex items-center gap-1",children:[t.jsx(Zt,{className:"h-4 w-4"}),e.paymentTerms]})]})]}),e.notes&&t.jsx("div",{className:"mt-4 p-3 bg-muted/50 rounded-lg",children:t.jsx("p",{className:"text-sm text-muted-foreground",children:e.notes})})]})]})}const jP=e=>({id:e.id,organizationId:e.organization_id,name:e.name,code:e.code,description:e.description,isActive:e.is_active,createdAt:e.created_at,updatedAt:e.updated_at}),wP=e=>({id:e.id,organizationId:e.organization_id,name:e.name,rateType:e.rate_type,hourlyRate:Number(e.hourly_rate),currency:e.currency,description:e.description,isActive:e.is_active,createdAt:e.created_at,updatedAt:e.updated_at}),KG=e=>({id:e.id,projectId:e.project_id,engagementModel:e.engagement_model,billingUnit:e.billing_unit,contractValue:e.contract_value?Number(e.contract_value):void 0,depositRequired:e.deposit_required?Number(e.deposit_required):void 0,depositPaid:e.deposit_paid,paymentTerms:e.payment_terms,currency:e.currency,notes:e.notes,createdAt:e.created_at,updatedAt:e.updated_at,project:e.project}),GG=e=>({id:e.id,projectId:e.project_id,ticketId:e.ticket_id,userId:e.user_id,serviceCategoryId:e.service_category_id,rateId:e.rate_id,date:e.date,hours:Number(e.hours),description:e.description,isBillable:e.is_billable,isApproved:e.is_approved,approvedBy:e.approved_by,approvedAt:e.approved_at,invoiceId:e.invoice_id,createdAt:e.created_at,updatedAt:e.updated_at,project:e.project,ticket:e.ticket,user:e.profiles,serviceCategory:e.service_category?jP(e.service_category):void 0,rate:e.billing_rate?wP(e.billing_rate):void 0}),YG=e=>({id:e.id,projectId:e.project_id,orderNumber:e.order_number,title:e.title,description:e.description,impactAssessment:e.impact_assessment,additionalCost:Number(e.additional_cost||0),additionalHours:Number(e.additional_hours||0),status:e.status,requestedBy:e.requested_by,approvedBy:e.approved_by,approvedAt:e.approved_at,createdAt:e.created_at,updatedAt:e.updated_at,project:e.project});function QG(){const{company:e}=Ze();return fe({queryKey:["service-categories",e==null?void 0:e.id],queryFn:async()=>{const{data:s,error:r}=await B.from("service_categories").select("*").eq("organization_id",e.id).eq("is_active",!0).order("name");if(r)throw r;return(s||[]).map(n=>jP(n))},enabled:!!(e!=null&&e.id)})}function ZG(){const{company:e}=Ze();return fe({queryKey:["billing-rates",e==null?void 0:e.id],queryFn:async()=>{const{data:s,error:r}=await B.from("billing_rates").select("*").eq("organization_id",e.id).eq("is_active",!0).order("name");if(r)throw r;return(s||[]).map(n=>wP(n))},enabled:!!(e!=null&&e.id)})}function JG(e){return fe({queryKey:["project-billing",e],queryFn:async()=>{const{data:s,error:r}=await B.from("project_billing").select(`
          *,
          project:projects(id, name, status)
        `).eq("project_id",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return KG(s)},enabled:!!e})}function XG(e,s){const{company:r}=Ze();return fe({queryKey:["time-entries",e,s==null?void 0:s.startDate,s==null?void 0:s.endDate],queryFn:async()=>{let n=B.from("time_entries").select(`
          *,
          project:projects(id, name),
          ticket:tickets(id, title),
          profiles:user_id(id, full_name, email),
          service_category:service_categories(id, name, code),
          billing_rate:billing_rates(id, name, hourly_rate, rate_type)
        `).order("date",{ascending:!1});e&&(n=n.eq("project_id",e));const{data:a,error:i}=await n;if(i)throw i;return(a||[]).map(o=>GG(o))},enabled:!!(r!=null&&r.id)})}function eY(e){return fe({queryKey:["change-orders",e],queryFn:async()=>{let s=B.from("change_orders").select(`
          *,
          project:projects(id, name)
        `).order("created_at",{ascending:!1});e&&(s=s.eq("project_id",e));const{data:r,error:n}=await s;if(n)throw n;return(r||[]).map(a=>YG(a))},enabled:!0})}function tY(){const e=ht();return _t({mutationFn:async s=>{const{error:r}=await B.from("project_billing").insert({project_id:s.projectId,engagement_model:s.engagementModel,billing_unit:s.billingUnit,contract_value:s.contractValue,deposit_required:s.depositRequired,payment_terms:s.paymentTerms||"Net 30",notes:s.notes});if(r)throw r},onSuccess:(s,r)=>{e.invalidateQueries({queryKey:["project-billing",r.projectId]}),e.invalidateQueries({queryKey:["company-project-billings"]})}})}function sY(){const e=ht();return _t({mutationFn:async s=>{const{data:r}=await B.auth.getUser();if(!r.user)throw new Error("Not authenticated");const{error:n}=await B.from("time_entries").insert({project_id:s.projectId,ticket_id:s.ticketId,user_id:r.user.id,service_category_id:s.serviceCategoryId,rate_id:s.rateId,date:s.date,hours:s.hours,description:s.description,is_billable:s.isBillable??!0});if(n)throw n},onSuccess:()=>{e.invalidateQueries({queryKey:["time-entries"]})}})}function rY(){const e=ht();return _t({mutationFn:async s=>{const{data:r}=await B.auth.getUser();if(!r.user)throw new Error("Not authenticated");const{error:n}=await B.from("time_entries").update({is_approved:!0,approved_by:r.user.id,approved_at:new Date().toISOString()}).eq("id",s);if(n)throw n},onSuccess:()=>{e.invalidateQueries({queryKey:["time-entries"]})}})}function nY(){const e=ht();return _t({mutationFn:async s=>{const{data:r}=await B.auth.getUser();if(!r.user)throw new Error("Not authenticated");const n=`CO-${Date.now().toString(36).toUpperCase()}`,{error:a}=await B.from("change_orders").insert({project_id:s.projectId,order_number:n,title:s.title,description:s.description,impact_assessment:s.impactAssessment,additional_cost:s.additionalCost||0,additional_hours:s.additionalHours||0,requested_by:r.user.id,status:"draft"});if(a)throw a},onSuccess:()=>{e.invalidateQueries({queryKey:["change-orders"]})}})}function aY(){const e=ht();return _t({mutationFn:async({orderId:s,status:r})=>{const{data:n}=await B.auth.getUser();if(!n.user)throw new Error("Not authenticated");const a={status:r};r==="approved"&&(a.approved_by=n.user.id,a.approved_at=new Date().toISOString());const{error:i}=await B.from("change_orders").update(a).eq("id",s);if(i)throw i},onSuccess:()=>{e.invalidateQueries({queryKey:["change-orders"]})}})}function iY({entries:e,isLoading:s,showProject:r=!1,showApproval:n=!1}){const[a,i]=f.useState(new Set),o=rY(),l=g=>{i(g?new Set(e.filter(x=>!x.isApproved).map(x=>x.id)):new Set)},c=(g,x)=>{const v=new Set(a);x?v.add(g):v.delete(g),i(v)},d=async g=>{try{await o.mutateAsync(g),z.success("Time entry approved")}catch{z.error("Failed to approve time entry")}},u=async()=>{for(const g of a)await d(g);i(new Set)},m=e.reduce((g,x)=>g+x.hours,0),h=e.filter(g=>g.isBillable).reduce((g,x)=>g+x.hours,0),p=e.filter(g=>g.isApproved).reduce((g,x)=>g+x.hours,0);return s?t.jsx("div",{className:"space-y-3",children:[1,2,3].map(g=>t.jsx(je,{className:"h-12 w-full"},g))}):e.length===0?t.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[t.jsx(Oe,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:"No time entries found"})]}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Oe,{className:"h-4 w-4 text-muted-foreground"}),t.jsxs("span",{className:"font-medium",children:[m.toFixed(1),"h total"]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(or,{className:"h-4 w-4 text-primary"}),t.jsxs("span",{children:[h.toFixed(1),"h billable"]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(On,{className:"h-4 w-4 text-primary"}),t.jsxs("span",{children:[p.toFixed(1),"h approved"]})]}),n&&a.size>0&&t.jsxs(T,{size:"sm",variant:"outline",onClick:u,disabled:o.isPending,children:["Approve Selected (",a.size,")"]})]}),t.jsx("div",{className:"border rounded-lg",children:t.jsxs(Rs,{children:[t.jsx(Is,{children:t.jsxs(ot,{children:[n&&t.jsx(ae,{className:"w-10",children:t.jsx(Xo,{checked:e.filter(g=>!g.isApproved).length>0&&a.size===e.filter(g=>!g.isApproved).length,onCheckedChange:l})}),t.jsx(ae,{children:"Date"}),t.jsx(ae,{children:"User"}),r&&t.jsx(ae,{children:"Project"}),t.jsx(ae,{children:"Description"}),t.jsx(ae,{children:"Category"}),t.jsx(ae,{className:"text-right",children:"Hours"}),t.jsx(ae,{children:"Status"}),t.jsx(ae,{className:"w-10"})]})}),t.jsx(Ds,{children:e.map(g=>{var x,v,y;return t.jsxs(ot,{children:[n&&t.jsx(ne,{children:t.jsx(Xo,{checked:a.has(g.id),onCheckedChange:j=>c(g.id,j),disabled:g.isApproved})}),t.jsx(ne,{className:"font-medium",children:pe(new Date(g.date),"MMM d, yyyy")}),t.jsx(ne,{children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(qs,{className:"h-4 w-4 text-muted-foreground"}),t.jsx("span",{className:"text-sm",children:((x=g.user)==null?void 0:x.fullName)||((v=g.user)==null?void 0:v.email)||"Unknown"})]})}),r&&t.jsx(ne,{children:t.jsx("span",{className:"text-sm",children:(y=g.project)==null?void 0:y.name})}),t.jsxs(ne,{className:"max-w-[300px]",children:[t.jsx("p",{className:"truncate text-sm",children:g.description}),g.ticket&&t.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:["Ticket: ",g.ticket.title]})]}),t.jsx(ne,{children:g.serviceCategory?t.jsx($,{variant:"outline",children:g.serviceCategory.name}):t.jsx("span",{className:"text-muted-foreground text-sm",children:"-"})}),t.jsxs(ne,{className:"text-right font-medium",children:[g.hours.toFixed(2),"h"]}),t.jsx(ne,{children:t.jsxs("div",{className:"flex items-center gap-1",children:[g.isBillable?t.jsx($,{variant:"success",className:"text-xs",children:"Billable"}):t.jsx($,{variant:"secondary",className:"text-xs",children:"Non-billable"}),g.isApproved&&t.jsx($,{variant:"default",className:"text-xs",children:"Approved"})]})}),t.jsx(ne,{children:t.jsxs(Ga,{children:[t.jsx(Ya,{asChild:!0,children:t.jsx(T,{variant:"ghost",size:"icon",className:"h-8 w-8",children:t.jsx(dj,{className:"h-4 w-4"})})}),t.jsxs(fa,{align:"end",children:[n&&!g.isApproved&&t.jsxs(mt,{onClick:()=>d(g.id),children:[t.jsx(On,{className:"h-4 w-4 mr-2"}),"Approve"]}),t.jsx(mt,{children:"Edit"}),t.jsx(mt,{className:"text-destructive",children:"Delete"})]})]})})]},g.id)})})]})})]})}const oY={draft:{label:"Draft",variant:"secondary"},submitted:{label:"Submitted",variant:"warning"},approved:{label:"Approved",variant:"success"},rejected:{label:"Rejected",variant:"destructive"},implemented:{label:"Implemented",variant:"default"}};function lY({orders:e,isLoading:s,showProject:r=!1,canApprove:n=!1}){const a=aY(),i=async(d,u)=>{try{await a.mutateAsync({orderId:d,status:u}),z.success(`Change order ${u}`)}catch{z.error("Failed to update change order")}},o=e.reduce((d,u)=>d+u.additionalCost,0),l=e.reduce((d,u)=>d+u.additionalHours,0),c=e.filter(d=>d.status==="submitted").length;return s?t.jsx("div",{className:"space-y-3",children:[1,2,3].map(d=>t.jsx(je,{className:"h-12 w-full"},d))}):e.length===0?t.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[t.jsx(Zt,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:"No change orders"})]}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Zt,{className:"h-4 w-4 text-muted-foreground"}),t.jsxs("span",{className:"font-medium",children:[e.length," orders"]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(or,{className:"h-4 w-4 text-primary"}),t.jsxs("span",{children:["$",o.toLocaleString()," additional"]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Oe,{className:"h-4 w-4 text-primary"}),t.jsxs("span",{children:[l,"h additional"]})]}),c>0&&t.jsxs($,{variant:"warning",className:"flex items-center gap-1",children:[t.jsx(qt,{className:"h-3 w-3"}),c," pending approval"]})]}),t.jsx("div",{className:"border rounded-lg",children:t.jsxs(Rs,{children:[t.jsx(Is,{children:t.jsxs(ot,{children:[t.jsx(ae,{children:"Order #"}),t.jsx(ae,{children:"Title"}),r&&t.jsx(ae,{children:"Project"}),t.jsx(ae,{className:"text-right",children:"Cost"}),t.jsx(ae,{className:"text-right",children:"Hours"}),t.jsx(ae,{children:"Status"}),t.jsx(ae,{children:"Created"}),t.jsx(ae,{className:"w-10"})]})}),t.jsx(Ds,{children:e.map(d=>{var m;const u=oY[d.status];return t.jsxs(ot,{children:[t.jsx(ne,{className:"font-mono text-sm",children:d.orderNumber}),t.jsx(ne,{children:t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:d.title}),d.description&&t.jsx("p",{className:"text-sm text-muted-foreground truncate max-w-[200px]",children:d.description})]})}),r&&t.jsx(ne,{children:t.jsx("span",{className:"text-sm",children:(m=d.project)==null?void 0:m.name})}),t.jsx(ne,{className:"text-right font-medium",children:d.additionalCost>0?t.jsxs("span",{className:"text-primary",children:["+$",d.additionalCost.toLocaleString()]}):"-"}),t.jsx(ne,{className:"text-right font-medium",children:d.additionalHours>0?`+${d.additionalHours}h`:"-"}),t.jsx(ne,{children:t.jsx($,{variant:u.variant,children:u.label})}),t.jsx(ne,{className:"text-sm text-muted-foreground",children:pe(new Date(d.createdAt),"MMM d, yyyy")}),t.jsx(ne,{children:t.jsxs(Ga,{children:[t.jsx(Ya,{asChild:!0,children:t.jsx(T,{variant:"ghost",size:"icon",className:"h-8 w-8",children:t.jsx(dj,{className:"h-4 w-4"})})}),t.jsxs(fa,{align:"end",children:[t.jsx(mt,{children:"View Details"}),d.status==="draft"&&t.jsx(mt,{onClick:()=>i(d.id,"submitted"),children:"Submit for Approval"}),n&&d.status==="submitted"&&t.jsxs(t.Fragment,{children:[t.jsx(za,{}),t.jsxs(mt,{onClick:()=>i(d.id,"approved"),children:[t.jsx(On,{className:"h-4 w-4 mr-2 text-primary"}),"Approve"]}),t.jsxs(mt,{onClick:()=>i(d.id,"rejected"),children:[t.jsx(Ct,{className:"h-4 w-4 mr-2 text-destructive"}),"Reject"]})]}),d.status==="approved"&&t.jsx(mt,{onClick:()=>i(d.id,"implemented"),children:"Mark as Implemented"})]})]})})]},d.id)})})]})})]})}const cY={Target:Yr,Clock:Oe,Settings:Js,Wallet:qf};function dY({model:e,selected:s,onClick:r,disabled:n}){const a=Pp[e],i=cY[a.icon];return t.jsxs(P,{className:J("cursor-pointer transition-all hover:border-primary/50",s&&"border-primary ring-2 ring-primary/20",n&&"opacity-50 cursor-not-allowed"),onClick:n?void 0:r,children:[t.jsxs(W,{className:"pb-2",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center",children:t.jsx(i,{className:"h-5 w-5 text-primary"})}),s&&t.jsxs($,{variant:"default",className:"bg-primary",children:[t.jsx(On,{className:"h-3 w-3 mr-1"}),"Selected"]})]}),t.jsx(V,{className:"text-lg mt-3",children:a.label}),t.jsx(ce,{children:a.description})]}),t.jsxs(M,{children:[e==="fixed_price"&&t.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[t.jsx("li",{children:" Milestone-based invoicing"}),t.jsx("li",{children:" Scope change orders"}),t.jsx("li",{children:" Clear deliverables"})]}),e==="time_materials"&&t.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[t.jsx("li",{children:" Hourly rate billing"}),t.jsx("li",{children:" Time tracking"}),t.jsx("li",{children:" Itemized invoices"})]}),e==="managed_services"&&t.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[t.jsx("li",{children:" Monthly recurring"}),t.jsx("li",{children:" SLA-aligned"}),t.jsx("li",{children:" Tiered pricing"})]}),e==="retainer"&&t.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[t.jsx("li",{children:" Prepaid hours"}),t.jsx("li",{children:" Flexible usage"}),t.jsx("li",{children:" Rollover options"})]})]})]})}const y1={fixed_price:["milestone","per_engagement"],time_materials:["per_hour"],managed_services:["monthly_recurring","per_device","per_site","per_service"],retainer:["per_hour"]};function uY({projectId:e,projectName:s,open:r,onOpenChange:n,onSuccess:a}){const[i,o]=f.useState("model"),[l,c]=f.useState(null),[d,u]=f.useState(null),[m,h]=f.useState(""),[p,g]=f.useState(""),[x,v]=f.useState("Net 30"),[y,j]=f.useState(""),w=tY(),b=k=>{c(k),u(y1[k][0])},N=()=>{if(!l){z.error("Please select an engagement model");return}o("details")},_=()=>{o("model")},C=async()=>{if(!l||!d){z.error("Please complete all required fields");return}try{await w.mutateAsync({projectId:e,engagementModel:l,billingUnit:d,contractValue:m?parseFloat(m):void 0,depositRequired:p?parseFloat(p):void 0,paymentTerms:x,notes:y||void 0}),z.success("Billing configuration saved"),n(!1),a==null||a(),o("model"),c(null),u(null),h(""),g(""),v("Net 30"),j("")}catch{z.error("Failed to save billing configuration")}},E=l?y1[l]:[];return t.jsx(Xt,{open:r,onOpenChange:n,children:t.jsxs(zt,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",preventClose:!0,children:[t.jsxs(es,{children:[t.jsxs(ts,{children:["Configure Billing for ",s]}),t.jsx(ss,{children:i==="model"?"Select the engagement model that best fits this project":"Configure billing details and payment terms"})]}),i==="model"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["fixed_price","time_materials","managed_services","retainer"].map(k=>t.jsx(dY,{model:k,selected:l===k,onClick:()=>b(k)},k))}),t.jsx("div",{className:"flex justify-end pt-4",children:t.jsx(T,{onClick:N,disabled:!l,children:"Continue"})})]}),i==="details"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"billingUnit",children:"Billing Unit *"}),t.jsxs($e,{value:d||"",onValueChange:k=>u(k),children:[t.jsx(Le,{children:t.jsx(Ue,{placeholder:"Select billing unit"})}),t.jsx(Fe,{children:E.map(k=>t.jsx(Z,{value:k,children:yP[k].label},k))})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"paymentTerms",children:"Payment Terms"}),t.jsxs($e,{value:x,onValueChange:v,children:[t.jsx(Le,{children:t.jsx(Ue,{})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"Net 15",children:"Net 15"}),t.jsx(Z,{value:"Net 30",children:"Net 30"}),t.jsx(Z,{value:"Net 45",children:"Net 45"}),t.jsx(Z,{value:"Net 60",children:"Net 60"}),t.jsx(Z,{value:"Due on Receipt",children:"Due on Receipt"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"contractValue",children:"Contract Value (USD)"}),t.jsx(se,{id:"contractValue",type:"number",placeholder:"0.00",value:m,onChange:k=>h(k.target.value)})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"depositRequired",children:"Deposit Required (USD)"}),t.jsx(se,{id:"depositRequired",type:"number",placeholder:"0.00",value:p,onChange:k=>g(k.target.value)})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"notes",children:"Notes"}),t.jsx(Bt,{id:"notes",placeholder:"Additional billing notes or special terms...",value:y,onChange:k=>j(k.target.value),rows:3})]}),t.jsxs("div",{className:"flex justify-between pt-4",children:[t.jsx(T,{variant:"outline",onClick:_,children:"Back"}),t.jsxs(T,{onClick:C,disabled:w.isPending,children:[w.isPending&&t.jsx(Ie,{className:"h-4 w-4 mr-2 animate-spin"}),"Save Configuration"]})]})]})]})})}function hY({projectId:e,projectName:s,ticketId:r,ticketTitle:n,open:a,onOpenChange:i,onSuccess:o}){const[l,c]=f.useState(new Date),[d,u]=f.useState(""),[m,h]=f.useState(""),[p,g]=f.useState(""),[x,v]=f.useState(""),[y,j]=f.useState(!0),{data:w}=QG(),{data:b}=ZG(),N=sY(),_=async()=>{if(!d||!m){z.error("Please fill in hours and description");return}const C=parseFloat(d);if(isNaN(C)||C<=0||C>24){z.error("Please enter valid hours (0-24)");return}try{await N.mutateAsync({projectId:e,ticketId:r,date:pe(l,"yyyy-MM-dd"),hours:C,description:m,serviceCategoryId:p||void 0,rateId:x||void 0,isBillable:y}),z.success("Time entry logged"),i(!1),o==null||o(),c(new Date),u(""),h(""),g(""),v(""),j(!0)}catch{z.error("Failed to log time entry")}};return t.jsx(Xt,{open:a,onOpenChange:i,children:t.jsxs(zt,{className:"max-w-lg",preventClose:!0,children:[t.jsxs(es,{children:[t.jsx(ts,{children:"Log Time Entry"}),t.jsx(ss,{children:n?`Record time for ticket: ${n}`:`Record time for project: ${s}`})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Date *"}),t.jsxs(mf,{children:[t.jsx(ff,{asChild:!0,children:t.jsxs(T,{variant:"outline",className:J("w-full justify-start text-left font-normal",!l&&"text-muted-foreground"),children:[t.jsx(Lr,{className:"mr-2 h-4 w-4"}),l?pe(l,"PPP"):"Pick a date"]})}),t.jsx(Cu,{className:"w-auto p-0",align:"start",children:t.jsx(Nw,{mode:"single",selected:l,onSelect:C=>C&&c(C),initialFocus:!0})})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"hours",children:"Hours *"}),t.jsx(se,{id:"hours",type:"number",step:"0.25",min:"0.25",max:"24",placeholder:"0.00",value:d,onChange:C=>u(C.target.value)})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Service Category"}),t.jsxs($e,{value:p,onValueChange:g,children:[t.jsx(Le,{children:t.jsx(Ue,{placeholder:"Select category"})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"",children:"No category"}),w==null?void 0:w.map(C=>t.jsx(Z,{value:C.id,children:C.name},C.id))]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Billing Rate"}),t.jsxs($e,{value:x,onValueChange:v,children:[t.jsx(Le,{children:t.jsx(Ue,{placeholder:"Select rate"})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"",children:"Default rate"}),b==null?void 0:b.map(C=>t.jsxs(Z,{value:C.id,children:[C.name," ($",C.hourlyRate,"/hr)"]},C.id))]})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"description",children:"Description *"}),t.jsx(Bt,{id:"description",placeholder:"What did you work on?",value:m,onChange:C=>h(C.target.value),rows:3})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(nt,{id:"billable",checked:y,onCheckedChange:j}),t.jsx(O,{htmlFor:"billable",children:"Billable"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(T,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),t.jsxs(T,{onClick:_,disabled:N.isPending,children:[N.isPending&&t.jsx(Ie,{className:"h-4 w-4 mr-2 animate-spin"}),"Log Time"]})]})]})]})]})})}function mY({projectId:e,projectName:s,open:r,onOpenChange:n,onSuccess:a}){const[i,o]=f.useState(""),[l,c]=f.useState(""),[d,u]=f.useState(""),[m,h]=f.useState(""),[p,g]=f.useState(""),x=nY(),v=async()=>{if(!i){z.error("Please provide a title");return}try{await x.mutateAsync({projectId:e,title:i,description:l||void 0,impactAssessment:d||void 0,additionalCost:m?parseFloat(m):void 0,additionalHours:p?parseFloat(p):void 0}),z.success("Change order created"),n(!1),a==null||a(),o(""),c(""),u(""),h(""),g("")}catch{z.error("Failed to create change order")}};return t.jsx(Xt,{open:r,onOpenChange:n,children:t.jsxs(zt,{className:"max-w-lg",preventClose:!0,children:[t.jsxs(es,{children:[t.jsx(ts,{children:"New Change Order"}),t.jsxs(ss,{children:["Create a scope change request for ",s]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"title",children:"Title *"}),t.jsx(se,{id:"title",placeholder:"Brief description of the change",value:i,onChange:y=>o(y.target.value)})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"description",children:"Description"}),t.jsx(Bt,{id:"description",placeholder:"Detailed description of the scope change...",value:l,onChange:y=>c(y.target.value),rows:3})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"impact",children:"Impact Assessment"}),t.jsx(Bt,{id:"impact",placeholder:"How will this change affect timelines, resources, or deliverables?",value:d,onChange:y=>u(y.target.value),rows:2})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"additionalCost",children:"Additional Cost (USD)"}),t.jsx(se,{id:"additionalCost",type:"number",placeholder:"0.00",value:m,onChange:y=>h(y.target.value)})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"additionalHours",children:"Additional Hours"}),t.jsx(se,{id:"additionalHours",type:"number",placeholder:"0",value:p,onChange:y=>g(y.target.value)})]})]}),t.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[t.jsx(T,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),t.jsxs(T,{onClick:v,disabled:x.isPending,children:[x.isPending&&t.jsx(Ie,{className:"h-4 w-4 mr-2 animate-spin"}),"Create Change Order"]})]})]})]})})}function fY(){const{id:e}=ma(),s=Qe(),{isCompanyAdmin:r,isInfraweaveAdmin:n}=Ze(),[a,i]=f.useState(!1),[o,l]=f.useState(!1),[c,d]=f.useState(!1),{data:u,isLoading:m}=fe({queryKey:["project",e],queryFn:async()=>{const{data:E,error:k}=await B.from("projects").select("id, name, status, organization_id").eq("id",e).single();if(k)throw k;return E},enabled:!!e}),{data:h,isLoading:p,refetch:g}=JG(e),{data:x,isLoading:v}=XG(e),{data:y,isLoading:j}=eY(e),w=r||n,b=(x||[]).filter(E=>E.isBillable).reduce((E,k)=>E+k.hours,0),N=(x||[]).filter(E=>E.isApproved).reduce((E,k)=>E+k.hours,0),_=(y||[]).filter(E=>E.status==="submitted").length,C=(y||[]).filter(E=>E.status==="approved"||E.status==="implemented").reduce((E,k)=>E+k.additionalCost,0);return m?t.jsx(we,{children:t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsx(je,{className:"h-10 w-64"}),t.jsx(je,{className:"h-48 w-full"})]})}):u?t.jsxs(we,{children:[t.jsx(qn,{title:`${u.name} - Billing`,subtitle:"Manage project billing, time tracking, and change orders",customAction:t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs(T,{variant:"outline",onClick:()=>s(`/projects/${e}`),children:[t.jsx(Ft,{className:"h-4 w-4 mr-2"}),"Back to Project"]})})}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsx(HG,{billing:h,isLoading:p,onSetup:()=>i(!0),onEdit:()=>i(!0)}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx(P,{children:t.jsxs(W,{className:"pb-2",children:[t.jsx(ce,{children:"Billable Hours"}),t.jsxs(V,{className:"text-2xl flex items-center gap-2",children:[t.jsx(Oe,{className:"h-5 w-5 text-primary"}),b.toFixed(1),"h"]})]})}),t.jsx(P,{children:t.jsxs(W,{className:"pb-2",children:[t.jsx(ce,{children:"Approved Hours"}),t.jsxs(V,{className:"text-2xl flex items-center gap-2",children:[t.jsx(Lr,{className:"h-5 w-5 text-green-500"}),N.toFixed(1),"h"]})]})}),t.jsx(P,{children:t.jsxs(W,{className:"pb-2",children:[t.jsx(ce,{children:"Pending Change Orders"}),t.jsxs(V,{className:"text-2xl flex items-center gap-2",children:[t.jsx(Zt,{className:"h-5 w-5 text-amber-500"}),_]})]})}),t.jsx(P,{children:t.jsxs(W,{className:"pb-2",children:[t.jsx(ce,{children:"Approved Changes Value"}),t.jsxs(V,{className:"text-2xl flex items-center gap-2",children:[t.jsx(or,{className:"h-5 w-5 text-green-500"}),"$",C.toLocaleString()]})]})})]}),t.jsxs(kt,{defaultValue:"time",className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs(St,{children:[t.jsx(he,{value:"time",children:"Time Entries"}),t.jsx(he,{value:"changes",children:"Change Orders"}),t.jsx(he,{value:"invoices",children:"Invoices"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(T,{variant:"outline",size:"sm",children:[t.jsx($a,{className:"h-4 w-4 mr-2"}),"Export"]}),t.jsxs(T,{size:"sm",onClick:()=>l(!0),children:[t.jsx(at,{className:"h-4 w-4 mr-2"}),"Log Time"]}),w&&t.jsxs(T,{size:"sm",variant:"secondary",onClick:()=>d(!0),children:[t.jsx(at,{className:"h-4 w-4 mr-2"}),"Change Order"]})]})]}),t.jsx(Ce,{value:"time",children:t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsx(V,{children:"Time Entries"}),t.jsx(ce,{children:"Track and approve time spent on this project"})]}),t.jsx(M,{children:t.jsx(iY,{entries:x||[],isLoading:v,showApproval:w})})]})}),t.jsx(Ce,{value:"changes",children:t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsx(V,{children:"Change Orders"}),t.jsx(ce,{children:"Manage scope changes and their impact on billing"})]}),t.jsx(M,{children:t.jsx(lY,{orders:y||[],isLoading:j,canApprove:w})})]})}),t.jsx(Ce,{value:"invoices",children:t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsx(V,{children:"Invoices"}),t.jsx(ce,{children:"View and manage invoices for this project"})]}),t.jsx(M,{children:t.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[t.jsx(Zt,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:"Invoice management coming soon"})]})})]})})]})]}),t.jsx(uY,{projectId:e,projectName:u.name,open:a,onOpenChange:i,onSuccess:()=>g()}),t.jsx(hY,{projectId:e,projectName:u.name,open:o,onOpenChange:l}),t.jsx(mY,{projectId:e,projectName:u.name,open:c,onOpenChange:d})]}):t.jsx(we,{children:t.jsxs("div",{className:"p-6",children:[t.jsx("p",{className:"text-muted-foreground",children:"Project not found"}),t.jsx(T,{variant:"link",onClick:()=>s(-1),children:"Go back"})]})})}const pY=Vs().email("Please enter a valid email address");function xY({companyId:e,companyName:s,onSuccess:r}){var w;const{user:n}=ft(),{company:a,isCompanyAdmin:i}=Ze(),[o,l]=f.useState(!1),[c,d]=f.useState(!1),[u,m]=f.useState(""),[h,p]=f.useState("engineer"),g=e||(a==null?void 0:a.id),x=s||(a==null?void 0:a.name)||"the company",v=((w=n==null?void 0:n.user_metadata)==null?void 0:w.full_name)||(n==null?void 0:n.email)||"An admin";if(!i)return null;const y=async b=>{b.preventDefault();try{pY.parse(u)}catch(N){if(N instanceof lr){z.error(N.errors[0].message);return}}if(!g){z.error("No company selected");return}d(!0);try{const{data:N,error:_}=await B.functions.invoke("send-invitation",{body:{email:u.trim().toLowerCase(),role:h,companyId:g,companyName:x,inviterName:v}});if(_)throw new Error(_.message||"Failed to send invitation");if(N!=null&&N.error)throw new Error(N.error);z.success(`Invitation sent to ${u}`),m(""),p("engineer"),l(!1),r==null||r()}catch(N){z.error(N.message||"Failed to send invitation")}finally{d(!1)}},j={company_admin:"Full access to manage team, projects, billing, and all company settings",engineer:"Can work on assigned projects and tickets only"};return t.jsxs(Xt,{open:o,onOpenChange:l,children:[t.jsx($r,{asChild:!0,children:t.jsxs(T,{children:[t.jsx(Wu,{className:"mr-2 h-4 w-4"}),"Invite User"]})}),t.jsxs(zt,{className:"sm:max-w-md",preventClose:!0,children:[t.jsxs(es,{children:[t.jsx(ts,{children:"Invite Team Member"}),t.jsxs(ss,{children:["Send an invitation email to add a new member to ",x,"."]})]}),t.jsxs("form",{onSubmit:y,className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"email",children:"Email Address"}),t.jsxs("div",{className:"relative",children:[t.jsx(ys,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t.jsx(se,{id:"email",type:"email",placeholder:"user@example.com",value:u,onChange:b=>m(b.target.value),className:"pl-10",required:!0})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"role",children:"Role"}),t.jsxs($e,{value:h,onValueChange:b=>p(b),children:[t.jsx(Le,{children:t.jsx(Ue,{})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"engineer",children:"Engineer"}),t.jsx(Z,{value:"company_admin",children:"Company Admin"})]})]}),t.jsx("p",{className:"text-xs text-muted-foreground",children:j[h]})]}),t.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[t.jsx(T,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancel"}),t.jsx(T,{type:"submit",disabled:c,children:c?t.jsxs(t.Fragment,{children:[t.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):"Send Invitation"})]})]})]})]})}function gY(){const{user:e}=ft(),{isCompanyAdmin:s,company:r,isLoading:n}=Ze(),{data:a=[],isLoading:i}=Y4(),{data:o=[],isLoading:l}=Wz(),[c,d]=f.useState(""),[u,m]=f.useState(null),[h,p]=f.useState(!1),g=ht();if(n||i)return t.jsx(we,{children:t.jsx("div",{className:"p-6",children:"Loading..."})});if(!s)return t.jsx(we,{children:t.jsxs("div",{className:"p-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-destructive",children:"Access Denied"}),t.jsx("p",{className:"text-muted-foreground",children:"Only Company Admins can manage team members."})]})});const x=a.filter(C=>{var E,k,A,L;return((k=(E=C.user)==null?void 0:E.fullName)==null?void 0:k.toLowerCase().includes(c.toLowerCase()))||((L=(A=C.user)==null?void 0:A.email)==null?void 0:L.toLowerCase().includes(c.toLowerCase()))}),v=o.filter(C=>C.status==="pending"),y=a.filter(C=>C.role==="company_admin"),j=a.filter(C=>C.role==="engineer"),w=async C=>{const{error:E}=await B.from("invitations").update({status:"cancelled"}).eq("id",C);E?z.error("Failed to cancel invitation"):(z.success("Invitation cancelled"),g.invalidateQueries({queryKey:["company-invitations"]}))},b=()=>{g.invalidateQueries({queryKey:["company-invitations"]}),g.invalidateQueries({queryKey:["company-members"]})},N=async()=>{if(u){p(!0);try{const{error:C}=await B.from("company_members").update({is_active:!1}).eq("id",u.id);if(C)throw C;z.success(`${u.name||u.email} has been removed from the team`),g.invalidateQueries({queryKey:["company-members"]})}catch(C){console.error("Error removing member:",C),z.error(C.message||"Failed to remove member")}finally{p(!1),m(null)}}},_=C=>{var E,k;m({id:C.id,userId:C.userId,name:((E=C.user)==null?void 0:E.fullName)||"",email:((k=C.user)==null?void 0:k.email)||""})};return t.jsx(we,{children:t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Team Management"}),t.jsxs("p",{className:"text-muted-foreground",children:["Manage team members for ",r==null?void 0:r.name]})]}),t.jsx(xY,{onSuccess:b})]}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Total Members"}),t.jsx(Kt,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsx(M,{children:t.jsx("div",{className:"text-2xl font-bold",children:a.length})})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Company Admins"}),t.jsx(us,{className:"h-4 w-4 text-primary"})]}),t.jsx(M,{children:t.jsx("div",{className:"text-2xl font-bold",children:y.length})})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Engineers"}),t.jsx(Kt,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsx(M,{children:t.jsx("div",{className:"text-2xl font-bold",children:j.length})})]}),t.jsxs(P,{children:[t.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Pending Invites"}),t.jsx(Oe,{className:"h-4 w-4 text-yellow-500"})]}),t.jsx(M,{children:t.jsx("div",{className:"text-2xl font-bold",children:v.length})})]})]}),v.length>0&&t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsxs(V,{className:"flex items-center gap-2",children:[t.jsx(Oe,{className:"h-5 w-5 text-yellow-500"}),"Pending Invitations"]}),t.jsx(ce,{children:"Invitations that have been sent but not yet accepted"})]}),t.jsx(M,{children:t.jsx("div",{className:"space-y-3",children:v.map(C=>t.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-border bg-muted/30",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"h-10 w-10 rounded-full bg-yellow-500/10 flex items-center justify-center",children:t.jsx(ys,{className:"h-5 w-5 text-yellow-500"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:C.email}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Invited as ",C.role==="company_admin"?"Company Admin":"Engineer"]})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"text-right",children:[t.jsx($,{variant:"outline",className:"text-yellow-500 border-yellow-500/50",children:"Pending"}),t.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Expires ",pe(new Date(C.expires_at),"MMM d, yyyy")]})]}),t.jsx(T,{variant:"ghost",size:"sm",onClick:()=>w(C.id),children:t.jsx(Nc,{className:"h-4 w-4 text-destructive"})})]})]},C.id))})})]}),t.jsxs("div",{className:"relative max-w-md",children:[t.jsx(ns,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t.jsx(se,{placeholder:"Search members...",value:c,onChange:C=>d(C.target.value),className:"pl-9"})]}),t.jsxs(P,{children:[t.jsxs(W,{children:[t.jsx(V,{children:"Team Members"}),t.jsx(ce,{children:"All members of your company with their roles and status"})]}),t.jsx(M,{children:t.jsx("div",{className:"space-y-3",children:x.length===0?t.jsx("p",{className:"text-muted-foreground text-center py-8",children:c?"No members found matching your search":"No team members yet"}):x.map(C=>{var E,k,A,L,H,F,I,G;return t.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-border",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs(Tt,{className:"h-10 w-10",children:[t.jsx(Ps,{src:(E=C.user)==null?void 0:E.avatarUrl}),t.jsx(Pt,{className:"bg-primary/10 text-primary",children:((A=(k=C.user)==null?void 0:k.fullName)==null?void 0:A.substring(0,2).toUpperCase())||((H=(L=C.user)==null?void 0:L.email)==null?void 0:H.substring(0,2).toUpperCase())||"U"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:((F=C.user)==null?void 0:F.fullName)||"Unknown User"}),t.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[t.jsx(ys,{className:"h-3 w-3"}),(I=C.user)==null?void 0:I.email]})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"text-right",children:[t.jsx($,{variant:C.role==="company_admin"?"default":"secondary",className:"mb-1",children:C.role==="company_admin"?"Admin":"Engineer"}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Joined ",C.joinedAt?pe(new Date(C.joinedAt),"MMM d, yyyy"):"Pending"]})]}),t.jsxs(Ga,{children:[t.jsx(Ya,{asChild:!0,children:t.jsx(T,{variant:"ghost",size:"sm",children:t.jsx($f,{className:"h-4 w-4"})})}),t.jsxs(fa,{align:"end",children:[t.jsxs(mt,{children:[t.jsx(us,{className:"mr-2 h-4 w-4"}),"Change Role"]}),t.jsx(za,{}),t.jsx(iP,{defaultEmail:((G=C.user)==null?void 0:G.email)||"",triggerButton:t.jsxs(mt,{onSelect:ee=>ee.preventDefault(),children:[t.jsx(Bo,{className:"mr-2 h-4 w-4"}),"Reset Password"]})}),t.jsx(za,{}),t.jsxs(mt,{className:"text-destructive",disabled:C.userId===(e==null?void 0:e.id),onClick:()=>_(C),children:[t.jsx(FO,{className:"mr-2 h-4 w-4"}),C.userId===(e==null?void 0:e.id)?"Can't remove yourself":"Remove Member"]})]})]})]})]},C.id)})})})]}),t.jsx(cn,{open:!!u,onOpenChange:C=>!C&&m(null),children:t.jsxs(Ur,{className:"bg-card border-border",children:[t.jsxs(Br,{children:[t.jsx(qr,{children:"Remove Team Member"}),t.jsxs(Wr,{children:["Are you sure you want to remove"," ",t.jsx("span",{className:"font-medium text-foreground",children:(u==null?void 0:u.name)||(u==null?void 0:u.email)})," ","from your team? They will lose access to all company projects and data."]})]}),t.jsxs(zr,{children:[t.jsx(Hr,{disabled:h,children:"Cancel"}),t.jsx(Vr,{onClick:N,disabled:h,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:h?t.jsxs(t.Fragment,{children:[t.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Removing..."]}):"Remove Member"})]})]})})]})})}function vY(){const{user:e}=ft(),{company:s}=Ze();return fe({queryKey:["my-projects",e==null?void 0:e.id,s==null?void 0:s.id],queryFn:async()=>{if(!(e!=null&&e.id)||!(s!=null&&s.id))return[];const{data:r,error:n}=await B.from("project_members").select("project_id").eq("user_id",e.id);if(n)throw n;const a=(r==null?void 0:r.map(l=>l.project_id))||[];if(a.length===0){const{data:l,error:c}=await B.from("projects").select("*").eq("organization_id",s.id).order("created_at",{ascending:!1});if(c)throw c;return l||[]}const{data:i,error:o}=await B.from("projects").select("*").in("id",a).eq("organization_id",s.id).order("created_at",{ascending:!1});if(o)throw o;return i||[]},enabled:!!(e!=null&&e.id)&&!!(s!=null&&s.id)})}function yY(){const{user:e}=ft(),{company:s}=Ze();return fe({queryKey:["my-tickets",e==null?void 0:e.id,s==null?void 0:s.id],queryFn:async()=>{if(!(e!=null&&e.id)||!(s!=null&&s.id))return[];const{data:r,error:n}=await B.from("tickets").select("*").eq("organization_id",s.id).or(`assigned_to.eq.${e.id},reporter_id.eq.${e.id}`).order("created_at",{ascending:!1});if(n)throw n;return r||[]},enabled:!!(e!=null&&e.id)&&!!(s!=null&&s.id)})}function jY(){const{company:e,isLoading:s}=Ze(),{data:r=[],isLoading:n}=vY(),a=Qe(),[i,o]=f.useState(""),[l,c]=f.useState("all"),d=r.filter(m=>{var g;const h=m.name.toLowerCase().includes(i.toLowerCase())||(((g=m.description)==null?void 0:g.toLowerCase().includes(i.toLowerCase()))??!1),p=l==="all"||m.status===l;return h&&p}),u=m=>{switch(m){case"critical":return t.jsx(fs,{className:"h-4 w-4 text-destructive"});case"at_risk":return t.jsx(fs,{className:"h-4 w-4 text-warning"});case"healthy":return t.jsx(vt,{className:"h-4 w-4 text-success"});default:return t.jsx(Oe,{className:"h-4 w-4 text-muted-foreground"})}};return s||n?t.jsx(we,{children:t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsx(je,{className:"h-8 w-48"}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx(je,{className:"h-10 w-64"}),t.jsx(je,{className:"h-10 w-32"})]}),t.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((m,h)=>t.jsx(je,{className:"h-48"},h))})]})}):t.jsx(we,{children:t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"My Projects"}),t.jsxs("p",{className:"text-muted-foreground",children:["Projects you're assigned to at ",(e==null?void 0:e.name)||"your company"]})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[t.jsxs("div",{className:"relative flex-1 max-w-md",children:[t.jsx(ns,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t.jsx(se,{placeholder:"Search projects...",value:i,onChange:m=>o(m.target.value),className:"pl-9"})]}),t.jsxs($e,{value:l,onValueChange:c,children:[t.jsx(Le,{className:"w-[150px]",children:t.jsx(Ue,{placeholder:"Status"})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"all",children:"All Status"}),t.jsx(Z,{value:"active",children:"Active"}),t.jsx(Z,{value:"draft",children:"Draft"}),t.jsx(Z,{value:"completed",children:"Completed"}),t.jsx(Z,{value:"archived",children:"Archived"})]})]})]}),d.length>0?t.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:d.map(m=>t.jsxs(P,{className:"cursor-pointer hover:border-primary transition-colors",onClick:()=>a(`/projects/${m.id}`),children:[t.jsxs(W,{className:"pb-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx($,{variant:"secondary",children:m.status}),t.jsxs("div",{className:"flex items-center gap-1",children:[u(m.health||"healthy"),t.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:m.health||"healthy"})]})]}),t.jsx(V,{className:"text-lg",children:m.name}),t.jsx(ce,{className:"line-clamp-2",children:m.description||"No description"})]}),t.jsx(M,{children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground mb-1",children:[t.jsx("span",{children:"Progress"}),t.jsxs("span",{children:[m.progress_percent||0,"%"]})]}),t.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:t.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${m.progress_percent||0}%`}})})]}),t.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[t.jsxs("span",{children:["Started: ",m.start_date?pe(new Date(m.start_date),"MMM d, yyyy"):"Not set"]}),m.target_end_date&&t.jsxs("span",{children:["Due: ",pe(new Date(m.target_end_date),"MMM d, yyyy")]})]})]})})]},m.id))}):t.jsx(P,{children:t.jsxs(M,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(bt,{className:"h-12 w-12 text-muted-foreground mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No Projects Found"}),t.jsx("p",{className:"text-muted-foreground text-center max-w-md",children:i||l!=="all"?"No projects match your search criteria. Try adjusting your filters.":"You haven't been assigned to any projects yet. Contact your company admin for project assignments."})]})})]})})}const Jx={epic:{icon:t.jsx(_c,{className:"h-4 w-4"}),color:"bg-purple-500/10 text-purple-500"},story:{icon:t.jsx(ir,{className:"h-4 w-4"}),color:"bg-blue-500/10 text-blue-500"},bug:{icon:t.jsx(Wc,{className:"h-4 w-4"}),color:"bg-red-500/10 text-red-500"},monitoring:{icon:t.jsx(Fa,{className:"h-4 w-4"}),color:"bg-green-500/10 text-green-500"}},wY={low:"bg-secondary text-secondary-foreground",medium:"bg-info/10 text-info",high:"bg-warning/10 text-warning",critical:"bg-destructive/10 text-destructive"},bY={open:"bg-info/10 text-info",in_progress:"bg-warning/10 text-warning",waiting_customer:"bg-secondary text-secondary-foreground",waiting_internal:"bg-secondary text-secondary-foreground",resolved:"bg-success/10 text-success",closed:"bg-muted text-muted-foreground"};function NY(){const{company:e,isLoading:s}=Ze(),{user:r}=ft(),{data:n=[],isLoading:a}=yY(),i=Qe(),[o,l]=f.useState(""),[c,d]=f.useState("all"),[u,m]=f.useState("all"),[h,p]=f.useState("all"),[g,x]=f.useState("all"),[v,y]=f.useState(!1),j=n.filter(C=>{var F;const E=C.title.toLowerCase().includes(o.toLowerCase())||(((F=C.description)==null?void 0:F.toLowerCase().includes(o.toLowerCase()))??!1),k=c==="all"||C.status===c,A=u==="all"||C.priority===u,L=h==="all"||C.category===h;let H=!0;return g==="assigned"?H=C.assigned_to===(r==null?void 0:r.id):g==="created"?H=C.reporter_id===(r==null?void 0:r.id):g==="open"&&(H=C.status==="open"||C.status==="in_progress"),E&&k&&A&&L&&H}),w=n.filter(C=>C.assigned_to===(r==null?void 0:r.id)).length,b=n.filter(C=>C.reporter_id===(r==null?void 0:r.id)).length,N=n.filter(C=>C.status==="open"||C.status==="in_progress").length,_=C=>{switch(C){case"critical":return t.jsx(fs,{className:"h-4 w-4 text-destructive"});case"high":return t.jsx(fs,{className:"h-4 w-4 text-warning"});default:return t.jsx(Oe,{className:"h-4 w-4 text-muted-foreground"})}};return s||a?t.jsx(we,{children:t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsx(je,{className:"h-8 w-48"}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx(je,{className:"h-10 w-64"}),t.jsx(je,{className:"h-10 w-32"}),t.jsx(je,{className:"h-10 w-32"})]}),t.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((C,E)=>t.jsx(je,{className:"h-20"},E))})]})}):t.jsx(we,{children:t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"My Tickets"}),t.jsxs("p",{className:"text-muted-foreground",children:["Tickets assigned to you or created by you at ",(e==null?void 0:e.name)||"your company"]})]}),t.jsxs(T,{onClick:()=>y(!0),children:[t.jsx(at,{className:"h-4 w-4 mr-2"}),"New Ticket"]})]}),t.jsx(Cw,{open:v,onOpenChange:y}),t.jsxs(kt,{value:g,onValueChange:x,children:[t.jsxs(St,{children:[t.jsxs(he,{value:"all",children:["All",t.jsx($,{variant:"secondary",className:"ml-2",children:n.length})]}),t.jsxs(he,{value:"assigned",children:["Assigned to Me",t.jsx($,{variant:"secondary",className:"ml-2",children:w})]}),t.jsxs(he,{value:"created",children:["Created by Me",t.jsx($,{variant:"secondary",className:"ml-2",children:b})]}),t.jsxs(he,{value:"open",children:["Open",t.jsx($,{variant:"secondary",className:"ml-2",children:N})]})]}),t.jsxs(Ce,{value:g,className:"space-y-4 mt-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[t.jsxs("div",{className:"relative flex-1 max-w-md",children:[t.jsx(ns,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t.jsx(se,{placeholder:"Search tickets...",value:o,onChange:C=>l(C.target.value),className:"pl-9"})]}),t.jsxs($e,{value:c,onValueChange:d,children:[t.jsx(Le,{className:"w-[150px]",children:t.jsx(Ue,{placeholder:"Status"})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"all",children:"All Status"}),t.jsx(Z,{value:"open",children:"Open"}),t.jsx(Z,{value:"in_progress",children:"In Progress"}),t.jsx(Z,{value:"waiting_customer",children:"Waiting Customer"}),t.jsx(Z,{value:"waiting_internal",children:"Waiting Internal"}),t.jsx(Z,{value:"resolved",children:"Resolved"}),t.jsx(Z,{value:"closed",children:"Closed"})]})]}),t.jsxs($e,{value:u,onValueChange:m,children:[t.jsx(Le,{className:"w-[150px]",children:t.jsx(Ue,{placeholder:"Priority"})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"all",children:"All Priority"}),t.jsx(Z,{value:"low",children:"Low"}),t.jsx(Z,{value:"medium",children:"Medium"}),t.jsx(Z,{value:"high",children:"High"}),t.jsx(Z,{value:"critical",children:"Critical"})]})]}),t.jsxs($e,{value:h,onValueChange:p,children:[t.jsx(Le,{className:"w-[150px]",children:t.jsx(Ue,{placeholder:"Category"})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"all",children:"All Categories"}),t.jsx(Z,{value:"epic",children:"Epic"}),t.jsx(Z,{value:"story",children:"Story"}),t.jsx(Z,{value:"bug",children:"Bug"}),t.jsx(Z,{value:"monitoring",children:"Monitoring"})]})]})]}),j.length>0?t.jsx("div",{className:"space-y-3",children:j.map(C=>t.jsx(P,{className:"cursor-pointer hover:border-primary transition-colors",onClick:()=>i(`/tickets/${C.id}`),children:t.jsx(M,{className:"p-4",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[_(C.priority),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"font-medium text-foreground truncate",children:C.title}),t.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:C.description||"No description"}),t.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[t.jsxs("span",{children:["Created ",pe(new Date(C.created_at),"MMM d, yyyy")]}),C.assigned_to===(r==null?void 0:r.id)&&t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(qs,{className:"h-3 w-3"}),"Assigned to you"]}),C.reporter_id===(r==null?void 0:r.id)&&t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(vt,{className:"h-3 w-3"}),"Created by you"]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[C.category&&Jx[C.category]&&t.jsx($,{className:Jx[C.category].color,children:t.jsxs("span",{className:"flex items-center gap-1",children:[Jx[C.category].icon,C.category]})}),t.jsx($,{className:wY[C.priority],children:C.priority}),t.jsx($,{className:bY[C.status],children:C.status.replace("_"," ")})]})]})})},C.id))}):t.jsx(P,{children:t.jsxs(M,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(rt,{className:"h-12 w-12 text-muted-foreground mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No Tickets Found"}),t.jsx("p",{className:"text-muted-foreground text-center max-w-md",children:o||c!=="all"||u!=="all"?"No tickets match your search criteria. Try adjusting your filters.":"You don't have any tickets yet. Tickets assigned to you or created by you will appear here."})]})})]})]})]})})}function CY(){const{user:e}=ft(),{data:s,isLoading:r}=fe({queryKey:["user-role",e==null?void 0:e.id],queryFn:async()=>{if(!(e!=null&&e.id))return null;const{data:c,error:d}=await B.from("user_roles").select("role").eq("user_id",e.id).maybeSingle();return d?(console.error("Error fetching user role:",d),null):c==null?void 0:c.role},enabled:!!(e!=null&&e.id)}),n=s==="admin",a=s==="manager"||n,i=s==="support"||a;return{role:s,isAdmin:n,isManager:a,isSupport:i,isViewer:s==="viewer"||i,hasRole:c=>{if(!s)return!1;const d={admin:4,manager:3,support:2,viewer:1};return d[s]>=d[c]},isLoading:r}}const _Y=[{name:"Dashboard",href:"/",icon:Wa},{name:"Projects",href:"/projects",icon:bt},{name:"Tickets",href:"/tickets",icon:rt,badge:25},{name:"Team",href:"/team",icon:Kt}],SY=[{name:"Products",href:"/products",icon:qi},{name:"Clients",href:"/clients",icon:DS},{name:"Licenses",href:"/licenses",icon:Nt},{name:"Client Portal",href:"/portal",icon:us}],kY=[{name:"Notifications",href:"/notifications",icon:na},{name:"Audit Logs",href:"/audit",icon:Zt,adminOnly:!0},{name:"Settings",href:"/settings",icon:Js,adminOnly:!0}];function EY(){var m,h,p;const[e,s]=f.useState(!1),r=Ws(),n=Qe(),{user:a,signOut:i}=ft(),{isAdmin:o}=CY(),l=async()=>{await i(),z.success("Signed out successfully"),n("/auth")},c=kY.filter(g=>!g.adminOnly||o),d=((m=a==null?void 0:a.user_metadata)==null?void 0:m.full_name)||((h=a==null?void 0:a.email)==null?void 0:h.split("@")[0])||"User",u=d.split(" ").map(g=>g[0]).join("").toUpperCase().slice(0,2);return t.jsxs("aside",{className:J("fixed left-0 top-0 z-40 h-screen bg-sidebar border-r border-sidebar-border transition-all duration-300 flex flex-col",e?"w-16":"w-64"),children:[t.jsxs("div",{className:"flex h-16 items-center justify-between px-4 border-b border-sidebar-border",children:[!e&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("img",{src:eo,alt:"InfraWeave CRM",className:"h-8 w-auto"}),t.jsx("span",{className:"font-semibold text-foreground",children:"InfraWeave CRM"})]}),t.jsx(T,{variant:"ghost",size:"icon-sm",onClick:()=>s(!e),className:"text-muted-foreground hover:text-foreground",children:e?t.jsx(ln,{className:"h-4 w-4"}):t.jsx(nl,{className:"h-4 w-4"})})]}),t.jsxs("nav",{className:"flex-1 space-y-1 p-2 overflow-y-auto",children:[t.jsx("div",{className:"space-y-1",children:_Y.map(g=>{const x=r.pathname===g.href;return t.jsxs(Dh,{to:g.href,className:J("flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium transition-all duration-200",x?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",e&&"justify-center px-2"),children:[t.jsx(g.icon,{className:J("h-5 w-5 shrink-0",x&&"text-primary")}),!e&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"flex-1",children:g.name}),g.badge&&t.jsx($,{variant:"info",className:"ml-auto",children:g.badge})]})]},g.name)})}),!e&&t.jsx("div",{className:"pt-6",children:t.jsx("p",{className:"px-3 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Licensing"})}),t.jsx("div",{className:"space-y-1 pt-2",children:SY.map(g=>{const x=r.pathname===g.href;return t.jsxs(Dh,{to:g.href,className:J("flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium transition-all duration-200",x?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",e&&"justify-center px-2"),children:[t.jsx(g.icon,{className:J("h-5 w-5 shrink-0",x&&"text-primary")}),!e&&t.jsx("span",{children:g.name})]},g.name)})}),!e&&c.length>0&&t.jsx("div",{className:"pt-6",children:t.jsx("p",{className:"px-3 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"System"})}),t.jsx("div",{className:"space-y-1 pt-2",children:c.map(g=>{const x=r.pathname===g.href;return t.jsxs(Dh,{to:g.href,className:J("flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium transition-all duration-200",x?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",e&&"justify-center px-2"),children:[t.jsx(g.icon,{className:J("h-5 w-5 shrink-0",x&&"text-primary")}),!e&&t.jsxs("span",{className:"flex items-center gap-2",children:[g.name,g.adminOnly&&t.jsx($,{variant:"outline",className:"text-[10px] px-1 py-0",children:"Admin"})]})]},g.name)})})]}),t.jsxs("div",{className:"border-t border-sidebar-border p-3",children:[t.jsx("div",{className:J("flex items-center mb-2",e?"justify-center":"justify-end"),children:t.jsx($n,{})}),t.jsxs(Dh,{to:"/profile",className:J("flex items-center gap-3 rounded-lg p-2 hover:bg-sidebar-accent transition-colors cursor-pointer",e&&"justify-center",r.pathname==="/profile"&&"bg-sidebar-accent"),children:[t.jsxs(Tt,{className:"h-8 w-8",children:[t.jsx(Ps,{src:(p=a==null?void 0:a.user_metadata)==null?void 0:p.avatar_url,alt:d}),t.jsx(Pt,{className:"bg-primary/20 text-primary text-xs",children:u})]}),!e&&t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:d}),t.jsx("p",{className:"text-xs text-muted-foreground truncate",children:a==null?void 0:a.email})]})]}),t.jsxs(T,{variant:"ghost",size:e?"icon-sm":"sm",onClick:l,className:J("w-full mt-2 text-muted-foreground hover:text-foreground hover:bg-destructive/10",e&&"justify-center"),children:[t.jsx(al,{className:"h-4 w-4"}),!e&&t.jsx("span",{className:"ml-2",children:"Sign Out"})]})]})]})}function Or({children:e}){return t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx(EY,{}),t.jsx("main",{className:"ml-64 min-h-screen transition-all duration-300",children:e}),t.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[t.jsx("div",{className:"absolute -top-40 -right-40 h-80 w-80 rounded-full bg-primary/5 blur-3xl"}),t.jsx("div",{className:"absolute -bottom-40 -left-40 h-80 w-80 rounded-full bg-primary/5 blur-3xl"})]})]})}const j1=e=>{let s;const r=new Set,n=(d,u)=>{const m=typeof d=="function"?d(s):d;if(!Object.is(m,s)){const h=s;s=u??(typeof m!="object"||m===null)?m:Object.assign({},s,m),r.forEach(p=>p(s,h))}},a=()=>s,l={setState:n,getState:a,getInitialState:()=>c,subscribe:d=>(r.add(d),()=>r.delete(d))},c=s=e(n,a,l);return l},AY=e=>e?j1(e):j1,TY=e=>e;function PY(e,s=TY){const r=le.useSyncExternalStore(e.subscribe,le.useCallback(()=>s(e.getState()),[e,s]),le.useCallback(()=>s(e.getInitialState()),[e,s]));return le.useDebugValue(r),r}const w1=e=>{const s=AY(e),r=n=>PY(s,n);return Object.assign(r,s),r},bP=e=>e?w1(e):w1,cy={id:"org_1"},Vt=[{id:"user_1",email:"admin@acme.com",name:"Sarah Chen",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Sarah",globalRole:"org_admin",organizationId:"org_1",createdAt:"2024-01-01T00:00:00Z"},{id:"user_2",email:"john@acme.com",name:"John Martinez",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=John",globalRole:"project_manager",organizationId:"org_1",createdAt:"2024-01-15T00:00:00Z"},{id:"user_3",email:"emma@acme.com",name:"Emma Wilson",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Emma",globalRole:"agent",organizationId:"org_1",createdAt:"2024-02-01T00:00:00Z"},{id:"user_4",email:"alex@acme.com",name:"Alex Thompson",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Alex",globalRole:"agent",organizationId:"org_1",createdAt:"2024-02-15T00:00:00Z"}],po=[{id:"proj_1",name:"Enterprise Platform",description:"Main enterprise platform development and support",status:"active",organizationId:"org_1",createdAt:"2024-01-10T00:00:00Z",updatedAt:"2024-12-01T00:00:00Z",ticketCount:45,openTicketCount:12,assignedUsers:[{userId:"user_1",user:Vt[0],projectRole:"project_admin",assignedAt:"2024-01-10T00:00:00Z"},{userId:"user_2",user:Vt[1],projectRole:"contributor",assignedAt:"2024-01-15T00:00:00Z"},{userId:"user_3",user:Vt[2],projectRole:"contributor",assignedAt:"2024-02-01T00:00:00Z"}]},{id:"proj_2",name:"Mobile App v2",description:"Next generation mobile application",status:"active",organizationId:"org_1",createdAt:"2024-03-01T00:00:00Z",updatedAt:"2024-12-15T00:00:00Z",ticketCount:28,openTicketCount:8,assignedUsers:[{userId:"user_2",user:Vt[1],projectRole:"project_admin",assignedAt:"2024-03-01T00:00:00Z"},{userId:"user_4",user:Vt[3],projectRole:"contributor",assignedAt:"2024-03-15T00:00:00Z"}]},{id:"proj_3",name:"Customer Portal",description:"Self-service customer portal",status:"active",organizationId:"org_1",createdAt:"2024-06-01T00:00:00Z",updatedAt:"2024-12-20T00:00:00Z",ticketCount:15,openTicketCount:5,assignedUsers:[{userId:"user_1",user:Vt[0],projectRole:"project_admin",assignedAt:"2024-06-01T00:00:00Z"},{userId:"user_3",user:Vt[2],projectRole:"contributor",assignedAt:"2024-06-15T00:00:00Z"}]},{id:"proj_4",name:"Legacy Migration",description:"Migration from legacy systems",status:"draft",organizationId:"org_1",createdAt:"2024-11-01T00:00:00Z",updatedAt:"2024-11-01T00:00:00Z",ticketCount:0,openTicketCount:0,assignedUsers:[]}],RY=[{id:"ticket_1",title:"Authentication failing for SSO users",description:"Users attempting to login via SSO are receiving a 403 error after redirect.",type:"external",source:"customer_portal",visibility:"customer_admin",status:"in_progress",priority:"urgent",projectId:"proj_1",project:po[0],organizationId:"org_1",createdById:"customer_1",assigneeIds:["user_3"],assignees:[Vt[2]],watcherIds:["user_1"],watchers:[Vt[0]],category:"Authentication",tags:["sso","authentication","critical"],reviewRequired:!1,slaDeadline:"2025-01-04T14:00:00Z",createdAt:"2025-01-02T10:30:00Z",updatedAt:"2025-01-03T09:15:00Z"},{id:"ticket_2",title:"Dashboard performance optimization needed",description:"The main dashboard is loading slowly for users with large datasets. Need to implement pagination and lazy loading.",type:"internal",source:"api",visibility:"internal_only",status:"open",priority:"high",projectId:"proj_1",project:po[0],organizationId:"org_1",createdById:"user_2",createdBy:Vt[1],assigneeIds:["user_4"],assignees:[Vt[3]],watcherIds:[],watchers:[],category:"Performance",tags:["performance","optimization","dashboard"],reviewRequired:!1,createdAt:"2025-01-01T14:00:00Z",updatedAt:"2025-01-01T14:00:00Z"},{id:"ticket_3",title:"Unable to export reports to PDF",description:"When attempting to export monthly reports, the PDF generation fails with a timeout error.",type:"external",source:"email",visibility:"customer_admin",status:"waiting_customer",priority:"medium",projectId:"proj_1",project:po[0],organizationId:"org_1",createdById:"customer_2",assigneeIds:["user_3"],assignees:[Vt[2]],watcherIds:[],watchers:[],category:"Reports",tags:["export","pdf","reports"],reviewRequired:!1,createdAt:"2024-12-28T09:00:00Z",updatedAt:"2025-01-02T16:30:00Z"},{id:"ticket_4",title:"New feature request: Dark mode",description:"Customer requesting dark mode support for the application.",type:"external",source:"public_form",visibility:"customer_admin",status:"open",priority:"low",projectId:"proj_2",project:po[1],organizationId:"org_1",createdById:"customer_3",assigneeIds:[],assignees:[],watcherIds:["user_2"],watchers:[Vt[1]],category:"Feature Request",tags:["feature","ui","dark-mode"],reviewRequired:!0,createdAt:"2025-01-03T08:00:00Z",updatedAt:"2025-01-03T08:00:00Z"},{id:"ticket_5",title:"API rate limiting implementation",description:"Implement rate limiting for public API endpoints to prevent abuse.",type:"internal",source:"api",visibility:"internal_only",status:"in_progress",priority:"high",projectId:"proj_2",project:po[1],organizationId:"org_1",createdById:"user_1",createdBy:Vt[0],assigneeIds:["user_2","user_4"],assignees:[Vt[1],Vt[3]],watcherIds:["user_1"],watchers:[Vt[0]],category:"Security",tags:["api","security","rate-limiting"],reviewRequired:!1,createdAt:"2024-12-20T10:00:00Z",updatedAt:"2025-01-02T11:00:00Z"},{id:"ticket_6",title:"Customer onboarding flow broken",description:"The step 3 of onboarding is not saving user preferences correctly.",type:"external",source:"customer_portal",visibility:"customer_admin",status:"resolved",priority:"high",projectId:"proj_3",project:po[2],organizationId:"org_1",createdById:"customer_4",assigneeIds:["user_3"],assignees:[Vt[2]],watcherIds:[],watchers:[],category:"Bug",tags:["onboarding","bug","customer-facing"],reviewRequired:!1,resolvedAt:"2025-01-02T15:00:00Z",createdAt:"2024-12-30T12:00:00Z",updatedAt:"2025-01-02T15:00:00Z"}],IY=[{id:"log_1",entityType:"ticket",entityId:"ticket_1",action:"status_changed",performedById:"user_3",performedBy:Vt[2],oldValue:{status:"open"},newValue:{status:"in_progress"},createdAt:"2025-01-03T09:15:00Z"},{id:"log_2",entityType:"ticket",entityId:"ticket_6",action:"resolved",performedById:"user_3",performedBy:Vt[2],oldValue:{status:"in_progress"},newValue:{status:"resolved"},createdAt:"2025-01-02T15:00:00Z"},{id:"log_3",entityType:"ticket",entityId:"ticket_4",action:"created",performedById:"customer_3",createdAt:"2025-01-03T08:00:00Z"},{id:"log_4",entityType:"project",entityId:"proj_2",action:"member_added",performedById:"user_2",performedBy:Vt[1],newValue:{userId:"user_4",role:"contributor"},createdAt:"2025-01-01T10:00:00Z"}];Vt[0];const Wh=()=>`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,DY=bP((e,s)=>({projects:po,tickets:RY,users:Vt,auditLogs:IY,addProject:r=>{const n={...r,id:`proj_${Wh()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),ticketCount:0,openTicketCount:0,assignedUsers:[]};e(a=>({projects:[n,...a.projects]})),s().addAuditLog({entityType:"project",entityId:n.id,action:"created",performedById:"user_1",performedBy:s().users[0],newValue:{name:n.name}})},updateProject:(r,n)=>{e(a=>({projects:a.projects.map(i=>i.id===r?{...i,...n,updatedAt:new Date().toISOString()}:i)}))},deleteProject:r=>{e(n=>({projects:n.projects.filter(a=>a.id!==r)}))},addTicket:r=>{const n={...r,id:`ticket_${Wh()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),organizationId:cy.id,createdById:"user_1",createdBy:s().users[0]};e(a=>({tickets:[n,...a.tickets],projects:a.projects.map(i=>i.id===n.projectId?{...i,ticketCount:i.ticketCount+1,openTicketCount:n.status==="open"?i.openTicketCount+1:i.openTicketCount}:i)})),s().addAuditLog({entityType:"ticket",entityId:n.id,action:"created",performedById:"user_1",performedBy:s().users[0],newValue:{title:n.title}})},updateTicket:(r,n)=>{const a=s().tickets.find(i=>i.id===r);e(i=>({tickets:i.tickets.map(o=>o.id===r?{...o,...n,updatedAt:new Date().toISOString()}:o)})),a&&n.status&&a.status!==n.status&&s().addAuditLog({entityType:"ticket",entityId:r,action:"status_changed",performedById:"user_1",performedBy:s().users[0],oldValue:{status:a.status},newValue:{status:n.status}})},deleteTicket:r=>{const n=s().tickets.find(a=>a.id===r);e(a=>({tickets:a.tickets.filter(i=>i.id!==r),projects:n?a.projects.map(i=>i.id===n.projectId?{...i,ticketCount:i.ticketCount-1,openTicketCount:n.status==="open"?i.openTicketCount-1:i.openTicketCount}:i):a.projects}))},addUser:r=>{const n={...r,id:`user_${Wh()}`,createdAt:new Date().toISOString(),organizationId:cy.id};e(a=>({users:[n,...a.users]})),s().addAuditLog({entityType:"user",entityId:n.id,action:"created",performedById:"user_1",performedBy:s().users[0],newValue:{name:n.name,email:n.email}})},updateUser:(r,n)=>{e(a=>({users:a.users.map(i=>i.id===r?{...i,...n}:i)}))},deleteUser:r=>{e(n=>({users:n.users.filter(a=>a.id!==r)}))},addAuditLog:r=>{const n={...r,id:`log_${Wh()}`,createdAt:new Date().toISOString()};e(a=>({auditLogs:[n,...a.auditLogs]}))}}));function OY(){const{id:e}=ma(),s=Qe(),{toast:r}=Ji(),{users:n,projects:a,tickets:i,updateUser:o,deleteUser:l}=DY(),c=n.find(w=>w.id===e),d=a.filter(w=>w.assignedUsers.some(b=>b.userId===e)),u=i.filter(w=>w.assigneeIds.includes(e||"")||w.createdById===e),[m,h]=f.useState(!1),[p,g]=f.useState({name:(c==null?void 0:c.name)||"",email:(c==null?void 0:c.email)||"",globalRole:(c==null?void 0:c.globalRole)||"viewer"});if(!c)return t.jsx(Or,{children:t.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] gap-4",children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Team Member Not Found"}),t.jsxs(T,{onClick:()=>s("/team"),children:[t.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Back to Team"]})]})});const x=()=>{o(c.id,{name:p.name,email:p.email,globalRole:p.globalRole}),h(!1),r({title:"Team member updated successfully"})},v=()=>{l(c.id),r({title:"Team member removed"}),s("/team")},y={saas_admin:"bg-red-500/20 text-red-400 border-red-500/30",org_admin:"bg-purple-500/20 text-purple-400 border-purple-500/30",project_manager:"bg-blue-500/20 text-blue-400 border-blue-500/30",agent:"bg-green-500/20 text-green-400 border-green-500/30",viewer:"bg-gray-500/20 text-gray-400 border-gray-500/30"},j={saas_admin:"SaaS Admin",org_admin:"Org Admin",project_manager:"Project Manager",agent:"Agent",viewer:"Viewer"};return t.jsx(Or,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(T,{variant:"ghost",size:"icon",onClick:()=>s("/team"),children:t.jsx(Ft,{className:"h-5 w-5"})}),t.jsx("div",{className:"h-16 w-16 rounded-full bg-primary/20 flex items-center justify-center",children:c.avatar?t.jsx("img",{src:c.avatar,alt:c.name,className:"h-16 w-16 rounded-full"}):t.jsx("span",{className:"text-2xl font-medium",children:c.name.split(" ").map(w=>w[0]).join("")})}),t.jsxs("div",{children:[m?t.jsx(se,{value:p.name,onChange:w=>g({...p,name:w.target.value}),className:"text-2xl font-bold h-auto py-1"}):t.jsx("h1",{className:"text-2xl font-bold",children:c.name}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx($,{className:y[c.globalRole],children:j[c.globalRole]}),t.jsx("span",{className:"text-muted-foreground text-sm",children:c.email})]})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:m?t.jsxs(t.Fragment,{children:[t.jsxs(T,{variant:"ghost",onClick:()=>h(!1),children:[t.jsx(Ct,{className:"mr-2 h-4 w-4"}),"Cancel"]}),t.jsxs(T,{onClick:x,children:[t.jsx(Mn,{className:"mr-2 h-4 w-4"}),"Save"]})]}):t.jsxs(t.Fragment,{children:[t.jsxs(T,{variant:"outline",onClick:()=>h(!0),children:[t.jsx(Pn,{className:"mr-2 h-4 w-4"}),"Edit"]}),t.jsxs(T,{variant:"destructive",onClick:v,children:[t.jsx(Rt,{className:"mr-2 h-4 w-4"}),"Remove"]})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx(P,{className:"glass-card",children:t.jsxs(W,{className:"pb-2",children:[t.jsx(ce,{children:"Assigned Projects"}),t.jsx(V,{className:"text-3xl",children:d.length})]})}),t.jsx(P,{className:"glass-card",children:t.jsxs(W,{className:"pb-2",children:[t.jsx(ce,{children:"Assigned Tickets"}),t.jsx(V,{className:"text-3xl",children:u.filter(w=>w.assigneeIds.includes(c.id)).length})]})}),t.jsx(P,{className:"glass-card",children:t.jsxs(W,{className:"pb-2",children:[t.jsx(ce,{children:"Created Tickets"}),t.jsx(V,{className:"text-3xl",children:u.filter(w=>w.createdById===c.id).length})]})}),t.jsx(P,{className:"glass-card",children:t.jsxs(W,{className:"pb-2",children:[t.jsx(ce,{children:"Member Since"}),t.jsx(V,{className:"text-lg",children:new Date(c.createdAt).toLocaleDateString()})]})})]}),t.jsxs(kt,{defaultValue:"profile",className:"space-y-4",children:[t.jsxs(St,{children:[t.jsxs(he,{value:"profile",className:"gap-2",children:[t.jsx(qs,{className:"h-4 w-4"}),"Profile"]}),t.jsxs(he,{value:"projects",className:"gap-2",children:[t.jsx(bt,{className:"h-4 w-4"}),"Projects"]}),t.jsxs(he,{value:"tickets",className:"gap-2",children:[t.jsx(rt,{className:"h-4 w-4"}),"Tickets"]}),t.jsxs(he,{value:"activity",className:"gap-2",children:[t.jsx(Fa,{className:"h-4 w-4"}),"Activity"]})]}),t.jsxs(Ce,{value:"profile",className:"space-y-4",children:[t.jsxs(P,{className:"glass-card",children:[t.jsxs(W,{children:[t.jsx(V,{children:"Profile Information"}),t.jsx(ce,{children:"Manage team member details"})]}),t.jsxs(M,{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Full Name"}),t.jsx(se,{value:p.name,onChange:w=>g({...p,name:w.target.value}),disabled:!m})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Email Address"}),t.jsx(se,{type:"email",value:p.email,onChange:w=>g({...p,email:w.target.value}),disabled:!m})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Global Role"}),t.jsxs($e,{value:p.globalRole,onValueChange:w=>g({...p,globalRole:w}),disabled:!m,children:[t.jsx(Le,{className:"w-full max-w-xs",children:t.jsx(Ue,{})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"saas_admin",children:"SaaS Admin"}),t.jsx(Z,{value:"org_admin",children:"Org Admin"}),t.jsx(Z,{value:"project_manager",children:"Project Manager"}),t.jsx(Z,{value:"agent",children:"Agent"}),t.jsx(Z,{value:"viewer",children:"Viewer"})]})]})]}),!m&&t.jsxs(T,{onClick:()=>h(!0),children:[t.jsx(Pn,{className:"mr-2 h-4 w-4"}),"Edit Profile"]}),m&&t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(T,{onClick:x,children:[t.jsx(Mn,{className:"mr-2 h-4 w-4"}),"Save Changes"]}),t.jsx(T,{variant:"outline",onClick:()=>h(!1),children:"Cancel"})]})]})]}),t.jsxs(P,{className:"glass-card",children:[t.jsxs(W,{children:[t.jsx(V,{children:"Permissions"}),t.jsx(ce,{children:"Role-based access control"})]}),t.jsx(M,{children:t.jsx("div",{className:"space-y-3",children:t.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[t.jsx(us,{className:"h-5 w-5 text-primary"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:j[c.globalRole]}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:[c.globalRole==="saas_admin"&&"Full system access",c.globalRole==="org_admin"&&"Organization-wide access",c.globalRole==="project_manager"&&"Project management access",c.globalRole==="agent"&&"Ticket handling access",c.globalRole==="viewer"&&"Read-only access"]})]})]})})})]})]}),t.jsxs(Ce,{value:"projects",className:"space-y-4",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Assigned Projects"}),d.length>0?t.jsx("div",{className:"grid gap-4",children:d.map(w=>{const b=w.assignedUsers.find(N=>N.userId===c.id);return t.jsx(P,{className:"glass-card cursor-pointer hover:border-primary/50 transition-colors",onClick:()=>s(`/projects/${w.id}`),children:t.jsxs(M,{className:"flex items-center justify-between p-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(bt,{className:"h-8 w-8 text-primary"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:w.name}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:[w.ticketCount," tickets  ",w.assignedUsers.length," members"]})]})]}),t.jsx($,{variant:"outline",children:b==null?void 0:b.projectRole})]})},w.id)})}):t.jsx(P,{className:"glass-card",children:t.jsxs(M,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(bt,{className:"h-12 w-12 text-muted-foreground mb-4"}),t.jsx("p",{className:"text-muted-foreground",children:"No projects assigned"})]})})]}),t.jsxs(Ce,{value:"tickets",className:"space-y-4",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Assigned & Created Tickets"}),u.length>0?t.jsx("div",{className:"grid gap-4",children:u.map(w=>t.jsx(P,{className:"glass-card",children:t.jsxs(M,{className:"flex items-center justify-between p-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(rt,{className:"h-6 w-6 text-muted-foreground"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:w.title}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:[w.status,"  ",w.priority," priority"]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[w.assigneeIds.includes(c.id)&&t.jsx($,{variant:"outline",children:"Assigned"}),w.createdById===c.id&&t.jsx($,{variant:"secondary",children:"Created"})]})]})},w.id))}):t.jsx(P,{className:"glass-card",children:t.jsxs(M,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(rt,{className:"h-12 w-12 text-muted-foreground mb-4"}),t.jsx("p",{className:"text-muted-foreground",children:"No tickets"})]})})]}),t.jsx(Ce,{value:"activity",className:"space-y-4",children:t.jsxs(P,{className:"glass-card",children:[t.jsx(W,{children:t.jsx(V,{children:"Recent Activity"})}),t.jsx(M,{children:t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg bg-muted/50",children:[t.jsx(Fa,{className:"h-5 w-5 text-muted-foreground"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm",children:"Account created"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(c.createdAt).toLocaleString()})]})]})})})]})})]}),t.jsxs(P,{className:"glass-card border-destructive/50",children:[t.jsxs(W,{children:[t.jsx(V,{className:"text-destructive",children:"Danger Zone"}),t.jsx(ce,{children:"Irreversible actions"})]}),t.jsx(M,{children:t.jsxs(T,{variant:"destructive",onClick:v,children:[t.jsx(Rt,{className:"mr-2 h-4 w-4"}),"Remove Team Member"]})})]})]})})}function MY(){const{company:e,isCompanyAdmin:s}=Ze(),r=ht(),{data:n,isLoading:a,refetch:i}=fe({queryKey:["organization-settings",e==null?void 0:e.id],queryFn:async()=>{if(!(e!=null&&e.id))return null;const{data:d,error:u}=await B.from("organizations").select("*").eq("id",e.id).single();if(u)throw console.error("Error fetching organization:",u),u;return{id:d.id,name:d.name,slug:d.slug,domain:d.domain,billingEmail:d.billing_email,logoUrl:d.logo_url,settings:d.settings}},enabled:!!(e!=null&&e.id)&&s}),o=_t({mutationFn:async d=>{if(!(e!=null&&e.id))throw new Error("No company found");const u={updated_at:new Date().toISOString()};d.name!==void 0&&(u.name=d.name),d.slug!==void 0&&(u.slug=d.slug),d.domain!==void 0&&(u.domain=d.domain),d.billingEmail!==void 0&&(u.billing_email=d.billingEmail),d.logoUrl!==void 0&&(u.logo_url=d.logoUrl);const{error:m}=await B.from("organizations").update(u).eq("id",e.id);if(m)throw m},onSuccess:()=>{r.invalidateQueries({queryKey:["organization-settings"]}),r.invalidateQueries({queryKey:["company-membership"]}),r.invalidateQueries({queryKey:["all-companies"]}),z.success("Organization settings saved successfully")},onError:d=>{console.error("Error updating organization:",d),z.error("Failed to save organization settings")}}),l=_t({mutationFn:async d=>{if(!(e!=null&&e.id))throw new Error("No company found");const u=d.name.split(".").pop(),m=`${e.id}/logo.${u}`;await B.storage.from("organization-logos").remove([m]);const{error:h}=await B.storage.from("organization-logos").upload(m,d,{upsert:!0});if(h)throw h;const{data:{publicUrl:p}}=B.storage.from("organization-logos").getPublicUrl(m),{error:g}=await B.from("organizations").update({logo_url:p,updated_at:new Date().toISOString()}).eq("id",e.id);if(g)throw g;return p},onSuccess:()=>{r.invalidateQueries({queryKey:["organization-settings"]}),r.invalidateQueries({queryKey:["company-membership"]}),r.invalidateQueries({queryKey:["all-companies"]}),z.success("Logo uploaded successfully")},onError:d=>{console.error("Error uploading logo:",d),z.error("Failed to upload logo")}}),c=_t({mutationFn:async()=>{if(!(e!=null&&e.id))throw new Error("No company found");const{error:d}=await B.storage.from("organization-logos").remove([`${e.id}/logo.png`,`${e.id}/logo.jpg`,`${e.id}/logo.jpeg`,`${e.id}/logo.webp`]);d&&console.warn("Error removing logo files:",d);const{error:u}=await B.from("organizations").update({logo_url:null,updated_at:new Date().toISOString()}).eq("id",e.id);if(u)throw u},onSuccess:()=>{r.invalidateQueries({queryKey:["organization-settings"]}),r.invalidateQueries({queryKey:["company-membership"]}),z.success("Logo removed successfully")},onError:d=>{console.error("Error removing logo:",d),z.error("Failed to remove logo")}});return{organization:n,isLoading:a,refetch:i,updateOrganization:o,uploadLogo:l,removeLogo:c}}function LY(){const{company:e,isCompanyAdmin:s,isLoading:r}=Ze(),{organization:n,isLoading:a,updateOrganization:i,uploadLogo:o,removeLogo:l}=MY(),[c,d]=f.useState(""),[u,m]=f.useState(""),[h,p]=f.useState(""),[g,x]=f.useState(""),[v,y]=f.useState(!1),j=f.useRef(null);f.useEffect(()=>{v||(n?(d(n.name),m(n.slug),p(n.billingEmail||""),x(n.domain||""),y(!0)):e&&(d(e.name||""),m(e.slug||""),p(e.billingEmail||""),x(e.domain||""),y(!0)))},[n,e,v]);const w=()=>{if(!c.trim()){z.error("Organization name is required");return}i.mutate({name:c.trim(),slug:u.trim()||c.trim().toLowerCase().replace(/\s+/g,"-")})},b=()=>{if(h&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h)){z.error("Please enter a valid email address");return}i.mutate({billingEmail:h.trim()||null,domain:g.trim()||null})},N=L=>{var F;const H=(F=L.target.files)==null?void 0:F[0];if(H){if(!H.type.startsWith("image/")){z.error("Please upload an image file");return}if(H.size>2*1024*1024){z.error("Logo must be less than 2MB");return}o.mutate(H),j.current&&(j.current.value="")}},_=()=>{l.mutate()},C=r||a,E=i.isPending||o.isPending||l.isPending;if(C)return t.jsx(we,{children:t.jsx("div",{className:"p-6 flex items-center justify-center",children:t.jsx(Ie,{className:"h-6 w-6 animate-spin text-primary"})})});if(!s)return t.jsx(we,{children:t.jsxs("div",{className:"p-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-destructive",children:"Access Denied"}),t.jsx("p",{className:"text-muted-foreground",children:"Only Company Admins can access organization settings."})]})});const k=n==null?void 0:n.logoUrl,A=(c==null?void 0:c.substring(0,2).toUpperCase())||"ORG";return t.jsx(we,{children:t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Settings"}),t.jsxs("p",{className:"text-muted-foreground",children:["Manage settings for ",c||(e==null?void 0:e.name)]})]}),t.jsxs(kt,{defaultValue:"organization",className:"space-y-6",children:[t.jsxs(St,{className:"bg-secondary",children:[t.jsxs(he,{value:"organization",className:"gap-2 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[t.jsx(Qt,{className:"h-4 w-4"}),"Organization"]}),t.jsxs(he,{value:"billing",className:"gap-2 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[t.jsx(ca,{className:"h-4 w-4"}),"Billing"]}),t.jsxs(he,{value:"notifications",className:"gap-2 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[t.jsx(na,{className:"h-4 w-4"}),"Notifications"]}),t.jsxs(he,{value:"security",className:"gap-2 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[t.jsx(us,{className:"h-4 w-4"}),"Security"]})]}),t.jsx(Ce,{value:"organization",children:t.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Organization Details"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"org-name",children:"Organization Name"}),t.jsx(se,{id:"org-name",value:c,onChange:L=>d(L.target.value),className:"bg-secondary border-border",placeholder:"Enter organization name"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"org-slug",children:"Slug"}),t.jsx(se,{id:"org-slug",value:u,onChange:L=>m(L.target.value),className:"bg-secondary border-border",placeholder:"organization-slug"})]})]})]}),t.jsxs("div",{className:"border-t border-border pt-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Branding"}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs(Tt,{className:"h-16 w-16 ring-2 ring-border",children:[t.jsx(Ps,{src:k||void 0,alt:"Organization logo"}),t.jsx(Pt,{className:"bg-primary/10 text-primary text-lg font-semibold",children:A})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"Logo"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:k?"Click to replace your logo":"Upload your organization logo (max 2MB)"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{ref:j,type:"file",accept:"image/*",onChange:N,className:"hidden",id:"logo-upload"}),t.jsxs(T,{variant:"outline",onClick:()=>{var L;return(L=j.current)==null?void 0:L.click()},disabled:E,children:[o.isPending?t.jsx(Ie,{className:"h-4 w-4 mr-2 animate-spin"}):t.jsx(IS,{className:"h-4 w-4 mr-2"}),"Upload"]}),k&&t.jsx(T,{variant:"outline",size:"icon",onClick:_,disabled:E,className:"text-destructive hover:text-destructive",children:l.isPending?t.jsx(Ie,{className:"h-4 w-4 animate-spin"}):t.jsx(Rt,{className:"h-4 w-4"})})]})]})})]}),t.jsx("div",{className:"flex justify-end pt-4",children:t.jsx(T,{onClick:w,disabled:E,children:i.isPending?t.jsxs(t.Fragment,{children:[t.jsx(Ie,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):"Save Changes"})})]})}),t.jsx(Ce,{value:"billing",children:t.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Billing Configuration"}),t.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Configure billing email and domain for invoice reminders and payment notifications."})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"billing-email",children:"Billing Email"}),t.jsx(se,{id:"billing-email",type:"email",value:h,onChange:L=>p(L.target.value),className:"bg-secondary border-border",placeholder:"billing@yourcompany.com"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Invoice reminders and payment notifications will be sent to this email."})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"domain",children:"Company Domain"}),t.jsx(se,{id:"domain",value:g,onChange:L=>x(L.target.value),className:"bg-secondary border-border",placeholder:"yourcompany.com"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Your company's primary domain for identification."})]})]}),t.jsxs("div",{className:"border-t border-border pt-6",children:[t.jsx("h4",{className:"text-sm font-semibold text-foreground mb-4",children:"Payment Reminders"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"Automatic Reminders"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Send reminders for overdue invoices"})]}),t.jsx(nt,{defaultChecked:!0})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"Pre-Due Reminders"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Send reminder 3 days before due date"})]}),t.jsx(nt,{defaultChecked:!0})]})]})]}),t.jsx("div",{className:"flex justify-end pt-4",children:t.jsx(T,{onClick:b,disabled:E,children:i.isPending?t.jsxs(t.Fragment,{children:[t.jsx(Ie,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):"Save Billing Settings"})})]})}),t.jsx(Ce,{value:"notifications",children:t.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 space-y-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Notification Preferences"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"Email Notifications"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via email"})]}),t.jsx(nt,{defaultChecked:!0})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"Ticket Assignments"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified when assigned to a ticket"})]}),t.jsx(nt,{defaultChecked:!0})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"SLA Alerts"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive alerts for SLA breaches"})]}),t.jsx(nt,{defaultChecked:!0})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"Weekly Digest"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive weekly summary reports"})]}),t.jsx(nt,{})]})]})]})}),t.jsx(Ce,{value:"security",children:t.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 space-y-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Security Settings"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"Two-Factor Authentication"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Add an extra layer of security"})]}),t.jsx(T,{variant:"outline",onClick:()=>z.info("2FA setup coming soon"),children:"Enable"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"Session Timeout"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically log out after inactivity"})]}),t.jsx(nt,{defaultChecked:!0})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-foreground",children:"API Access"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage API keys and access"})]}),t.jsx(T,{variant:"outline",onClick:()=>z.info("API management coming soon"),children:"Manage"})]})]})]})})]})]})})}const Al=[{id:"prod_1",name:"Nexus Enterprise Suite",slug:"nexus-enterprise",description:"Complete enterprise solution with all modules",version:"3.5.2",type:"both",features:["CRM","Analytics","Reporting","API Access","SSO","Audit Logs"],isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-12-01T00:00:00Z"},{id:"prod_2",name:"Nexus Desktop Pro",slug:"nexus-desktop",description:"Standalone desktop application for power users",version:"2.1.0",type:"standalone",features:["Offline Mode","Local Storage","Sync","Reports"],isActive:!0,createdAt:"2024-03-01T00:00:00Z",updatedAt:"2024-11-15T00:00:00Z"},{id:"prod_3",name:"Nexus Cloud",slug:"nexus-cloud",description:"Web-based SaaS platform",version:"4.0.1",type:"web",features:["Dashboard","Collaboration","Real-time Sync","Integrations"],isActive:!0,createdAt:"2024-06-01T00:00:00Z",updatedAt:"2024-12-20T00:00:00Z"},{id:"prod_4",name:"Nexus Lite",slug:"nexus-lite",description:"Lightweight version for small teams",version:"1.0.0",type:"web",features:["Basic CRM","Contact Management"],isActive:!1,createdAt:"2023-06-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"}],Tl=[{id:"client_1",name:"TechCorp Industries",email:"admin@techcorp.com",company:"TechCorp Industries Ltd.",phone:"+1 555-0100",address:"123 Tech Boulevard, Silicon Valley, CA",organizationId:"org_1",hasCredentials:!0,lastLoginAt:"2025-01-03T14:30:00Z",licenseIds:["lic_1","lic_2"],createdAt:"2024-01-15T00:00:00Z",updatedAt:"2025-01-03T14:30:00Z"},{id:"client_2",name:"Global Solutions Inc",email:"licensing@globalsolutions.com",company:"Global Solutions Inc.",phone:"+1 555-0200",address:"456 Enterprise Way, New York, NY",organizationId:"org_1",hasCredentials:!0,lastLoginAt:"2025-01-02T09:15:00Z",licenseIds:["lic_3"],createdAt:"2024-03-20T00:00:00Z",updatedAt:"2025-01-02T09:15:00Z"},{id:"client_3",name:"StartupXYZ",email:"hello@startupxyz.io",company:"StartupXYZ",organizationId:"org_1",hasCredentials:!0,licenseIds:["lic_4"],createdAt:"2024-08-10T00:00:00Z",updatedAt:"2024-12-15T00:00:00Z"},{id:"client_4",name:"Offline Corp",email:"it@offlinecorp.net",company:"Offline Corporation",phone:"+1 555-0400",organizationId:"org_1",hasCredentials:!1,licenseIds:["lic_5"],createdAt:"2024-06-01T00:00:00Z",updatedAt:"2024-06-01T00:00:00Z"}],FY=[{id:"ent_1",type:"feature",name:"CRM Module",value:!0},{id:"ent_2",type:"feature",name:"Analytics",value:!0},{id:"ent_3",type:"feature",name:"API Access",value:!0},{id:"ent_4",type:"seat",name:"User Seats",value:50},{id:"ent_5",type:"usage",name:"API Calls/Month",value:1e5}],b1=[{id:"ent_6",type:"feature",name:"Offline Mode",value:!0},{id:"ent_7",type:"feature",name:"Local Storage",value:!0},{id:"ent_8",type:"seat",name:"Device Limit",value:5}],Pl=[{id:"lic_1",licenseKey:"NXES-XXXX-YYYY-ZZZZ-1111",productId:"prod_1",product:Al[0],clientId:"client_1",client:Tl[0],type:"hybrid",status:"active",entitlements:FY,maxActivations:10,currentActivations:4,issuedAt:"2024-01-15T00:00:00Z",expiresAt:"2025-01-15T00:00:00Z",supportLevel:"enterprise",createdAt:"2024-01-15T00:00:00Z",updatedAt:"2024-12-01T00:00:00Z"},{id:"lic_2",licenseKey:"NXDP-AAAA-BBBB-CCCC-2222",productId:"prod_2",product:Al[1],clientId:"client_1",client:Tl[0],type:"offline",status:"active",entitlements:b1,maxActivations:5,currentActivations:3,issuedAt:"2024-06-01T00:00:00Z",expiresAt:"2025-06-01T00:00:00Z",offlineBundle:{id:"bundle_1",licenseId:"lic_2",bundleData:"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...",signature:"sha256:abc123...",publicKey:`-----BEGIN PUBLIC KEY-----
MIIB...
-----END PUBLIC KEY-----`,issuedAt:"2024-06-01T00:00:00Z",expiresAt:"2025-06-01T00:00:00Z",revocationEpoch:0},supportLevel:"premium",createdAt:"2024-06-01T00:00:00Z",updatedAt:"2024-11-15T00:00:00Z"},{id:"lic_3",licenseKey:"NXCL-DDDD-EEEE-FFFF-3333",productId:"prod_3",product:Al[2],clientId:"client_2",client:Tl[1],type:"online",status:"active",entitlements:[{id:"ent_9",type:"feature",name:"Dashboard",value:!0},{id:"ent_10",type:"feature",name:"Collaboration",value:!0},{id:"ent_11",type:"seat",name:"User Seats",value:25}],maxActivations:25,currentActivations:18,issuedAt:"2024-09-01T00:00:00Z",expiresAt:"2025-09-01T00:00:00Z",supportLevel:"premium",createdAt:"2024-09-01T00:00:00Z",updatedAt:"2024-12-20T00:00:00Z"},{id:"lic_4",licenseKey:"NXCL-GGGG-HHHH-IIII-4444",productId:"prod_3",product:Al[2],clientId:"client_3",client:Tl[2],type:"online",status:"expired",entitlements:[{id:"ent_12",type:"feature",name:"Basic CRM",value:!0},{id:"ent_13",type:"seat",name:"User Seats",value:5}],maxActivations:5,currentActivations:2,issuedAt:"2024-08-10T00:00:00Z",expiresAt:"2024-11-10T00:00:00Z",supportLevel:"basic",createdAt:"2024-08-10T00:00:00Z",updatedAt:"2024-11-10T00:00:00Z"},{id:"lic_5",licenseKey:"NXDP-JJJJ-KKKK-LLLL-5555",productId:"prod_2",product:Al[1],clientId:"client_4",client:Tl[3],type:"offline",status:"active",entitlements:b1,maxActivations:3,currentActivations:2,issuedAt:"2024-06-01T00:00:00Z",expiresAt:"2026-06-01T00:00:00Z",offlineBundle:{id:"bundle_2",licenseId:"lic_5",bundleData:"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...",signature:"sha256:def456...",publicKey:`-----BEGIN PUBLIC KEY-----
MIIB...
-----END PUBLIC KEY-----`,issuedAt:"2024-06-01T00:00:00Z",expiresAt:"2026-06-01T00:00:00Z",revocationEpoch:0},supportLevel:"basic",notes:"Air-gapped environment - no internet access",createdAt:"2024-06-01T00:00:00Z",updatedAt:"2024-06-01T00:00:00Z"}],NP=[{id:"act_1",licenseId:"lic_1",license:Pl[0],deviceId:"dev_001",deviceName:"WORKSTATION-01",deviceFingerprint:"fp_abc123def456",ipAddress:"192.168.1.100",status:"active",activatedAt:"2024-01-20T10:00:00Z",lastSeenAt:"2025-01-03T15:30:00Z"},{id:"act_2",licenseId:"lic_1",license:Pl[0],deviceId:"dev_002",deviceName:"LAPTOP-SARAH",deviceFingerprint:"fp_ghi789jkl012",ipAddress:"192.168.1.105",status:"active",activatedAt:"2024-02-15T14:30:00Z",lastSeenAt:"2025-01-03T12:00:00Z"},{id:"act_3",licenseId:"lic_2",license:Pl[1],deviceId:"dev_003",deviceName:"DESKTOP-MAIN",deviceFingerprint:"fp_mno345pqr678",status:"active",activatedAt:"2024-06-05T09:00:00Z",lastSeenAt:"2025-01-02T18:00:00Z"},{id:"act_4",licenseId:"lic_3",license:Pl[2],deviceId:"dev_004",deviceName:"Chrome Browser - John",deviceFingerprint:"fp_stu901vwx234",ipAddress:"10.0.0.50",status:"active",activatedAt:"2024-09-05T11:00:00Z",lastSeenAt:"2025-01-03T16:45:00Z"},{id:"act_5",licenseId:"lic_1",license:Pl[0],deviceId:"dev_005",deviceName:"OLD-WORKSTATION",deviceFingerprint:"fp_yza567bcd890",status:"deactivated",activatedAt:"2024-01-25T08:00:00Z",lastSeenAt:"2024-06-15T10:00:00Z",deactivatedAt:"2024-06-20T14:00:00Z"}];NP.slice(0,4);const bl=()=>`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,$Y=e=>{const s=e.substring(0,4).toUpperCase(),r=Array.from({length:4},()=>Math.random().toString(36).substring(2,6).toUpperCase());return`${s}-${r.join("-")}`},mn=bP((e,s)=>({products:Al,clients:Tl,licenses:Pl,activations:NP,addProduct:r=>{const n={...r,id:`prod_${bl()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};e(a=>({products:[n,...a.products]}))},updateProduct:(r,n)=>{e(a=>({products:a.products.map(i=>i.id===r?{...i,...n,updatedAt:new Date().toISOString()}:i)}))},deleteProduct:r=>{e(n=>({products:n.products.filter(a=>a.id!==r)}))},addClient:r=>{const n={...r,id:`client_${bl()}`,organizationId:cy.id,licenseIds:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};e(a=>({clients:[n,...a.clients]}))},updateClient:(r,n)=>{e(a=>({clients:a.clients.map(i=>i.id===r?{...i,...n,updatedAt:new Date().toISOString()}:i)}))},deleteClient:r=>{e(n=>({clients:n.clients.filter(a=>a.id!==r)}))},setClientCredentials:(r,n)=>{e(a=>({clients:a.clients.map(i=>i.id===r?{...i,hasCredentials:n,updatedAt:new Date().toISOString()}:i)}))},addLicense:r=>{const n=s().products.find(o=>o.id===r.productId),a=s().clients.find(o=>o.id===r.clientId),i={...r,id:`lic_${bl()}`,licenseKey:$Y((n==null?void 0:n.slug)||"NXXX"),currentActivations:0,product:n,client:a,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};e(o=>({licenses:[i,...o.licenses],clients:o.clients.map(l=>l.id===r.clientId?{...l,licenseIds:[...l.licenseIds,i.id]}:l)}))},updateLicense:(r,n)=>{e(a=>({licenses:a.licenses.map(i=>i.id===r?{...i,...n,updatedAt:new Date().toISOString()}:i)}))},deleteLicense:r=>{const n=s().licenses.find(a=>a.id===r);e(a=>({licenses:a.licenses.filter(i=>i.id!==r),clients:n?a.clients.map(i=>i.id===n.clientId?{...i,licenseIds:i.licenseIds.filter(o=>o!==r)}:i):a.clients,activations:a.activations.filter(i=>i.licenseId!==r)}))},revokeLicense:r=>{e(n=>({licenses:n.licenses.map(a=>a.id===r?{...a,status:"revoked",updatedAt:new Date().toISOString()}:a),activations:n.activations.map(a=>a.licenseId===r?{...a,status:"deactivated",deactivatedAt:new Date().toISOString()}:a)}))},renewLicense:(r,n)=>{e(a=>({licenses:a.licenses.map(i=>i.id===r?{...i,status:"active",expiresAt:n,updatedAt:new Date().toISOString()}:i)}))},generateOfflineBundle:r=>{const n=s().licenses.find(l=>l.id===r),a=new Date,i=(n==null?void 0:n.expiresAt)||new Date(a.getTime()+365*24*60*60*1e3).toISOString(),o={id:`bundle_${bl()}`,licenseId:r,bundleData:btoa(JSON.stringify({licenseKey:n==null?void 0:n.licenseKey,productId:n==null?void 0:n.productId,entitlements:n==null?void 0:n.entitlements,maxActivations:n==null?void 0:n.maxActivations,expiresAt:i})),signature:`sha256:${bl()}`,publicKey:`-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8A...
-----END PUBLIC KEY-----`,issuedAt:a.toISOString(),expiresAt:i,revocationEpoch:0};return e(l=>({licenses:l.licenses.map(c=>c.id===r?{...c,offlineBundle:o,updatedAt:a.toISOString()}:c)})),o},addActivation:r=>{const n=new Date().toISOString(),a=s().licenses.find(o=>o.id===r.licenseId),i={...r,id:`act_${bl()}`,license:a,activatedAt:n,lastSeenAt:n};e(o=>({activations:[i,...o.activations],licenses:o.licenses.map(l=>l.id===r.licenseId?{...l,currentActivations:l.currentActivations+1}:l)}))},deactivateDevice:r=>{const n=s().activations.find(a=>a.id===r);e(a=>({activations:a.activations.map(i=>i.id===r?{...i,status:"deactivated",deactivatedAt:new Date().toISOString()}:i),licenses:n?a.licenses.map(i=>i.id===n.licenseId?{...i,currentActivations:Math.max(0,i.currentActivations-1)}:i):a.licenses}))},validateLicense:(r,n,a)=>{const i=s().licenses.find(o=>o.licenseKey===r&&o.productId===a);return i?i.status!=="active"?{valid:!1,message:`License is ${i.status}`}:i.expiresAt&&new Date(i.expiresAt)<new Date?{valid:!1,message:"License has expired"}:i.currentActivations>=i.maxActivations&&!s().activations.find(l=>l.licenseId===i.id&&l.deviceId===n&&l.status==="active")?{valid:!1,message:"Maximum activations reached"}:{valid:!0,license:i,message:"License valid"}:{valid:!1,message:"License not found"}},validateOffline:(r,n)=>{try{const a=JSON.parse(atob(r));return s().licenses.find(o=>o.licenseKey===a.licenseKey)?new Date(a.expiresAt)<new Date?{valid:!1,message:"Bundle has expired"}:{valid:!0,message:"Offline validation successful"}:{valid:!1,message:"Invalid bundle"}}catch{return{valid:!1,message:"Invalid bundle format"}}}}));function UY(){const[e,s]=f.useState(!1),[r,n]=f.useState(""),[a,i]=f.useState(""),[o,l]=f.useState(""),[c,d]=f.useState("1.0.0"),[u,m]=f.useState("web"),[h,p]=f.useState([]),[g,x]=f.useState(""),[v,y]=f.useState(!0),{addProduct:j}=mn(),w=C=>{if(C.preventDefault(),!r.trim()||!a.trim()){z.error("Name and slug are required");return}j({name:r.trim(),slug:a.trim().toLowerCase().replace(/\s+/g,"-"),description:o.trim()||void 0,version:c,type:u,features:h,isActive:v}),z.success("Product created successfully"),s(!1),b()},b=()=>{n(""),i(""),l(""),d("1.0.0"),m("web"),p([]),x(""),y(!0)},N=()=>{g.trim()&&!h.includes(g.trim())&&(p([...h,g.trim()]),x(""))},_=C=>{p(h.filter(E=>E!==C))};return t.jsxs(Xt,{open:e,onOpenChange:s,children:[t.jsx($r,{asChild:!0,children:t.jsxs(T,{children:[t.jsx(at,{className:"mr-2 h-4 w-4"}),"Add Product"]})}),t.jsx(zt,{className:"sm:max-w-[500px]",preventClose:!0,children:t.jsxs("form",{onSubmit:w,children:[t.jsxs(es,{children:[t.jsx(ts,{children:"Create New Product"}),t.jsx(ss,{children:"Add a new software product to your catalog."})]}),t.jsxs("div",{className:"grid gap-4 py-4",children:[t.jsxs("div",{className:"grid gap-2",children:[t.jsx(O,{htmlFor:"name",children:"Product Name"}),t.jsx(se,{id:"name",value:r,onChange:C=>{n(C.target.value),a||i(C.target.value.toLowerCase().replace(/\s+/g,"-"))},placeholder:"Nexus Enterprise"})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(O,{htmlFor:"slug",children:"Slug"}),t.jsx(se,{id:"slug",value:a,onChange:C=>i(C.target.value),placeholder:"nexus-enterprise"})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(O,{htmlFor:"description",children:"Description"}),t.jsx(Bt,{id:"description",value:o,onChange:C=>l(C.target.value),placeholder:"Product description..."})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"grid gap-2",children:[t.jsx(O,{htmlFor:"version",children:"Version"}),t.jsx(se,{id:"version",value:c,onChange:C=>d(C.target.value),placeholder:"1.0.0"})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(O,{children:"Type"}),t.jsxs($e,{value:u,onValueChange:C=>m(C),children:[t.jsx(Le,{children:t.jsx(Ue,{})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"standalone",children:"Standalone"}),t.jsx(Z,{value:"web",children:"Web-based"}),t.jsx(Z,{value:"both",children:"Both"})]})]})]})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(O,{children:"Features"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(se,{value:g,onChange:C=>x(C.target.value),placeholder:"Add feature...",onKeyDown:C=>C.key==="Enter"&&(C.preventDefault(),N())}),t.jsx(T,{type:"button",variant:"outline",onClick:N,children:"Add"})]}),h.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:h.map(C=>t.jsxs($,{variant:"secondary",className:"gap-1",children:[C,t.jsx(Ct,{className:"h-3 w-3 cursor-pointer",onClick:()=>_(C)})]},C))})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(nt,{checked:v,onCheckedChange:y}),t.jsx(O,{children:"Active"})]})]}),t.jsxs(In,{children:[t.jsx(T,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),t.jsx(T,{type:"submit",children:"Create Product"})]})]})})]})}const BY={standalone:Bs,web:Uf,both:uj},zY={standalone:"Standalone",web:"Web-based",both:"Hybrid"};function qY({product:e}){const{updateProduct:s,deleteProduct:r,licenses:n}=mn(),a=BY[e.type]||qi,i=n.filter(d=>d.productId===e.id).length,o=n.filter(d=>d.productId===e.id&&d.status==="active").length,l=()=>{s(e.id,{isActive:!e.isActive}),z.success(`Product ${e.isActive?"deactivated":"activated"}`)},c=()=>{if(i>0){z.error("Cannot delete product with existing licenses");return}r(e.id),z.success("Product deleted")};return t.jsxs(P,{className:"group hover:border-primary/50 transition-all duration-200",children:[t.jsx(W,{className:"pb-3",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10",children:t.jsx(a,{className:"h-5 w-5 text-primary"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-foreground",children:e.name}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:["v",e.version]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx($,{variant:e.isActive?"success":"secondary",children:e.isActive?"Active":"Inactive"}),t.jsxs(Ga,{children:[t.jsx(Ya,{asChild:!0,children:t.jsx(T,{variant:"ghost",size:"icon-sm",children:t.jsx($f,{className:"h-4 w-4"})})}),t.jsxs(fa,{align:"end",children:[t.jsxs(mt,{children:[t.jsx(zo,{className:"mr-2 h-4 w-4"}),"Edit"]}),t.jsxs(mt,{onClick:l,children:[t.jsx(AO,{className:"mr-2 h-4 w-4"}),e.isActive?"Deactivate":"Activate"]}),t.jsxs(mt,{onClick:c,className:"text-destructive focus:text-destructive",children:[t.jsx(Rt,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})]})}),t.jsxs(M,{className:"space-y-4",children:[e.description&&t.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.description}),t.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(a,{className:"h-4 w-4 text-muted-foreground"}),t.jsx("span",{className:"text-muted-foreground",children:zY[e.type]})]}),t.jsxs("div",{className:"text-muted-foreground",children:[t.jsx("span",{className:"text-foreground font-medium",children:o}),"/",i," ","licenses"]})]}),e.features.length>0&&t.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.features.slice(0,4).map(d=>t.jsx($,{variant:"outline",className:"text-xs",children:d},d)),e.features.length>4&&t.jsxs($,{variant:"outline",className:"text-xs",children:["+",e.features.length-4," more"]})]})]})]})}const WY=()=>{const e=Qe(),{products:s}=mn(),[r,n]=f.useState(""),[a,i]=f.useState("all"),o=s.filter(l=>{const c=l.name.toLowerCase().includes(r.toLowerCase())||l.slug.toLowerCase().includes(r.toLowerCase()),d=a==="all"||a==="active"&&l.isActive||a==="inactive"&&!l.isActive;return c&&d});return t.jsx(Or,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:"Products"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage your software products and their licensing configurations"})]}),t.jsx(UY,{})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"relative flex-1 max-w-sm",children:[t.jsx(ns,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t.jsx(se,{placeholder:"Search products...",value:r,onChange:l=>n(l.target.value),className:"pl-9"})]}),t.jsx(kt,{value:a,onValueChange:i,children:t.jsxs(St,{children:[t.jsxs(he,{value:"all",children:["All (",s.length,")"]}),t.jsxs(he,{value:"active",children:["Active (",s.filter(l=>l.isActive).length,")"]}),t.jsxs(he,{value:"inactive",children:["Inactive (",s.filter(l=>!l.isActive).length,")"]})]})})]}),o.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[t.jsx(qi,{className:"h-12 w-12 text-muted-foreground mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-foreground",children:"No products found"}),t.jsx("p",{className:"text-muted-foreground",children:r?"Try a different search term":"Create your first product to get started"})]}):t.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:o.map(l=>t.jsx("div",{onClick:()=>e(`/products/${l.id}`),className:"cursor-pointer",children:t.jsx(qY,{product:l})},l.id))})]})})};function VY(){const{id:e}=ma(),s=Qe(),{toast:r}=Ji(),{products:n,licenses:a,updateProduct:i,deleteProduct:o}=mn(),l=n.find(b=>b.id===e),c=a.filter(b=>b.productId===e),[d,u]=f.useState(!1),[m,h]=f.useState({name:(l==null?void 0:l.name)||"",slug:(l==null?void 0:l.slug)||"",description:(l==null?void 0:l.description)||"",version:(l==null?void 0:l.version)||"",type:(l==null?void 0:l.type)||"standalone",isActive:(l==null?void 0:l.isActive)??!0,features:(l==null?void 0:l.features)||[]}),[p,g]=f.useState("");if(!l)return t.jsx(Or,{children:t.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] gap-4",children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Product Not Found"}),t.jsxs(T,{onClick:()=>s("/products"),children:[t.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Back to Products"]})]})});const x=()=>{i(l.id,{name:m.name,slug:m.slug,description:m.description,version:m.version,type:m.type,isActive:m.isActive,features:m.features}),u(!1),r({title:"Product updated successfully"})},v=()=>{if(c.length>0){r({title:"Cannot delete product",description:"This product has active licenses",variant:"destructive"});return}o(l.id),r({title:"Product deleted"}),s("/products")},y=()=>{p.trim()&&(h({...m,features:[...m.features,p.trim()]}),g(""))},j=b=>{h({...m,features:m.features.filter((N,_)=>_!==b)})},w={standalone:"Standalone",web:"Web Based",both:"Both"};return t.jsx(Or,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(T,{variant:"ghost",size:"icon",onClick:()=>s("/products"),children:t.jsx(Ft,{className:"h-5 w-5"})}),t.jsx("div",{className:"h-14 w-14 rounded-xl bg-primary/20 flex items-center justify-center",children:t.jsx(qi,{className:"h-7 w-7 text-primary"})}),t.jsxs("div",{children:[d?t.jsx(se,{value:m.name,onChange:b=>h({...m,name:b.target.value}),className:"text-2xl font-bold h-auto py-1"}):t.jsx("h1",{className:"text-2xl font-bold",children:l.name}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx($,{variant:l.isActive?"default":"secondary",children:l.isActive?"Active":"Inactive"}),t.jsx($,{variant:"outline",children:w[l.type]}),t.jsxs("span",{className:"text-muted-foreground text-sm",children:["v",l.version]})]})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:d?t.jsxs(t.Fragment,{children:[t.jsxs(T,{variant:"ghost",onClick:()=>u(!1),children:[t.jsx(Ct,{className:"mr-2 h-4 w-4"}),"Cancel"]}),t.jsxs(T,{onClick:x,children:[t.jsx(Mn,{className:"mr-2 h-4 w-4"}),"Save"]})]}):t.jsxs(t.Fragment,{children:[t.jsxs(T,{variant:"outline",onClick:()=>u(!0),children:[t.jsx(Pn,{className:"mr-2 h-4 w-4"}),"Edit"]}),t.jsxs(T,{variant:"destructive",onClick:v,children:[t.jsx(Rt,{className:"mr-2 h-4 w-4"}),"Delete"]})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx(P,{className:"glass-card",children:t.jsxs(W,{className:"pb-2",children:[t.jsx(ce,{children:"Total Licenses"}),t.jsx(V,{className:"text-3xl",children:c.length})]})}),t.jsx(P,{className:"glass-card",children:t.jsxs(W,{className:"pb-2",children:[t.jsx(ce,{children:"Active Licenses"}),t.jsx(V,{className:"text-3xl text-success",children:c.filter(b=>b.status==="active").length})]})}),t.jsx(P,{className:"glass-card",children:t.jsxs(W,{className:"pb-2",children:[t.jsx(ce,{children:"Expired"}),t.jsx(V,{className:"text-3xl text-warning",children:c.filter(b=>b.status==="expired").length})]})}),t.jsx(P,{className:"glass-card",children:t.jsxs(W,{className:"pb-2",children:[t.jsx(ce,{children:"Features"}),t.jsx(V,{className:"text-3xl",children:l.features.length})]})})]}),t.jsxs(kt,{defaultValue:"overview",className:"space-y-4",children:[t.jsxs(St,{children:[t.jsxs(he,{value:"overview",className:"gap-2",children:[t.jsx(qi,{className:"h-4 w-4"}),"Overview"]}),t.jsxs(he,{value:"licenses",className:"gap-2",children:[t.jsx(Nt,{className:"h-4 w-4"}),"Licenses"]}),t.jsxs(he,{value:"features",className:"gap-2",children:[t.jsx(Rn,{className:"h-4 w-4"}),"Features"]}),t.jsxs(he,{value:"settings",className:"gap-2",children:[t.jsx(Js,{className:"h-4 w-4"}),"Settings"]})]}),t.jsxs(Ce,{value:"overview",className:"space-y-4",children:[t.jsxs(P,{className:"glass-card",children:[t.jsx(W,{children:t.jsx(V,{children:"Product Information"})}),t.jsxs(M,{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx(O,{className:"text-muted-foreground",children:"Name"}),t.jsx("p",{className:"font-medium",children:l.name})]}),t.jsxs("div",{children:[t.jsx(O,{className:"text-muted-foreground",children:"Slug"}),t.jsx("p",{className:"font-medium font-mono",children:l.slug})]}),t.jsxs("div",{children:[t.jsx(O,{className:"text-muted-foreground",children:"Version"}),t.jsx("p",{className:"font-medium",children:l.version})]}),t.jsxs("div",{children:[t.jsx(O,{className:"text-muted-foreground",children:"Type"}),t.jsx("p",{className:"font-medium",children:w[l.type]})]})]}),l.description&&t.jsxs("div",{children:[t.jsx(O,{className:"text-muted-foreground",children:"Description"}),t.jsx("p",{className:"mt-1",children:l.description})]})]})]}),t.jsxs(P,{className:"glass-card",children:[t.jsx(W,{children:t.jsx(V,{children:"Features"})}),t.jsx(M,{children:t.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.features.map((b,N)=>t.jsxs($,{variant:"secondary",className:"gap-1",children:[t.jsx(Rn,{className:"h-3 w-3"}),b]},N)),l.features.length===0&&t.jsx("p",{className:"text-muted-foreground",children:"No features defined"})]})})]})]}),t.jsxs(Ce,{value:"licenses",className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Product Licenses"}),t.jsxs(T,{onClick:()=>s("/licenses"),children:[t.jsx(at,{className:"mr-2 h-4 w-4"}),"Issue License"]})]}),c.length>0?t.jsx("div",{className:"grid gap-4",children:c.map(b=>{var N;return t.jsx(P,{className:"glass-card cursor-pointer hover:border-primary/50 transition-colors",onClick:()=>s(`/licenses/${b.id}`),children:t.jsxs(M,{className:"flex items-center justify-between p-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(Nt,{className:"h-6 w-6 text-primary"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-mono text-sm",children:b.licenseKey}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:[((N=b.client)==null?void 0:N.name)||"Unknown Client","  ",b.type]})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx($,{variant:b.status==="active"?"default":b.status==="expired"?"secondary":"destructive",children:b.status})})]})},b.id)})}):t.jsx(P,{className:"glass-card",children:t.jsxs(M,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(Nt,{className:"h-12 w-12 text-muted-foreground mb-4"}),t.jsx("p",{className:"text-muted-foreground",children:"No licenses issued"}),t.jsxs(T,{className:"mt-4",onClick:()=>s("/licenses"),children:[t.jsx(at,{className:"mr-2 h-4 w-4"}),"Issue First License"]})]})})]}),t.jsx(Ce,{value:"features",className:"space-y-4",children:t.jsxs(P,{className:"glass-card",children:[t.jsxs(W,{children:[t.jsx(V,{children:"Manage Features"}),t.jsx(ce,{children:"Add or remove product features"})]}),t.jsxs(M,{className:"space-y-4",children:[d&&t.jsxs("div",{className:"flex gap-2",children:[t.jsx(se,{placeholder:"New feature name",value:p,onChange:b=>g(b.target.value),onKeyDown:b=>b.key==="Enter"&&y()}),t.jsxs(T,{onClick:y,children:[t.jsx(at,{className:"mr-2 h-4 w-4"}),"Add"]})]}),t.jsxs("div",{className:"space-y-2",children:[(d?m.features:l.features).map((b,N)=>t.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Rn,{className:"h-4 w-4 text-primary"}),t.jsx("span",{children:b})]}),d&&t.jsx(T,{variant:"ghost",size:"icon",onClick:()=>j(N),children:t.jsx(Rt,{className:"h-4 w-4 text-destructive"})})]},N)),(d?m.features:l.features).length===0&&t.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No features defined"})]}),!d&&t.jsxs(T,{variant:"outline",onClick:()=>u(!0),children:[t.jsx(Pn,{className:"mr-2 h-4 w-4"}),"Edit Features"]})]})]})}),t.jsxs(Ce,{value:"settings",className:"space-y-4",children:[t.jsxs(P,{className:"glass-card",children:[t.jsxs(W,{children:[t.jsx(V,{children:"Product Settings"}),t.jsx(ce,{children:"Configure product properties"})]}),t.jsxs(M,{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Product Name"}),t.jsx(se,{value:m.name,onChange:b=>h({...m,name:b.target.value}),disabled:!d})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Slug"}),t.jsx(se,{value:m.slug,onChange:b=>h({...m,slug:b.target.value}),disabled:!d})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Version"}),t.jsx(se,{value:m.version,onChange:b=>h({...m,version:b.target.value}),disabled:!d})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Type"}),t.jsxs($e,{value:m.type,onValueChange:b=>h({...m,type:b}),disabled:!d,children:[t.jsx(Le,{children:t.jsx(Ue,{})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"standalone",children:"Standalone"}),t.jsx(Z,{value:"web",children:"Web Based"}),t.jsx(Z,{value:"both",children:"Both"})]})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Description"}),t.jsx(Bt,{value:m.description,onChange:b=>h({...m,description:b.target.value}),disabled:!d,rows:3})]}),t.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-muted/50",children:[t.jsxs("div",{children:[t.jsx(O,{children:"Product Active"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable or disable this product"})]}),t.jsx(nt,{checked:m.isActive,onCheckedChange:b=>h({...m,isActive:b}),disabled:!d})]}),!d&&t.jsxs(T,{onClick:()=>u(!0),children:[t.jsx(Pn,{className:"mr-2 h-4 w-4"}),"Edit Settings"]}),d&&t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(T,{onClick:x,children:[t.jsx(Mn,{className:"mr-2 h-4 w-4"}),"Save Changes"]}),t.jsx(T,{variant:"outline",onClick:()=>u(!1),children:"Cancel"})]})]})]}),t.jsxs(P,{className:"glass-card border-destructive/50",children:[t.jsxs(W,{children:[t.jsx(V,{className:"text-destructive",children:"Danger Zone"}),t.jsx(ce,{children:"Irreversible actions"})]}),t.jsxs(M,{children:[t.jsxs(T,{variant:"destructive",onClick:v,children:[t.jsx(Rt,{className:"mr-2 h-4 w-4"}),"Delete Product"]}),c.length>0&&t.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Cannot delete product with active licenses"})]})]})]})]})]})})}function HY(){const[e,s]=f.useState(!1),[r,n]=f.useState(""),[a,i]=f.useState(""),[o,l]=f.useState(""),[c,d]=f.useState(""),[u,m]=f.useState(""),[h,p]=f.useState(!0),[g,x]=f.useState({}),{addClient:v}=mn(),y=w=>{w.preventDefault();const b={},N=JK(r);N.isValid||(b.name=N.error||"Invalid name");const _=aP(a);if(_.isValid||(b.email=_.error||"Invalid email"),c.trim()){const C=XK(c);C.isValid||(b.phone=C.error||"Invalid phone")}if(x(b),Object.keys(b).length>0){z.error("Please fix the validation errors");return}v({name:yd(r.trim(),100),email:yd(a.trim().toLowerCase(),320),company:o.trim()?yd(o.trim(),200):void 0,phone:c.trim()?yd(c.trim(),20):void 0,address:u.trim()?yd(u.trim(),500):void 0,hasCredentials:h}),z.success("Client created successfully"),s(!1),j()},j=()=>{n(""),i(""),l(""),d(""),m(""),p(!0),x({})};return t.jsxs(Xt,{open:e,onOpenChange:s,children:[t.jsx($r,{asChild:!0,children:t.jsxs(T,{children:[t.jsx(at,{className:"mr-2 h-4 w-4"}),"Add Client"]})}),t.jsx(zt,{className:"sm:max-w-[500px]",preventClose:!0,children:t.jsxs("form",{onSubmit:y,children:[t.jsxs(es,{children:[t.jsx(ts,{children:"Create New Client"}),t.jsx(ss,{children:"Add a new client who can receive licenses for your products."})]}),t.jsxs("div",{className:"grid gap-4 py-4",children:[t.jsxs("div",{className:"grid gap-2",children:[t.jsx(O,{htmlFor:"name",children:"Contact Name *"}),t.jsx(se,{id:"name",value:r,onChange:w=>{n(w.target.value),g.name&&x(b=>({...b,name:""}))},placeholder:"John Smith",maxLength:100,className:g.name?"border-destructive":""}),g.name&&t.jsx("p",{className:"text-sm text-destructive",children:g.name})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(O,{htmlFor:"email",children:"Email *"}),t.jsx(se,{id:"email",type:"email",value:a,onChange:w=>{i(w.target.value),g.email&&x(b=>({...b,email:""}))},placeholder:"john@company.com",maxLength:320,className:g.email?"border-destructive":""}),g.email&&t.jsx("p",{className:"text-sm text-destructive",children:g.email})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(O,{htmlFor:"company",children:"Company"}),t.jsx(se,{id:"company",value:o,onChange:w=>l(w.target.value),placeholder:"Company Inc."})]}),t.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.jsxs("div",{className:"grid gap-2",children:[t.jsx(O,{htmlFor:"phone",children:"Phone"}),t.jsx(se,{id:"phone",value:c,onChange:w=>{d(w.target.value),g.phone&&x(b=>({...b,phone:""}))},placeholder:"+1 555-0100",maxLength:20,className:g.phone?"border-destructive":""}),g.phone&&t.jsx("p",{className:"text-sm text-destructive",children:g.phone})]})}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(O,{htmlFor:"address",children:"Address"}),t.jsx(se,{id:"address",value:u,onChange:w=>m(w.target.value),placeholder:"123 Main St, City, Country",maxLength:500})]}),t.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[t.jsxs("div",{children:[t.jsx(O,{children:"CRM API Credentials"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow client to login via CRM API"})]}),t.jsx(nt,{checked:h,onCheckedChange:p})]})]}),t.jsxs(In,{children:[t.jsx(T,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),t.jsx(T,{type:"submit",children:"Create Client"})]})]})})]})}function KY({client:e}){const{deleteClient:s,setClientCredentials:r,licenses:n}=mn(),a=n.filter(c=>c.clientId===e.id),i=a.filter(c=>c.status==="active").length,o=()=>{r(e.id,!e.hasCredentials),z.success(e.hasCredentials?"Credentials disabled":"Credentials enabled")},l=()=>{if(a.length>0){z.error("Cannot delete client with existing licenses");return}s(e.id),z.success("Client deleted")};return t.jsxs(P,{className:"group hover:border-primary/50 transition-all duration-200",children:[t.jsx(W,{className:"pb-3",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Tt,{className:"h-10 w-10",children:t.jsx(Pt,{className:"bg-primary/10 text-primary",children:e.name.split(" ").map(c=>c[0]).join("").toUpperCase()})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-foreground",children:e.name}),e.company&&t.jsx("p",{className:"text-sm text-muted-foreground",children:e.company})]})]}),t.jsxs(Ga,{children:[t.jsx(Ya,{asChild:!0,children:t.jsx(T,{variant:"ghost",size:"icon-sm",children:t.jsx($f,{className:"h-4 w-4"})})}),t.jsxs(fa,{align:"end",children:[t.jsxs(mt,{children:[t.jsx(zo,{className:"mr-2 h-4 w-4"}),"Edit"]}),t.jsxs(mt,{children:[t.jsx(Nt,{className:"mr-2 h-4 w-4"}),"Assign License"]}),t.jsx(za,{}),t.jsx(mt,{onClick:o,children:e.hasCredentials?t.jsxs(t.Fragment,{children:[t.jsx($m,{className:"mr-2 h-4 w-4"}),"Disable Credentials"]}):t.jsxs(t.Fragment,{children:[t.jsx(Fm,{className:"mr-2 h-4 w-4"}),"Enable Credentials"]})}),t.jsx(za,{}),t.jsxs(mt,{onClick:l,className:"text-destructive focus:text-destructive",children:[t.jsx(Rt,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})}),t.jsxs(M,{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[t.jsx(ys,{className:"h-4 w-4"}),t.jsx("span",{children:e.email})]}),e.phone&&t.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[t.jsx(PS,{className:"h-4 w-4"}),t.jsx("span",{children:e.phone})]})]}),t.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Bo,{className:"h-4 w-4 text-muted-foreground"}),t.jsxs("span",{className:"text-sm",children:[t.jsx("span",{className:"font-medium text-foreground",children:i}),t.jsxs("span",{className:"text-muted-foreground",children:[" active license",i!==1&&"s"]})]})]}),t.jsx($,{variant:e.hasCredentials?"success":"secondary",children:e.hasCredentials?"API Access":"Offline Only"})]}),e.lastLoginAt&&t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last login: ",pe(new Date(e.lastLoginAt),"MMM d, yyyy HH:mm")]})]})]})}const GY=()=>{const e=Qe(),{clients:s}=mn(),[r,n]=f.useState(""),[a,i]=f.useState("all"),o=s.filter(l=>{var u;const c=l.name.toLowerCase().includes(r.toLowerCase())||l.email.toLowerCase().includes(r.toLowerCase())||((u=l.company)==null?void 0:u.toLowerCase().includes(r.toLowerCase())),d=a==="all"||a==="api"&&l.hasCredentials||a==="offline"&&!l.hasCredentials;return c&&d});return t.jsx(Or,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:"Clients"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage clients and their product access"})]}),t.jsx(HY,{})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"relative flex-1 max-w-sm",children:[t.jsx(ns,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t.jsx(se,{placeholder:"Search clients...",value:r,onChange:l=>n(l.target.value),className:"pl-9"})]}),t.jsx(kt,{value:a,onValueChange:i,children:t.jsxs(St,{children:[t.jsxs(he,{value:"all",children:["All (",s.length,")"]}),t.jsxs(he,{value:"api",children:["API Access (",s.filter(l=>l.hasCredentials).length,")"]}),t.jsxs(he,{value:"offline",children:["Offline Only (",s.filter(l=>!l.hasCredentials).length,")"]})]})})]}),o.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[t.jsx(Kt,{className:"h-12 w-12 text-muted-foreground mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-foreground",children:"No clients found"}),t.jsx("p",{className:"text-muted-foreground",children:r?"Try a different search term":"Add your first client to get started"})]}):t.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:o.map(l=>t.jsx("div",{onClick:()=>e(`/clients/${l.id}`),className:"cursor-pointer",children:t.jsx(KY,{client:l})},l.id))})]})})};function YY(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=[8,4,4,4,12];let n="lk_";return s.forEach((a,i)=>{for(let o=0;o<a;o++)n+=e.charAt(Math.floor(Math.random()*e.length));i<s.length-1&&(n+="-")}),n}async function QY(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function ZY({clientId:e,hasApiKey:s,apiCredentialsEnabled:r,onUpdate:n}){const{toast:a}=Ji(),[i,o]=f.useState(!1),[l,c]=f.useState(null),[d,u]=f.useState(!1),m=async()=>{o(!0);try{const x=YY(),v=await QY(x),{error:y}=await B.from("clients").update({api_key_hash:v,api_credentials_enabled:!0}).eq("id",e);if(y)throw y;c(x),u(!0),n(),a({title:"API Key Generated",description:"Save this key securely - it cannot be retrieved later."})}catch(x){a({title:"Failed to generate API key",description:x.message,variant:"destructive"})}finally{o(!1)}},h=async()=>{try{const{error:x}=await B.from("clients").update({api_key_hash:null,api_credentials_enabled:!1}).eq("id",e);if(x)throw x;c(null),n(),a({title:"API Key Revoked",description:"The API key has been disabled."})}catch(x){a({title:"Failed to revoke API key",description:x.message,variant:"destructive"})}},p=async()=>{try{const{error:x}=await B.from("clients").update({api_credentials_enabled:!r}).eq("id",e);if(x)throw x;n(),a({title:r?"API Access Disabled":"API Access Enabled"})}catch(x){a({title:"Failed to update settings",description:x.message,variant:"destructive"})}},g=async x=>{try{await navigator.clipboard.writeText(x),a({title:"Copied to clipboard"})}catch{a({title:"Failed to copy",variant:"destructive"})}};return t.jsxs(P,{className:"glass-card",children:[t.jsxs(W,{children:[t.jsxs(V,{className:"flex items-center gap-2",children:[t.jsx(Nt,{className:"h-5 w-5"}),"License API Access"]}),t.jsx(ce,{children:"Manage API keys for license validation, activation, and deactivation endpoints"})]}),t.jsxs(M,{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-muted/50",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[r&&s?t.jsx(Fm,{className:"h-8 w-8 text-success"}):t.jsx($m,{className:"h-8 w-8 text-muted-foreground"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:r&&s?"API Access Active":s?"API Access Disabled":"No API Key Configured"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:r&&s?"Client can use license management endpoints":s?"API key exists but access is disabled":"Generate an API key to enable access"})]})]}),t.jsx($,{variant:r&&s?"default":"secondary",children:r&&s?"Active":s?"Disabled":"Not Configured"})]}),l&&t.jsxs("div",{className:"p-4 rounded-lg bg-warning/10 border border-warning/30 space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-warning",children:[t.jsx(Nt,{className:"h-4 w-4"}),t.jsx("span",{className:"font-medium",children:"New API Key Generated"})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:" Save this key now! It will only be shown once and cannot be retrieved later."}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(se,{value:d?l:"".repeat(40),readOnly:!0,className:"font-mono text-sm"}),t.jsx(T,{variant:"outline",size:"icon",onClick:()=>u(!d),children:d?t.jsx(_O,{className:"h-4 w-4"}):t.jsx(rn,{className:"h-4 w-4"})}),t.jsx(T,{variant:"outline",size:"icon",onClick:()=>g(l),children:t.jsx(Uo,{className:"h-4 w-4"})})]}),t.jsx(T,{variant:"outline",size:"sm",onClick:()=>c(null),children:"I've saved the key"})]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:s?t.jsxs(t.Fragment,{children:[t.jsx(T,{variant:r?"outline":"default",onClick:p,children:r?t.jsxs(t.Fragment,{children:[t.jsx($m,{className:"mr-2 h-4 w-4"}),"Disable Access"]}):t.jsxs(t.Fragment,{children:[t.jsx(Fm,{className:"mr-2 h-4 w-4"}),"Enable Access"]})}),t.jsxs(cn,{children:[t.jsx(Jo,{asChild:!0,children:t.jsxs(T,{variant:"outline",children:[t.jsx(hj,{className:"mr-2 h-4 w-4"}),"Rotate Key"]})}),t.jsxs(Ur,{children:[t.jsxs(Br,{children:[t.jsx(qr,{children:"Rotate API Key?"}),t.jsx(Wr,{children:"This will invalidate the current API key and generate a new one. Any applications using the old key will stop working immediately."})]}),t.jsxs(zr,{children:[t.jsx(Hr,{children:"Cancel"}),t.jsx(Vr,{onClick:m,children:"Rotate Key"})]})]})]}),t.jsxs(cn,{children:[t.jsx(Jo,{asChild:!0,children:t.jsxs(T,{variant:"destructive",children:[t.jsx(Rt,{className:"mr-2 h-4 w-4"}),"Revoke Key"]})}),t.jsxs(Ur,{children:[t.jsxs(Br,{children:[t.jsx(qr,{children:"Revoke API Key?"}),t.jsx(Wr,{children:"This will permanently delete the API key. The client will no longer be able to access license management endpoints."})]}),t.jsxs(zr,{children:[t.jsx(Hr,{children:"Cancel"}),t.jsx(Vr,{onClick:h,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Revoke Key"})]})]})]})]}):t.jsxs(T,{onClick:m,disabled:i,children:[t.jsx(Nt,{className:"mr-2 h-4 w-4"}),i?"Generating...":"Generate API Key"]})}),t.jsxs("div",{className:"mt-4 p-4 rounded-lg bg-muted/30 space-y-2",children:[t.jsx("p",{className:"text-sm font-medium",children:"Usage"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Include the API key in requests to license endpoints:"}),t.jsx("code",{className:"block text-xs bg-background p-2 rounded font-mono",children:"X-API-Key: lk_xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}),t.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Endpoints: ",t.jsx("code",{className:"text-xs",children:"/license-validate"}),", ",t.jsx("code",{className:"text-xs",children:"/license-activate"}),", ",t.jsx("code",{className:"text-xs",children:"/license-deactivate"})]})]})]})]})}function JY({clientId:e,clientEmail:s,userId:r,onUpdate:n}){const{toast:a}=Ji(),[i,o]=f.useState(!1),[l,c]=f.useState(!1),[d,u]=f.useState(!1),[m,h]=f.useState(!1),[p,g]=f.useState(""),[x,v]=f.useState(""),[y,j]=f.useState(""),w=()=>{const _="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghjkmnpqrstuvwxyz23456789!@#$%";let C="";for(let E=0;E<16;E++)C+=_.charAt(Math.floor(Math.random()*_.length));g(C),v(C)},b=async()=>{if(p.length<6){a({title:"Invalid password",description:"Password must be at least 6 characters",variant:"destructive"});return}if(p!==x){a({title:"Passwords do not match",description:"Please ensure both passwords match",variant:"destructive"});return}o(!0);try{const{data:_,error:C}=await B.auth.signUp({email:s,password:p,options:{data:{is_client:!0}}});if(C)throw C;if(_.user){const{error:E}=await B.from("clients").update({user_id:_.user.id}).eq("id",e);if(E)throw E;a({title:"Portal account created",description:`Client can now log in at /portal/auth with email: ${s}`}),h(!1),g(""),v(""),n()}}catch(_){a({title:"Failed to create portal account",description:_.message,variant:"destructive"})}finally{o(!1)}},N=async()=>{try{const{error:_}=await B.from("clients").update({user_id:null}).eq("id",e);if(_)throw _;a({title:"Portal access removed"}),n()}catch(_){a({title:"Failed to remove portal access",description:_.message,variant:"destructive"})}};return t.jsxs(P,{className:"glass",children:[t.jsxs(W,{children:[t.jsxs(V,{className:"flex items-center gap-2",children:[t.jsx(qs,{className:"h-5 w-5"}),"Portal Access"]}),t.jsx(ce,{children:"Allow clients to access the self-service portal to view licenses, manage devices, and submit support tickets."})]}),t.jsx(M,{className:"space-y-4",children:r?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg bg-success/10 border border-success/20",children:[t.jsx(vt,{className:"h-5 w-5 text-success"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-medium text-success",children:"Portal Access Enabled"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"This client can log in to the portal with their email address."})]}),t.jsx($,{variant:"outline",className:"text-success border-success",children:"Active"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(T,{variant:"outline",size:"sm",asChild:!0,children:t.jsxs("a",{href:"/portal/auth",target:"_blank",rel:"noopener noreferrer",children:[t.jsx(Uu,{className:"mr-2 h-4 w-4"}),"Open Portal"]})}),t.jsxs(cn,{children:[t.jsx(Jo,{asChild:!0,children:t.jsxs(T,{variant:"outline",size:"sm",className:"text-destructive",children:[t.jsx(MO,{className:"mr-2 h-4 w-4"}),"Remove Access"]})}),t.jsxs(Ur,{children:[t.jsxs(Br,{children:[t.jsx(qr,{children:"Remove Portal Access?"}),t.jsx(Wr,{children:"This will unlink the client's account from the portal. They will no longer be able to access their licenses and support tickets through the portal."})]}),t.jsxs(zr,{children:[t.jsx(Hr,{children:"Cancel"}),t.jsx(Vr,{onClick:N,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Remove Access"})]})]})]})]})]}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg bg-muted/50 border border-border",children:[t.jsx(qs,{className:"h-5 w-5 text-muted-foreground"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-medium",children:"No Portal Access"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Create a portal account to allow the client to self-service."})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs(Xt,{open:m,onOpenChange:h,children:[t.jsx($r,{asChild:!0,children:t.jsxs(T,{size:"sm",children:[t.jsx(Nt,{className:"mr-2 h-4 w-4"}),"Create Portal Account"]})}),t.jsxs(zt,{preventClose:!0,children:[t.jsxs(es,{children:[t.jsx(ts,{children:"Create Portal Account"}),t.jsxs(ss,{children:["Create a new account for ",s," to access the client portal."]})]}),t.jsxs("div",{className:"space-y-4 py-4",children:[t.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-muted/50",children:[t.jsx(ys,{className:"h-4 w-4 text-muted-foreground"}),t.jsx("span",{className:"text-sm",children:s})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(O,{htmlFor:"password",children:"Password"}),t.jsx(T,{type:"button",variant:"ghost",size:"sm",onClick:w,children:"Generate"})]}),t.jsx(se,{id:"password",type:"text",placeholder:"Enter password",value:p,onChange:_=>g(_.target.value)})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"confirm-password",children:"Confirm Password"}),t.jsx(se,{id:"confirm-password",type:"text",placeholder:"Confirm password",value:x,onChange:_=>v(_.target.value)})]}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Share these credentials securely with the client. They can log in at ",t.jsx("code",{className:"bg-muted px-1 rounded",children:"/portal/auth"})]})]}),t.jsxs(In,{children:[t.jsx(T,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),t.jsx(T,{onClick:b,disabled:i,children:i?t.jsxs(t.Fragment,{children:[t.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Account"})]})]})]})})]})})]})}function XY(e){const[s,r]=f.useState(null),[n,a]=f.useState(!0),{toast:i}=Ji(),o=f.useCallback(async()=>{if(!e){a(!1);return}try{const{data:c,error:d}=await B.from("clients").select("*").eq("id",e).single();if(d)throw d;r(c)}catch(c){console.error("Error fetching client:",c),i({title:"Error loading client",description:c.message,variant:"destructive"})}finally{a(!1)}},[e,i]);return{client:s,loading:n,fetchClient:o,updateClient:async c=>{if(e)try{const{error:d}=await B.from("clients").update(c).eq("id",e);if(d)throw d;await o(),i({title:"Client updated successfully"})}catch(d){i({title:"Failed to update client",description:d.message,variant:"destructive"})}},refetch:o}}function eQ(){const{id:e}=ma(),s=Qe(),{toast:r}=Ji(),{client:n,loading:a,refetch:i}=XY(e),[o,l]=f.useState([]),[c,d]=f.useState([]),[u,m]=f.useState(!1),[h,p]=f.useState({name:"",email:"",company:"",phone:"",address:""});f.useEffect(()=>{i()},[i]),f.useEffect(()=>{(async()=>{if(n!=null&&n.id)try{await B.rpc("log_client_pii_access",{p_client_id:n.id,p_access_type:"view_details"})}catch(w){console.error("Failed to log PII access:",w)}})()},[n==null?void 0:n.id]),f.useEffect(()=>{n&&(p({name:n.name||"",email:n.email||"",company:n.company||"",phone:n.phone||"",address:typeof n.address=="object"?JSON.stringify(n.address):n.address||""}),g())},[n]);const g=async()=>{if(!e)return;const{data:j}=await B.from("licenses").select("*, product:products(name)").eq("client_id",e);if(j){l(j);const w=j.map(b=>b.id);if(w.length>0){const{data:b}=await B.from("activations").select("*").in("license_id",w);b&&d(b)}}};if(a)return t.jsx(Or,{children:t.jsx("div",{className:"flex items-center justify-center h-[60vh]",children:t.jsx(Ie,{className:"h-8 w-8 animate-spin text-muted-foreground"})})});if(!n)return t.jsx(Or,{children:t.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] gap-4",children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Client Not Found"}),t.jsxs(T,{onClick:()=>s("/clients"),children:[t.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Back to Clients"]})]})});const x=async()=>{try{const{error:j}=await B.from("clients").update({name:h.name,email:h.email,company:h.company||null,phone:h.phone||null}).eq("id",n.id);if(j)throw j;m(!1),i(),r({title:"Client updated successfully"})}catch(j){r({title:"Failed to update client",description:j.message,variant:"destructive"})}},v=async()=>{if(o.length>0){r({title:"Cannot delete client",description:"This client has active licenses",variant:"destructive"});return}try{const{error:j}=await B.from("clients").delete().eq("id",n.id);if(j)throw j;r({title:"Client deleted"}),s("/clients")}catch(j){r({title:"Failed to delete client",description:j.message,variant:"destructive"})}},y=c.filter(j=>j.status==="active");return t.jsx(Or,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(T,{variant:"ghost",size:"icon",onClick:()=>s("/clients"),children:t.jsx(Ft,{className:"h-5 w-5"})}),t.jsx("div",{className:"h-14 w-14 rounded-xl bg-primary/20 flex items-center justify-center",children:t.jsx(Qt,{className:"h-7 w-7 text-primary"})}),t.jsxs("div",{children:[u?t.jsx(se,{value:h.name,onChange:j=>p({...h,name:j.target.value}),className:"text-2xl font-bold h-auto py-1"}):t.jsx("h1",{className:"text-2xl font-bold",children:n.name}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx($,{variant:n.api_credentials_enabled?"default":"secondary",children:n.api_credentials_enabled?"API Access":"No API Access"}),n.company&&t.jsx("span",{className:"text-muted-foreground text-sm",children:n.company})]})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:u?t.jsxs(t.Fragment,{children:[t.jsxs(T,{variant:"ghost",onClick:()=>m(!1),children:[t.jsx(Ct,{className:"mr-2 h-4 w-4"}),"Cancel"]}),t.jsxs(T,{onClick:x,children:[t.jsx(Mn,{className:"mr-2 h-4 w-4"}),"Save"]})]}):t.jsxs(t.Fragment,{children:[t.jsxs(T,{variant:"outline",onClick:()=>m(!0),children:[t.jsx(Pn,{className:"mr-2 h-4 w-4"}),"Edit"]}),t.jsxs(cn,{children:[t.jsx(Jo,{asChild:!0,children:t.jsxs(T,{variant:"destructive",children:[t.jsx(Rt,{className:"mr-2 h-4 w-4"}),"Delete"]})}),t.jsxs(Ur,{children:[t.jsxs(Br,{children:[t.jsx(qr,{children:"Delete Client?"}),t.jsxs(Wr,{children:["This action cannot be undone. This will permanently delete the client",o.length>0&&" and may affect existing licenses","."]})]}),t.jsxs(zr,{children:[t.jsx(Hr,{children:"Cancel"}),t.jsx(Vr,{onClick:v,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})]})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx(P,{className:"glass-card",children:t.jsxs(W,{className:"pb-2",children:[t.jsx(ce,{children:"Total Licenses"}),t.jsx(V,{className:"text-3xl",children:o.length})]})}),t.jsx(P,{className:"glass-card",children:t.jsxs(W,{className:"pb-2",children:[t.jsx(ce,{children:"Active Licenses"}),t.jsx(V,{className:"text-3xl text-success",children:o.filter(j=>j.status==="active").length})]})}),t.jsx(P,{className:"glass-card",children:t.jsxs(W,{className:"pb-2",children:[t.jsx(ce,{children:"Active Devices"}),t.jsx(V,{className:"text-3xl text-primary",children:y.length})]})}),t.jsx(P,{className:"glass-card",children:t.jsxs(W,{className:"pb-2",children:[t.jsx(ce,{children:"API Access"}),t.jsx(V,{className:"text-lg",children:n.api_credentials_enabled&&n.api_key_hash?t.jsxs("span",{className:"flex items-center gap-2 text-success",children:[t.jsx(Fm,{className:"h-5 w-5"}),"Enabled"]}):t.jsxs("span",{className:"flex items-center gap-2 text-muted-foreground",children:[t.jsx($m,{className:"h-5 w-5"}),"Disabled"]})})]})})]}),t.jsxs(kt,{defaultValue:"overview",className:"space-y-4",children:[t.jsxs(St,{children:[t.jsxs(he,{value:"overview",className:"gap-2",children:[t.jsx(Qt,{className:"h-4 w-4"}),"Overview"]}),t.jsxs(he,{value:"licenses",className:"gap-2",children:[t.jsx(Nt,{className:"h-4 w-4"}),"Licenses"]}),t.jsxs(he,{value:"devices",className:"gap-2",children:[t.jsx(Bs,{className:"h-4 w-4"}),"Devices"]}),t.jsxs(he,{value:"settings",className:"gap-2",children:[t.jsx(Js,{className:"h-4 w-4"}),"Settings"]})]}),t.jsxs(Ce,{value:"overview",className:"space-y-4",children:[t.jsxs(P,{className:"glass-card",children:[t.jsx(W,{children:t.jsx(V,{children:"Client Information"})}),t.jsx(M,{className:"space-y-4",children:t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(ys,{className:"h-5 w-5 text-muted-foreground"}),t.jsxs("div",{children:[t.jsx(O,{className:"text-muted-foreground",children:"Email"}),t.jsx("p",{className:"font-medium",children:n.email})]})]}),n.phone&&t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(PS,{className:"h-5 w-5 text-muted-foreground"}),t.jsxs("div",{children:[t.jsx(O,{className:"text-muted-foreground",children:"Phone"}),t.jsx("p",{className:"font-medium",children:n.phone})]})]}),n.company&&t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Qt,{className:"h-5 w-5 text-muted-foreground"}),t.jsxs("div",{children:[t.jsx(O,{className:"text-muted-foreground",children:"Company"}),t.jsx("p",{className:"font-medium",children:n.company})]})]})]})})]}),t.jsx(ZY,{clientId:n.id,hasApiKey:!!n.api_key_hash,apiCredentialsEnabled:n.api_credentials_enabled,onUpdate:i})]}),t.jsxs(Ce,{value:"licenses",className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Client Licenses"}),t.jsxs(T,{onClick:()=>s("/licenses"),children:[t.jsx(at,{className:"mr-2 h-4 w-4"}),"Issue License"]})]}),o.length>0?t.jsx("div",{className:"grid gap-4",children:o.map(j=>{var w;return t.jsx(P,{className:"glass-card cursor-pointer hover:border-primary/50 transition-colors",onClick:()=>s(`/licenses/${j.id}`),children:t.jsxs(M,{className:"flex items-center justify-between p-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(Nt,{className:"h-6 w-6 text-primary"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-mono text-sm",children:j.license_key}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:[((w=j.product)==null?void 0:w.name)||"Unknown Product","  ",j.license_type]})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"text-sm",children:[j.current_activations,"/",j.max_activations," devices"]}),j.valid_until&&t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Expires: ",new Date(j.valid_until).toLocaleDateString()]})]}),t.jsx($,{variant:j.status==="active"?"default":j.status==="expired"?"secondary":"destructive",children:j.status})]})]})},j.id)})}):t.jsx(P,{className:"glass-card",children:t.jsxs(M,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(Nt,{className:"h-12 w-12 text-muted-foreground mb-4"}),t.jsx("p",{className:"text-muted-foreground",children:"No licenses assigned"}),t.jsxs(T,{className:"mt-4",onClick:()=>s("/licenses"),children:[t.jsx(at,{className:"mr-2 h-4 w-4"}),"Issue First License"]})]})})]}),t.jsxs(Ce,{value:"devices",className:"space-y-4",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Device Activations"}),c.length>0?t.jsx(P,{className:"glass-card",children:t.jsx(M,{className:"p-0",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b",children:[t.jsx("th",{className:"text-left p-4 font-medium",children:"Device"}),t.jsx("th",{className:"text-left p-4 font-medium",children:"Status"}),t.jsx("th",{className:"text-left p-4 font-medium",children:"IP Address"}),t.jsx("th",{className:"text-left p-4 font-medium",children:"Activated"})]})}),t.jsx("tbody",{children:c.map(j=>t.jsxs("tr",{className:"border-b last:border-0",children:[t.jsx("td",{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Bs,{className:"h-4 w-4 text-muted-foreground"}),t.jsx("span",{children:j.device_name||j.device_id.slice(0,12)})]})}),t.jsx("td",{className:"p-4",children:t.jsx($,{variant:j.status==="active"?"default":"secondary",children:j.status})}),t.jsx("td",{className:"p-4 text-muted-foreground",children:j.ip_address||"Unknown"}),t.jsx("td",{className:"p-4 text-muted-foreground",children:new Date(j.activated_at).toLocaleDateString()})]},j.id))})]})})}):t.jsx(P,{className:"glass-card",children:t.jsxs(M,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(Bs,{className:"h-12 w-12 text-muted-foreground mb-4"}),t.jsx("p",{className:"text-muted-foreground",children:"No devices activated"})]})})]}),t.jsxs(Ce,{value:"settings",className:"space-y-4",children:[t.jsx(JY,{clientId:n.id,clientEmail:n.email,userId:n.user_id||null,onUpdate:i}),t.jsxs(P,{className:"glass-card",children:[t.jsxs(W,{children:[t.jsx(V,{children:"Client Settings"}),t.jsx(ce,{children:"Manage client information"})]}),t.jsxs(M,{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Name"}),t.jsx(se,{value:h.name,onChange:j=>p({...h,name:j.target.value}),disabled:!u})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Email"}),t.jsx(se,{type:"email",value:h.email,onChange:j=>p({...h,email:j.target.value}),disabled:!u})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Company"}),t.jsx(se,{value:h.company,onChange:j=>p({...h,company:j.target.value}),disabled:!u})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Phone"}),t.jsx(se,{value:h.phone,onChange:j=>p({...h,phone:j.target.value}),disabled:!u})]})]}),!u&&t.jsxs(T,{onClick:()=>m(!0),children:[t.jsx(Pn,{className:"mr-2 h-4 w-4"}),"Edit Settings"]}),u&&t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(T,{onClick:x,children:[t.jsx(Mn,{className:"mr-2 h-4 w-4"}),"Save Changes"]}),t.jsx(T,{variant:"outline",onClick:()=>m(!1),children:"Cancel"})]})]})]}),t.jsxs(P,{className:"glass-card border-destructive/50",children:[t.jsxs(W,{children:[t.jsx(V,{className:"text-destructive",children:"Danger Zone"}),t.jsx(ce,{children:"Irreversible actions"})]}),t.jsxs(M,{children:[t.jsxs(cn,{children:[t.jsx(Jo,{asChild:!0,children:t.jsxs(T,{variant:"destructive",children:[t.jsx(Rt,{className:"mr-2 h-4 w-4"}),"Delete Client"]})}),t.jsxs(Ur,{children:[t.jsxs(Br,{children:[t.jsx(qr,{children:"Delete Client?"}),t.jsx(Wr,{children:"This action cannot be undone."})]}),t.jsxs(zr,{children:[t.jsx(Hr,{children:"Cancel"}),t.jsx(Vr,{onClick:v,className:"bg-destructive text-destructive-foreground",children:"Delete"})]})]})]}),o.length>0&&t.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Cannot delete client with active licenses"})]})]})]})]})]})})}function tQ(){const[e,s]=f.useState(!1),[r,n]=f.useState(""),[a,i]=f.useState(""),[o,l]=f.useState("online"),[c,d]=f.useState("5"),[u,m]=f.useState(""),[h,p]=f.useState("basic"),[g,x]=f.useState(""),[v,y]=f.useState([]),[j,w]=f.useState(""),[b,N]=f.useState(""),{addLicense:_,products:C,clients:E}=mn(),k=F=>{if(F.preventDefault(),!r||!a){z.error("Product and client are required");return}_({productId:r,clientId:a,type:o,status:"active",entitlements:v,maxActivations:parseInt(c)||5,issuedAt:new Date().toISOString(),expiresAt:u||void 0,supportLevel:h,notes:g.trim()||void 0}),z.success("License created successfully"),s(!1),A()},A=()=>{n(""),i(""),l("online"),d("5"),m(""),p("basic"),x(""),y([])},L=()=>{j.trim()&&(y([...v,{id:`ent_${Date.now()}`,type:"feature",name:j.trim(),value:b.trim()||!0}]),w(""),N(""))},H=F=>{y(v.filter(I=>I.id!==F))};return t.jsxs(Xt,{open:e,onOpenChange:s,children:[t.jsx($r,{asChild:!0,children:t.jsxs(T,{children:[t.jsx(at,{className:"mr-2 h-4 w-4"}),"Issue License"]})}),t.jsx(zt,{className:"sm:max-w-[550px] max-h-[90vh] overflow-y-auto",preventClose:!0,children:t.jsxs("form",{onSubmit:k,children:[t.jsxs(es,{children:[t.jsx(ts,{children:"Issue New License"}),t.jsx(ss,{children:"Create a new license for a client with specified entitlements."})]}),t.jsxs("div",{className:"grid gap-4 py-4",children:[t.jsxs("div",{className:"grid gap-2",children:[t.jsx(O,{children:"Product"}),t.jsxs($e,{value:r,onValueChange:n,children:[t.jsx(Le,{children:t.jsx(Ue,{placeholder:"Select product..."})}),t.jsx(Fe,{children:C.filter(F=>F.isActive).map(F=>t.jsxs(Z,{value:F.id,children:[F.name," (v",F.version,")"]},F.id))})]})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(O,{children:"Client"}),t.jsxs($e,{value:a,onValueChange:i,children:[t.jsx(Le,{children:t.jsx(Ue,{placeholder:"Select client..."})}),t.jsx(Fe,{children:E.map(F=>t.jsxs(Z,{value:F.id,children:[F.name," ",F.company&&`(${F.company})`]},F.id))})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"grid gap-2",children:[t.jsx(O,{children:"License Type"}),t.jsxs($e,{value:o,onValueChange:F=>l(F),children:[t.jsx(Le,{children:t.jsx(Ue,{})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"online",children:"Online Only"}),t.jsx(Z,{value:"offline",children:"Offline Only"}),t.jsx(Z,{value:"hybrid",children:"Hybrid (Both)"})]})]})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(O,{children:"Max Activations"}),t.jsx(se,{type:"number",min:"1",value:c,onChange:F=>d(F.target.value)})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"grid gap-2",children:[t.jsx(O,{children:"Expires At"}),t.jsx(se,{type:"date",value:u,onChange:F=>m(F.target.value)})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(O,{children:"Support Level"}),t.jsxs($e,{value:h,onValueChange:F=>p(F),children:[t.jsx(Le,{children:t.jsx(Ue,{})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"basic",children:"Basic"}),t.jsx(Z,{value:"premium",children:"Premium"}),t.jsx(Z,{value:"enterprise",children:"Enterprise"})]})]})]})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(O,{children:"Entitlements"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(se,{placeholder:"Feature name...",value:j,onChange:F=>w(F.target.value),className:"flex-1"}),t.jsx(se,{placeholder:"Value (optional)",value:b,onChange:F=>N(F.target.value),className:"w-32"}),t.jsx(T,{type:"button",variant:"outline",onClick:L,children:"Add"})]}),v.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:v.map(F=>t.jsxs($,{variant:"secondary",className:"gap-1",children:[F.name,F.value!==!0&&`: ${F.value}`,t.jsx(Ct,{className:"h-3 w-3 cursor-pointer",onClick:()=>H(F.id)})]},F.id))})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(O,{children:"Notes"}),t.jsx(Bt,{value:g,onChange:F=>x(F.target.value),placeholder:"Internal notes about this license..."})]})]}),t.jsxs(In,{children:[t.jsx(T,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),t.jsx(T,{type:"submit",children:"Issue License"})]})]})})]})}const sQ={online:LS,offline:MS,hybrid:hj},rQ={active:"success",expired:"warning",suspended:"warning",revoked:"destructive",pending:"secondary"};function nQ({license:e}){var m,h;const{deleteLicense:s,revokeLicense:r,generateOfflineBundle:n}=mn(),a=sQ[e.type]||Nt,i=e.expiresAt&&oa(new Date(e.expiresAt)),o=e.expiresAt&&K9(new Date(e.expiresAt))&&oa(gs(new Date,-30)),l=()=>{navigator.clipboard.writeText(e.licenseKey),z.success("License key copied to clipboard")},c=()=>{r(e.id),z.success("License revoked")},d=()=>{s(e.id),z.success("License deleted")},u=()=>{n(e.id),z.success("Offline bundle generated")};return t.jsxs(P,{className:"group hover:border-primary/50 transition-all duration-200",children:[t.jsx(W,{className:"pb-3",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10",children:t.jsx(a,{className:"h-5 w-5 text-primary"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-foreground",children:((m=e.product)==null?void 0:m.name)||"Unknown Product"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:((h=e.client)==null?void 0:h.name)||"Unknown Client"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx($,{variant:rQ[e.status],children:e.status}),t.jsxs(Ga,{children:[t.jsx(Ya,{asChild:!0,children:t.jsx(T,{variant:"ghost",size:"icon-sm",children:t.jsx($f,{className:"h-4 w-4"})})}),t.jsxs(fa,{align:"end",children:[t.jsxs(mt,{onClick:l,children:[t.jsx(Uo,{className:"mr-2 h-4 w-4"}),"Copy License Key"]}),t.jsxs(mt,{children:[t.jsx(zo,{className:"mr-2 h-4 w-4"}),"Edit"]}),(e.type==="offline"||e.type==="hybrid")&&t.jsxs(mt,{onClick:u,children:[t.jsx($a,{className:"mr-2 h-4 w-4"}),"Generate Offline Bundle"]}),t.jsx(za,{}),e.status==="active"&&t.jsxs(mt,{onClick:c,className:"text-warning",children:[t.jsx(ev,{className:"mr-2 h-4 w-4"}),"Revoke License"]}),t.jsxs(mt,{onClick:d,className:"text-destructive focus:text-destructive",children:[t.jsx(Rt,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})]})}),t.jsxs(M,{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2 font-mono text-sm bg-muted/50 rounded px-3 py-2",children:[t.jsx(Nt,{className:"h-4 w-4 text-muted-foreground shrink-0"}),t.jsx("span",{className:"truncate",children:e.licenseKey}),t.jsx(T,{variant:"ghost",size:"icon-sm",className:"ml-auto shrink-0",onClick:l,children:t.jsx(Uo,{className:"h-3.5 w-3.5"})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Bs,{className:"h-4 w-4 text-muted-foreground"}),t.jsxs("span",{children:[t.jsx("span",{className:"font-medium text-foreground",children:e.currentActivations}),t.jsxs("span",{className:"text-muted-foreground",children:["/",e.maxActivations," seats"]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(a,{className:"h-4 w-4 text-muted-foreground"}),t.jsx("span",{className:"text-muted-foreground capitalize",children:e.type})]})]}),e.expiresAt&&t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx(Lr,{className:"h-4 w-4 text-muted-foreground"}),t.jsx("span",{className:i?"text-destructive":o?"text-warning":"text-muted-foreground",children:i?`Expired ${sd(new Date(e.expiresAt))} ago`:`Expires ${pe(new Date(e.expiresAt),"MMM d, yyyy")}`})]}),e.entitlements.length>0&&t.jsxs("div",{className:"flex flex-wrap gap-1 pt-2 border-t",children:[e.entitlements.slice(0,3).map(p=>t.jsx($,{variant:"outline",className:"text-xs",children:p.name},p.id)),e.entitlements.length>3&&t.jsxs($,{variant:"outline",className:"text-xs",children:["+",e.entitlements.length-3," more"]})]}),e.supportLevel&&t.jsxs($,{variant:"secondary",className:"capitalize",children:[e.supportLevel," support"]})]})]})}function CP({activations:e}){const{deactivateDevice:s}=mn(),r=n=>{s(n),z.success("Device deactivated")};return e.length===0?t.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No activations found"}):t.jsxs(Rs,{children:[t.jsx(Is,{children:t.jsxs(ot,{children:[t.jsx(ae,{children:"Device"}),t.jsx(ae,{children:"License"}),t.jsx(ae,{children:"Status"}),t.jsx(ae,{children:"Activated"}),t.jsx(ae,{children:"Last Seen"}),t.jsx(ae,{className:"w-[50px]"})]})}),t.jsx(Ds,{children:e.map(n=>{var a;return t.jsxs(ot,{children:[t.jsx(ne,{children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Bs,{className:"h-4 w-4 text-muted-foreground"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:n.deviceName}),t.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:n.deviceId})]})]})}),t.jsx(ne,{children:t.jsxs("span",{className:"text-sm font-mono",children:[(a=n.license)==null?void 0:a.licenseKey.slice(0,12),"..."]})}),t.jsx(ne,{children:t.jsx($,{variant:n.status==="active"?"success":"secondary",children:n.status})}),t.jsx(ne,{className:"text-muted-foreground",children:pe(new Date(n.activatedAt),"MMM d, yyyy")}),t.jsx(ne,{className:"text-muted-foreground",children:sd(new Date(n.lastSeenAt),{addSuffix:!0})}),t.jsx(ne,{children:n.status==="active"&&t.jsx(T,{variant:"ghost",size:"icon-sm",onClick:()=>r(n.id),className:"text-destructive hover:text-destructive",children:t.jsx(Rt,{className:"h-4 w-4"})})})]},n.id)})})]})}const aQ=()=>{const e=Qe(),{licenses:s,activations:r}=mn(),[n,a]=f.useState(""),[i,o]=f.useState("all"),[l,c]=f.useState("all"),[d,u]=f.useState("licenses"),m=s.filter(p=>{var y,j;const g=p.licenseKey.toLowerCase().includes(n.toLowerCase())||((y=p.product)==null?void 0:y.name.toLowerCase().includes(n.toLowerCase()))||((j=p.client)==null?void 0:j.name.toLowerCase().includes(n.toLowerCase())),x=i==="all"||p.type===i,v=l==="all"||p.status===l;return g&&x&&v}),h={total:s.length,active:s.filter(p=>p.status==="active").length,online:s.filter(p=>p.type==="online").length,offline:s.filter(p=>p.type==="offline").length,hybrid:s.filter(p=>p.type==="hybrid").length,totalActivations:r.filter(p=>p.status==="active").length};return t.jsx(Or,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:"Licenses"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage software licenses and device activations"})]}),t.jsx(tQ,{})]}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[t.jsx(P,{children:t.jsx(M,{className:"pt-6",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10",children:t.jsx(Nt,{className:"h-5 w-5 text-primary"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-semibold",children:h.active}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Licenses"})]})]})})}),t.jsx(P,{children:t.jsx(M,{className:"pt-6",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-info/10",children:t.jsx(LS,{className:"h-5 w-5 text-info"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-semibold",children:h.online}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Online Licenses"})]})]})})}),t.jsx(P,{children:t.jsx(M,{className:"pt-6",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-warning/10",children:t.jsx(MS,{className:"h-5 w-5 text-warning"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-semibold",children:h.offline+h.hybrid}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Offline Capable"})]})]})})}),t.jsx(P,{children:t.jsx(M,{className:"pt-6",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-success/10",children:t.jsx(Bs,{className:"h-5 w-5 text-success"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-semibold",children:h.totalActivations}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Devices"})]})]})})})]}),t.jsxs(kt,{value:d,onValueChange:u,children:[t.jsxs(St,{children:[t.jsx(he,{value:"licenses",children:"Licenses"}),t.jsx(he,{value:"activations",children:"Activations"})]}),t.jsxs(Ce,{value:"licenses",className:"space-y-4 mt-4",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[t.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-sm",children:[t.jsx(ns,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t.jsx(se,{placeholder:"Search licenses...",value:n,onChange:p=>a(p.target.value),className:"pl-9"})]}),t.jsx(kt,{value:i,onValueChange:p=>o(p),children:t.jsxs(St,{children:[t.jsx(he,{value:"all",children:"All Types"}),t.jsx(he,{value:"online",children:"Online"}),t.jsx(he,{value:"offline",children:"Offline"}),t.jsx(he,{value:"hybrid",children:"Hybrid"})]})}),t.jsx(kt,{value:l,onValueChange:p=>c(p),children:t.jsxs(St,{children:[t.jsx(he,{value:"all",children:"All Status"}),t.jsx(he,{value:"active",children:"Active"}),t.jsx(he,{value:"expired",children:"Expired"}),t.jsx(he,{value:"revoked",children:"Revoked"})]})})]}),m.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[t.jsx(Nt,{className:"h-12 w-12 text-muted-foreground mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-foreground",children:"No licenses found"}),t.jsx("p",{className:"text-muted-foreground",children:n?"Try a different search term":"Issue your first license to get started"})]}):t.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:m.map(p=>t.jsx("div",{onClick:()=>e(`/licenses/${p.id}`),className:"cursor-pointer",children:t.jsx(nQ,{license:p})},p.id))})]}),t.jsx(Ce,{value:"activations",className:"mt-4",children:t.jsxs(P,{children:[t.jsx(W,{children:t.jsx(V,{children:"Device Activations"})}),t.jsx(M,{children:t.jsx(CP,{activations:r})})]})})]})]})})};function iQ(){const{id:e}=ma(),s=Qe(),{toast:r}=Ji(),{licenses:n,products:a,clients:i,activations:o,updateLicense:l,deleteLicense:c,revokeLicense:d,renewLicense:u,generateOfflineBundle:m}=mn(),h=n.find(G=>G.id===e),p=o.filter(G=>G.licenseId===e),[g,x]=f.useState(!1),[v,y]=f.useState({type:(h==null?void 0:h.type)||"online",maxActivations:(h==null?void 0:h.maxActivations)||1,supportLevel:(h==null?void 0:h.supportLevel)||"basic",notes:(h==null?void 0:h.notes)||""}),[j,w]=f.useState("");if(!h)return t.jsx(Or,{children:t.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] gap-4",children:[t.jsx("h1",{className:"text-2xl font-bold",children:"License Not Found"}),t.jsxs(T,{onClick:()=>s("/licenses"),children:[t.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Back to Licenses"]})]})});const b=a.find(G=>G.id===h.productId),N=i.find(G=>G.id===h.clientId),_=()=>{l(h.id,{type:v.type,maxActivations:v.maxActivations,supportLevel:v.supportLevel,notes:v.notes}),x(!1),r({title:"License updated successfully"})},C=()=>{c(h.id),r({title:"License deleted"}),s("/licenses")},E=()=>{d(h.id),r({title:"License revoked"})},k=()=>{if(!j){r({title:"Please select a new expiry date",variant:"destructive"});return}u(h.id,j),w(""),r({title:"License renewed successfully"})},A=()=>{navigator.clipboard.writeText(h.licenseKey),r({title:"License key copied to clipboard"})},L=()=>{const G=m(h.id),ee=new Blob([JSON.stringify(G,null,2)],{type:"application/json"}),K=URL.createObjectURL(ee),D=document.createElement("a");D.href=K,D.download=`license-bundle-${h.licenseKey}.json`,D.click(),URL.revokeObjectURL(K),r({title:"Offline bundle downloaded"})},H={active:"bg-success/20 text-success border-success/30",expired:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",suspended:"bg-orange-500/20 text-orange-400 border-orange-500/30",revoked:"bg-destructive/20 text-destructive border-destructive/30",pending:"bg-blue-500/20 text-blue-400 border-blue-500/30"},F={online:"Online",offline:"Offline",hybrid:"Hybrid"},I={basic:"Basic",premium:"Premium",enterprise:"Enterprise"};return t.jsx(Or,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(T,{variant:"ghost",size:"icon",onClick:()=>s("/licenses"),children:t.jsx(Ft,{className:"h-5 w-5"})}),t.jsx("div",{className:"h-14 w-14 rounded-xl bg-primary/20 flex items-center justify-center",children:t.jsx(Nt,{className:"h-7 w-7 text-primary"})}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h1",{className:"text-xl font-mono font-bold",children:h.licenseKey}),t.jsx(T,{variant:"ghost",size:"icon",onClick:A,children:t.jsx(Uo,{className:"h-4 w-4"})})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx($,{className:H[h.status],children:h.status}),t.jsx($,{variant:"outline",children:F[h.type]}),h.supportLevel&&t.jsx($,{variant:"secondary",children:I[h.supportLevel]})]})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:g?t.jsxs(t.Fragment,{children:[t.jsxs(T,{variant:"ghost",onClick:()=>x(!1),children:[t.jsx(Ct,{className:"mr-2 h-4 w-4"}),"Cancel"]}),t.jsxs(T,{onClick:_,children:[t.jsx(Mn,{className:"mr-2 h-4 w-4"}),"Save"]})]}):t.jsxs(t.Fragment,{children:[t.jsxs(T,{variant:"outline",onClick:L,children:[t.jsx($a,{className:"mr-2 h-4 w-4"}),"Download Bundle"]}),t.jsxs(T,{variant:"outline",onClick:()=>x(!0),children:[t.jsx(Pn,{className:"mr-2 h-4 w-4"}),"Edit"]}),h.status==="active"&&t.jsxs(T,{variant:"destructive",onClick:E,children:[t.jsx(ev,{className:"mr-2 h-4 w-4"}),"Revoke"]})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx(P,{className:"glass-card",children:t.jsxs(W,{className:"pb-2",children:[t.jsx(ce,{children:"Active Devices"}),t.jsxs(V,{className:"text-3xl",children:[h.currentActivations,"/",h.maxActivations]})]})}),t.jsx(P,{className:"glass-card",children:t.jsxs(W,{className:"pb-2",children:[t.jsx(ce,{children:"Entitlements"}),t.jsx(V,{className:"text-3xl",children:h.entitlements.length})]})}),t.jsx(P,{className:"glass-card",children:t.jsxs(W,{className:"pb-2",children:[t.jsx(ce,{children:"Issued"}),t.jsx(V,{className:"text-lg",children:new Date(h.issuedAt).toLocaleDateString()})]})}),t.jsx(P,{className:"glass-card",children:t.jsxs(W,{className:"pb-2",children:[t.jsx(ce,{children:"Expires"}),t.jsx(V,{className:"text-lg",children:h.expiresAt?new Date(h.expiresAt).toLocaleDateString():"Never"})]})})]}),t.jsxs(kt,{defaultValue:"overview",className:"space-y-4",children:[t.jsxs(St,{children:[t.jsxs(he,{value:"overview",className:"gap-2",children:[t.jsx(Nt,{className:"h-4 w-4"}),"Overview"]}),t.jsxs(he,{value:"devices",className:"gap-2",children:[t.jsx(Bs,{className:"h-4 w-4"}),"Devices"]}),t.jsxs(he,{value:"entitlements",className:"gap-2",children:[t.jsx(Rn,{className:"h-4 w-4"}),"Entitlements"]}),t.jsxs(he,{value:"settings",className:"gap-2",children:[t.jsx(Js,{className:"h-4 w-4"}),"Settings"]})]}),t.jsxs(Ce,{value:"overview",className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs(P,{className:"glass-card cursor-pointer hover:border-primary/50 transition-colors",onClick:()=>b&&s(`/products/${b.id}`),children:[t.jsx(W,{children:t.jsxs(V,{className:"text-base flex items-center gap-2",children:[t.jsx(qi,{className:"h-5 w-5"}),"Product"]})}),t.jsxs(M,{children:[t.jsx("p",{className:"font-medium",children:(b==null?void 0:b.name)||"Unknown Product"}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:[b==null?void 0:b.type,"  v",b==null?void 0:b.version]})]})]}),t.jsxs(P,{className:"glass-card cursor-pointer hover:border-primary/50 transition-colors",onClick:()=>N&&s(`/clients/${N.id}`),children:[t.jsx(W,{children:t.jsxs(V,{className:"text-base flex items-center gap-2",children:[t.jsx(Qt,{className:"h-5 w-5"}),"Client"]})}),t.jsxs(M,{children:[t.jsx("p",{className:"font-medium",children:(N==null?void 0:N.name)||"Unknown Client"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:N==null?void 0:N.email})]})]})]}),t.jsxs(P,{className:"glass-card",children:[t.jsx(W,{children:t.jsx(V,{children:"License Details"})}),t.jsxs(M,{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx(O,{className:"text-muted-foreground",children:"License Key"}),t.jsx("p",{className:"font-mono text-sm",children:h.licenseKey})]}),t.jsxs("div",{children:[t.jsx(O,{className:"text-muted-foreground",children:"Type"}),t.jsx("p",{className:"font-medium",children:F[h.type]})]}),t.jsxs("div",{children:[t.jsx(O,{className:"text-muted-foreground",children:"Max Activations"}),t.jsxs("p",{className:"font-medium",children:[h.maxActivations," devices"]})]}),t.jsxs("div",{children:[t.jsx(O,{className:"text-muted-foreground",children:"Support Level"}),t.jsx("p",{className:"font-medium",children:h.supportLevel?I[h.supportLevel]:"None"})]})]}),h.notes&&t.jsxs("div",{children:[t.jsx(O,{className:"text-muted-foreground",children:"Notes"}),t.jsx("p",{className:"mt-1",children:h.notes})]})]})]}),h.offlineBundle&&t.jsxs(P,{className:"glass-card",children:[t.jsx(W,{children:t.jsxs(V,{className:"flex items-center gap-2",children:[t.jsx(us,{className:"h-5 w-5"}),"Offline Bundle"]})}),t.jsxs(M,{children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx(O,{className:"text-muted-foreground",children:"Bundle ID"}),t.jsx("p",{className:"font-mono text-sm",children:h.offlineBundle.id})]}),t.jsxs("div",{children:[t.jsx(O,{className:"text-muted-foreground",children:"Issued"}),t.jsx("p",{className:"text-sm",children:new Date(h.offlineBundle.issuedAt).toLocaleString()})]}),t.jsxs("div",{children:[t.jsx(O,{className:"text-muted-foreground",children:"Expires"}),t.jsx("p",{className:"text-sm",children:new Date(h.offlineBundle.expiresAt).toLocaleString()})]}),t.jsxs("div",{children:[t.jsx(O,{className:"text-muted-foreground",children:"Revocation Epoch"}),t.jsx("p",{className:"text-sm",children:h.offlineBundle.revocationEpoch})]})]}),t.jsxs(T,{className:"mt-4",variant:"outline",onClick:L,children:[t.jsx($a,{className:"mr-2 h-4 w-4"}),"Download Bundle"]})]})]})]}),t.jsxs(Ce,{value:"devices",className:"space-y-4",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Device Activations"}),p.length>0?t.jsx(CP,{activations:p}):t.jsx(P,{className:"glass-card",children:t.jsxs(M,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(Bs,{className:"h-12 w-12 text-muted-foreground mb-4"}),t.jsx("p",{className:"text-muted-foreground",children:"No devices activated"})]})})]}),t.jsxs(Ce,{value:"entitlements",className:"space-y-4",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"License Entitlements"}),h.entitlements.length>0?t.jsx("div",{className:"grid gap-4",children:h.entitlements.map(G=>t.jsx(P,{className:"glass-card",children:t.jsxs(M,{className:"flex items-center justify-between p-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(Rn,{className:"h-6 w-6 text-primary"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:G.name}),t.jsx("p",{className:"text-sm text-muted-foreground",children:G.description||G.type})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx($,{variant:"outline",children:G.type}),t.jsx($,{variant:"secondary",children:String(G.value)})]})]})},G.id))}):t.jsx(P,{className:"glass-card",children:t.jsxs(M,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(Rn,{className:"h-12 w-12 text-muted-foreground mb-4"}),t.jsx("p",{className:"text-muted-foreground",children:"No entitlements defined"})]})})]}),t.jsxs(Ce,{value:"settings",className:"space-y-4",children:[t.jsxs(P,{className:"glass-card",children:[t.jsxs(W,{children:[t.jsx(V,{children:"License Settings"}),t.jsx(ce,{children:"Configure license properties"})]}),t.jsxs(M,{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"License Type"}),t.jsxs($e,{value:v.type,onValueChange:G=>y({...v,type:G}),disabled:!g,children:[t.jsx(Le,{children:t.jsx(Ue,{})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"online",children:"Online"}),t.jsx(Z,{value:"offline",children:"Offline"}),t.jsx(Z,{value:"hybrid",children:"Hybrid"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Max Activations"}),t.jsx(se,{type:"number",min:1,value:v.maxActivations,onChange:G=>y({...v,maxActivations:parseInt(G.target.value)||1}),disabled:!g})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Support Level"}),t.jsxs($e,{value:v.supportLevel,onValueChange:G=>y({...v,supportLevel:G}),disabled:!g,children:[t.jsx(Le,{className:"w-full max-w-xs",children:t.jsx(Ue,{})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"basic",children:"Basic"}),t.jsx(Z,{value:"premium",children:"Premium"}),t.jsx(Z,{value:"enterprise",children:"Enterprise"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Notes"}),t.jsx(se,{value:v.notes,onChange:G=>y({...v,notes:G.target.value}),disabled:!g,placeholder:"Internal notes..."})]}),!g&&t.jsxs(T,{onClick:()=>x(!0),children:[t.jsx(Pn,{className:"mr-2 h-4 w-4"}),"Edit Settings"]}),g&&t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(T,{onClick:_,children:[t.jsx(Mn,{className:"mr-2 h-4 w-4"}),"Save Changes"]}),t.jsx(T,{variant:"outline",onClick:()=>x(!1),children:"Cancel"})]})]})]}),t.jsxs(P,{className:"glass-card",children:[t.jsxs(W,{children:[t.jsxs(V,{className:"flex items-center gap-2",children:[t.jsx(Lr,{className:"h-5 w-5"}),"Renew License"]}),t.jsx(ce,{children:"Extend the license expiration date"})]}),t.jsx(M,{children:t.jsxs("div",{className:"flex gap-4",children:[t.jsx(se,{type:"date",value:j,onChange:G=>w(G.target.value),min:new Date().toISOString().split("T")[0],className:"max-w-xs"}),t.jsxs(T,{onClick:k,disabled:!j,children:[t.jsx(hj,{className:"mr-2 h-4 w-4"}),"Renew"]})]})})]}),t.jsxs(P,{className:"glass-card border-destructive/50",children:[t.jsxs(W,{children:[t.jsx(V,{className:"text-destructive",children:"Danger Zone"}),t.jsx(ce,{children:"Irreversible actions"})]}),t.jsxs(M,{className:"space-y-4",children:[h.status==="active"&&t.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-destructive/10",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Revoke License"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Immediately disable this license and all activations"})]}),t.jsxs(T,{variant:"destructive",onClick:E,children:[t.jsx(ev,{className:"mr-2 h-4 w-4"}),"Revoke"]})]}),t.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-destructive/10",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Delete License"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Permanently delete this license"})]}),t.jsxs(T,{variant:"destructive",onClick:C,children:[t.jsx(Rt,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})]})]})]})})}var Rp="Collapsible",[oQ,_P]=ks(Rp),[lQ,Iw]=oQ(Rp),SP=f.forwardRef((e,s)=>{const{__scopeCollapsible:r,open:n,defaultOpen:a,disabled:i,onOpenChange:o,...l}=e,[c,d]=_r({prop:n,defaultProp:a??!1,onChange:o,caller:Rp});return t.jsx(lQ,{scope:r,disabled:i,contentId:Ss(),open:c,onOpenToggle:f.useCallback(()=>d(u=>!u),[d]),children:t.jsx(Se.div,{"data-state":Ow(c),"data-disabled":i?"":void 0,...l,ref:s})})});SP.displayName=Rp;var kP="CollapsibleTrigger",EP=f.forwardRef((e,s)=>{const{__scopeCollapsible:r,...n}=e,a=Iw(kP,r);return t.jsx(Se.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":Ow(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...n,ref:s,onClick:de(e.onClick,a.onOpenToggle)})});EP.displayName=kP;var Dw="CollapsibleContent",AP=f.forwardRef((e,s)=>{const{forceMount:r,...n}=e,a=Iw(Dw,e.__scopeCollapsible);return t.jsx(js,{present:r||a.open,children:({present:i})=>t.jsx(cQ,{...n,ref:s,present:i})})});AP.displayName=Dw;var cQ=f.forwardRef((e,s)=>{const{__scopeCollapsible:r,present:n,children:a,...i}=e,o=Iw(Dw,r),[l,c]=f.useState(n),d=f.useRef(null),u=Ve(s,d),m=f.useRef(0),h=m.current,p=f.useRef(0),g=p.current,x=o.open||l,v=f.useRef(x),y=f.useRef(void 0);return f.useEffect(()=>{const j=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(j)},[]),hs(()=>{const j=d.current;if(j){y.current=y.current||{transitionDuration:j.style.transitionDuration,animationName:j.style.animationName},j.style.transitionDuration="0s",j.style.animationName="none";const w=j.getBoundingClientRect();m.current=w.height,p.current=w.width,v.current||(j.style.transitionDuration=y.current.transitionDuration,j.style.animationName=y.current.animationName),c(n)}},[o.open,n]),t.jsx(Se.div,{"data-state":Ow(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!x,...i,ref:u,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...e.style},children:x&&a})});function Ow(e){return e?"open":"closed"}var dQ=SP,uQ=EP,hQ=AP,Wn="Accordion",mQ=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Mw,fQ,pQ]=Lu(Wn),[Ip]=ks(Wn,[pQ,_P]),Lw=_P(),TP=le.forwardRef((e,s)=>{const{type:r,...n}=e,a=n,i=n;return t.jsx(Mw.Provider,{scope:e.__scopeAccordion,children:r==="multiple"?t.jsx(yQ,{...i,ref:s}):t.jsx(vQ,{...a,ref:s})})});TP.displayName=Wn;var[PP,xQ]=Ip(Wn),[RP,gQ]=Ip(Wn,{collapsible:!1}),vQ=le.forwardRef((e,s)=>{const{value:r,defaultValue:n,onValueChange:a=()=>{},collapsible:i=!1,...o}=e,[l,c]=_r({prop:r,defaultProp:n??"",onChange:a,caller:Wn});return t.jsx(PP,{scope:e.__scopeAccordion,value:le.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:le.useCallback(()=>i&&c(""),[i,c]),children:t.jsx(RP,{scope:e.__scopeAccordion,collapsible:i,children:t.jsx(IP,{...o,ref:s})})})}),yQ=le.forwardRef((e,s)=>{const{value:r,defaultValue:n,onValueChange:a=()=>{},...i}=e,[o,l]=_r({prop:r,defaultProp:n??[],onChange:a,caller:Wn}),c=le.useCallback(u=>l((m=[])=>[...m,u]),[l]),d=le.useCallback(u=>l((m=[])=>m.filter(h=>h!==u)),[l]);return t.jsx(PP,{scope:e.__scopeAccordion,value:o,onItemOpen:c,onItemClose:d,children:t.jsx(RP,{scope:e.__scopeAccordion,collapsible:!0,children:t.jsx(IP,{...i,ref:s})})})}),[jQ,Dp]=Ip(Wn),IP=le.forwardRef((e,s)=>{const{__scopeAccordion:r,disabled:n,dir:a,orientation:i="vertical",...o}=e,l=le.useRef(null),c=Ve(l,s),d=fQ(r),m=il(a)==="ltr",h=de(e.onKeyDown,p=>{var E;if(!mQ.includes(p.key))return;const g=p.target,x=d().filter(k=>{var A;return!((A=k.ref.current)!=null&&A.disabled)}),v=x.findIndex(k=>k.ref.current===g),y=x.length;if(v===-1)return;p.preventDefault();let j=v;const w=0,b=y-1,N=()=>{j=v+1,j>b&&(j=w)},_=()=>{j=v-1,j<w&&(j=b)};switch(p.key){case"Home":j=w;break;case"End":j=b;break;case"ArrowRight":i==="horizontal"&&(m?N():_());break;case"ArrowDown":i==="vertical"&&N();break;case"ArrowLeft":i==="horizontal"&&(m?_():N());break;case"ArrowUp":i==="vertical"&&_();break}const C=j%y;(E=x[C].ref.current)==null||E.focus()});return t.jsx(jQ,{scope:r,disabled:n,direction:a,orientation:i,children:t.jsx(Mw.Slot,{scope:r,children:t.jsx(Se.div,{...o,"data-orientation":i,ref:c,onKeyDown:n?void 0:h})})})}),vf="AccordionItem",[wQ,Fw]=Ip(vf),DP=le.forwardRef((e,s)=>{const{__scopeAccordion:r,value:n,...a}=e,i=Dp(vf,r),o=xQ(vf,r),l=Lw(r),c=Ss(),d=n&&o.value.includes(n)||!1,u=i.disabled||e.disabled;return t.jsx(wQ,{scope:r,open:d,disabled:u,triggerId:c,children:t.jsx(dQ,{"data-orientation":i.orientation,"data-state":UP(d),...l,...a,ref:s,disabled:u,open:d,onOpenChange:m=>{m?o.onItemOpen(n):o.onItemClose(n)}})})});DP.displayName=vf;var OP="AccordionHeader",MP=le.forwardRef((e,s)=>{const{__scopeAccordion:r,...n}=e,a=Dp(Wn,r),i=Fw(OP,r);return t.jsx(Se.h3,{"data-orientation":a.orientation,"data-state":UP(i.open),"data-disabled":i.disabled?"":void 0,...n,ref:s})});MP.displayName=OP;var dy="AccordionTrigger",LP=le.forwardRef((e,s)=>{const{__scopeAccordion:r,...n}=e,a=Dp(Wn,r),i=Fw(dy,r),o=gQ(dy,r),l=Lw(r);return t.jsx(Mw.ItemSlot,{scope:r,children:t.jsx(uQ,{"aria-disabled":i.open&&!o.collapsible||void 0,"data-orientation":a.orientation,id:i.triggerId,...l,...n,ref:s})})});LP.displayName=dy;var FP="AccordionContent",$P=le.forwardRef((e,s)=>{const{__scopeAccordion:r,...n}=e,a=Dp(Wn,r),i=Fw(FP,r),o=Lw(r);return t.jsx(hQ,{role:"region","aria-labelledby":i.triggerId,"data-orientation":a.orientation,...o,...n,ref:s,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});$P.displayName=FP;function UP(e){return e?"open":"closed"}var bQ=TP,NQ=DP,CQ=MP,BP=LP,zP=$P;const _Q=bQ,qP=f.forwardRef(({className:e,...s},r)=>t.jsx(NQ,{ref:r,className:J("border-b",e),...s}));qP.displayName="AccordionItem";const WP=f.forwardRef(({className:e,children:s,...r},n)=>t.jsx(CQ,{className:"flex",children:t.jsxs(BP,{ref:n,className:J("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...r,children:[s,t.jsx(Ff,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));WP.displayName=BP.displayName;const VP=f.forwardRef(({className:e,children:s,...r},n)=>t.jsx(zP,{ref:n,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:t.jsx("div",{className:J("pb-4 pt-0",e),children:s})}));VP.displayName=zP.displayName;const Xx={email:[{protocol:"smtp",label:"SMTP",description:"Simple Mail Transfer Protocol - Universal email delivery"},{protocol:"http",label:"HTTP API",description:"REST API - For services like SendGrid, Mailgun, etc."}],sms:[{protocol:"smpp",label:"SMPP",description:"Short Message Peer-to-Peer Protocol - Direct carrier connection"},{protocol:"http",label:"HTTP API",description:"REST API - For SMS gateways and aggregators"}],push:[{protocol:"http",label:"HTTP API",description:"REST API - For FCM, APNs, OneSignal, etc."}],webhook:[{protocol:"http",label:"HTTP Webhook",description:"Send notifications to any HTTP endpoint"}]},N1={email:ys,sms:zu,push:na,webhook:OS},SQ={smtp:RS,http:Uf,smpp:zu},eg={host:"",port:587,secure:!1,username:"",password:"",fromEmail:"",fromName:""},tg={url:"",method:"POST",headers:{},authType:"none",authValue:"",bodyTemplate:'{"to": "{{recipient}}", "subject": "{{subject}}", "body": "{{body}}"}'},sg={host:"",port:2775,systemId:"",password:"",systemType:"",sourceAddr:"",sourceTon:1,sourceNpi:1,destTon:1,destNpi:1},kQ=[{id:"1",name:"Company SMTP Server",type:"email",protocol:"smtp",config:{host:"smtp.company.com",port:587,secure:!0,username:"notifications@company.com",password:"********",fromEmail:"notifications@company.com",fromName:"Company Notifications"},isDefault:!0,status:"active",createdAt:new Date().toISOString()},{id:"2",name:"SMS Gateway",type:"sms",protocol:"smpp",config:{host:"smpp.gateway.com",port:2775,systemId:"mycompany",password:"********",systemType:"transceiver",sourceAddr:"COMPANY",sourceTon:5,sourceNpi:0,destTon:1,destNpi:1},isDefault:!0,status:"active",createdAt:new Date().toISOString()},{id:"3",name:"Push Notification API",type:"push",protocol:"http",config:{url:"https://fcm.googleapis.com/fcm/send",method:"POST",headers:{"Content-Type":"application/json"},authType:"bearer",authValue:"********",bodyTemplate:'{"to": "{{recipient}}", "notification": {"title": "{{subject}}", "body": "{{body}}"}}'},isDefault:!0,status:"inactive",createdAt:new Date().toISOString()}],EQ=[{id:"1",name:"License Expiry Warning",description:"Sent when a license is about to expire",type:"email",subject:"Your license for {{productName}} is expiring soon",body:"<h1>License Expiry Notice</h1><p>Dear {{clientName}},</p><p>Your license for <strong>{{productName}}</strong> will expire on <strong>{{expiryDate}}</strong>.</p><p>Please renew to continue using our services.</p>",variables:["clientName","productName","expiryDate","licenseKey"],isActive:!0,createdAt:new Date().toISOString()},{id:"2",name:"Welcome Email",description:"Sent when a new client is created",type:"email",subject:"Welcome to {{companyName}}",body:"<h1>Welcome!</h1><p>Dear {{clientName}},</p><p>Thank you for joining {{companyName}}. Your account is ready.</p>",variables:["clientName","companyName"],isActive:!0,createdAt:new Date().toISOString()},{id:"3",name:"License Activated SMS",description:"SMS notification when license is activated",type:"sms",subject:"",body:"Your {{productName}} license has been activated. Key: {{licenseKey}}",variables:["productName","licenseKey"],isActive:!0,createdAt:new Date().toISOString()}],AQ=[{id:"1",providerId:"1",providerName:"Company SMTP Server",templateId:"1",recipient:"john@example.com",subject:"Your license for ProductX is expiring soon",status:"sent",sentAt:new Date(Date.now()-36e5).toISOString(),createdAt:new Date(Date.now()-36e5).toISOString()},{id:"2",providerId:"1",providerName:"Company SMTP Server",recipient:"jane@example.com",subject:"Welcome to Our Platform",status:"delivered",sentAt:new Date(Date.now()-72e5).toISOString(),createdAt:new Date(Date.now()-72e5).toISOString()},{id:"3",providerId:"2",providerName:"SMS Gateway",recipient:"+1234567890",status:"failed",errorMessage:"SMPP connection timeout",createdAt:new Date(Date.now()-108e5).toISOString()}];function TQ(){var D,q,re;const[e,s]=f.useState(kQ),[r,n]=f.useState(EQ),[a]=f.useState(AQ),[i,o]=f.useState(!1),[l,c]=f.useState(!1),[d,u]=f.useState(!1),[m,h]=f.useState(null),[p,g]=f.useState({name:"",type:"email",protocol:"smtp",smtpConfig:{...eg},httpConfig:{...tg},smppConfig:{...sg},httpHeaders:"{}"}),[x,v]=f.useState({name:"",description:"",type:"email",subject:"",body:"",variables:""}),[y,j]=f.useState({providerId:"",recipient:"",subject:"",body:""}),[w,b]=f.useState(!1),N=()=>{g({name:"",type:"email",protocol:"smtp",smtpConfig:{...eg},httpConfig:{...tg},smppConfig:{...sg},httpHeaders:"{}"}),h(null)},_=S=>{S?(h(S),g({name:S.name,type:S.type,protocol:S.protocol,smtpConfig:S.protocol==="smtp"?S.config:{...eg},httpConfig:S.protocol==="http"?S.config:{...tg},smppConfig:S.protocol==="smpp"?S.config:{...sg},httpHeaders:S.protocol==="http"?JSON.stringify(S.config.headers||{},null,2):"{}"})):N(),o(!0)},C=()=>{let S;switch(p.protocol){case"smtp":S={...p.smtpConfig};break;case"http":try{S={...p.httpConfig,headers:JSON.parse(p.httpHeaders||"{}")}}catch{z.error("Invalid JSON in headers");return}break;case"smpp":S={...p.smppConfig};break}if(m)s(e.map(R=>R.id===m.id?{...R,name:p.name,type:p.type,protocol:p.protocol,config:S}:R)),z.success("Provider updated successfully");else{const R={id:Date.now().toString(),name:p.name,type:p.type,protocol:p.protocol,config:S,isDefault:e.filter(te=>te.type===p.type).length===0,status:"inactive",createdAt:new Date().toISOString()};s([...e,R]),z.success("Provider created successfully")}o(!1),N()},E=()=>{const S={id:Date.now().toString(),name:x.name,description:x.description,type:x.type,subject:x.subject,body:x.body,variables:x.variables.split(",").map(R=>R.trim()).filter(Boolean),isActive:!0,createdAt:new Date().toISOString()};n([...r,S]),c(!1),v({name:"",description:"",type:"email",subject:"",body:"",variables:""}),z.success("Template created successfully")},k=async()=>{const S=e.find(R=>R.id===y.providerId);if(!S){z.error("Please select a provider");return}b(!0);try{const{data:R,error:te}=await B.functions.invoke("send-notification",{body:{organizationId:"test-org",providerId:y.providerId,type:S.type,recipient:y.recipient,subject:y.subject,body:y.body,providerConfig:S.config,providerProtocol:S.protocol}});if(te)throw te;R!=null&&R.success?(z.success("Test notification sent successfully!"),u(!1)):z.error((R==null?void 0:R.message)||"Failed to send notification")}catch(R){z.error(R.message||"Failed to send test notification")}finally{b(!1)}},A=(S,R)=>{s(e.map(te=>te.id===S?{...te,status:R==="active"?"inactive":"active"}:te)),z.success("Provider status updated")},L=S=>{s(e.filter(R=>R.id!==S)),z.success("Provider deleted")},H=S=>{n(r.map(R=>R.id===S?{...R,isActive:!R.isActive}:R)),z.success("Template status updated")},F=S=>{n(r.filter(R=>R.id!==S)),z.success("Template deleted")},I=S=>{switch(S){case"sent":case"delivered":case"active":return t.jsx($,{className:"bg-green-500/10 text-green-500 border-green-500/20",children:S});case"failed":case"inactive":return t.jsx($,{className:"bg-red-500/10 text-red-500 border-red-500/20",children:S});case"pending":case"testing":return t.jsx($,{className:"bg-yellow-500/10 text-yellow-500 border-yellow-500/20",children:S});default:return t.jsx($,{variant:"secondary",children:S})}},G=()=>t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"SMTP Host"}),t.jsx(se,{placeholder:"smtp.example.com",value:p.smtpConfig.host,onChange:S=>g({...p,smtpConfig:{...p.smtpConfig,host:S.target.value}})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Port"}),t.jsx(se,{type:"number",placeholder:"587",value:p.smtpConfig.port,onChange:S=>g({...p,smtpConfig:{...p.smtpConfig,port:parseInt(S.target.value)||587}})})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Xo,{id:"smtp-secure",checked:p.smtpConfig.secure,onCheckedChange:S=>g({...p,smtpConfig:{...p.smtpConfig,secure:!!S}})}),t.jsx(O,{htmlFor:"smtp-secure",children:"Use TLS/SSL"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Username"}),t.jsx(se,{placeholder:"username",value:p.smtpConfig.username,onChange:S=>g({...p,smtpConfig:{...p.smtpConfig,username:S.target.value}})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Password"}),t.jsx(se,{type:"password",placeholder:"",value:p.smtpConfig.password,onChange:S=>g({...p,smtpConfig:{...p.smtpConfig,password:S.target.value}})})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"From Email"}),t.jsx(se,{type:"email",placeholder:"noreply@example.com",value:p.smtpConfig.fromEmail,onChange:S=>g({...p,smtpConfig:{...p.smtpConfig,fromEmail:S.target.value}})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"From Name"}),t.jsx(se,{placeholder:"Company Name",value:p.smtpConfig.fromName,onChange:S=>g({...p,smtpConfig:{...p.smtpConfig,fromName:S.target.value}})})]})]})]}),ee=()=>t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Endpoint URL"}),t.jsx(se,{placeholder:"https://api.example.com/send",value:p.httpConfig.url,onChange:S=>g({...p,httpConfig:{...p.httpConfig,url:S.target.value}})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"HTTP Method"}),t.jsxs($e,{value:p.httpConfig.method,onValueChange:S=>g({...p,httpConfig:{...p.httpConfig,method:S}}),children:[t.jsx(Le,{children:t.jsx(Ue,{})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"GET",children:"GET"}),t.jsx(Z,{value:"POST",children:"POST"}),t.jsx(Z,{value:"PUT",children:"PUT"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Authentication"}),t.jsxs($e,{value:p.httpConfig.authType,onValueChange:S=>g({...p,httpConfig:{...p.httpConfig,authType:S}}),children:[t.jsx(Le,{children:t.jsx(Ue,{})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"none",children:"None"}),t.jsx(Z,{value:"basic",children:"Basic Auth"}),t.jsx(Z,{value:"bearer",children:"Bearer Token"}),t.jsx(Z,{value:"apikey",children:"API Key"})]})]})]})]}),p.httpConfig.authType!=="none"&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs(O,{children:[p.httpConfig.authType==="basic"&&"Credentials (username:password)",p.httpConfig.authType==="bearer"&&"Bearer Token",p.httpConfig.authType==="apikey"&&"API Key"]}),t.jsx(se,{type:"password",placeholder:"",value:p.httpConfig.authValue,onChange:S=>g({...p,httpConfig:{...p.httpConfig,authValue:S.target.value}})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Custom Headers (JSON)"}),t.jsx(Bt,{placeholder:'{"Content-Type": "application/json"}',value:p.httpHeaders,onChange:S=>g({...p,httpHeaders:S.target.value}),rows:3,className:"font-mono text-sm"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Body Template (JSON)"}),t.jsx(Bt,{placeholder:'{"to": "{{recipient}}", "subject": "{{subject}}", "body": "{{body}}"}',value:p.httpConfig.bodyTemplate,onChange:S=>g({...p,httpConfig:{...p.httpConfig,bodyTemplate:S.target.value}}),rows:4,className:"font-mono text-sm"}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Available variables: ","{{recipient}}",", ","{{subject}}",", ","{{body}}"]})]})]}),K=()=>t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"SMPP Host"}),t.jsx(se,{placeholder:"smpp.gateway.com",value:p.smppConfig.host,onChange:S=>g({...p,smppConfig:{...p.smppConfig,host:S.target.value}})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Port"}),t.jsx(se,{type:"number",placeholder:"2775",value:p.smppConfig.port,onChange:S=>g({...p,smppConfig:{...p.smppConfig,port:parseInt(S.target.value)||2775}})})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"System ID"}),t.jsx(se,{placeholder:"your_system_id",value:p.smppConfig.systemId,onChange:S=>g({...p,smppConfig:{...p.smppConfig,systemId:S.target.value}})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Password"}),t.jsx(se,{type:"password",placeholder:"",value:p.smppConfig.password,onChange:S=>g({...p,smppConfig:{...p.smppConfig,password:S.target.value}})})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"System Type"}),t.jsx(se,{placeholder:"transceiver",value:p.smppConfig.systemType,onChange:S=>g({...p,smppConfig:{...p.smppConfig,systemType:S.target.value}})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Source Address (Sender ID)"}),t.jsx(se,{placeholder:"COMPANY",value:p.smppConfig.sourceAddr,onChange:S=>g({...p,smppConfig:{...p.smppConfig,sourceAddr:S.target.value}})})]})]}),t.jsx(_Q,{type:"single",collapsible:!0,children:t.jsxs(qP,{value:"advanced",children:[t.jsx(WP,{className:"text-sm",children:"Advanced Settings (TON/NPI)"}),t.jsx(VP,{children:t.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Source TON"}),t.jsx(se,{type:"number",value:p.smppConfig.sourceTon,onChange:S=>g({...p,smppConfig:{...p.smppConfig,sourceTon:parseInt(S.target.value)||1}})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Source NPI"}),t.jsx(se,{type:"number",value:p.smppConfig.sourceNpi,onChange:S=>g({...p,smppConfig:{...p.smppConfig,sourceNpi:parseInt(S.target.value)||1}})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Destination TON"}),t.jsx(se,{type:"number",value:p.smppConfig.destTon,onChange:S=>g({...p,smppConfig:{...p.smppConfig,destTon:parseInt(S.target.value)||1}})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Destination NPI"}),t.jsx(se,{type:"number",value:p.smppConfig.destNpi,onChange:S=>g({...p,smppConfig:{...p.smppConfig,destNpi:parseInt(S.target.value)||1}})})]})]})})]})})]});return t.jsx(Or,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Notifications"}),t.jsx("p",{className:"text-muted-foreground",children:"Configure flexible notification providers using SMTP, HTTP, or SMPP protocols"})]}),t.jsxs(Xt,{open:d,onOpenChange:u,children:[t.jsx($r,{asChild:!0,children:t.jsxs(T,{children:[t.jsx(OO,{className:"mr-2 h-4 w-4"}),"Send Test"]})}),t.jsxs(zt,{children:[t.jsxs(es,{children:[t.jsx(ts,{children:"Send Test Notification"}),t.jsx(ss,{children:"Send a test notification to verify your configuration"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Provider"}),t.jsxs($e,{value:y.providerId,onValueChange:S=>j({...y,providerId:S}),children:[t.jsx(Le,{children:t.jsx(Ue,{placeholder:"Select provider"})}),t.jsx(Fe,{children:e.map(S=>t.jsx(Z,{value:S.id,children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{children:S.name}),t.jsx($,{variant:"outline",className:"text-xs",children:S.protocol.toUpperCase()})]})},S.id))})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Recipient"}),t.jsx(se,{placeholder:"Email or phone number",value:y.recipient,onChange:S=>j({...y,recipient:S.target.value})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Subject"}),t.jsx(se,{placeholder:"Test subject",value:y.subject,onChange:S=>j({...y,subject:S.target.value})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Message"}),t.jsx(Bt,{placeholder:"Test message content",value:y.body,onChange:S=>j({...y,body:S.target.value}),rows:3})]})]}),t.jsxs(In,{children:[t.jsx(T,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),t.jsx(T,{onClick:k,disabled:w,children:w?"Sending...":"Send Test"})]})]})]})]}),t.jsxs(kt,{defaultValue:"providers",className:"space-y-4",children:[t.jsxs(St,{children:[t.jsxs(he,{value:"providers",className:"gap-2",children:[t.jsx(Js,{className:"h-4 w-4"}),"Providers"]}),t.jsxs(he,{value:"templates",className:"gap-2",children:[t.jsx(Zt,{className:"h-4 w-4"}),"Templates"]}),t.jsxs(he,{value:"logs",className:"gap-2",children:[t.jsx(Oe,{className:"h-4 w-4"}),"Logs"]})]}),t.jsxs(Ce,{value:"providers",className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Notification Providers"}),t.jsxs(T,{onClick:()=>_(),children:[t.jsx(at,{className:"mr-2 h-4 w-4"}),"Add Provider"]})]}),t.jsx(Xt,{open:i,onOpenChange:S=>{o(S),S||N()},children:t.jsxs(zt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[t.jsxs(es,{children:[t.jsx(ts,{children:m?"Edit Provider":"Add Provider"}),t.jsx(ss,{children:"Configure a notification provider using standard protocols"})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Provider Name"}),t.jsx(se,{placeholder:"e.g., Company SMTP Server",value:p.name,onChange:S=>g({...p,name:S.target.value})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Notification Type"}),t.jsxs($e,{value:p.type,onValueChange:S=>{var te;const R=Xx[S];g({...p,type:S,protocol:((te=R[0])==null?void 0:te.protocol)||"http"})},children:[t.jsx(Le,{children:t.jsx(Ue,{})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"email",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ys,{className:"h-4 w-4"}),"Email"]})}),t.jsx(Z,{value:"sms",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(zu,{className:"h-4 w-4"}),"SMS"]})}),t.jsx(Z,{value:"push",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(na,{className:"h-4 w-4"}),"Push Notification"]})}),t.jsx(Z,{value:"webhook",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(OS,{className:"h-4 w-4"}),"Webhook"]})})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Protocol"}),t.jsxs($e,{value:p.protocol,onValueChange:S=>g({...p,protocol:S}),children:[t.jsx(Le,{children:t.jsx(Ue,{})}),t.jsx(Fe,{children:(D=Xx[p.type])==null?void 0:D.map(S=>t.jsx(Z,{value:S.protocol,children:t.jsx("div",{className:"flex items-center gap-2",children:S.label})},S.protocol))})]}),t.jsx("p",{className:"text-xs text-muted-foreground",children:(re=(q=Xx[p.type])==null?void 0:q.find(S=>S.protocol===p.protocol))==null?void 0:re.description})]})]}),t.jsxs("div",{className:"border rounded-lg p-4 bg-muted/30",children:[t.jsxs("h4",{className:"font-medium mb-4 flex items-center gap-2",children:[t.jsx(TS,{className:"h-4 w-4"}),p.protocol.toUpperCase()," Configuration"]}),p.protocol==="smtp"&&G(),p.protocol==="http"&&ee(),p.protocol==="smpp"&&K()]})]}),t.jsxs(In,{children:[t.jsx(T,{variant:"outline",onClick:()=>{o(!1),N()},children:"Cancel"}),t.jsx(T,{onClick:C,children:m?"Update Provider":"Save Provider"})]})]})}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.map(S=>{const R=N1[S.type],te=SQ[S.protocol];return t.jsxs(P,{className:"glass-card",children:[t.jsx(W,{className:"pb-2",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:t.jsx(R,{className:"h-5 w-5 text-primary"})}),t.jsxs("div",{children:[t.jsx(V,{className:"text-base",children:S.name}),t.jsxs(ce,{className:"flex items-center gap-2 mt-1",children:[t.jsx(te,{className:"h-3 w-3"}),S.protocol.toUpperCase()]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[S.isDefault&&t.jsx($,{variant:"secondary",children:"Default"}),I(S.status)]})]})}),t.jsxs(M,{children:[t.jsxs("div",{className:"text-xs text-muted-foreground mb-3",children:[S.protocol==="smtp"&&t.jsxs("span",{children:[S.config.host,":",S.config.port]}),S.protocol==="http"&&t.jsx("span",{className:"truncate block",children:S.config.url}),S.protocol==="smpp"&&t.jsxs("span",{children:[S.config.host,":",S.config.port]})]}),t.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(nt,{checked:S.status==="active",onCheckedChange:()=>A(S.id,S.status)}),t.jsx("span",{className:"text-sm text-muted-foreground",children:S.status==="active"?"Active":"Inactive"})]}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx(T,{variant:"ghost",size:"icon",onClick:()=>_(S),children:t.jsx(zo,{className:"h-4 w-4"})}),t.jsx(T,{variant:"ghost",size:"icon",onClick:()=>L(S.id),children:t.jsx(Rt,{className:"h-4 w-4 text-destructive"})})]})]})]})]},S.id)}),e.length===0&&t.jsx(P,{className:"glass-card md:col-span-2",children:t.jsxs(M,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(Js,{className:"h-12 w-12 text-muted-foreground mb-4"}),t.jsx("p",{className:"text-muted-foreground mb-4",children:"No providers configured yet"}),t.jsxs(T,{onClick:()=>_(),children:[t.jsx(at,{className:"mr-2 h-4 w-4"}),"Add Your First Provider"]})]})})]})]}),t.jsxs(Ce,{value:"templates",className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Notification Templates"}),t.jsxs(Xt,{open:l,onOpenChange:c,children:[t.jsx($r,{asChild:!0,children:t.jsxs(T,{children:[t.jsx(at,{className:"mr-2 h-4 w-4"}),"Add Template"]})}),t.jsxs(zt,{className:"max-w-2xl",children:[t.jsxs(es,{children:[t.jsx(ts,{children:"Add Template"}),t.jsx(ss,{children:"Create a reusable notification template"})]}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Name"}),t.jsx(se,{placeholder:"Template name",value:x.name,onChange:S=>v({...x,name:S.target.value})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Type"}),t.jsxs($e,{value:x.type,onValueChange:S=>v({...x,type:S}),children:[t.jsx(Le,{children:t.jsx(Ue,{})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"email",children:"Email"}),t.jsx(Z,{value:"sms",children:"SMS"}),t.jsx(Z,{value:"push",children:"Push"}),t.jsx(Z,{value:"webhook",children:"Webhook"})]})]})]}),t.jsxs("div",{className:"space-y-2 md:col-span-2",children:[t.jsx(O,{children:"Description"}),t.jsx(se,{placeholder:"What this template is used for",value:x.description,onChange:S=>v({...x,description:S.target.value})})]}),x.type==="email"&&t.jsxs("div",{className:"space-y-2 md:col-span-2",children:[t.jsx(O,{children:"Subject"}),t.jsx(se,{placeholder:"Email subject line (use {{variable}} for placeholders)",value:x.subject,onChange:S=>v({...x,subject:S.target.value})})]}),t.jsxs("div",{className:"space-y-2 md:col-span-2",children:[t.jsx(O,{children:"Body"}),t.jsx(Bt,{placeholder:"Template content (use {{variable}} for placeholders)",value:x.body,onChange:S=>v({...x,body:S.target.value}),rows:6})]}),t.jsxs("div",{className:"space-y-2 md:col-span-2",children:[t.jsx(O,{children:"Variables (comma-separated)"}),t.jsx(se,{placeholder:"clientName, productName, expiryDate",value:x.variables,onChange:S=>v({...x,variables:S.target.value})})]})]}),t.jsxs(In,{children:[t.jsx(T,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),t.jsx(T,{onClick:E,children:"Save Template"})]})]})]})]}),t.jsx("div",{className:"grid gap-4",children:r.map(S=>{const R=N1[S.type];return t.jsxs(P,{className:"glass-card",children:[t.jsx(W,{className:"pb-2",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:t.jsx(R,{className:"h-5 w-5 text-primary"})}),t.jsxs("div",{children:[t.jsx(V,{className:"text-base",children:S.name}),t.jsx(ce,{children:S.description})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx($,{variant:"secondary",className:"capitalize",children:S.type}),S.isActive?t.jsx($,{className:"bg-green-500/10 text-green-500 border-green-500/20",children:"Active"}):t.jsx($,{className:"bg-red-500/10 text-red-500 border-red-500/20",children:"Inactive"})]})]})}),t.jsx(M,{children:t.jsxs("div",{className:"space-y-3",children:[S.subject&&t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Subject"}),t.jsx("p",{className:"text-sm font-mono bg-muted/50 px-2 py-1 rounded",children:S.subject})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Variables"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:S.variables.map(te=>t.jsx($,{variant:"outline",className:"font-mono text-xs",children:`{{${te}}}`},te))})]}),t.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(nt,{checked:S.isActive,onCheckedChange:()=>H(S.id)}),t.jsx("span",{className:"text-sm text-muted-foreground",children:S.isActive?"Active":"Inactive"})]}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx(T,{variant:"ghost",size:"icon",children:t.jsx(rn,{className:"h-4 w-4"})}),t.jsx(T,{variant:"ghost",size:"icon",children:t.jsx(zo,{className:"h-4 w-4"})}),t.jsx(T,{variant:"ghost",size:"icon",onClick:()=>F(S.id),children:t.jsx(Rt,{className:"h-4 w-4 text-destructive"})})]})]})]})})]},S.id)})})]}),t.jsxs(Ce,{value:"logs",className:"space-y-4",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Notification Logs"}),t.jsx(P,{className:"glass-card",children:t.jsxs(Rs,{children:[t.jsx(Is,{children:t.jsxs(ot,{children:[t.jsx(ae,{children:"Provider"}),t.jsx(ae,{children:"Recipient"}),t.jsx(ae,{children:"Subject"}),t.jsx(ae,{children:"Status"}),t.jsx(ae,{children:"Sent At"}),t.jsx(ae,{className:"w-20",children:"Actions"})]})}),t.jsx(Ds,{children:a.map(S=>t.jsxs(ot,{children:[t.jsx(ne,{className:"font-medium",children:S.providerName||"Unknown"}),t.jsx(ne,{children:S.recipient}),t.jsx(ne,{className:"max-w-[200px] truncate",children:S.subject||"-"}),t.jsx(ne,{children:t.jsxs("div",{className:"flex flex-col gap-1",children:[I(S.status),S.errorMessage&&t.jsx("span",{className:"text-xs text-destructive truncate max-w-[150px]",title:S.errorMessage,children:S.errorMessage})]})}),t.jsx(ne,{children:S.sentAt?pe(new Date(S.sentAt),"MMM d, yyyy HH:mm"):"-"}),t.jsx(ne,{children:t.jsx(T,{variant:"ghost",size:"icon",children:t.jsx(rn,{className:"h-4 w-4"})})})]},S.id))})]})})]})]})]})})}const PQ=Vs().min(6,"Password must be at least 6 characters");function RQ(){const e=Qe(),[s,r]=f.useState(""),[n,a]=f.useState(""),[i,o]=f.useState(!1),[l,c]=f.useState(!1),[d,u]=f.useState(!1),[m,h]=f.useState(!0);f.useEffect(()=>{(async()=>{const{data:{session:v}}=await B.auth.getSession();v&&u(!0),h(!1)})();const{data:{subscription:x}}=B.auth.onAuthStateChange(async(v,y)=>{v==="PASSWORD_RECOVERY"&&(u(!0),h(!1))});return()=>x.unsubscribe()},[]);const p=async g=>{g.preventDefault();try{PQ.parse(s)}catch(v){if(v instanceof lr){z.error(v.errors[0].message);return}}if(s!==n){z.error("Passwords do not match");return}o(!0);const{error:x}=await B.auth.updateUser({password:s});o(!1),x?z.error(x.message):(c(!0),z.success("Password updated successfully!"),setTimeout(async()=>{await B.auth.signOut(),e("/auth")},2e3))};return m?t.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:t.jsx(Ie,{className:"h-8 w-8 animate-spin text-primary"})}):!d&&!m?t.jsxs("div",{className:"min-h-screen bg-background flex items-center justify-center p-4 relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-4 right-4 z-20",children:t.jsx($n,{})}),t.jsxs(P,{className:"w-full max-w-md glass border-border/50 relative z-10",children:[t.jsxs(W,{className:"text-center space-y-4",children:[t.jsx("div",{className:"mx-auto h-16 w-16 rounded-2xl bg-gradient-to-br from-destructive to-destructive/60 flex items-center justify-center",children:t.jsx(Bo,{className:"h-8 w-8 text-primary-foreground"})}),t.jsxs("div",{children:[t.jsx(V,{className:"text-2xl font-bold",children:"Invalid Reset Link"}),t.jsx(ce,{className:"text-muted-foreground",children:"This password reset link is invalid or has expired."})]})]}),t.jsx(M,{children:t.jsx(T,{onClick:()=>e("/auth"),className:"w-full",children:"Return to Login"})})]})]}):t.jsxs("div",{className:"min-h-screen bg-background flex items-center justify-center p-4 relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-4 right-4 z-20",children:t.jsx($n,{})}),t.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[t.jsx("div",{className:"absolute -top-40 -right-40 h-80 w-80 rounded-full bg-primary/10 blur-3xl"}),t.jsx("div",{className:"absolute -bottom-40 -left-40 h-80 w-80 rounded-full bg-primary/10 blur-3xl"}),t.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 h-96 w-96 rounded-full bg-primary/5 blur-3xl"})]}),t.jsxs(P,{className:"w-full max-w-md glass border-border/50 relative z-10",children:[t.jsxs(W,{className:"text-center space-y-4",children:[t.jsx("div",{className:"mx-auto h-16 w-16 rounded-2xl bg-gradient-to-br from-primary to-primary/60 flex items-center justify-center glow",children:l?t.jsx(vt,{className:"h-8 w-8 text-primary-foreground"}):t.jsx(Qt,{className:"h-8 w-8 text-primary-foreground"})}),t.jsxs("div",{children:[t.jsx(V,{className:"text-2xl font-bold",children:l?"Password Updated!":"Set New Password"}),t.jsx(ce,{className:"text-muted-foreground",children:l?"Your password has been updated. Redirecting to login...":"Enter your new password below."})]})]}),t.jsx(M,{children:l?t.jsxs("div",{className:"flex flex-col items-center gap-4 py-6",children:[t.jsx("div",{className:"h-16 w-16 rounded-full bg-primary/10 flex items-center justify-center",children:t.jsx(vt,{className:"h-8 w-8 text-primary"})}),t.jsx(Ie,{className:"h-5 w-5 animate-spin text-muted-foreground"})]}):t.jsxs("form",{onSubmit:p,className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"new-password",children:"New Password"}),t.jsx(se,{id:"new-password",type:"password",placeholder:"",value:s,onChange:g=>r(g.target.value),className:"bg-input border-border",required:!0})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"confirm-new-password",children:"Confirm New Password"}),t.jsx(se,{id:"confirm-new-password",type:"password",placeholder:"",value:n,onChange:g=>a(g.target.value),className:"bg-input border-border",required:!0})]}),t.jsx(T,{type:"submit",className:"w-full glow",disabled:i,children:i?t.jsxs(t.Fragment,{children:[t.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating Password..."]}):"Update Password"})]})})]})]})}function IQ(){var C;const e=Qe(),[s]=EF(),r=s.get("token"),[n,a]=f.useState(!0),[i,o]=f.useState(!1),[l,c]=f.useState(null),[d,u]=f.useState(null),[m,h]=f.useState(""),[p,g]=f.useState(""),[x,v]=f.useState(""),[y,j]=f.useState(!1);f.useEffect(()=>{if(!r){u("Invalid invitation link"),a(!1);return}(async()=>{const{data:k,error:A}=await B.from("invitations").select("id, email, role, expires_at, company:organizations(id, name)").eq("token",r).eq("status","pending").gt("expires_at",new Date().toISOString()).maybeSingle();A||!k?u("This invitation is invalid or has expired"):c(k),a(!1)})()},[r]);const w=async E=>{var k;if(E.preventDefault(),!m.trim()){z.error("Please enter your full name");return}if(p.length<6){z.error("Password must be at least 6 characters");return}if(p!==x){z.error("Passwords do not match");return}o(!0);try{const A=await B.functions.invoke("accept-invitation",{body:{token:r,password:p,fullName:m.trim()}});if(A.error)throw new Error(A.error.message||"Failed to accept invitation");if((k=A.data)!=null&&k.error)throw new Error(A.data.error);j(!0),z.success("Account created successfully!"),setTimeout(()=>e("/auth"),3e3)}catch(A){z.error(A.message||"Failed to accept invitation")}finally{o(!1)}};if(n)return t.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:t.jsx(Ie,{className:"h-8 w-8 animate-spin text-primary"})});if(y)return t.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:t.jsx(P,{className:"w-full max-w-md",children:t.jsxs(M,{className:"pt-6 text-center",children:[t.jsx(vt,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),t.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Welcome to InfraWeave!"}),t.jsx("p",{className:"text-muted-foreground mb-4",children:"Your account has been created successfully. Redirecting to login..."}),t.jsx(T,{onClick:()=>e("/auth"),children:"Go to Login"})]})})});if(d)return t.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:t.jsx(P,{className:"w-full max-w-md",children:t.jsxs(M,{className:"pt-6 text-center",children:[t.jsx(Nc,{className:"h-16 w-16 text-destructive mx-auto mb-4"}),t.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Invalid Invitation"}),t.jsx("p",{className:"text-muted-foreground mb-4",children:d}),t.jsx(T,{onClick:()=>e("/auth"),children:"Go to Login"})]})})});const N=(E=>{switch(E){case"infraweave_admin":return"InfraWeave Admin";case"infraweave_employee":return"InfraWeave Employee";case"company_admin":return"Company Admin";case"engineer":return"Engineer";default:return E}})((l==null?void 0:l.role)||""),_=(l==null?void 0:l.role)==="infraweave_admin"||(l==null?void 0:l.role)==="infraweave_employee";return t.jsxs("div",{className:"min-h-screen bg-background flex items-center justify-center p-4 relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-4 right-4 z-20",children:t.jsx($n,{})}),t.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[t.jsx("div",{className:"absolute -top-40 -right-40 h-80 w-80 rounded-full bg-primary/10 blur-3xl"}),t.jsx("div",{className:"absolute -bottom-40 -left-40 h-80 w-80 rounded-full bg-primary/10 blur-3xl"})]}),t.jsxs(P,{className:"w-full max-w-md glass border-border/50 relative z-10",children:[t.jsxs(W,{className:"text-center space-y-4",children:[t.jsx("div",{className:"mx-auto",children:t.jsx("img",{src:eo,alt:"InfraWeave CRM",className:"h-16 w-auto"})}),t.jsxs("div",{children:[t.jsx(V,{className:"text-2xl font-bold",children:"Accept Invitation"}),t.jsx(ce,{className:"text-muted-foreground",children:_?t.jsxs(t.Fragment,{children:["You've been invited to join ",t.jsx("span",{className:"text-primary font-medium",children:"InfraWeave"})," as ",N]}):t.jsxs(t.Fragment,{children:["You've been invited to join ",t.jsx("span",{className:"text-primary font-medium",children:(C=l==null?void 0:l.company)==null?void 0:C.name})," as ",N]})})]})]}),t.jsx(M,{children:t.jsxs("form",{onSubmit:w,className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{children:"Email"}),t.jsx(se,{type:"email",value:(l==null?void 0:l.email)||"",disabled:!0,className:"bg-muted"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"fullName",children:"Full Name"}),t.jsx(se,{id:"fullName",type:"text",placeholder:"Enter your full name",value:m,onChange:E=>h(E.target.value),className:"bg-input border-border",required:!0})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"password",children:"Password"}),t.jsx(se,{id:"password",type:"password",placeholder:"Create a password",value:p,onChange:E=>g(E.target.value),className:"bg-input border-border",required:!0,minLength:6})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"confirmPassword",children:"Confirm Password"}),t.jsx(se,{id:"confirmPassword",type:"password",placeholder:"Confirm your password",value:x,onChange:E=>v(E.target.value),className:"bg-input border-border",required:!0})]}),t.jsx(T,{type:"submit",className:"w-full glow",disabled:i,children:i?t.jsxs(t.Fragment,{children:[t.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating Account..."]}):"Accept & Create Account"})]})})]})]})}const DQ=[{id:"getting-started",name:"Getting Started",description:"Quick start guides and onboarding",icon:_c,roles:["infraweave_admin","infraweave_employee","company_admin","engineer"],color:"text-primary"},{id:"dashboard",name:"Dashboard & Navigation",description:"Understanding your workspace",icon:Wa,roles:["infraweave_admin","infraweave_employee","company_admin","engineer"],color:"text-info"},{id:"projects",name:"Project Management",description:"Creating and managing projects",icon:bt,roles:["infraweave_admin","company_admin","engineer"],color:"text-success"},{id:"tickets",name:"Ticket & Support",description:"Managing support tickets",icon:rt,roles:["infraweave_admin","infraweave_employee","company_admin","engineer"],color:"text-warning"},{id:"team",name:"Team Management",description:"Managing users and roles",icon:Kt,roles:["infraweave_admin","company_admin"],color:"text-purple-500"},{id:"billing",name:"Billing & Invoices",description:"Payment and subscription management",icon:ca,roles:["infraweave_admin","company_admin"],color:"text-emerald-500"},{id:"platform",name:"Platform Administration",description:"Global platform management",icon:Qt,roles:["infraweave_admin"],color:"text-red-500"},{id:"security",name:"Security & Compliance",description:"Audit logs and security features",icon:us,roles:["infraweave_admin","company_admin"],color:"text-amber-500"},{id:"licensing",name:"Licensing & Products",description:"License and product management",icon:Nt,roles:["infraweave_admin"],color:"text-cyan-500"},{id:"milestones",name:"Milestones & Progress",description:"Track project milestones and deliverables",icon:Yr,roles:["infraweave_admin","company_admin","engineer"],color:"text-indigo-500"},{id:"reports",name:"Reports & Analytics",description:"Data insights and reporting",icon:kS,roles:["infraweave_admin","company_admin"],color:"text-pink-500"}],OQ=[{id:"welcome-guide",title:"Welcome to InfraWeave CRM",description:"Complete onboarding guide to get started with your new workspace",category:"getting-started",icon:ir,content:`# Welcome to InfraWeave CRM

InfraWeave CRM is a comprehensive enterprise platform designed for managing projects, support tickets, client relationships, and software licensing. This guide will help you get oriented with your new workspace and understand the key features available to you.

## Understanding Your Role

Your access and capabilities within InfraWeave depend on your assigned role:

### Role Hierarchy
- **InfraWeave Admin (Super Admin)**: Complete platform control with cross-tenant visibility, user management, and system configuration access
- **InfraWeave Employee (Support Staff)**: Cross-company ticket visibility for providing customer support
- **Company Admin (Tenant Admin)**: Full control within your organization including team management and billing
- **Engineer (Contributor)**: Access to assigned projects and tickets within your organization

## Your Dashboard

After logging in, you'll land on your personalized dashboard. The dashboard is role-specific:

### Dashboard Components
- **Key Metrics**: Quick stats showing open tickets, active projects, and pending tasks
- **Recent Activity**: Timeline of recent changes and updates relevant to your work
- **Quick Actions**: One-click access to common tasks like creating tickets or viewing assignments
- **Status Overview**: Visual charts showing project health and ticket distribution

## First Steps Checklist

1.  Complete your profile information (name, avatar)
2.  Familiarize yourself with the sidebar navigation
3.  Review any assigned tickets or projects
4.  Set up notification preferences
5.  Bookmark frequently accessed pages

## Getting Help

- Use the **Knowledge Base** (Help icon) for documentation
- Click the **notification bell** to see important updates
- Contact your administrator for access-related questions`,tags:["welcome","introduction","basics","onboarding","roles","dashboard"],roles:["infraweave_admin","infraweave_employee","company_admin","engineer"],readTime:5,featured:!0,steps:[{title:"Sign In to Your Account",description:"Use your registered email and password to access the system. If you received an invitation link, click it to set up your account first.",tip:'Bookmark the login page for quick access. Enable "Remember me" on trusted devices.'},{title:"Complete Your Profile",description:'Click your avatar in the top-right corner and select "Profile". Add your full name, upload a profile picture, and verify your contact information.',tip:"A complete profile helps team members recognize you across the platform."},{title:"Explore the Dashboard",description:"Review the metrics and quick actions on your dashboard. Each card provides actionable insights relevant to your role."},{title:"Review Sidebar Navigation",description:"Click through each menu item to understand what sections are available. The sidebar adapts to show only features you can access."},{title:"Check Assigned Work",description:"Navigate to Projects or Tickets to see any work already assigned to you. Understanding your current assignments is the first step to being productive."}],keyPoints:["Your dashboard is personalized based on your role","The sidebar only shows sections you have access to","All actions are logged for audit and compliance purposes","Use the search bar for quick navigation to any resource"],tips:["Press Ctrl+K (Cmd+K on Mac) for quick search","Star important projects for quick access","Enable browser notifications for real-time updates"],walkthroughs:[{id:"first-login-walkthrough",title:"Complete Your First Login",description:"Interactive guide to set up your account and explore the dashboard.",estimatedTime:"5 min",steps:[{title:"Access the Login Page",description:"Open your browser and navigate to the InfraWeave login page.",action:'Click the "Sign In" button in the top right corner',highlight:"Sign In Button",tip:"Bookmark this page for quick access in the future.",screenshot:"/walkthrough/login-page.jpg"},{title:"Enter Your Credentials",description:"Use the email and password from your invitation to sign in.",action:"Type your email in the email field, then enter your password",highlight:"Login Form",screenshot:"/walkthrough/login-page.jpg"},{title:"Explore Your Dashboard",description:"After logging in, you'll see your personalized dashboard with key metrics.",action:"Review the metric cards and recent activity section",highlight:"Dashboard Metrics",tip:"Each card is clickable and leads to more detailed information.",screenshot:"/walkthrough/dashboard-overview.jpg"},{title:"Navigate the Sidebar",description:"The left sidebar contains all your available sections based on your role.",action:"Click through each menu item to explore available features",highlight:"Sidebar Navigation",screenshot:"/walkthrough/sidebar-navigation.jpg"},{title:"Update Your Profile",description:"Complete your profile to help team members recognize you.",action:'Click your avatar and select "Profile" to add your details',highlight:"Profile Menu",tip:"Add a profile picture for better visibility in team discussions.",screenshot:"/walkthrough/profile-settings.jpg"}]}]},{id:"navigation-basics",title:"Navigating the Interface",description:"Master the InfraWeave interface for maximum efficiency",category:"dashboard",icon:Wa,content:`# Navigating the InfraWeave Interface

The InfraWeave interface is designed for efficiency, clarity, and accessibility. Understanding the layout will help you work faster and find information quickly.

## Main Interface Components

### 1. Header Bar
Located at the top of the screen, the header contains:
- **Logo**: Click to return to your dashboard from anywhere
- **Global Search**: Search for tickets, projects, companies, or users
- **Notifications Bell**: Shows unread notifications with a count badge
- **Theme Toggle**: Switch between light and dark mode
- **Profile Menu**: Access your profile, settings, and sign out

### 2. Sidebar Navigation
The left sidebar is your primary navigation tool:

**For Super Admins:**
- Dashboard (overview metrics)
- Companies (tenant management)
- Projects (all projects)
- Tickets (all support tickets)
- Users (user management)
- Audit Logs (security tracking)
- Reports (platform analytics)
- Settings (system configuration)

**For Company Admins:**
- Dashboard (company overview)
- Projects (company projects)
- Tickets (company tickets)
- Team (member management)
- Billing (invoices & payments)
- Settings (company settings)

**For Engineers:**
- Dashboard (personal overview)
- My Projects (assigned projects)
- My Tickets (assigned tickets)
- Knowledge Base (help documentation)

**For Support Staff:**
- Dashboard (ticket overview)
- All Tickets (cross-tenant tickets)
- Companies (reference view)
- Knowledge Base (support guides)

### 3. Main Content Area
The central area displays the content of your selected section:
- **List Views**: Tables or cards showing multiple items
- **Detail Views**: Complete information about a single item
- **Forms**: Data entry screens for creating/editing

### 4. Action Buttons
Located at the top-right of most pages:
- **Primary Actions**: Blue buttons for main tasks (Create, Save)
- **Secondary Actions**: Outlined buttons for alternatives (Cancel, Export)
- **Danger Actions**: Red buttons for destructive operations (Delete)

## Navigation Tips

### Breadcrumbs
Many pages show breadcrumb navigation below the header, helping you understand your current location and navigate back to parent sections.

### Filters & Search
Most list views include:
- Search field for text-based filtering
- Status filters (tabs or dropdowns)
- Date range selectors
- Sort options

### Pagination
Large lists are paginated. Use the navigation controls at the bottom to:
- Move between pages
- Change items per page
- Jump to a specific page

## Keyboard Shortcuts

| Shortcut | Action |
|----------|--------|
| Ctrl/Cmd + K | Open global search |
| Esc | Close dialogs/modals |
| ? | Show keyboard shortcuts help |`,tags:["navigation","interface","sidebar","search","header","shortcuts"],roles:["infraweave_admin","infraweave_employee","company_admin","engineer"],readTime:6,keyPoints:["The sidebar adapts to your role automatically","Global search works across all accessible resources","Breadcrumbs help you navigate back through nested pages","Most list views support filtering, sorting, and search"],tips:["Use dark mode in low-light environments to reduce eye strain","Collapse the sidebar on smaller screens for more content space","Right-click menu items to open in a new tab"],walkthroughs:[{id:"sidebar-navigation",title:"Master Sidebar Navigation",description:"Learn to efficiently navigate using the sidebar menu.",estimatedTime:"3 min",steps:[{title:"Locate the Sidebar",description:"The sidebar is the vertical menu on the left side of your screen.",action:"Look at the left edge of your screen to find the navigation menu",highlight:"Sidebar",screenshot:"/walkthrough/sidebar-navigation.jpg"},{title:"Collapse/Expand Sidebar",description:"You can collapse the sidebar to gain more screen space.",action:"Click the collapse arrow at the top of the sidebar",highlight:"Collapse Button",tip:"Collapsed sidebar still shows icons for quick navigation.",screenshot:"/walkthrough/sidebar-navigation.jpg"},{title:"Navigate Between Sections",description:"Click any menu item to navigate to that section.",action:'Click on "Projects" in the sidebar',highlight:"Projects Menu Item",screenshot:"/walkthrough/sidebar-navigation.jpg"},{title:"Notice Active State",description:"The current page is highlighted in the sidebar.",action:"Observe the highlighted menu item matching your current page",highlight:"Active Menu Item",screenshot:"/walkthrough/dashboard-overview.jpg"}]}]},{id:"create-project",title:"Creating a New Project",description:"Complete guide to the 17-step project creation wizard",category:"projects",icon:bt,content:`# Creating a New Project

The InfraWeave Project Creation Wizard guides you through a comprehensive 17-step process designed to capture all essential details for successful project delivery. This structured approach ensures nothing is overlooked.

## Accessing the Wizard

1. Navigate to **Projects** in the sidebar
2. Click the **"+ New Project"** button in the top-right corner
3. The wizard will open in a full-screen modal

## Wizard Steps Overview

### Step 1: Client Information
Capture essential client details:
- Client name and company
- Primary contact person
- Contact email and phone
- Client environment description (infrastructure, systems)

### Step 2: Business Context
Document the business drivers:
- Business objectives for this project
- Success criteria and KPIs
- Stakeholder expectations
- Budget constraints (if applicable)

### Step 3: Current State Assessment
Describe the "as-is" situation:
- Current system/process description
- Known pain points and challenges
- Existing infrastructure and tools
- Documentation of current workflows

### Step 4: Desired State Definition
Define the target outcome:
- Vision for the completed project
- Expected improvements and benefits
- New capabilities to be delivered
- Performance targets

### Step 5: Technical Overview
Capture technical requirements:
- Technology stack involved
- Integration requirements
- Security considerations
- Compliance requirements

### Step 6: Scope Summary
Clearly define boundaries:
- In-scope deliverables
- Out-of-scope items (equally important!)
- Assumptions
- Constraints

### Step 7: Deliverables
List all project outputs:
- Documentation deliverables
- Software/system deliverables
- Training materials
- Handover items

### Step 8: Timeline Planning
Set the project schedule:
- Proposed start date
- Target completion date
- Key milestone dates
- Phase breakdown

### Step 9: Dependencies
Identify external dependencies:
- Third-party integrations
- Other team dependencies
- Client-provided resources
- External approvals needed

### Step 10: Risk Assessment
Proactively identify risks:
- Technical risks
- Resource risks
- Timeline risks
- Mitigation strategies

### Step 11: Acceptance Criteria
Define "done":
- Functional acceptance criteria
- Performance acceptance criteria
- Quality standards
- Sign-off requirements

### Step 12: Communication Plan
Establish communication cadence:
- Status report frequency
- Meeting schedule
- Escalation paths
- Preferred communication channels

### Step 13: Access & Prerequisites
Document access requirements:
- System access needed
- Credentials/accounts required
- VPN or network requirements
- Physical access if applicable

### Step 14: Ownership Assignment
Assign project responsibility:
- Project Manager
- Technical Lead
- Primary Engineer(s)
- Client-side owner

### Step 15: Post-Completion Plan
Plan for after delivery:
- Warranty/support period
- Handover process
- Documentation requirements
- Training sessions

### Step 16: Attachments
Add supporting documents:
- Proposals and SOWs
- Technical diagrams
- Reference materials
- Contracts/agreements

### Step 17: Review & Submit
Final review:
- Summary of all entered information
- Validation of required fields
- Submit or save as draft

## Working with Drafts

### Saving a Draft
- Click **"Save as Draft"** at any time during the wizard
- Your progress is saved including the current step
- Drafts appear in the **"Drafts"** tab on the Projects page

### Resuming a Draft
1. Go to **Projects**  **Drafts** tab
2. Find your draft and click **"Continue"**
3. The wizard reopens at your last step

### Deleting a Draft
- Click the trash icon on a draft card
- Confirm deletion (this cannot be undone)

## Best Practices

1. **Be Thorough**: Take time on each stepcomprehensive documentation prevents issues later
2. **Use Clear Language**: Avoid jargon; write so any team member can understand
3. **Attach References**: Include relevant documents, diagrams, and specifications
4. **Define Scope Clearly**: Ambiguous scope is the #1 cause of project issues
5. **Realistic Timelines**: Build in buffer for unknowns`,tags:["project","create","wizard","draft","scope","planning"],roles:["infraweave_admin","company_admin"],readTime:12,featured:!0,steps:[{title:"Launch the Wizard",description:'Navigate to Projects and click "+ New Project" to begin the guided creation process.'},{title:"Complete Client Information",description:"Fill in client details, contact information, and environment context. Required fields are marked with an asterisk (*)."},{title:"Define Business Context",description:"Document the business drivers, success criteria, and stakeholder expectations for this engagement.",tip:'Be specific about what "success" looks likethis becomes your guiding principle.'},{title:"Capture Technical Details",description:"Document current state, desired state, and technical requirements. Attach relevant diagrams."},{title:"Set Timeline & Dependencies",description:"Define the schedule, identify dependencies, and assign ownership. Be realistic about timelines."},{title:"Review & Submit",description:"Review all sections on the final summary page. Submit to create the project or save as draft to continue later."}],keyPoints:["The wizard has 17 steps organized into logical sections","You can save as draft at any point and resume later","Required fields must be completed to proceed","Attachments support files up to 10MB each"],warnings:["Once submitted, some fields become read-only","Deleting a draft is permanent and cannot be undone","Large file attachments may take time to upload"],tips:["Prepare client information before starting the wizard",'Use the "Save as Draft" button frequently for long forms',"Download a project template for offline planning"],walkthroughs:[{id:"create-first-project",title:"Create Your First Project",description:"Step-by-step interactive guide to create a new project from scratch.",estimatedTime:"10 min",steps:[{title:"Open Projects Section",description:"Navigate to the Projects section from the sidebar.",action:'Click "Projects" in the left sidebar',highlight:"Sidebar - Projects",screenshot:"/walkthrough/sidebar-navigation.jpg"},{title:"Start New Project",description:"Click the button to launch the project creation wizard.",action:'Click the "+ New Project" button in the top right corner',highlight:"New Project Button",tip:"You can also use keyboard shortcut Ctrl+Shift+P.",screenshot:"/walkthrough/project-wizard.jpg"},{title:"Enter Client Details",description:"Fill in the client information on the first step.",action:"Enter client name, contact person, email, and phone number",highlight:"Client Information Form",screenshot:"/walkthrough/project-wizard.jpg"},{title:"Define Business Context",description:"Document why this project matters to the client.",action:"Fill in business objectives and success criteria",highlight:"Business Context Step",tip:"Be specific about measurable outcomes.",screenshot:"/walkthrough/project-wizard.jpg"},{title:"Set Current & Desired State",description:"Describe where the client is now and where they want to be.",action:"Complete the current state and desired state sections",highlight:"State Assessment",screenshot:"/walkthrough/project-wizard.jpg"},{title:"Define Scope & Timeline",description:"Clearly outline what's included and the project schedule.",action:"Fill in scope summary and timeline dates",highlight:"Scope Section",tip:"What's OUT of scope is as important as what's IN scope.",screenshot:"/walkthrough/project-wizard.jpg"},{title:"Review & Submit",description:"Review all entered information and create the project.",action:'Scroll through the summary and click "Create Project"',highlight:"Submit Button",screenshot:"/walkthrough/project-wizard.jpg"}]}]},{id:"project-lifecycle",title:"Understanding Project Lifecycle",description:"Learn about project statuses, health indicators, and progress tracking",category:"projects",icon:UO,content:`# Understanding Project Lifecycle

Every project in InfraWeave follows a defined lifecycle with clear statuses, health indicators, and progress tracking. Understanding this lifecycle helps you manage projects effectively.

## Project Statuses

### Draft
- Project is being created but not yet active
- Can be edited freely
- Not visible to general team members
- Appears in the "Drafts" tab

### Planning
- Initial project phase
- Scope and requirements being finalized
- Team assignments in progress
- No active development yet

### Active
- Project work is in progress
- Most common status during execution
- Tickets and milestones being worked on
- Regular status updates expected

### On Hold
- Work temporarily paused
- Reason should be documented
- Resources may be reassigned
- Waiting for external factor

### Completed
- All deliverables finished
- Awaiting final acceptance
- Documentation being finalized
- Handover in progress

### Archived
- Project formally closed
- Read-only access only
- Retained for reference
- Can be exported for records

## Health Indicators

Projects display a health status to quickly communicate their state:

###  Healthy
- On schedule
- Within budget
- No critical blockers
- Team performing well

###  At Risk
- Minor delays or issues
- Potential blockers identified
- Needs attention but recoverable
- Some milestones slipping

###  Critical
- Significant delays
- Major blockers present
- Requires immediate intervention
- Escalation may be needed

###  Not Started
- Project in planning
- No progress yet
- Health not applicable

## Progress Tracking

### Progress Percentage
- Calculated from completed milestones
- Updated automatically as milestones close
- Visual progress bar on project cards

### Milestone Progress
- Individual milestone completion
- Due date tracking
- Assignee accountability
- Dependency visualization

### Ticket Metrics
- Open vs. closed tickets
- Ticket velocity trends
- Priority distribution
- Assignee workload

## Project Timeline View

The timeline shows:
- Project start and end dates
- Milestone due dates
- Actual vs. planned progress
- Critical path visualization

## Best Practices for Health Maintenance

1. **Update Status Regularly**: Change status when circumstances change
2. **Address Yellow Before Red**: Intervene when health is "At Risk"
3. **Document Blockers**: Keep blocker information current
4. **Review Milestones Weekly**: Ensure due dates are realistic
5. **Communicate Early**: Flag issues before they become critical`,tags:["project","lifecycle","status","health","progress","milestones"],roles:["infraweave_admin","company_admin","engineer"],readTime:7,keyPoints:["Projects move through distinct lifecycle stages","Health indicators provide at-a-glance status","Progress is calculated from milestone completion","Regular updates keep stakeholders informed"]},{id:"view-projects-engineer",title:"Viewing Your Assigned Projects",description:"How to find, access, and work on projects assigned to you",category:"projects",icon:rn,content:`# Viewing Your Assigned Projects

As an Engineer, you have access to projects where you've been added as a team member. This focused view helps you stay organized and productive.

## Accessing My Projects

1. Click **"My Projects"** in the sidebar
2. You'll see a list of all projects you're assigned to
3. Use tabs to filter by status: All, Active, Completed

## Project Card Information

Each project card displays:
- **Project Name**: Click to view full details
- **Client Name**: The organization this project belongs to
- **Status Badge**: Current lifecycle status
- **Health Indicator**: Green/Yellow/Red health status
- **Progress Bar**: Visual completion percentage
- **Priority Tag**: Low/Medium/High/Critical
- **Dates**: Start date and target end date

## Project Detail View

Click a project card to see:

### Overview Tab
- Full project description
- Business context summary
- Current state and desired state
- Technical overview

### Milestones Tab
- All project milestones
- Your assigned milestones highlighted
- Due dates and status
- Ability to update milestone progress

### Tickets Tab
- All tickets linked to this project
- Filter by status or assignee
- Quick-create new tickets
- Bulk actions for ticket management

### Documents Tab
- Project documentation
- Attached files
- Version history
- Download capability

### Team Tab
- All project members
- Roles and responsibilities
- Contact information (email, phone)

## Working on Projects

### Updating Progress
1. Navigate to project detail
2. Go to Milestones tab
3. Find your assigned milestone
4. Update status or mark complete

### Creating Related Tickets
1. From project detail, click Tickets tab
2. Click "+ New Ticket"
3. The ticket auto-links to this project

### Viewing Your Tasks
- Dashboard shows your pending milestones
- Filter tickets by "Assigned to Me"
- Check due dates regularly

## Finding Specific Projects

### Search
- Use the search bar on the Projects page
- Search by project name or client name
- Results filter as you type

### Status Filters
- Click status tabs to filter
- "Active" shows current work
- "Completed" shows finished projects

## Best Practices

1. **Check Daily**: Review your assigned projects each morning
2. **Update Progress**: Keep milestone status current
3. **Document Work**: Add comments to tickets as you work
4. **Flag Issues Early**: Create tickets for blockers immediately
5. **Communicate**: Use ticket comments for team communication`,tags:["project","view","assigned","engineer","tasks"],roles:["engineer"],readTime:6,steps:[{title:"Access My Projects",description:'Click "My Projects" in the sidebar to see all projects where you are assigned as a team member.'},{title:"Review Project Cards",description:"Scan the cards for status, health, and progress. Pay attention to red health indicators."},{title:"Open Project Details",description:"Click any project card to see full information including milestones, tickets, and documents."},{title:"Check Your Assignments",description:"In the Milestones tab, look for items assigned to you. Note due dates and priorities."}],keyPoints:["You only see projects where you are a team member","Dashboard highlights your pending work","Milestones and tickets are your primary work items","Project health reflects overall project status"]},{id:"project-milestones",title:"Working with Project Milestones",description:"Create, manage, and track project milestones effectively",category:"milestones",icon:Yr,content:`# Working with Project Milestones

Milestones are key deliverables or checkpoints in your project timeline. They help track progress, set expectations, and ensure accountability.

## Understanding Milestones

### What is a Milestone?
A milestone represents:
- A significant deliverable or outcome
- A phase completion checkpoint
- A key decision point
- A client review gate

### Milestone vs. Task
- **Milestones**: Major achievements or deliverables
- **Tasks/Tickets**: Individual work items to reach milestones

## Creating Milestones

### From Project Detail
1. Open the project
2. Go to the **Milestones** tab
3. Click **"+ Add Milestone"**
4. Fill in the milestone form

### Milestone Fields
- **Title**: Clear, descriptive name
- **Description**: Detailed explanation of the deliverable
- **Due Date**: Target completion date
- **Priority**: Low, Medium, High, Critical
- **Assigned To**: Responsible team member
- **Status**: Not Started, In Progress, Completed, Blocked

## Milestone Statuses

### Not Started
- Work hasn't begun
- Default status for new milestones
- Due date is in the future

### In Progress
- Active work happening
- Should have activity visible
- Team member engaged

### Completed
- Deliverable finished
- Marked with completion date
- May trigger dependent milestones

### Blocked
- Cannot proceed
- Blocker should be documented
- Requires intervention

## Managing Milestones

### Updating Status
1. Find the milestone in the list or timeline
2. Click the milestone card
3. Change the status dropdown
4. Add notes explaining the change

### Editing Details
- Click the edit icon on a milestone
- Modify title, description, or dates
- Change assignee if needed
- Save changes

### Reordering Milestones
- Drag and drop to reorder
- Changes reflect in timeline view
- Order affects dependency flow

## Milestone Timeline View

The visual timeline shows:
- Chronological milestone layout
- Status color coding
- Dependency connections
- Today indicator
- Overdue highlighting

## Milestone Dependencies

### Setting Dependencies
- When creating/editing, select "Depends On"
- Choose prerequisite milestone(s)
- System tracks dependency chain

### Dependency Impact
- Blocked milestones show dependency issues
- Completing prerequisites enables dependent items
- Late milestones ripple through dependencies

## Best Practices

1. **Clear Titles**: Use action-oriented titles ("Deploy API v2")
2. **Realistic Dates**: Buffer for unknowns
3. **Single Owner**: One assignee per milestone
4. **Regular Updates**: Update status at least weekly
5. **Document Blockers**: Explain why work is blocked
6. **Celebrate Completion**: Acknowledge finished milestones`,tags:["milestone","deliverable","progress","timeline","dependencies"],roles:["infraweave_admin","company_admin","engineer"],readTime:8,steps:[{title:"Navigate to Project",description:"Open the project where you want to manage milestones."},{title:"Open Milestones Tab",description:"Click the Milestones tab to see the timeline and list view."},{title:"Create New Milestone",description:'Click "+ Add Milestone" and fill in title, description, due date, and assignee.',tip:'Be specific"Complete API Integration" is better than "Finish API"'},{title:"Set Dependencies",description:'If this milestone depends on others, select them in the "Depends On" field.'},{title:"Track Progress",description:"Update milestone status as work progresses. Add notes for context."}],keyPoints:["Milestones represent significant project checkpoints","Each milestone should have a single owner","Dependencies help track prerequisite relationships","Regular status updates keep everyone informed"]},{id:"create-ticket",title:"Creating Support Tickets",description:"How to submit well-documented support requests for faster resolution",category:"tickets",icon:rt,content:`# Creating Support Tickets

A well-documented ticket is the foundation for fast, effective support. This guide covers everything you need to know about creating tickets that get resolved quickly.

## When to Create a Ticket

Create a ticket for:
-  Questions requiring team assistance
-  Bug reports or system issues
-  Feature requests or enhancements
-  Configuration or setup requests
-  Documentation requests
-  Incidents or outages

## Accessing Ticket Creation

### From Tickets Page
1. Navigate to **Tickets** in the sidebar
2. Click **"+ New Ticket"** button

### From Project Detail
1. Open the related project
2. Go to **Tickets** tab
3. Click **"+ New Ticket"**
4. Ticket auto-links to the project

## Ticket Fields

### Required Fields

**Title** (Required)
- Clear, specific summary
- Include error codes if applicable
- Good: "API returns 500 error on user login"
- Bad: "It's broken"

**Description** (Required)
- Detailed explanation of the issue
- Steps to reproduce (for bugs)
- Expected vs. actual behavior
- Business impact

**Priority** (Required)
- **Critical**: System down, major business impact, affects many users
- **High**: Significant issue, workaround not available, blocking work
- **Medium**: Moderate impact, workaround exists, not urgent
- **Low**: Minor issue, enhancement request, no urgency

### Optional Fields

**Category**
- Bug Report
- Feature Request
- Question
- Configuration
- Documentation

**Project**
- Link to related project
- Helps with context and tracking

**Due Date**
- Expected resolution date
- For time-sensitive requests

**Attachments**
- Screenshots (highly recommended)
- Log files
- Configuration files
- Supporting documents

## Writing Effective Descriptions

### For Bug Reports
\`\`\`
**Environment**: Production / Staging / Development
**Browser**: Chrome 120.0.6099.71
**Date/Time**: 2024-01-15 14:30 UTC

**Steps to Reproduce**:
1. Navigate to /dashboard
2. Click "Export" button
3. Select "CSV" format
4. Click "Download"

**Expected Behavior**:
CSV file downloads with current data

**Actual Behavior**:
Error message: "Export failed. Please try again."

**Additional Context**:
This started happening after the January 14 deployment.
Affects all users in our organization.
\`\`\`

### For Feature Requests
\`\`\`
**Feature Request**: Bulk ticket assignment

**Problem Statement**:
Currently, assigning multiple tickets to a team member 
requires updating each ticket individually.

**Proposed Solution**:
Add checkbox selection and bulk action menu to ticket list.

**Business Value**:
Save ~30 minutes/day for support managers
\`\`\`

## Attaching Files

### Supported Formats
- Images: PNG, JPG, GIF, SVG
- Documents: PDF, DOC, DOCX, XLS, XLSX
- Text: TXT, CSV, JSON, XML
- Archives: ZIP (for multiple files)

### Best Practices
- Screenshots should highlight the issue
- Annotate images if helpful
- Log files should be recent and relevant
- Remove sensitive data before uploading
- Maximum file size: 10MB per file

## After Submitting

### Track Your Ticket
- Note the ticket number (e.g., TKT-12345)
- View in "My Tickets" or "Reported by Me"
- Watch for status updates and comments

### Responding to Questions
- Check for comments from the support team
- Provide requested information promptly
- Use comments for follow-up (don't create new tickets)

### Ticket Lifecycle
1. **Open**: Initial status when created
2. **In Progress**: Someone is working on it
3. **Waiting for Customer**: Team needs more info from you
4. **Waiting Internal**: Team coordinating internally
5. **Resolved**: Issue addressed, awaiting confirmation
6. **Closed**: Ticket complete`,tags:["ticket","create","support","priority","bug report","feature request"],roles:["infraweave_admin","company_admin","engineer"],readTime:10,featured:!0,steps:[{title:'Click "+ New Ticket"',description:"Find the button in the header or on the Tickets page. If you're in a project, the ticket will auto-link."},{title:"Enter a Clear Title",description:"Write a specific, searchable summary. Include error codes or key identifiers.",tip:"Good titles make tickets easier to find later and help support prioritize."},{title:"Write a Detailed Description",description:"Explain the issue thoroughly. For bugs, include steps to reproduce and expected vs. actual behavior."},{title:"Set Appropriate Priority",description:"Choose priority based on business impact and urgency. Be honestnot everything is critical.",tip:"Over-prioritizing reduces the effectiveness of priority levels for everyone."},{title:"Attach Screenshots",description:"Visual evidence dramatically speeds up resolution. Annotate if helpful.",tip:"Use built-in screenshot tools (Win+Shift+S on Windows, Cmd+Shift+4 on Mac)."},{title:"Review and Submit",description:"Double-check all fields. Click Submit and note your ticket number."}],keyPoints:["Clear titles help with searchability and prioritization","Detailed descriptions reduce back-and-forth questions","Screenshots and attachments accelerate resolution","Appropriate priority levels ensure critical issues get attention"],warnings:["Marking everything as Critical reduces its effectiveness","Vague descriptions lead to delayed resolution","Don't include sensitive credentials in ticket content"],tips:["Screenshot before doing anythingevidence helps","Check if a similar ticket already exists","Link related tickets when they exist"]},{id:"ticket-management-employee",title:"Managing Tickets (Support Staff)",description:"Complete guide to handling tickets across all companies as support staff",category:"tickets",icon:zu,content:`# Managing Tickets as Support Staff

As an InfraWeave Employee (Support Staff), you have cross-tenant visibility to provide support to all client companies. This guide covers your capabilities and best practices.

## Your Ticket Dashboard

### Dashboard Views
Your dashboard shows tickets organized by tabs:
- **Assigned to Me**: Tickets where you're the assignee
- **Open**: All open tickets across companies
- **In Progress**: Tickets actively being worked
- **Resolved**: Recently resolved tickets
- **All**: Complete ticket list

### Dashboard Metrics
- Total open tickets count
- Tickets by priority breakdown
- Average resolution time
- Your assigned ticket count

## Working with Tickets

### Filtering Tickets

**By Company**
- Use the Company dropdown to focus on one organization
- Helpful when doing focused support sessions

**By Priority**
- Click priority tabs: Critical, High, Medium, Low
- Critical tickets should be addressed first

**By Status**
- Filter by ticket lifecycle status
- "Waiting for Customer" needs follow-up

**By Date**
- Set date range for created or updated date
- Find stale tickets needing attention

### Ticket Actions

**Changing Status**
1. Open the ticket detail
2. Use the status dropdown
3. Select new status
4. Add a comment explaining the change

**Changing Priority**
1. Open ticket detail
2. Click the priority badge
3. Select new priority level
4. Document reason in comments

**Assigning Tickets**
1. Open ticket detail
2. Click "Assign" button
3. Select team member
4. Or click "Assign to Me"

 **Note**: As Support Staff, you can change status and priority but **cannot delete tickets**.

## Internal Notes

### What Are Internal Notes?
Comments marked as "Internal" that:
- Are visible only to staff members
- Hidden from the client/customer
- Used for internal coordination
- Documented in audit logs

### When to Use Internal Notes
- Coordinating with other team members
- Documenting troubleshooting steps
- Sharing technical details not relevant to client
- Escalation discussions
- Capturing internal decisions

### Creating an Internal Note
1. Open the ticket detail
2. Scroll to comments section
3. Type your comment
4.  Check "Mark as Internal"
5. Click Post Comment

### Best Practices for Internal Notes
- Be professional (they're still auditable)
- Include technical details and findings
- Tag team members if needed (@username)
- Document your troubleshooting steps
- Note any escalation decisions

## Status Management

### Status Definitions

**Open**
- New ticket, not yet triaged
- Needs initial assessment
- Action: Assign and begin work

**In Progress**
- Actively being investigated
- Work is happening
- Update regularly

**Waiting for Customer**
- Need information from reporter
- Sent question, awaiting response
- Follow up after 48 hours

**Waiting Internal**
- Need input from other team/department
- Blocked by internal factor
- Document what you're waiting for

**Resolved**
- Issue addressed
- Solution implemented
- Awaiting customer confirmation

**Closed**
- Customer confirmed resolution
- Or auto-closed after timeout
- Ticket complete

### Status Best Practices
1. Change status immediately when applicable
2. Always add comment when changing status
3. "Waiting for Customer" triggers reminder
4. Don't leave tickets "In Progress" indefinitely
5. Close resolved tickets after confirmation

## Cross-Company Visibility

### What You Can See
- All tickets across all companies
- Ticket history and comments
- Client contact information
- Related projects

### What You Cannot Do
- Delete tickets (admin only)
- Access billing information
- Manage company users
- View audit logs
- Modify company settings

## Priority Guidelines

### Critical (Respond within 1 hour)
- Production system down
- Data loss or security issue
- Complete business stoppage
- Regulatory compliance impact

### High (Respond within 4 hours)
- Major functionality broken
- Significant business impact
- Many users affected
- No workaround available

### Medium (Respond within 1 business day)
- Important issue with workaround
- Some users affected
- Moderate business impact
- Non-urgent enhancement

### Low (Respond within 3 business days)
- Minor issue or question
- Minimal business impact
- Enhancement request
- Documentation updates

## Best Practices

1. **Triage Quickly**: Review new tickets within 30 minutes during business hours
2. **Communicate Clearly**: Use plain language, avoid jargon
3. **Set Expectations**: Let customers know realistic timelines
4. **Document Everything**: Your notes help the team
5. **Escalate Appropriately**: Don't sit on issues you can't solve
6. **Close the Loop**: Confirm resolution with customer`,tags:["ticket","support","employee","internal notes","triage","status"],roles:["infraweave_employee"],readTime:12,featured:!0,keyPoints:["You have visibility across all tenant companies","Internal notes are hidden from customers","Status changes should always include comments","Priority determines response time expectations"],warnings:["You cannot delete ticketsonly admins can","Internal notes are auditableremain professional","Don't share internal notes content with customers"],tips:["Use filters to manage your queue efficiently",'Check "Assigned to Me" first each morning','Follow up on "Waiting for Customer" tickets daily'],walkthroughs:[{id:"handle-first-ticket",title:"Handle Your First Support Ticket",description:"Learn the complete workflow for processing a support ticket from start to finish.",estimatedTime:"8 min",steps:[{title:"Access Ticket Dashboard",description:"Navigate to the tickets section to see all open tickets.",action:'Click "All Tickets" in the sidebar',highlight:"Tickets Menu",screenshot:"/walkthrough/ticket-list.jpg"},{title:"Filter by Priority",description:"Focus on critical tickets first using the priority filter.",action:'Click the "Critical" tab in the filter bar',highlight:"Priority Tabs",tip:"Always handle critical tickets before moving to lower priorities.",screenshot:"/walkthrough/ticket-list.jpg"},{title:"Select a Ticket",description:"Click on a ticket to open its details.",action:"Click on a ticket row to open the detail view",highlight:"Ticket List",screenshot:"/walkthrough/ticket-list.jpg"},{title:"Review Ticket Details",description:"Read the description and any existing comments.",action:"Scroll through the ticket details and comment history",highlight:"Ticket Content",screenshot:"/walkthrough/ticket-detail.jpg"},{title:"Assign to Yourself",description:"Take ownership of the ticket by assigning it.",action:'Click "Assign to Me" button',highlight:"Assign Button",screenshot:"/walkthrough/ticket-detail.jpg"},{title:"Update Status",description:"Change the status to reflect you're working on it.",action:'Change status from "Open" to "In Progress"',highlight:"Status Dropdown",screenshot:"/walkthrough/ticket-detail.jpg"},{title:"Add Internal Note",description:"Document your initial assessment with an internal note.",action:'Type your analysis, check "Mark as Internal", and click Post',highlight:"Comment Section",tip:"Internal notes help your team understand your thought process.",screenshot:"/walkthrough/ticket-detail.jpg"},{title:"Resolve or Escalate",description:"Either resolve the ticket or escalate if needed.",action:'Set status to "Resolved" when complete, or add escalation note',highlight:"Status Actions",screenshot:"/walkthrough/ticket-detail.jpg"}]}]},{id:"ticket-hierarchy",title:"Understanding Ticket Hierarchy",description:"How to use parent-child ticket relationships for complex issues",category:"tickets",icon:uj,content:`# Understanding Ticket Hierarchy

InfraWeave supports hierarchical ticket structures, allowing you to organize complex issues into manageable pieces while maintaining relationships.

## Ticket Types in Hierarchy

### Epic Tickets
- High-level initiative or project phase
- Contains multiple related sub-tickets
- Tracks overall completion
- Typically spans weeks or months

### Standard Tickets
- Individual work items
- Can be standalone or linked
- Has assignee and due date
- Trackable lifecycle

### Sub-Tickets
- Child tickets under an Epic
- More granular work items
- Roll up to parent status
- Can have own assignees

## Creating Hierarchies

### Creating an Epic
1. Create a new ticket
2. Select category: "Epic"
3. Set a broad, encompassing title
4. Describe the overall objective
5. Don't assignEpics are containers

### Linking Tickets to Epics
1. Create or edit a ticket
2. Find "Parent Ticket" field
3. Search for the Epic
4. Select to establish link
5. Ticket now appears under Epic

### Viewing Hierarchy
- Epic detail page shows "Child Tickets" section
- Child tickets show breadcrumb to parent
- Dashboard shows Epic completion percentage

## Use Cases

### Feature Development
\`\`\`
 Epic: User Authentication System
    Ticket: Implement login form
    Ticket: Add password reset flow
    Ticket: Integrate SSO provider
    Ticket: Add 2FA support
\`\`\`

### Incident Management
\`\`\`
 Epic: Production Outage - Jan 15
    Ticket: Investigate root cause
    Ticket: Apply hotfix
    Ticket: Notify affected customers
    Ticket: Post-mortem documentation
\`\`\`

### Client Onboarding
\`\`\`
 Epic: Acme Corp Onboarding
    Ticket: Environment setup
    Ticket: Data migration
    Ticket: User training
    Ticket: Go-live support
\`\`\`

## Progress Tracking

### Epic Completion
- Calculated from child ticket statuses
- Shows percentage complete
- Visual progress bar
- Updates automatically

### Rollup Metrics
- Total child tickets count
- Open vs. closed breakdown
- Blocked tickets highlighted
- Velocity if applicable

## Best Practices

1. **Don't Over-Nest**: Keep hierarchy to 2 levels (Epic  Tickets)
2. **Clear Epic Scope**: Define what's in/out of the Epic
3. **Manageable Children**: Each child ticket should be completable independently
4. **Consistent Granularity**: Similar-sized child tickets
5. **Close Epics**: Mark Epic closed when all children done`,tags:["ticket","hierarchy","epic","parent","child","organization"],roles:["infraweave_admin","infraweave_employee","company_admin","engineer"],readTime:6,keyPoints:["Epics are container tickets for related work","Child tickets inherit context from parent","Epic completion is calculated automatically","Hierarchy helps organize complex initiatives"]},{id:"ticket-watchers",title:"Ticket Watchers & Notifications",description:"Stay informed about ticket updates by watching tickets",category:"tickets",icon:na,content:`# Ticket Watchers & Notifications

The Watcher feature lets you subscribe to ticket updates even when you're not the assignee or reporter. This is crucial for staying informed about work that impacts you.

## Understanding Watchers

### Who Gets Notifications?
By default, these people receive ticket notifications:
- **Reporter**: The person who created the ticket
- **Assignee**: The person responsible for resolution
- **Watchers**: Anyone who opted to watch

### What Triggers Notifications?
- Status changes
- New comments added
- Priority changes
- Assignment changes
- Due date changes
- Ticket closure

## Watching a Ticket

### Adding Yourself as Watcher
1. Open the ticket detail page
2. Find the "Watchers" section (usually in sidebar)
3. Click "+ Watch" or "Add Watcher"
4. You'll see yourself added to the list

### Unwatching a Ticket
1. Open the ticket detail page
2. Find yourself in the Watchers list
3. Click the "X" or "Unwatch" button
4. You'll stop receiving notifications

### Adding Other Watchers
If you have permission:
1. Click "+ Add Watcher"
2. Search for team member
3. Select to add them
4. They'll receive a notification

## Notification Channels

### In-App Notifications
- Bell icon in header shows count
- Click to see notification list
- Click notification to go to ticket
- Mark as read or clear

### Email Notifications (if configured)
- Sent to your registered email
- Contains ticket summary
- Links directly to ticket
- Can be configured in Settings

## Project-Level Watching

### Watching All Project Tickets
1. Open project detail
2. Find "Watch Project" option
3. Enable to get all ticket notifications
4. Useful for project managers

### Watch Settings
You can configure:
- Which events trigger notifications
- Email vs. in-app preference
- Digest vs. immediate emails
- Quiet hours settings

## Best Practices

1. **Watch Important Tickets**: Don't miss critical updates
2. **Unwatch When Done**: Reduce notification noise
3. **Use for Escalations**: Add stakeholders as watchers
4. **Project Watch for PMs**: Stay on top of all activity
5. **Check Notifications Daily**: Don't let them pile up`,tags:["ticket","watcher","notification","subscribe","alerts"],roles:["infraweave_admin","infraweave_employee","company_admin","engineer"],readTime:5,keyPoints:["Watchers receive all ticket update notifications","You can watch tickets you're not assigned to","Notifications appear in-app and optionally via email","Project watching covers all tickets in that project"]},{id:"invite-team-member",title:"Inviting Team Members",description:"Complete guide to adding new users to your organization",category:"team",icon:Wu,content:`# Inviting Team Members

Expand your team by inviting new members with appropriate roles. This guide covers the invitation process, role selection, and managing pending invitations.

## Accessing Team Management

### For Company Admins
1. Click **"Team"** in the sidebar
2. View current members list
3. See pending invitations

### For Super Admins
1. Click **"Users"** in the sidebar
2. Filter by company if needed
3. Or access via Company Detail page

## Sending Invitations

### Step-by-Step Process
1. Navigate to Team Management
2. Click **"+ Invite User"** button
3. Enter the person's email address
4. Select their role
5. Optionally add a personal message
6. Click **"Send Invitation"**

### What Happens Next
1. System sends email to the address
2. Email contains unique invitation link
3. Link expires after 7 days
4. Invitee clicks to create account
5. They set their password
6. Account is activated with assigned role

## Role Selection Guide

### For Company Admins to Assign

**Company Admin**
- Full access to company features
- Can manage team members
- Can view billing and invoices
- Can create and manage projects
- Can manage all tickets

**Engineer**
- Access to assigned projects only
- Can create and manage tickets
- Cannot access billing
- Cannot manage other users
- Limited to operational work

### For Super Admins to Assign

**InfraWeave Admin**
- Complete platform control
- Cross-tenant access
- User and company management
- System configuration
- Audit log access

**InfraWeave Employee**
- Cross-tenant ticket access
- Support staff capabilities
- Cannot delete tickets
- No admin functions
- Help desk role

**Company Admin / Engineer**
- Same as above, scoped to specific company

## Managing Pending Invitations

### Viewing Pending Invitations
- In Team Management, see "Pending" section
- Shows email, role, sent date, expiration

### Resending Invitations
1. Find the pending invitation
2. Click "Resend" button
3. New email sent (original link still works)
4. Expiration extended

### Canceling Invitations
1. Find the pending invitation
2. Click "Cancel" or trash icon
3. Invitation link invalidated
4. Invitee cannot join

## Troubleshooting

### Invitation Not Received
1. Ask invitee to check spam/junk folder
2. Verify email address is correct
3. Resend the invitation
4. Check organization email filters

### Invitation Expired
1. Cancel the old invitation
2. Create new invitation
3. User will get fresh link

### Wrong Role Assigned
1. If pending: Cancel and resend with correct role
2. If accepted: Edit user's role in Team Management

## Best Practices

1. **Verify Email**: Confirm email address before sending
2. **Explain the System**: Tell invitees what to expect
3. **Principle of Least Privilege**: Assign minimum necessary role
4. **Track Pending**: Follow up on unaccepted invitations
5. **Document**: Note why each person was added`,tags:["team","invite","user","role","onboarding"],roles:["infraweave_admin","company_admin"],readTime:7,featured:!0,steps:[{title:"Open Team Management",description:"Navigate to Team in the sidebar to see current members and access invitation features."},{title:"Click Invite User",description:'Click the "+ Invite User" button to open the invitation dialog.'},{title:"Enter Email Address",description:"Type the person's email address carefully. This is where the invitation will be sent.",tip:"Double-check for typoswrong email means wrong person gets invited!"},{title:"Select Appropriate Role",description:"Choose the role that gives them exactly the access they needno more, no less."},{title:"Send Invitation",description:"Click Send. The person will receive an email with a link to join your organization."},{title:"Follow Up",description:"Check if the invitation was accepted within a few days. Resend if needed."}],keyPoints:["Invitations are sent via email with a unique link","Links expire after 7 days but can be resent","Choose the minimum necessary role for security","Pending invitations can be canceled if needed"],walkthroughs:[{id:"invite-first-member",title:"Invite Your First Team Member",description:"Complete walkthrough of inviting a new user to your organization.",estimatedTime:"4 min",steps:[{title:"Navigate to Team",description:"Access the team management section.",action:'Click "Team" in the left sidebar',highlight:"Team Menu Item",screenshot:"/walkthrough/sidebar-navigation.jpg"},{title:"Open Invite Dialog",description:"Start the invitation process.",action:'Click the "+ Invite User" button in the top right',highlight:"Invite Button",screenshot:"/walkthrough/team-invite.jpg"},{title:"Enter Email",description:"Enter the email address of the person you want to invite.",action:"Type the email address in the email field",highlight:"Email Input",tip:"Double-check the email for typos before sending.",screenshot:"/walkthrough/team-invite.jpg"},{title:"Select Role",description:"Choose the appropriate role for this team member.",action:"Click the role dropdown and select a role",highlight:"Role Selector",tip:"Start with Engineer role and upgrade later if needed.",screenshot:"/walkthrough/team-invite.jpg"},{title:"Send Invitation",description:"Complete the invitation process.",action:'Click "Send Invitation" button',highlight:"Send Button",screenshot:"/walkthrough/team-invite.jpg"},{title:"Monitor Status",description:"Check if the invitation was accepted.",action:"View the pending invitations section to track status",highlight:"Pending Invitations",screenshot:"/walkthrough/team-invite.jpg"}]}]},{id:"manage-roles-admin",title:"Managing User Roles (Super Admin)",description:"Complete guide to user and role management across the platform",category:"team",icon:us,content:`# Managing User Roles (Super Admin)

As a Super Admin, you have complete control over user management across all organizations. This guide covers your capabilities and best practices.

## User Management Overview

### Accessing User Management
1. Click **"Users"** in the sidebar
2. View all platform users
3. Filter, search, and sort

### What You Can Do
- View all users across all companies
- Change user roles
- Deactivate accounts
- View user activity
- Reset passwords (trigger email)
- Impersonate users (for troubleshooting)

## Role Hierarchy

### InfraWeave Admin (Super Admin)
**Capabilities:**
- Full platform access
- Company creation and management
- Global user management
- System configuration
- Audit log access (all tenants)
- Product and license management
- Reporting and analytics

**Assign To:** Core platform administrators only

### InfraWeave Employee (Support Staff)
**Capabilities:**
- Cross-tenant ticket visibility
- Ticket status and priority changes
- Internal notes on tickets
- Company reference view
- Knowledge base access

**Cannot Do:**
- Delete tickets
- Access billing
- Manage users
- View audit logs
- System configuration

**Assign To:** Support/helpdesk team members

### Company Admin (Tenant Admin)
**Capabilities:**
- Full control within their company
- Team management (invite, remove, edit roles)
- Billing and invoice access
- Project creation and management
- All ticket access for company
- Company settings

**Assign To:** Client organization administrators

### Engineer (Tenant Contributor)
**Capabilities:**
- Access assigned projects only
- Create and manage tickets
- Update milestones
- Comment on tickets
- Profile management

**Cannot Do:**
- Access billing
- Manage team members
- Create projects
- See unassigned projects

**Assign To:** Client organization contributors

## Changing User Roles

### Process
1. Go to Users
2. Find the user (search or filter)
3. Click user row to open detail
4. Click "Edit Role" button
5. Select new role
6. Confirm the change

### Considerations
- Changes take effect immediately
- User's session refreshes automatically
- Audit log records the change
- User receives no notification (consider informing them)

### Role Change Impact

**Upgrading (more access)**
- New capabilities available immediately
- User sees additional menu items
- No data loss

**Downgrading (less access)**
- Features become inaccessible
- Menu items disappear
- Work-in-progress preserved
- May lose visibility to some data

## User Impersonation

### What Is Impersonation?
Temporarily view the system as another user to troubleshoot issues or verify access.

### How to Impersonate
1. Find user in Users list
2. Click "Impersonate" button
3. System loads as that user
4. Yellow banner shows you're impersonating
5. Click "Stop Impersonating" when done

### Impersonation Rules
- Only Super Admins can impersonate
- Can only impersonate Company Admins or lower
- Cannot impersonate other Super Admins
- All actions logged under your ID + theirs
- Audit trail clearly shows impersonation

### When to Use
- Debugging "I can't see X" issues
- Verifying permission configuration
- Testing new features from user perspective
- Helping users navigate the system

## Deactivating Users

### Process
1. Find user in Users list
2. Click "Deactivate" or toggle active status
3. Confirm the action

### Effect of Deactivation
- User cannot log in
- Assigned work remains
- Historical data preserved
- Can be reactivated later

### When to Deactivate (vs. Delete)
- Employee leaves company
- Account compromised
- Extended leave
- Contract ended

## Best Practices

1. **Regular Audits**: Review user list quarterly
2. **Least Privilege**: Minimum necessary role
3. **Prompt Offboarding**: Deactivate immediately when needed
4. **Document Changes**: Note reasons for role changes
5. **Impersonate Carefully**: Only when necessary
6. **Monitor Activity**: Check audit logs for unusual patterns`,tags:["admin","roles","users","impersonate","deactivate","permissions"],roles:["infraweave_admin"],readTime:10,keyPoints:["Four role levels: Super Admin > Employee > Company Admin > Engineer","Role changes take effect immediately","Impersonation allows troubleshooting from user perspective","All role changes are logged in audit trail"],warnings:["Impersonation actions are logged under both accounts","Deactivating users does not delete their data","Be cautious with Super Admin role assignment"]},{id:"view-billing",title:"Understanding Your Billing",description:"Complete guide to invoices, transactions, and payment management",category:"billing",icon:ca,content:`# Understanding Your Billing

The Billing page provides a comprehensive view of your organization's financial activity with InfraWeave. This guide covers navigating and understanding your billing information.

## Accessing Billing

1. Click **"Billing"** in the sidebar
2. You'll see the Billing overview page
3. Use tabs to navigate between sections

## Billing Dashboard

### Overview Metrics
- **Current Balance**: Outstanding amount due
- **Total This Month**: Current billing period charges
- **Last Payment**: Most recent payment date and amount
- **Next Due**: Upcoming payment deadline

### Quick Actions
- Download latest invoice
- View payment history
- Update payment method (if enabled)

## Invoices

### Invoice List
View all invoices with:
- Invoice number
- Issue date
- Due date
- Amount
- Status (Paid, Pending, Overdue)

### Invoice Statuses

**Draft**
- Invoice being prepared
- Not yet finalized
- Cannot be paid yet

**Pending**
- Invoice issued
- Payment due
- Within payment terms

**Paid**
- Payment received
- Balance settled
- Receipt available

**Overdue**
- Past due date
- Requires attention
- May incur late fees

### Viewing Invoice Details
1. Click an invoice row
2. See line items breakdown
3. View payment instructions
4. Download PDF

### Downloading Invoices
- Click download icon on invoice row
- Or open detail and click "Download PDF"
- PDF includes all tax details
- Suitable for accounting records

## Transactions

### Transaction History
All financial activity appears here:
- Payments received
- Credits applied
- Refunds processed
- Adjustments made

### Transaction Details
Each transaction shows:
- Date and time
- Type (Payment, Credit, Refund)
- Amount
- Reference number
- Payment method
- Status

### Filtering Transactions
- Date range selector
- Type filter
- Status filter
- Export to CSV

## Upcoming Dues

### Scheduled Payments
See future payment obligations:
- Project milestone payments
- Subscription renewals
- Scheduled invoices

### Planning Ahead
- Review upcoming dues weekly
- Ensure payment method is current
- Contact support for concerns

## Understanding Charges

### Common Charge Types

**Subscription Fees**
- Monthly or annual platform access
- Based on subscription tier
- Prorated for mid-cycle changes

**Project Charges**
- Milestone-based billing
- Time and materials
- Fixed-price deliverables

**Usage Charges**
- License activations
- API calls (if applicable)
- Storage usage

### Reading Line Items
Each line item includes:
- Description of service
- Quantity (if applicable)
- Unit price
- Total amount
- Date range

## Payment Information

### Payment Methods
Depending on configuration:
- Credit card
- Bank transfer
- Check (if enabled)

### Updating Payment Details
Contact your InfraWeave representative to:
- Update credit card
- Change billing address
- Modify billing contact

## Best Practices

1. **Review Monthly**: Check invoices when issued
2. **Download Records**: Keep invoice PDFs for accounting
3. **Watch Due Dates**: Avoid late payment fees
4. **Reconcile Regularly**: Match invoices to services
5. **Report Issues**: Contact support for discrepancies`,tags:["billing","invoice","payment","transactions","financial"],roles:["company_admin"],readTime:8,keyPoints:["Billing dashboard shows financial summary at a glance","Invoices can be downloaded as PDFs","Transaction history tracks all payments","Upcoming dues help with cash flow planning"],tips:["Set calendar reminders for invoice due dates","Download invoices promptly for your records","Review line items to understand charges"]},{id:"manage-companies",title:"Managing Tenant Companies",description:"Complete guide to creating, editing, and monitoring company accounts",category:"platform",icon:Qt,content:`# Managing Tenant Companies

As a Super Admin, you manage all tenant organizations on the platform. This guide covers company lifecycle management from creation to archival.

## Companies Overview

### Accessing Companies
1. Click **"Companies"** in the sidebar
2. View list of all tenant organizations
3. Use search and filters to find specific companies

### Company List View
Each company card shows:
- Company name and logo
- Subscription tier and status
- Active projects count
- Open tickets count
- Last activity date

## Creating a New Company

### Launch Company Creation
1. Click **"+ Add Company"**
2. Company creation dialog opens

### Required Information

**Company Name**
- Official organization name
- Used throughout the platform
- Must be unique

**Company Slug**
- URL-friendly identifier
- Auto-generated from name
- Can be customized

**Domain (Optional)**
- Company's email domain
- Used for SSO if configured
- Multiple domains possible

**Billing Email**
- Invoice recipient address
- Financial communications

### Optional Settings

**Logo URL**
- Company logo for branding
- Displayed in their dashboard

**Subscription Tier**
- Free, Starter, Professional, Enterprise
- Determines feature access

**Subscription Status**
- Active, Trial, Suspended, Cancelled

## Company Detail View

Click any company to see:

### Overview Tab
- Company metrics dashboard
- Active project summary
- Ticket statistics
- Team size and activity

### Projects Tab
- All company projects
- Create new projects
- Monitor project health

### Tickets Tab
- All company tickets
- Support queue management
- Priority distribution

### Team Tab
- All company members
- Invite new users
- Manage roles

### Billing Tab
- Invoices and payments
- Subscription management
- Usage metrics

### Settings Tab
- Edit company details
- Configure features
- Manage integrations

## Editing Companies

### What Can Be Changed
- Company name
- Domain settings
- Billing information
- Subscription tier/status
- Logo and branding

### Edit Process
1. Open company detail
2. Click "Edit" button
3. Modify desired fields
4. Save changes

## Company Statuses

### Active
- Normal operational status
- Full feature access
- Regular billing

### Trial
- Evaluation period
- Limited duration
- Full features (usually)

### Suspended
- Account temporarily disabled
- Often due to payment issues
- Can be reactivated

### Cancelled
- Account terminated
- Read-only access (briefly)
- Data retained per policy

## Company Metrics

### Health Indicators
- Project health rollup
- Ticket resolution rates
- User activity levels
- Subscription utilization

### Reporting
- Generate company reports
- Export data for analysis
- Track growth over time

## Best Practices

1. **Verify Details**: Confirm company info before creation
2. **Standard Naming**: Use consistent naming conventions
3. **Monitor Activity**: Check for inactive companies
4. **Subscription Management**: Track trial expirations
5. **Documentation**: Note special arrangements
6. **Regular Reviews**: Audit company list quarterly`,tags:["companies","tenant","admin","organization","subscription"],roles:["infraweave_admin"],readTime:9,featured:!0,steps:[{title:"Navigate to Companies",description:'Click "Companies" in the sidebar to see all tenant organizations.'},{title:"Create New Company",description:'Click "+ Add Company" and fill in the company name, slug, domain, and billing email.',tip:"Use the official company nameit appears throughout their experience."},{title:"Configure Subscription",description:"Set the subscription tier and status. This determines their feature access."},{title:"Review Company Detail",description:"Click the company card to see their dashboard, projects, tickets, and team."},{title:"Monitor Regularly",description:"Check company health indicators and activity levels periodically."}],keyPoints:["Companies represent tenant organizations on the platform","Subscription tier determines feature availability","Each company has isolated data (projects, tickets, users)","Company status affects their access to the platform"]},{id:"audit-logs",title:"Viewing and Analyzing Audit Logs",description:"Track all sensitive actions across the platform for security and compliance",category:"security",icon:Zt,content:`# Viewing and Analyzing Audit Logs

Audit logs provide a complete trail of sensitive actions across the platform. Essential for security monitoring, compliance, and troubleshooting.

## Accessing Audit Logs

1. Click **"Audit Logs"** in the sidebar
2. View chronological list of actions
3. Use filters to find specific events

## What Gets Logged

### Authentication Events
- User logins (success and failure)
- Password changes
- Password resets
- Session timeouts
- Multi-factor authentication events

### User Management
- User creation
- Role changes
- User deactivation
- Invitation sent/accepted
- Profile updates

### Data Modifications
- Record creation
- Record updates
- Record deletion
- Bulk operations

### Administrative Actions
- Company creation/modification
- Settings changes
- Configuration updates
- Impersonation start/stop

### Security Events
- Access denied attempts
- Permission changes
- API key generation
- Sensitive data access

## Log Entry Details

Each log entry contains:

### Core Fields
- **Timestamp**: When the action occurred (UTC)
- **User**: Who performed the action
- **Action**: What was done
- **Entity Type**: What type of object was affected
- **Entity ID**: Specific object identifier

### Context Fields
- **Organization**: Company context (if applicable)
- **IP Address**: Source IP of the request
- **User Agent**: Browser/client information
- **Impersonated By**: If action was during impersonation

### Change Fields
- **Old Values**: Previous state (for updates)
- **New Values**: New state (for updates)

## Filtering Logs

### Date Range
- Quick presets: Today, Yesterday, Last 7 days, Last 30 days
- Custom range picker
- Timezone consideration

### Action Type
- Authentication
- User Management
- Data Operations
- Admin Actions
- Security Events

### Entity Type
- User
- Company
- Project
- Ticket
- License

### User Filter
- Search by user name or email
- Filter by specific user

### Organization Filter
- All organizations
- Specific company

## Analyzing Patterns

### Security Monitoring
Look for:
- Failed login attempts (brute force indicators)
- Unusual access times
- Actions from unexpected IP addresses
- Mass data operations

### Compliance Verification
Track:
- Who accessed sensitive data
- Role change history
- Data modification audit trail
- Access control compliance

### Troubleshooting
Find:
- When a problem started
- What changed before an issue
- Who made specific changes
- Sequence of related events

## Exporting Logs

### Export Options
- CSV format
- JSON format
- PDF report

### Export Process
1. Apply desired filters
2. Click "Export" button
3. Select format
4. Download file

### Compliance Reports
- Periodic access reports
- Role change summaries
- Authentication analysis
- Data access audit

## Retention Policy

- Logs retained for 1 year minimum
- Configurable per compliance requirements
- Archived logs available on request
- Deleted data per retention schedule

## Best Practices

1. **Regular Review**: Check logs weekly for anomalies
2. **Alert Configuration**: Set up alerts for critical events
3. **Periodic Exports**: Archive logs for compliance
4. **Access Monitoring**: Watch for unusual access patterns
5. **Incident Response**: Use logs for investigation
6. **Documentation**: Note findings from reviews`,tags:["audit","logs","security","compliance","monitoring","tracking"],roles:["infraweave_admin"],readTime:9,keyPoints:["All sensitive actions are logged automatically","Logs include who, what, when, and where","Filtering helps find specific events","Logs are essential for security and compliance"]},{id:"company-audit-logs",title:"Company Activity Logs",description:"Monitor activity within your organization for security and oversight",category:"security",icon:us,content:`# Company Activity Logs

As a Company Admin, you can monitor important activities within your organization. This helps maintain security and provides oversight of team actions.

## Accessing Activity Logs

1. Navigate to **Settings**
2. Click the **"Security"** tab
3. View recent activity

## What You Can See

### Team Activities
- Member invitations sent
- Invitation acceptances
- Role changes within your company
- Profile updates

### Project Activities
- Project creation
- Project status changes
- Team member assignments
- Milestone updates

### Ticket Activities
- Ticket creation
- Status changes
- Assignment changes
- Comments added

### Data Changes
- Record modifications
- Bulk operations
- Data exports

## Activity Log Details

Each entry shows:
- Date and time
- Team member who performed action
- Action description
- Affected entity

## Filtering Options

### By Date
- Last 24 hours
- Last 7 days
- Last 30 days
- Custom range

### By User
- All users
- Specific team member

### By Action Type
- Team changes
- Project activities
- Ticket activities

## Using Activity Logs

### Oversight
- Monitor team productivity
- Track project progress
- Verify task completion

### Security
- Spot unusual activity
- Verify authorized changes
- Monitor access patterns

### Accountability
- Who made changes
- When changes occurred
- What was modified

## Limitations

As Company Admin, you can only see:
- Activity within your company
- Actions by your team members
- Your company's resources

You cannot see:
- Other companies' activity
- Platform-level admin actions
- Full audit trail (Super Admin only)

## Best Practices

1. **Weekly Review**: Check activity logs regularly
2. **Investigate Anomalies**: Follow up on unusual activity
3. **Onboarding**: Use to verify new member activity
4. **Offboarding**: Confirm proper handover before deactivation`,tags:["audit","activity","security","company","monitoring"],roles:["company_admin"],readTime:5,keyPoints:["Activity logs show actions within your company","Track team member activities for oversight","Use for security monitoring and accountability","Scope limited to your organization only"]},{id:"manage-licenses",title:"Managing Software Licenses",description:"Complete guide to license creation, activation, and monitoring",category:"licensing",icon:Nt,content:`# Managing Software Licenses

The licensing system enables you to create, distribute, and manage software licenses for your clients. This guide covers the complete license lifecycle.

## License Overview

### Accessing Licenses
1. Click **"Licenses"** in the sidebar
2. View all licenses across clients
3. Filter and search as needed

### License List View
Each license shows:
- License key (masked)
- Product name
- Client name
- License type
- Status
- Activation count

## Creating Licenses

### Launch License Creation
1. Click **"+ New License"**
2. Complete the license form

### Required Fields

**Product**
- Select the product this license is for
- Must be an active product

**Client**
- Client receiving the license
- Determines portal access

**License Type**
- Online: Requires internet validation
- Offline: Works without connectivity
- Hybrid: Online primary, offline fallback

**Valid From**
- Start date of license validity
- Typically current date

**Valid Until (Optional)**
- Expiration date if applicable
- Leave empty for perpetual

**Max Activations**
- Number of devices allowed
- 0 for unlimited

### Optional Settings

**Entitlements**
- Feature flags
- Module access
- Usage limits

**Support Level**
- Standard, Premium, Enterprise
- Determines SLA

**Notes**
- Internal documentation
- Special arrangements

## License Lifecycle

### Active
- License is valid and usable
- Within validity period
- Under activation limit

### Suspended
- Temporarily disabled
- Can be reactivated
- Often for payment issues

### Expired
- Past valid_until date
- Renewal required
- Grace period may apply

### Revoked
- Permanently disabled
- Cannot be reactivated
- Requires new license

## Managing Activations

### Viewing Activations
1. Open license detail
2. See "Activations" section
3. Each device listed with status

### Activation Information
- Device ID
- Device name
- Activation date
- Last validation
- Status

### Deactivating Devices
1. Find device in list
2. Click "Deactivate"
3. Frees activation slot
4. Device can no longer use license

### Revoking Activations
- Immediate termination
- Device blocked
- Cannot reactivate same device

## License Validation

### Online Validation
- Device checks with server
- Real-time status verification
- Network required

### Offline Validation
- Cryptographic signature
- No network required
- Periodic renewal needed

### Validation Data
- License status
- Entitlements
- Expiration info
- Activation validity

## Offline Bundles

For offline licenses:
1. Open license detail
2. Click "Generate Offline Bundle"
3. Set bundle expiration
4. Download signed bundle
5. Distribute to client

Bundle includes:
- License data
- Cryptographic signature
- Expiration timestamp
- Entitlements snapshot

## License Monitoring

### Dashboard Metrics
- Total licenses by status
- Expiring soon count
- Over-activation alerts
- Validation failures

### Reports
- License utilization
- Activation trends
- Revenue correlation
- Client license summary

## Best Practices

1. **Clear Naming**: Use descriptive product/client names
2. **Appropriate Limits**: Set realistic activation counts
3. **Monitor Expirations**: Proactive renewal outreach
4. **Document Changes**: Note reasons for suspensions
5. **Regular Audits**: Review license usage quarterly
6. **Secure Distribution**: Use secure channels for keys`,tags:["license","key","activation","product","entitlement"],roles:["infraweave_admin"],readTime:11,featured:!0,steps:[{title:"Navigate to Licenses",description:'Click "Licenses" in the sidebar to see all licenses across all clients.'},{title:"Create New License",description:'Click "+ New License" and select the product and client.',tip:"Verify the client exists before creating the license."},{title:"Configure License Type",description:"Choose Online, Offline, or Hybrid based on client connectivity needs."},{title:"Set Validity Period",description:"Enter valid from/until dates. Leave until empty for perpetual licenses."},{title:"Define Activations",description:"Set max activations based on client agreement. Use 0 for unlimited."},{title:"Monitor Activations",description:"Check license detail regularly to monitor device activations."}],keyPoints:["Three license types: Online, Offline, Hybrid","Activation limits control device usage","Offline bundles enable disconnected operation","License status determines client access"],warnings:["Revoking a license is permanent","Offline bundles need periodic renewal","Expired licenses may have grace periods"]},{id:"platform-reports",title:"Platform Reports & Analytics",description:"Generate insights from platform data for strategic decisions",category:"reports",icon:kS,content:`# Platform Reports & Analytics

InfraWeave provides comprehensive reporting capabilities to help you understand platform usage, identify trends, and make data-driven decisions.

## Accessing Reports

### For Super Admins
1. Click **"Reports"** in the sidebar
2. Select report type
3. Configure parameters
4. Generate report

### For Company Admins
1. Go to **Dashboard** or **Settings**
2. Access company-level analytics
3. View organization metrics

## Available Reports

### Platform Overview (Super Admin)
- Total companies and growth
- Active users across platform
- Project and ticket volumes
- License utilization

### Ticket Analytics
- Ticket volume trends
- Resolution time metrics
- Priority distribution
- Status breakdown
- SLA compliance

### Project Analytics
- Active projects by status
- Health distribution
- Completion rates
- Timeline adherence

### User Activity
- Login frequency
- Feature usage
- Peak usage times
- Inactive accounts

### Financial Reports (Super Admin)
- Revenue by company
- Subscription distribution
- Invoice aging
- Payment trends

## Report Parameters

### Date Range
- Preset periods (week, month, quarter, year)
- Custom date range
- Comparison periods

### Grouping
- By company
- By project
- By user
- By time period

### Filters
- Status filters
- Priority filters
- Category filters
- Custom attributes

## Visualizations

### Charts Available
- Line charts for trends
- Bar charts for comparisons
- Pie charts for distributions
- Tables for detailed data

### Interactive Features
- Click to drill down
- Hover for details
- Export individual charts

## Exporting Reports

### Export Formats
- PDF (formatted report)
- CSV (raw data)
- Excel (formatted data)

### Export Process
1. Generate report
2. Click "Export"
3. Select format
4. Download file

### Scheduled Exports
- Configure recurring reports
- Email delivery
- Automatic generation

## Custom Reports

### Building Custom Reports
1. Select data sources
2. Choose dimensions and metrics
3. Apply filters
4. Select visualization
5. Save configuration

### Saved Reports
- Name and describe report
- Set visibility (private/shared)
- Access from Reports menu

## Best Practices

1. **Regular Cadence**: Review key reports weekly/monthly
2. **Track Trends**: Compare periods to spot patterns
3. **Action Items**: Use insights to drive improvements
4. **Share Insights**: Distribute reports to stakeholders
5. **Validate Data**: Spot-check against source data`,tags:["reports","analytics","metrics","dashboard","insights"],roles:["infraweave_admin","company_admin"],readTime:7,keyPoints:["Reports provide data-driven insights","Multiple visualization options available","Exports support various formats","Custom reports can be saved and reused"]},{id:"profile-settings",title:"Managing Your Profile",description:"Update your personal information and preferences",category:"getting-started",icon:Js,content:`# Managing Your Profile

Your profile contains your personal information and preferences. Keep it updated for effective team communication.

## Accessing Your Profile

1. Click your avatar in the top-right corner
2. Select **"Profile"** from the dropdown

## Profile Information

### Editable Fields
- **Full Name**: Your display name
- **Avatar**: Profile picture
- **Email**: Contact email (may be read-only)
- **Phone**: Contact number

### Read-Only Fields
- **User ID**: System identifier
- **Role**: Your assigned role
- **Organization**: Your company (if applicable)
- **Joined Date**: Account creation date

## Updating Your Avatar

### Upload New Avatar
1. Click current avatar or placeholder
2. Select image file
3. Crop if needed
4. Save changes

### Avatar Requirements
- Supported formats: JPG, PNG, GIF
- Recommended size: 200x200 pixels
- Maximum file size: 2MB

## Notification Preferences

Configure how you receive updates:

### In-App Notifications
- Enable/disable by type
- Badge count settings
- Sound preferences

### Email Notifications
- Frequency: Immediate, Daily digest, Weekly digest
- Types: Tickets, Projects, Mentions
- Quiet hours setting

## Security Settings

### Password
- Change password option
- Password requirements displayed
- Confirmation required

### Sessions
- View active sessions
- End other sessions
- Last login information

## Best Practices

1. **Current Photo**: Use recent, professional headshot
2. **Accurate Name**: Use name you go by professionally
3. **Notification Balance**: Not too many, not too few
4. **Regular Updates**: Review profile quarterly`,tags:["profile","settings","avatar","notifications","account"],roles:["infraweave_admin","infraweave_employee","company_admin","engineer"],readTime:4,keyPoints:["Keep profile information current","Avatar helps team recognize you","Notification preferences reduce noise","Review and update regularly"]},{id:"search-functionality",title:"Using Global Search",description:"Find anything quickly with powerful search capabilities",category:"dashboard",icon:ns,content:`# Using Global Search

The global search helps you find tickets, projects, companies, and users quickly across the entire platform (within your access scope).

## Accessing Search

### Keyboard Shortcut
- Press **Ctrl+K** (Windows/Linux)
- Press **Cmd+K** (Mac)
- Search dialog opens immediately

### Click Access
- Click the search bar in the header
- Type your query

## What You Can Search

### Based on Your Role

**Super Admins:**
- All companies
- All projects
- All tickets
- All users

**Company Admins:**
- Your company's projects
- Your company's tickets
- Your team members

**Engineers:**
- Your assigned projects
- Tickets you're involved with

**Support Staff:**
- All tickets (cross-tenant)
- Companies (reference)

## Search Tips

### Exact Phrases
Wrap in quotes: \`"database error"\`

### Partial Matches
Type beginning of word: \`data\` finds "database"

### Ticket Numbers
Search directly: \`TKT-12345\`

### By Status
Include status: \`project active\`

## Search Results

### Result Categories
- Projects
- Tickets
- Companies (if accessible)
- Users (if accessible)

### Result Actions
- Click to open
- Keyboard arrows to navigate
- Enter to select

### No Results
- Check spelling
- Try fewer/different terms
- Verify you have access

## Best Practices

1. **Use Shortcuts**: Keyboard is faster
2. **Specific Terms**: More specific = better results
3. **Ticket Numbers**: Most precise method
4. **Recent First**: Results prioritize recent items`,tags:["search","find","navigation","keyboard","shortcuts"],roles:["infraweave_admin","infraweave_employee","company_admin","engineer"],readTime:4,keyPoints:["Ctrl/Cmd+K opens search instantly","Search results respect your access level","Ticket numbers provide exact matches","Results are prioritized by relevance and recency"]}];function Su(e){return e?OQ.filter(s=>s.roles.includes(e)):[]}function MQ(e){return e?DQ.filter(s=>s.roles.includes(e)):[]}function LQ(e,s){if(!e.trim()||!s)return Su(s);const r=e.toLowerCase();return Su(s).filter(n=>n.title.toLowerCase().includes(r)||n.description.toLowerCase().includes(r)||n.tags.some(a=>a.toLowerCase().includes(r))||n.content.toLowerCase().includes(r))}function FQ(e){return Su(e).filter(s=>s.featured)}function $Q(e){return Su(e).filter(s=>s.walkthroughs&&s.walkthroughs.length>0)}function UQ({article:e,onClick:s}){const r=e.icon;return t.jsx(P,{className:"group cursor-pointer hover:border-primary/50 hover:shadow-lg transition-all duration-300 hover:-translate-y-1",onClick:s,children:t.jsx(M,{className:"p-5",children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"h-12 w-12 rounded-xl bg-primary/10 flex items-center justify-center shrink-0 group-hover:bg-primary/20 transition-colors",children:t.jsx(r,{className:"h-6 w-6 text-primary"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("h3",{className:"font-semibold text-foreground group-hover:text-primary transition-colors truncate",children:e.title}),e.featured&&t.jsx(Cc,{className:"h-4 w-4 text-warning fill-warning shrink-0"})]}),t.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:e.description}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[t.jsx(Oe,{className:"h-3 w-3"}),e.readTime," min read"]}),t.jsx("div",{className:"flex gap-1 flex-wrap",children:e.tags.slice(0,2).map(n=>t.jsx($,{variant:"secondary",className:"text-xs px-2 py-0",children:n},n))})]})]}),t.jsx(ln,{className:"h-5 w-5 text-muted-foreground group-hover:text-primary group-hover:translate-x-1 transition-all shrink-0"})]})})})}function BQ({category:e,articleCount:s,onClick:r}){const n=e.icon;return t.jsx(P,{className:"group cursor-pointer hover:border-primary/50 hover:shadow-lg transition-all duration-300 hover:-translate-y-1 overflow-hidden",onClick:r,children:t.jsxs(M,{className:"p-5 relative",children:[t.jsx("div",{className:J("absolute -right-4 -top-4 h-24 w-24 rounded-full opacity-10 blur-2xl transition-opacity group-hover:opacity-20",e.color.replace("text-","bg-"))}),t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("div",{className:J("h-10 w-10 rounded-lg bg-muted/50 flex items-center justify-center group-hover:scale-110 transition-transform"),children:t.jsx(n,{className:J("h-5 w-5",e.color)})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-foreground",children:e.name}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[s," articles"]})]})]}),t.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.description})]})})}function zQ({src:e,alt:s,onClose:r}){return t.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",onClick:r,children:t.jsxs("div",{className:"relative max-w-4xl w-full",children:[t.jsx(T,{size:"sm",variant:"secondary",className:"absolute -top-12 right-0 h-8 w-8 p-0 rounded-full",onClick:r,children:t.jsx(Ct,{className:"h-4 w-4"})}),t.jsx("img",{src:e,alt:s,className:"w-full h-auto rounded-xl shadow-2xl border border-border",onClick:n=>n.stopPropagation()})]})})}function HP({walkthrough:e}){const[s,r]=f.useState(!1),[n,a]=f.useState(0),[i,o]=f.useState([]),[l,c]=f.useState(null),d=i.length/e.steps.length*100,u=(x,v)=>({"first-login-walkthrough":["https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=800&h=450&fit=crop","https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=800&h=450&fit=crop","https://images.unsplash.com/photo-1551434678-e076c223a692?w=800&h=450&fit=crop","https://images.unsplash.com/photo-1553877522-43269d4ea984?w=800&h=450&fit=crop"],"sidebar-navigation":["https://images.unsplash.com/photo-1517292987719-0369a794ec0f?w=800&h=450&fit=crop","https://images.unsplash.com/photo-1542744094-24638eff58bb?w=800&h=450&fit=crop","https://images.unsplash.com/photo-1504868584819-f8e8b4b6d7e3?w=800&h=450&fit=crop"],"create-first-project":["https://images.unsplash.com/photo-1507925921958-8a62f3d1a50d?w=800&h=450&fit=crop","https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?w=800&h=450&fit=crop","https://images.unsplash.com/photo-1531403009284-440f080d1e12?w=800&h=450&fit=crop","https://images.unsplash.com/photo-1553877522-43269d4ea984?w=800&h=450&fit=crop","https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=800&h=450&fit=crop"],"handle-first-ticket":["https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?w=800&h=450&fit=crop","https://images.unsplash.com/photo-1551434678-e076c223a692?w=800&h=450&fit=crop","https://images.unsplash.com/photo-1553877522-43269d4ea984?w=800&h=450&fit=crop","https://images.unsplash.com/photo-1517292987719-0369a794ec0f?w=800&h=450&fit=crop","https://images.unsplash.com/photo-1542744094-24638eff58bb?w=800&h=450&fit=crop","https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?w=800&h=450&fit=crop"],"invite-first-member":["https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=800&h=450&fit=crop","https://images.unsplash.com/photo-1600880292203-757bb62b4baf?w=800&h=450&fit=crop","https://images.unsplash.com/photo-1573497019940-1c28c88b4f3e?w=800&h=450&fit=crop","https://images.unsplash.com/photo-1519389950473-47ba0277781c?w=800&h=450&fit=crop","https://images.unsplash.com/photo-1531538606174-0f90ff5dce83?w=800&h=450&fit=crop"]}[v]||[])[x]||"https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=800&h=450&fit=crop",m=()=>{i.includes(n)||o([...i,n]),n<e.steps.length-1&&a(n+1)},h=()=>{a(0),o([])},p=e.steps[n],g=p.screenshot||u(n,e.id);return t.jsxs(t.Fragment,{children:[l&&t.jsx(zQ,{src:l,alt:p.title,onClose:()=>c(null)}),t.jsxs(P,{className:"border-primary/30 overflow-hidden bg-gradient-to-br from-card to-card/80 shadow-lg hover:shadow-xl transition-all duration-300",children:[t.jsxs(W,{className:"cursor-pointer hover:bg-muted/30 transition-colors",onClick:()=>r(!s),children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"h-12 w-12 rounded-2xl bg-gradient-to-br from-primary/20 to-info/20 flex items-center justify-center border border-primary/30",children:t.jsx(Lm,{className:"h-6 w-6 text-primary"})}),i.length===e.steps.length&&t.jsx("div",{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full bg-success flex items-center justify-center",children:t.jsx(vt,{className:"h-3 w-3 text-success-foreground"})})]}),t.jsxs("div",{children:[t.jsxs(V,{className:"text-lg flex items-center gap-3",children:[e.title,t.jsxs($,{variant:"secondary",className:"text-xs font-normal gap-1",children:[t.jsx(Oe,{className:"h-3 w-3"}),e.estimatedTime]}),t.jsxs($,{variant:"outline",className:"text-xs font-normal gap-1",children:[t.jsx(Bu,{className:"h-3 w-3"}),e.steps.length," steps"]})]}),t.jsx(ce,{className:"text-sm mt-1",children:e.description})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[i.length>0&&i.length<e.steps.length&&t.jsxs($,{className:"gap-1 bg-primary/20 text-primary border-primary/30",children:[t.jsx(vt,{className:"h-3 w-3"}),i.length,"/",e.steps.length]}),t.jsx("div",{className:J("h-8 w-8 rounded-full flex items-center justify-center transition-all duration-300",s?"bg-primary text-primary-foreground rotate-180":"bg-muted"),children:t.jsx(Ff,{className:"h-4 w-4"})})]})]}),i.length>0&&t.jsx(gf,{value:d,className:"mt-4 h-2"})]}),s&&t.jsxs(M,{className:"border-t bg-gradient-to-b from-muted/30 to-transparent p-6",children:[t.jsx("div",{className:"flex items-center justify-center gap-2 mb-8 overflow-x-auto pb-2",children:e.steps.map((x,v)=>t.jsxs("div",{className:"flex items-center",children:[t.jsx("button",{onClick:()=>a(v),className:J("h-10 w-10 rounded-full flex items-center justify-center text-sm font-semibold transition-all duration-300 border-2",v===n?"bg-primary text-primary-foreground border-primary scale-110 shadow-lg shadow-primary/30":i.includes(v)?"bg-success text-success-foreground border-success":"bg-card text-muted-foreground border-muted hover:border-primary/50 hover:text-foreground"),children:i.includes(v)?t.jsx(vt,{className:"h-5 w-5"}):v+1}),v<e.steps.length-1&&t.jsx("div",{className:J("w-8 h-1 mx-1 rounded-full transition-colors",i.includes(v)?"bg-success":"bg-muted")})]},v))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"relative group cursor-pointer rounded-xl overflow-hidden border border-border shadow-md hover:shadow-xl transition-all duration-300",onClick:()=>c(g),children:[t.jsx("img",{src:g,alt:`Step ${n+1}: ${p.title}`,className:"w-full h-64 object-cover group-hover:scale-105 transition-transform duration-500"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"}),t.jsxs("div",{className:"absolute bottom-3 left-3 right-3 flex items-center justify-between",children:[t.jsxs($,{className:"bg-black/50 text-white border-0",children:["Step ",n+1," of ",e.steps.length]}),t.jsxs(T,{size:"sm",variant:"secondary",className:"gap-1 h-7 bg-white/20 hover:bg-white/30 text-white border-0",children:[t.jsx(BO,{className:"h-3 w-3"}),"Enlarge"]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("div",{className:"h-8 w-8 rounded-lg bg-primary text-primary-foreground flex items-center justify-center font-bold text-sm",children:n+1}),t.jsx("h4",{className:"font-semibold text-foreground text-xl",children:p.title})]}),t.jsx("p",{className:"text-muted-foreground leading-relaxed",children:p.description})]}),t.jsx("div",{className:"p-4 rounded-xl bg-gradient-to-r from-primary/10 via-primary/5 to-transparent border border-primary/20",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"h-10 w-10 rounded-xl bg-primary/20 flex items-center justify-center shrink-0",children:t.jsx(Lm,{className:"h-5 w-5 text-primary"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-semibold text-primary mb-1",children:" Action Required"}),t.jsx("p",{className:"text-foreground",children:p.action})]})]})}),p.highlight&&t.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-warning/10 border border-warning/20",children:[t.jsx(Yr,{className:"h-5 w-5 text-warning shrink-0"}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-muted-foreground",children:"Look for: "}),t.jsx("strong",{className:"text-foreground",children:p.highlight})]})]}),p.tip&&t.jsxs("div",{className:"p-4 rounded-xl bg-success/10 border border-success/20 flex items-start gap-3",children:[t.jsx("div",{className:"h-8 w-8 rounded-lg bg-success/20 flex items-center justify-center shrink-0",children:t.jsx(Ud,{className:"h-4 w-4 text-success"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-semibold text-success mb-1",children:" Pro Tip"}),t.jsx("p",{className:"text-sm text-foreground",children:p.tip})]})]})]})]}),t.jsxs("div",{className:"flex items-center justify-between pt-6 mt-6 border-t",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(T,{variant:"outline",size:"sm",onClick:()=>a(Math.max(0,n-1)),disabled:n===0,className:"gap-1",children:[t.jsx(Ft,{className:"h-4 w-4"}),"Previous"]}),t.jsxs(T,{variant:"ghost",size:"sm",onClick:h,className:"text-muted-foreground gap-1",children:[t.jsx(TO,{className:"h-4 w-4"}),"Restart"]})]}),n===e.steps.length-1?t.jsxs(T,{size:"sm",onClick:m,className:"bg-success hover:bg-success/90 gap-1",children:[t.jsx(vt,{className:"h-4 w-4"}),"Complete Walkthrough"]}):t.jsxs(T,{size:"sm",onClick:m,className:"gap-1",children:["Next Step",t.jsx(Ra,{className:"h-4 w-4"})]})]})]})]})]})}function qQ({article:e,onBack:s}){const r=e.icon,n=a=>{const i=a.split(`
`),o=[];let l=[],c=[],d=!1;const u=h=>{l.length>0&&(o.push(t.jsx("ul",{className:"space-y-2 my-4",children:l.map((p,g)=>t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx(vt,{className:"h-4 w-4 text-success mt-1 shrink-0"}),t.jsx("span",{className:"text-muted-foreground",children:p})]},g))},h)),l=[])},m=h=>{c.length>0&&(o.push(t.jsx("pre",{className:"my-4 p-4 rounded-lg bg-muted/50 border overflow-x-auto text-sm",children:t.jsx("code",{className:"text-foreground",children:c.join(`
`)})},h)),c=[],d=!1)};return i.forEach((h,p)=>{const g=h.trim();if(g.startsWith("```")){d?m(`code-${p}`):(u(`list-${p}`),d=!0,g.replace("```",""));return}if(d){c.push(h);return}if(g.startsWith("# ")){u(`list-${p}`),o.push(t.jsx("h1",{className:"text-2xl font-bold mt-6 mb-4 text-foreground",children:g.replace("# ","")},p));return}if(g.startsWith("## ")){u(`list-${p}`),o.push(t.jsx("h2",{className:"text-xl font-semibold mt-8 mb-3 text-foreground border-b pb-2",children:g.replace("## ","")},p));return}if(g.startsWith("### ")){u(`list-${p}`),o.push(t.jsx("h3",{className:"text-lg font-semibold mt-6 mb-2 text-foreground",children:g.replace("### ","")},p));return}if(g.startsWith("- ")||g.startsWith("* ")){const N=g.replace(/^[-*] /,"");l.push(N);return}if(/^\d+\.\s/.test(g)){const N=g.replace(/^\d+\.\s/,"");l.push(N);return}if(g.startsWith("|")&&g.endsWith("|")){u(`list-${p}`);const N=g.split("|").filter(_=>_.trim());if(g.includes("---"))return;o.push(t.jsx("div",{className:"grid gap-4 my-2 p-3 rounded-lg bg-muted/30",style:{gridTemplateColumns:`repeat(${N.length}, 1fr)`},children:N.map((_,C)=>t.jsx("span",{className:"text-sm text-muted-foreground",children:_.trim()},C))},p));return}if(g===""){u(`list-${p}`);return}if(g.startsWith("**")&&g.includes("**:")){u(`list-${p}`);const N=g.match(/\*\*([^*]+)\*\*:?\s*(.*)/);if(N){o.push(t.jsxs("p",{className:"mb-3 mt-4",children:[t.jsxs("strong",{className:"font-semibold text-foreground",children:[N[1],":"]}),t.jsx("span",{className:"text-muted-foreground ml-1",children:N[2]})]},p));return}}u(`list-${p}`);const x=[];let v=g,y=0;const j=/(\*\*[^*]+\*\*|`[^`]+`)/g;let w=0,b;for(;(b=j.exec(v))!==null;){b.index>w&&x.push(t.jsx("span",{children:v.slice(w,b.index)},`${p}-${y++}`));const N=b[0];N.startsWith("**")?x.push(t.jsx("strong",{className:"font-semibold text-foreground",children:N.slice(2,-2)},`${p}-${y++}`)):N.startsWith("`")&&x.push(t.jsx("code",{className:"px-1.5 py-0.5 rounded bg-muted text-sm font-mono",children:N.slice(1,-1)},`${p}-${y++}`)),w=b.index+N.length}w<v.length&&x.push(t.jsx("span",{children:v.slice(w)},`${p}-${y++}`)),o.push(t.jsx("p",{className:"text-muted-foreground mb-3 leading-relaxed",children:x.length>0?x:v},p))}),u("final-list"),m("final-code"),o};return t.jsxs("div",{className:"space-y-6 animate-in fade-in-0 slide-in-from-right-5 duration-300",children:[t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx(T,{variant:"ghost",size:"icon",onClick:s,className:"shrink-0 mt-1",children:t.jsx(Ft,{className:"h-5 w-5"})}),t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"h-12 w-12 rounded-xl bg-primary/10 flex items-center justify-center",children:t.jsx(r,{className:"h-6 w-6 text-primary"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:e.title}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsxs("span",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[t.jsx(Oe,{className:"h-3 w-3"}),e.readTime," min read"]}),e.featured&&t.jsxs($,{variant:"secondary",className:"gap-1",children:[t.jsx(Cc,{className:"h-3 w-3 fill-warning text-warning"}),"Featured"]})]})]})]})})]}),e.keyPoints&&e.keyPoints.length>0&&t.jsxs(P,{className:"border-primary/30 bg-gradient-to-br from-primary/5 to-transparent",children:[t.jsx(W,{className:"pb-3",children:t.jsxs(V,{className:"text-base flex items-center gap-2 text-primary",children:[t.jsx(Yr,{className:"h-5 w-5"}),"Key Takeaways"]})}),t.jsx(M,{className:"pt-0",children:t.jsx("ul",{className:"space-y-2",children:e.keyPoints.map((a,i)=>t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx(vt,{className:"h-4 w-4 text-primary mt-0.5 shrink-0"}),t.jsx("span",{className:"text-sm text-foreground",children:a})]},i))})})]}),t.jsx(P,{className:"glass",children:t.jsx(M,{className:"p-6",children:t.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:n(e.content)})})}),e.steps&&e.steps.length>0&&t.jsxs(P,{className:"glass border-success/30",children:[t.jsx(W,{children:t.jsxs(V,{className:"text-lg flex items-center gap-2",children:[t.jsx(Rn,{className:"h-5 w-5 text-success"}),"Step-by-Step Guide"]})}),t.jsx(M,{className:"space-y-4",children:e.steps.map((a,i)=>t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("div",{className:"h-8 w-8 rounded-full bg-success text-success-foreground flex items-center justify-center font-semibold text-sm",children:i+1}),i<e.steps.length-1&&t.jsx("div",{className:"w-0.5 flex-1 bg-success/30 mt-2"})]}),t.jsxs("div",{className:"pb-6 flex-1",children:[t.jsx("h4",{className:"font-semibold text-foreground mb-1",children:a.title}),t.jsx("p",{className:"text-sm text-muted-foreground",children:a.description}),a.tip&&t.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-info/10 border border-info/20 flex items-start gap-2",children:[t.jsx(Ud,{className:"h-4 w-4 text-info shrink-0 mt-0.5"}),t.jsx("span",{className:"text-sm text-info",children:a.tip})]})]})]},i))})]}),e.warnings&&e.warnings.length>0&&t.jsxs(P,{className:"border-destructive/30 bg-gradient-to-br from-destructive/5 to-transparent",children:[t.jsx(W,{className:"pb-3",children:t.jsxs(V,{className:"text-base flex items-center gap-2 text-destructive",children:[t.jsx(qt,{className:"h-5 w-5"}),"Important Warnings"]})}),t.jsx(M,{className:"pt-0",children:t.jsx("ul",{className:"space-y-2",children:e.warnings.map((a,i)=>t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx(qt,{className:"h-4 w-4 text-destructive mt-0.5 shrink-0"}),t.jsx("span",{className:"text-sm text-foreground",children:a})]},i))})})]}),e.tips&&e.tips.length>0&&t.jsxs(P,{className:"border-info/30 bg-gradient-to-br from-info/5 to-transparent",children:[t.jsx(W,{className:"pb-3",children:t.jsxs(V,{className:"text-base flex items-center gap-2 text-info",children:[t.jsx(Ud,{className:"h-5 w-5"}),"Pro Tips"]})}),t.jsx(M,{className:"pt-0",children:t.jsx("ul",{className:"space-y-2",children:e.tips.map((a,i)=>t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx(Ud,{className:"h-4 w-4 text-info mt-0.5 shrink-0"}),t.jsx("span",{className:"text-sm text-foreground",children:a})]},i))})})]}),e.walkthroughs&&e.walkthroughs.length>0&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[t.jsx(Lm,{className:"h-5 w-5 text-info"}),"Interactive Walkthroughs"]}),t.jsx("div",{className:"space-y-4",children:e.walkthroughs.map(a=>t.jsx(HP,{walkthrough:a},a.id))})]}),t.jsxs("div",{className:"flex flex-wrap gap-2 pt-4 border-t",children:[t.jsx("span",{className:"text-sm text-muted-foreground mr-2",children:"Related topics:"}),e.tags.map(a=>t.jsx($,{variant:"outline",className:"text-xs",children:a},a))]})]})}function WQ(){var N;const{role:e,isLoading:s}=Ze(),r=Qe(),[n,a]=f.useState(""),[i,o]=f.useState(null),[l,c]=f.useState(null),[d,u]=f.useState("all"),m=e,h=f.useMemo(()=>MQ(m),[m]),p=f.useMemo(()=>Su(m),[m]),g=f.useMemo(()=>FQ(m),[m]),x=f.useMemo(()=>$Q(m),[m]),v=f.useMemo(()=>x.flatMap(_=>(_.walkthroughs||[]).map(C=>({...C,articleTitle:_.title,articleId:_.id}))),[x]),y=f.useMemo(()=>{let _=n?LQ(n,m):p;return i&&(_=_.filter(C=>C.category===i)),d==="featured"&&(_=_.filter(C=>C.featured)),_},[n,m,p,i,d]),j=_=>p.filter(C=>C.category===_).length,b=(()=>{switch(e){case"infraweave_admin":return{label:"Super Admin",variant:"destructive"};case"infraweave_employee":return{label:"Support Staff",variant:"info"};case"company_admin":return{label:"Company Admin",variant:"default"};case"engineer":return{label:"Engineer",variant:"secondary"};default:return null}})();return s?t.jsx(we,{children:t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary border-t-transparent rounded-full"})})}):t.jsx(we,{children:t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-primary/10 via-primary/5 to-transparent p-8 border border-primary/20",children:[t.jsx("div",{className:"absolute -right-20 -top-20 h-64 w-64 rounded-full bg-primary/10 blur-3xl"}),t.jsx("div",{className:"absolute -left-10 -bottom-10 h-48 w-48 rounded-full bg-info/10 blur-3xl"}),t.jsxs("div",{className:"relative z-10",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"h-14 w-14 rounded-2xl bg-primary/20 flex items-center justify-center backdrop-blur-sm",children:t.jsx(ir,{className:"h-7 w-7 text-primary"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Knowledge Base"}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx("span",{className:"text-muted-foreground",children:"Your personalized help center"}),b&&t.jsx($,{variant:b.variant,children:b.label})]})]})]}),t.jsxs("p",{className:"text-muted-foreground max-w-2xl mb-6",children:["Find answers, guides, and best practices tailored to your role.",e==="engineer"&&" Focus on project and ticket workflows.",e==="company_admin"&&" Manage your team, projects, and organization settings.",e==="infraweave_employee"&&" Handle cross-tenant support efficiently.",e==="infraweave_admin"&&" Complete platform administration documentation."]}),t.jsxs("div",{className:"relative max-w-xl",children:[t.jsx(ns,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),t.jsx(se,{placeholder:"Search articles, guides, and tutorials...",value:n,onChange:_=>a(_.target.value),className:"pl-12 pr-12 h-12 text-base bg-background/80 backdrop-blur-sm border-primary/20 focus:border-primary"}),n&&t.jsx(T,{variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2 h-8 w-8",onClick:()=>a(""),children:t.jsx(Ct,{className:"h-4 w-4"})})]})]})]}),l?t.jsx(qQ,{article:l,onBack:()=>c(null)}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsx(P,{className:"bg-gradient-to-br from-primary/5 to-transparent border-primary/20",children:t.jsxs(M,{className:"p-4 flex items-center gap-3",children:[t.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center",children:t.jsx(ir,{className:"h-5 w-5 text-primary"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold",children:p.length}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Available Articles"})]})]})}),t.jsx(P,{className:"bg-gradient-to-br from-success/5 to-transparent border-success/20",children:t.jsxs(M,{className:"p-4 flex items-center gap-3",children:[t.jsx("div",{className:"h-10 w-10 rounded-lg bg-success/10 flex items-center justify-center",children:t.jsx(Cc,{className:"h-5 w-5 text-success"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold",children:g.length}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Featured Guides"})]})]})}),t.jsx(P,{className:"bg-gradient-to-br from-info/5 to-transparent border-info/20",children:t.jsxs(M,{className:"p-4 flex items-center gap-3",children:[t.jsx("div",{className:"h-10 w-10 rounded-lg bg-info/10 flex items-center justify-center",children:t.jsx($d,{className:"h-5 w-5 text-info"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold",children:h.length}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Categories"})]})]})}),t.jsx(P,{className:"bg-gradient-to-br from-warning/5 to-transparent border-warning/20",children:t.jsxs(M,{className:"p-4 flex items-center gap-3",children:[t.jsx("div",{className:"h-10 w-10 rounded-lg bg-warning/10 flex items-center justify-center",children:t.jsx(Rn,{className:"h-5 w-5 text-warning"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold",children:"24/7"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Always Available"})]})]})})]}),!n&&!i&&v.length>0&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[t.jsx(Lm,{className:"h-5 w-5 text-info"}),"Interactive Walkthroughs",t.jsxs($,{variant:"secondary",className:"ml-2",children:[v.length," available"]})]})}),t.jsx("p",{className:"text-muted-foreground text-sm",children:"Step-by-step guided tutorials with screenshots to help you master InfraWeave features quickly."}),t.jsx("div",{className:"space-y-4",children:x.map(_=>{var C;return(C=_.walkthroughs)==null?void 0:C.map(E=>t.jsx(HP,{walkthrough:E},E.id))})})]}),!n&&!i&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[t.jsx(Rn,{className:"h-5 w-5 text-primary"}),"Browse by Category"]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:h.map(_=>t.jsx(BQ,{category:_,articleCount:j(_.id),onClick:()=>o(_.id)},_.id))})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[i&&t.jsxs(T,{variant:"ghost",size:"sm",onClick:()=>o(null),className:"gap-1",children:[t.jsx(Ft,{className:"h-4 w-4"}),"All Categories"]}),t.jsx("h2",{className:"text-xl font-semibold",children:n?`Search Results (${y.length})`:i?(N=h.find(_=>_.id===i))==null?void 0:N.name:"All Articles"})]}),!n&&!i&&t.jsx(kt,{value:d,onValueChange:u,children:t.jsxs(St,{children:[t.jsx(he,{value:"all",children:"All"}),t.jsxs(he,{value:"featured",className:"gap-1",children:[t.jsx(Cc,{className:"h-3 w-3"}),"Featured"]})]})})]}),y.length===0?t.jsxs(P,{className:"p-12 text-center",children:[t.jsx($d,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No articles found"}),t.jsx("p",{className:"text-muted-foreground mb-4",children:n?`No results for "${n}". Try different keywords.`:"No articles available in this category."}),n&&t.jsx(T,{variant:"outline",onClick:()=>a(""),children:"Clear Search"})]}):t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:y.map(_=>t.jsx(UQ,{article:_,onClick:()=>c(_)},_.id))})]}),t.jsx(yr,{className:"my-8"}),t.jsx(P,{className:"bg-gradient-to-r from-muted/50 to-transparent",children:t.jsxs(M,{className:"p-6 flex flex-col md:flex-row items-center gap-6",children:[t.jsx("div",{className:"h-16 w-16 rounded-2xl bg-primary/10 flex items-center justify-center shrink-0",children:t.jsx($d,{className:"h-8 w-8 text-primary"})}),t.jsxs("div",{className:"flex-1 text-center md:text-left",children:[t.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Can't find what you're looking for?"}),t.jsx("p",{className:"text-muted-foreground",children:"Our support team is here to help. Create a support ticket and we'll get back to you as soon as possible."})]}),t.jsx(T,{className:"shrink-0",onClick:()=>r("/tickets"),children:"Contact Support"})]})})]})]})})}const VQ=()=>{const e=Ws();return f.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),t.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),t.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),t.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},HQ=Vs().email("Please enter a valid email address"),KQ=Vs().min(6,"Password must be at least 6 characters");function GQ(){const e=Qe(),{user:s,clientData:r,loading:n,signIn:a}=dn(),[i,o]=f.useState(!1),[l,c]=f.useState(""),[d,u]=f.useState("");f.useEffect(()=>{s&&r&&!n&&e("/portal")},[s,r,n,e]);const m=async h=>{h.preventDefault();try{HQ.parse(l),KQ.parse(d)}catch(g){if(g instanceof lr){z.error(g.errors[0].message);return}}o(!0);const{error:p}=await a(l,d);o(!1),p?p.message.includes("Invalid login credentials")?z.error("Invalid email or password"):z.error(p.message):(z.success("Welcome back!"),e("/portal"))};return n?t.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:t.jsx(Ie,{className:"h-8 w-8 animate-spin text-primary"})}):t.jsxs("div",{className:"min-h-screen bg-background flex items-center justify-center p-4 relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-4 right-4 z-20",children:t.jsx($n,{})}),t.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[t.jsx("div",{className:"absolute -top-40 -right-40 h-80 w-80 rounded-full bg-primary/10 blur-3xl"}),t.jsx("div",{className:"absolute -bottom-40 -left-40 h-80 w-80 rounded-full bg-primary/10 blur-3xl"}),t.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 h-96 w-96 rounded-full bg-primary/5 blur-3xl"})]}),t.jsxs(P,{className:"w-full max-w-md glass border-border/50 relative z-10",children:[t.jsxs(W,{className:"text-center space-y-4",children:[t.jsx("div",{className:"mx-auto",children:t.jsx("img",{src:eo,alt:"Client Portal",className:"h-16 w-auto"})}),t.jsxs("div",{children:[t.jsx(V,{className:"text-2xl font-bold",children:"Client Portal"}),t.jsx(ce,{className:"text-muted-foreground",children:"Sign in to manage your licenses and support tickets"})]})]}),t.jsxs(M,{className:"space-y-6",children:[t.jsxs("form",{onSubmit:m,className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"email",children:"Email"}),t.jsx(se,{id:"email",type:"email",placeholder:"you@example.com",value:l,onChange:h=>c(h.target.value),className:"bg-input border-border",required:!0})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"password",children:"Password"}),t.jsx(se,{id:"password",type:"password",placeholder:"",value:d,onChange:h=>u(h.target.value),className:"bg-input border-border",required:!0})]}),t.jsx(T,{type:"submit",className:"w-full glow",disabled:i,children:i?t.jsxs(t.Fragment,{children:[t.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]}),t.jsx("div",{className:"text-center",children:t.jsxs(Qs,{to:"/auth",className:"text-sm text-muted-foreground hover:text-primary inline-flex items-center gap-1",children:[t.jsx(Ft,{className:"h-3 w-3"}),"Back to Admin Login"]})}),t.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"Don't have access? Contact your account manager to get portal credentials."})]})]})]})}function KP(){const{clientData:e}=dn();return fe({queryKey:["client-licenses",e==null?void 0:e.id],queryFn:async()=>{if(!e)return[];const{data:s,error:r}=await B.from("licenses").select(`
          *,
          products:product_id (
            id,
            name,
            code,
            description,
            version,
            product_type
          )
        `).eq("client_id",e.id).order("created_at",{ascending:!1});if(r)throw r;return s},enabled:!!e})}function GP(e){const{clientData:s}=dn();return fe({queryKey:["client-activations",s==null?void 0:s.id,e],queryFn:async()=>{if(!s)return[];let r=B.from("activations").select(`
          *,
          licenses:license_id (
            id,
            license_key,
            product_id,
            products:product_id (
              name
            )
          )
        `).order("activated_at",{ascending:!1});const{data:n,error:a}=await r;if(a)throw a;return n},enabled:!!s})}function YQ(){const e=ht(),{clientData:s}=dn();return _t({mutationFn:async r=>{const{error:n}=await B.from("activations").update({status:"deactivated",deactivated_at:new Date().toISOString()}).eq("id",r);if(n)throw n},onSuccess:()=>{e.invalidateQueries({queryKey:["client-activations",s==null?void 0:s.id]}),e.invalidateQueries({queryKey:["client-licenses",s==null?void 0:s.id]})}})}function $w(){const{clientData:e}=dn();return fe({queryKey:["client-tickets",e==null?void 0:e.id],queryFn:async()=>{if(!e)return[];const{data:s,error:r}=await B.from("tickets").select(`
          *,
          projects:project_id (
            id,
            name
          )
        `).eq("client_id",e.id).order("created_at",{ascending:!1});if(r)throw r;return s},enabled:!!e})}function QQ(e){const{clientData:s}=dn();return fe({queryKey:["client-ticket-comments",e],queryFn:async()=>{const{data:r,error:n}=await B.from("ticket_comments").select("*").eq("ticket_id",e).eq("is_internal",!1).order("created_at",{ascending:!0});if(n)throw n;return r},enabled:!!s&&!!e})}function ZQ(){const e=ht(),{clientData:s}=dn();return _t({mutationFn:async r=>{if(!s)throw new Error("Not authenticated");const{data:n,error:a}=await B.from("tickets").insert({title:r.title,description:r.description,priority:r.priority,client_id:s.id,organization_id:s.organization_id,status:"open",reporter_id:null}).select().single();if(a)throw a;return n},onSuccess:()=>{e.invalidateQueries({queryKey:["client-tickets",s==null?void 0:s.id]})}})}function JQ(){const e=ht(),{user:s}=dn();return _t({mutationFn:async({ticketId:r,content:n})=>{const{data:a,error:i}=await B.from("ticket_comments").insert({ticket_id:r,content:n,author_id:s==null?void 0:s.id,is_internal:!1}).select().single();if(i)throw i;return a},onSuccess:(r,n)=>{e.invalidateQueries({queryKey:["client-ticket-comments",n.ticketId]})}})}const C1=[{href:"/portal",icon:Wa,label:"Dashboard"},{href:"/portal/licenses",icon:Nt,label:"My Licenses"},{href:"/portal/devices",icon:Bs,label:"My Devices"},{href:"/portal/tickets",icon:rt,label:"Support"},{href:"/portal/help",icon:ir,label:"Help Center"}];function Ui({children:e}){const{clientData:s,signOut:r}=dn(),n=Ws(),a=Qe(),i=async()=>{try{await r()}catch(o){console.error("Sign out error:",o)}a("/portal/auth")};return t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsxs("header",{className:"border-b border-border/50 bg-background/80 backdrop-blur-xl sticky top-0 z-50",children:[t.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"h-10 w-10 rounded-xl bg-primary/20 flex items-center justify-center",children:t.jsx(Nt,{className:"h-5 w-5 text-primary"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"font-semibold",children:"Client Portal"}),(s==null?void 0:s.company)&&t.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[t.jsx(wO,{className:"h-3 w-3"}),s.company]})]})]}),t.jsx("nav",{className:"hidden md:flex items-center gap-1",children:C1.map(o=>t.jsx(Qs,{to:o.href,children:t.jsxs(T,{variant:n.pathname===o.href?"secondary":"ghost",size:"sm",className:J("gap-2",n.pathname===o.href&&"bg-secondary"),children:[t.jsx(o.icon,{className:"h-4 w-4"}),o.label]})},o.href))}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx($n,{}),t.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-sm text-muted-foreground",children:[t.jsx(qs,{className:"h-4 w-4"}),t.jsx("span",{children:s==null?void 0:s.name})]}),t.jsxs(T,{variant:"ghost",size:"sm",onClick:i,children:[t.jsx(al,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]}),t.jsx("nav",{className:"md:hidden border-t border-border/50 px-4 py-2 flex gap-1 overflow-x-auto",children:C1.map(o=>t.jsx(Qs,{to:o.href,children:t.jsxs(T,{variant:n.pathname===o.href?"secondary":"ghost",size:"sm",className:"gap-2 whitespace-nowrap",children:[t.jsx(o.icon,{className:"h-4 w-4"}),o.label]})},o.href))})]}),t.jsx("main",{className:"container mx-auto px-4 py-8",children:e})]})}function XQ(){var m;const{clientData:e}=dn(),{data:s,isLoading:r}=KP(),{data:n,isLoading:a}=GP(),{data:i,isLoading:o}=$w(),l=(s==null?void 0:s.filter(h=>h.status==="active"))||[],c=(n==null?void 0:n.filter(h=>h.status==="active"))||[],d=(i==null?void 0:i.filter(h=>!["resolved","closed"].includes(h.status)))||[],u=(s==null?void 0:s.filter(h=>{if(!h.valid_until)return!1;const p=Math.ceil((new Date(h.valid_until).getTime()-Date.now())/(1e3*60*60*24));return p>0&&p<=30}))||[];return t.jsx(Ui,{children:t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-3xl font-bold",children:["Welcome back, ",(m=e==null?void 0:e.name)==null?void 0:m.split(" ")[0],"!"]}),t.jsx("p",{className:"text-muted-foreground mt-1",children:"Here's an overview of your licenses and support status."})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsx(P,{className:"glass",children:t.jsxs(W,{className:"pb-2",children:[t.jsxs(ce,{className:"flex items-center gap-2",children:[t.jsx(Nt,{className:"h-4 w-4"}),"Total Licenses"]}),r?t.jsx(je,{className:"h-8 w-16"}):t.jsx(V,{className:"text-3xl",children:(s==null?void 0:s.length)||0})]})}),t.jsx(P,{className:"glass",children:t.jsxs(W,{className:"pb-2",children:[t.jsxs(ce,{className:"flex items-center gap-2",children:[t.jsx(vt,{className:"h-4 w-4 text-success"}),"Active Licenses"]}),r?t.jsx(je,{className:"h-8 w-16"}):t.jsx(V,{className:"text-3xl text-success",children:l.length})]})}),t.jsx(P,{className:"glass",children:t.jsxs(W,{className:"pb-2",children:[t.jsxs(ce,{className:"flex items-center gap-2",children:[t.jsx(Bs,{className:"h-4 w-4 text-primary"}),"Active Devices"]}),a?t.jsx(je,{className:"h-8 w-16"}):t.jsx(V,{className:"text-3xl text-primary",children:c.length})]})}),t.jsx(P,{className:"glass",children:t.jsxs(W,{className:"pb-2",children:[t.jsxs(ce,{className:"flex items-center gap-2",children:[t.jsx(rt,{className:"h-4 w-4 text-warning"}),"Open Tickets"]}),o?t.jsx(je,{className:"h-8 w-16"}):t.jsx(V,{className:"text-3xl text-warning",children:d.length})]})})]}),u.length>0&&t.jsxs(P,{className:"border-warning/50 bg-warning/5",children:[t.jsx(W,{children:t.jsxs(V,{className:"flex items-center gap-2 text-warning",children:[t.jsx(qt,{className:"h-5 w-5"}),"Licenses Expiring Soon"]})}),t.jsx(M,{children:t.jsx("div",{className:"space-y-3",children:u.map(h=>{const p=Math.ceil((new Date(h.valid_until).getTime()-Date.now())/864e5),g=h.products;return t.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-background/50",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(qi,{className:"h-5 w-5 text-muted-foreground"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:(g==null?void 0:g.name)||"Unknown Product"}),t.jsx("p",{className:"text-sm text-muted-foreground font-mono",children:h.license_key})]})]}),t.jsxs($,{variant:"outline",className:"text-warning border-warning",children:[p," days left"]})]},h.id)})})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsx(Qs,{to:"/portal/licenses",children:t.jsx(P,{className:"glass hover:border-primary/50 transition-colors cursor-pointer h-full",children:t.jsxs(M,{className:"flex items-center justify-between p-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"h-12 w-12 rounded-xl bg-primary/20 flex items-center justify-center",children:t.jsx(Nt,{className:"h-6 w-6 text-primary"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold",children:"View Licenses"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your software licenses"})]})]}),t.jsx(Ra,{className:"h-5 w-5 text-muted-foreground"})]})})}),t.jsx(Qs,{to:"/portal/devices",children:t.jsx(P,{className:"glass hover:border-primary/50 transition-colors cursor-pointer h-full",children:t.jsxs(M,{className:"flex items-center justify-between p-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"h-12 w-12 rounded-xl bg-primary/20 flex items-center justify-center",children:t.jsx(Bs,{className:"h-6 w-6 text-primary"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold",children:"Manage Devices"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"View and deactivate devices"})]})]}),t.jsx(Ra,{className:"h-5 w-5 text-muted-foreground"})]})})}),t.jsx(Qs,{to:"/portal/tickets",children:t.jsx(P,{className:"glass hover:border-primary/50 transition-colors cursor-pointer h-full",children:t.jsxs(M,{className:"flex items-center justify-between p-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"h-12 w-12 rounded-xl bg-primary/20 flex items-center justify-center",children:t.jsx(rt,{className:"h-6 w-6 text-primary"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold",children:"Get Support"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Create or view support tickets"})]})]}),t.jsx(Ra,{className:"h-5 w-5 text-muted-foreground"})]})})})]}),d.length>0&&t.jsxs(P,{className:"glass",children:[t.jsxs(W,{className:"flex flex-row items-center justify-between",children:[t.jsxs("div",{children:[t.jsx(V,{children:"Open Support Tickets"}),t.jsx(ce,{children:"Your active support requests"})]}),t.jsx(Qs,{to:"/portal/tickets",children:t.jsx(T,{variant:"outline",size:"sm",children:"View All"})})]}),t.jsx(M,{children:t.jsx("div",{className:"space-y-3",children:d.slice(0,3).map(h=>t.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:h.title}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx($,{variant:"outline",className:"text-xs",children:h.status.replace("_"," ")}),t.jsx($,{variant:h.priority==="critical"?"destructive":h.priority==="high"?"default":"secondary",className:"text-xs",children:h.priority})]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[t.jsx(Oe,{className:"h-4 w-4"}),new Date(h.created_at).toLocaleDateString()]})]},h.id))})})]})]})})}function eZ(){const{data:e,isLoading:s}=KP(),r=o=>{navigator.clipboard.writeText(o),z.success("License key copied to clipboard")},n=o=>{var m;const l={license_key:o.license_key,product:(m=o.products)==null?void 0:m.name,valid_from:o.valid_from,valid_until:o.valid_until,entitlements:o.entitlements,generated_at:new Date().toISOString()},c=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),d=URL.createObjectURL(c),u=document.createElement("a");u.href=d,u.download=`license-bundle-${o.license_key}.json`,u.click(),URL.revokeObjectURL(d),z.success("Offline bundle downloaded")},a=o=>{switch(o){case"active":return"default";case"expired":return"destructive";case"suspended":return"secondary";default:return"outline"}},i=o=>{switch(o){case"active":return vt;case"expired":return Nc;default:return Oe}};return t.jsx(Ui,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"My Licenses"}),t.jsx("p",{className:"text-muted-foreground mt-1",children:"View and manage your software licenses"})]}),s?t.jsx("div",{className:"space-y-4",children:[1,2,3].map(o=>t.jsx(P,{className:"glass",children:t.jsx(M,{className:"p-6",children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx(je,{className:"h-12 w-12 rounded-xl"}),t.jsxs("div",{className:"flex-1 space-y-2",children:[t.jsx(je,{className:"h-6 w-48"}),t.jsx(je,{className:"h-4 w-64"}),t.jsx(je,{className:"h-4 w-32"})]})]})})},o))}):e&&e.length>0?t.jsx("div",{className:"space-y-4",children:e.map(o=>{const l=o.products,c=i(o.status),d=o.valid_until?Math.ceil((new Date(o.valid_until).getTime()-Date.now())/(1e3*60*60*24)):null,u=o.entitlements||[];return t.jsx(P,{className:"glass",children:t.jsxs(M,{className:"p-6",children:[t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"h-12 w-12 rounded-xl bg-primary/20 flex items-center justify-center shrink-0",children:t.jsx(qi,{className:"h-6 w-6 text-primary"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-lg",children:(l==null?void 0:l.name)||"Unknown Product"}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx("code",{className:"text-sm text-muted-foreground font-mono bg-muted px-2 py-0.5 rounded",children:o.license_key}),t.jsx(T,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>r(o.license_key),children:t.jsx(Uo,{className:"h-3 w-3"})})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-3",children:[t.jsxs($,{variant:a(o.status),className:"gap-1",children:[t.jsx(c,{className:"h-3 w-3"}),o.status]}),t.jsx($,{variant:"outline",children:o.license_type}),o.support_level&&t.jsxs($,{variant:"secondary",children:[o.support_level," support"]})]})]})]}),t.jsxs("div",{className:"flex flex-col items-end gap-2",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[t.jsx(Bs,{className:"h-4 w-4"}),t.jsxs("span",{children:[o.current_activations,"/",o.max_activations," devices"]})]}),d!==null&&t.jsx("p",{className:`text-sm ${d<=0||d<=7?"text-destructive":d<=30?"text-warning":"text-muted-foreground"}`,children:d>0?`${d} days remaining`:"Expired"}),o.valid_until===null&&t.jsx("p",{className:"text-sm text-success",children:"Perpetual license"})]})]}),u.length>0&&t.jsxs("div",{className:"mt-4 pt-4 border-t border-border/50",children:[t.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Features included:"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:u.map((m,h)=>t.jsxs($,{variant:"secondary",className:"gap-1",children:[t.jsx(Rn,{className:"h-3 w-3"}),m.name||m]},h))})]}),t.jsx("div",{className:"mt-4 pt-4 border-t border-border/50 flex flex-wrap gap-2",children:(o.license_type==="offline"||o.license_type==="hybrid")&&t.jsxs(T,{variant:"outline",size:"sm",onClick:()=>n(o),children:[t.jsx($a,{className:"mr-2 h-4 w-4"}),"Download Offline Bundle"]})})]})},o.id)})}):t.jsx(P,{className:"glass",children:t.jsxs(M,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(Nt,{className:"h-12 w-12 text-muted-foreground mb-4"}),t.jsx("h3",{className:"text-lg font-medium mb-1",children:"No licenses found"}),t.jsx("p",{className:"text-muted-foreground text-center max-w-sm",children:"You don't have any licenses assigned to your account yet. Contact your account manager to get started."})]})})]})})}function tZ(){const{data:e,isLoading:s}=GP(),r=YQ(),n=l=>{if(!l)return ib;const c=l.toLowerCase();return c.includes("server")?RS:c.includes("mobile")||c.includes("phone")||c.includes("iphone")||c.includes("android")?IO:ib},a=async l=>{try{await r.mutateAsync(l),z.success("Device deactivated successfully")}catch{z.error("Failed to deactivate device")}},i=(e==null?void 0:e.filter(l=>l.status==="active").length)||0,o=(e==null?void 0:e.filter(l=>l.status!=="active").length)||0;return t.jsx(Ui,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"My Devices"}),t.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your activated devices"})]}),t.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(vt,{className:"h-4 w-4 text-success"}),t.jsxs("span",{children:[i," active"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Nc,{className:"h-4 w-4 text-muted-foreground"}),t.jsxs("span",{children:[o," deactivated"]})]})]})]}),s?t.jsx("div",{className:"space-y-4",children:[1,2,3].map(l=>t.jsx(P,{className:"glass",children:t.jsxs(M,{className:"flex items-center gap-4 p-4",children:[t.jsx(je,{className:"h-12 w-12 rounded-xl"}),t.jsxs("div",{className:"flex-1 space-y-2",children:[t.jsx(je,{className:"h-5 w-48"}),t.jsx(je,{className:"h-4 w-32"})]})]})},l))}):e&&e.length>0?t.jsx("div",{className:"space-y-4",children:e.map(l=>{const c=n(l.device_name),d=l.licenses,u=d==null?void 0:d.products;return t.jsx(P,{className:"glass",children:t.jsxs(M,{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`h-12 w-12 rounded-xl flex items-center justify-center ${l.status==="active"?"bg-primary/20":"bg-muted"}`,children:t.jsx(c,{className:`h-6 w-6 ${l.status==="active"?"text-primary":"text-muted-foreground"}`})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:l.device_name||"Unknown Device"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:(u==null?void 0:u.name)||"Unknown Product"}),t.jsxs("p",{className:"text-xs text-muted-foreground font-mono mt-1",children:["ID: ",l.device_id]})]})]}),t.jsxs("div",{className:"flex items-center gap-4 sm:justify-end",children:[t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[l.status==="active"?t.jsx(vt,{className:"h-4 w-4 text-success"}):t.jsx(Nc,{className:"h-4 w-4 text-destructive"}),t.jsx($,{variant:l.status==="active"?"default":"secondary",children:l.status})]}),t.jsxs("p",{className:"text-xs text-muted-foreground mt-1 flex items-center gap-1 justify-end",children:[t.jsx(Oe,{className:"h-3 w-3"}),l.last_validated_at?`Last seen: ${new Date(l.last_validated_at).toLocaleDateString()}`:`Activated: ${new Date(l.activated_at).toLocaleDateString()}`]})]}),l.status==="active"&&t.jsxs(cn,{children:[t.jsx(Jo,{asChild:!0,children:t.jsxs(T,{variant:"destructive",size:"sm",children:[t.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Deactivate"]})}),t.jsxs(Ur,{children:[t.jsxs(Br,{children:[t.jsx(qr,{children:"Deactivate Device?"}),t.jsxs(Wr,{children:['This will deactivate "',l.device_name||"this device",'" and free up an activation slot. The device will need to be reactivated to use the software again.']})]}),t.jsxs(zr,{children:[t.jsx(Hr,{children:"Cancel"}),t.jsx(Vr,{onClick:()=>a(l.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Deactivate"})]})]})]})]})]})},l.id)})}):t.jsx(P,{className:"glass",children:t.jsxs(M,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(Bs,{className:"h-12 w-12 text-muted-foreground mb-4"}),t.jsx("h3",{className:"text-lg font-medium mb-1",children:"No devices activated"}),t.jsx("p",{className:"text-muted-foreground text-center max-w-sm",children:"You haven't activated any devices yet. Use your license key in the software to activate a device."})]})})]})})}function sZ(){const{data:e,isLoading:s}=$w(),r=ZQ(),[n,a]=f.useState(!1),[i,o]=f.useState(""),[l,c]=f.useState(""),[d,u]=f.useState("medium"),m=async()=>{if(!i.trim()){z.error("Please enter a title");return}try{await r.mutateAsync({title:i.trim(),description:l.trim(),priority:d}),z.success("Ticket created successfully"),a(!1),o(""),c(""),u("medium")}catch{z.error("Failed to create ticket")}},h=y=>{switch(y){case"resolved":case"closed":return vt;case"in_progress":case"waiting_internal":return Oe;default:return fs}},p=y=>{switch(y){case"resolved":case"closed":return"text-success";case"in_progress":return"text-primary";case"waiting_customer":return"text-warning";default:return"text-muted-foreground"}},g=y=>{switch(y){case"critical":return"destructive";case"high":return"default";case"medium":return"secondary";default:return"outline"}},x=(e==null?void 0:e.filter(y=>!["resolved","closed"].includes(y.status)))||[],v=(e==null?void 0:e.filter(y=>["resolved","closed"].includes(y.status)))||[];return t.jsx(Ui,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Support Tickets"}),t.jsx("p",{className:"text-muted-foreground mt-1",children:"Create and manage your support requests"})]}),t.jsxs(Xt,{open:n,onOpenChange:a,children:[t.jsx($r,{asChild:!0,children:t.jsxs(T,{className:"gap-2",children:[t.jsx(at,{className:"h-4 w-4"}),"New Ticket"]})}),t.jsxs(zt,{children:[t.jsxs(es,{children:[t.jsx(ts,{children:"Create Support Ticket"}),t.jsx(ss,{children:"Describe your issue and we'll get back to you as soon as possible."})]}),t.jsxs("div",{className:"space-y-4 py-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"title",children:"Subject"}),t.jsx(se,{id:"title",placeholder:"Brief summary of your issue",value:i,onChange:y=>o(y.target.value)})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"priority",children:"Priority"}),t.jsxs($e,{value:d,onValueChange:y=>u(y),children:[t.jsx(Le,{children:t.jsx(Ue,{placeholder:"Select priority"})}),t.jsxs(Fe,{children:[t.jsx(Z,{value:"low",children:"Low"}),t.jsx(Z,{value:"medium",children:"Medium"}),t.jsx(Z,{value:"high",children:"High"}),t.jsx(Z,{value:"critical",children:"Critical"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(O,{htmlFor:"description",children:"Description"}),t.jsx(Bt,{id:"description",placeholder:"Provide details about your issue...",value:l,onChange:y=>c(y.target.value),rows:5})]})]}),t.jsxs(In,{children:[t.jsx(T,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),t.jsx(T,{onClick:m,disabled:r.isPending,children:r.isPending?t.jsxs(t.Fragment,{children:[t.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Ticket"})]})]})]})]}),s?t.jsx("div",{className:"space-y-4",children:[1,2,3].map(y=>t.jsx(P,{className:"glass",children:t.jsx(M,{className:"p-4",children:t.jsxs("div",{className:"space-y-2",children:[t.jsx(je,{className:"h-5 w-3/4"}),t.jsx(je,{className:"h-4 w-1/2"}),t.jsx(je,{className:"h-4 w-1/4"})]})})},y))}):e&&e.length>0?t.jsxs("div",{className:"space-y-8",children:[x.length>0&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[t.jsx(fs,{className:"h-5 w-5 text-warning"}),"Open Tickets (",x.length,")"]}),x.map(y=>{const j=h(y.status);return t.jsx(Qs,{to:`/portal/tickets/${y.id}`,children:t.jsx(P,{className:"glass hover:border-primary/50 transition-colors cursor-pointer",children:t.jsx(M,{className:"p-4",children:t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-medium",children:y.title}),y.description&&t.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1 mt-1",children:y.description}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[t.jsxs($,{variant:"outline",className:`gap-1 ${p(y.status)}`,children:[t.jsx(j,{className:"h-3 w-3"}),y.status.replace("_"," ")]}),t.jsx($,{variant:g(y.priority),children:y.priority})]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[t.jsx(Oe,{className:"h-4 w-4"}),new Date(y.created_at).toLocaleDateString()]})]})})})},y.id)})]}),v.length>0&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[t.jsx(vt,{className:"h-5 w-5 text-success"}),"Resolved Tickets (",v.length,")"]}),v.map(y=>{const j=h(y.status);return t.jsx(Qs,{to:`/portal/tickets/${y.id}`,children:t.jsx(P,{className:"glass hover:border-primary/50 transition-colors cursor-pointer opacity-75",children:t.jsx(M,{className:"p-4",children:t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-medium",children:y.title}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[t.jsxs($,{variant:"outline",className:`gap-1 ${p(y.status)}`,children:[t.jsx(j,{className:"h-3 w-3"}),y.status]}),t.jsx($,{variant:g(y.priority),children:y.priority})]})]}),t.jsx("div",{className:"text-sm text-muted-foreground",children:y.resolved_at?`Resolved ${new Date(y.resolved_at).toLocaleDateString()}`:`Closed ${new Date(y.closed_at).toLocaleDateString()}`})]})})})},y.id)})]})]}):t.jsx(P,{className:"glass",children:t.jsxs(M,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(rt,{className:"h-12 w-12 text-muted-foreground mb-4"}),t.jsx("h3",{className:"text-lg font-medium mb-1",children:"No support tickets"}),t.jsx("p",{className:"text-muted-foreground text-center max-w-sm mb-4",children:"You haven't created any support tickets yet. Click the button below to get help."}),t.jsxs(T,{onClick:()=>a(!0),className:"gap-2",children:[t.jsx(at,{className:"h-4 w-4"}),"Create Your First Ticket"]})]})})]})})}function rZ(){const{id:e}=ma(),{data:s,isLoading:r}=$w(),{data:n,isLoading:a}=QQ(e),i=JQ(),[o,l]=f.useState(""),c=s==null?void 0:s.find(x=>x.id===e),d=async()=>{if(!o.trim()){z.error("Please enter a comment");return}try{await i.mutateAsync({ticketId:e,content:o.trim()}),z.success("Comment added"),l("")}catch{z.error("Failed to add comment")}},u=x=>{switch(x){case"resolved":case"closed":return vt;case"in_progress":case"waiting_internal":return Oe;default:return fs}},m=x=>{switch(x){case"resolved":case"closed":return"text-success";case"in_progress":return"text-primary";case"waiting_customer":return"text-warning";default:return"text-muted-foreground"}},h=x=>{switch(x){case"critical":return"destructive";case"high":return"default";case"medium":return"secondary";default:return"outline"}};if(r)return t.jsx(Ui,{children:t.jsxs("div",{className:"space-y-4",children:[t.jsx(je,{className:"h-8 w-48"}),t.jsx(je,{className:"h-64 w-full"})]})});if(!c)return t.jsx(Ui,{children:t.jsxs("div",{className:"text-center py-12",children:[t.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Ticket not found"}),t.jsx("p",{className:"text-muted-foreground mb-4",children:"The ticket you're looking for doesn't exist or you don't have access to it."}),t.jsx(Qs,{to:"/portal/tickets",children:t.jsxs(T,{variant:"outline",children:[t.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Back to Tickets"]})})]})});const p=u(c.status),g=!["resolved","closed"].includes(c.status);return t.jsx(Ui,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(Qs,{to:"/portal/tickets",children:t.jsx(T,{variant:"ghost",size:"icon",children:t.jsx(Ft,{className:"h-4 w-4"})})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h1",{className:"text-2xl font-bold",children:c.title}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[t.jsxs($,{variant:"outline",className:`gap-1 ${m(c.status)}`,children:[t.jsx(p,{className:"h-3 w-3"}),c.status.replace("_"," ")]}),t.jsx($,{variant:h(c.priority),children:c.priority}),t.jsxs("span",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[t.jsx(Oe,{className:"h-3 w-3"}),"Created ",new Date(c.created_at).toLocaleDateString()]})]})]})]}),c.description&&t.jsxs(P,{className:"glass",children:[t.jsx(W,{children:t.jsx(V,{className:"text-lg",children:"Description"})}),t.jsx(M,{children:t.jsx("p",{className:"whitespace-pre-wrap",children:c.description})})]}),t.jsxs(P,{className:"glass",children:[t.jsxs(W,{children:[t.jsxs(V,{className:"text-lg flex items-center gap-2",children:[t.jsx(zu,{className:"h-5 w-5"}),"Conversation"]}),t.jsx(ce,{children:g?"Add a comment to continue the conversation":"This ticket has been resolved"})]}),t.jsxs(M,{className:"space-y-4",children:[a?t.jsx("div",{className:"space-y-4",children:[1,2].map(x=>t.jsxs("div",{className:"flex gap-3",children:[t.jsx(je,{className:"h-8 w-8 rounded-full"}),t.jsxs("div",{className:"flex-1 space-y-2",children:[t.jsx(je,{className:"h-4 w-32"}),t.jsx(je,{className:"h-16 w-full"})]})]},x))}):n&&n.length>0?t.jsx("div",{className:"space-y-4",children:n.map(x=>t.jsxs("div",{className:"flex gap-3",children:[t.jsx("div",{className:"h-8 w-8 rounded-full bg-muted flex items-center justify-center shrink-0",children:t.jsx(qs,{className:"h-4 w-4 text-muted-foreground"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"text-sm font-medium",children:x.author_id?"You":"Support Team"}),t.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(x.created_at).toLocaleString()})]}),t.jsx("div",{className:"p-3 rounded-lg bg-muted/50",children:t.jsx("p",{className:"whitespace-pre-wrap text-sm",children:x.content})})]})]},x.id))}):t.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No comments yet. Start the conversation below."}),g&&t.jsxs(t.Fragment,{children:[t.jsx(yr,{}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(Bt,{placeholder:"Type your message...",value:o,onChange:x=>l(x.target.value),rows:3}),t.jsx("div",{className:"flex justify-end",children:t.jsx(T,{onClick:d,disabled:i.isPending||!o.trim(),children:i.isPending?t.jsxs(t.Fragment,{children:[t.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):t.jsxs(t.Fragment,{children:[t.jsx(zf,{className:"mr-2 h-4 w-4"}),"Send Message"]})})})]})]})]})]})]})})}const _1=[{id:"licenses",name:"License Management",description:"Manage your software licenses",icon:Nt,color:"text-primary"},{id:"devices",name:"Device Activation",description:"Activate and manage devices",icon:Bs,color:"text-success"},{id:"support",name:"Support & Tickets",description:"Get help when you need it",icon:rt,color:"text-warning"},{id:"security",name:"Account Security",description:"Keep your account safe",icon:us,color:"text-info"}],rg=[{id:"portal-welcome",title:"Welcome to Your Client Portal",description:"Get started with your personalized license management dashboard",category:"licenses",icon:ir,content:`Welcome to your Client Portal! This is your one-stop destination for managing software licenses, devices, and support.

**What You Can Do Here**
- View all your active licenses
- Activate software on new devices
- Manage device activations
- Create and track support tickets

**Navigation**
Use the menu at the top to switch between different sections:
- **Dashboard**: Overview of your licenses and recent activity
- **My Licenses**: Detailed view of all your licenses
- **My Devices**: Manage activated devices
- **Support**: Create and view support tickets`,tags:["welcome","getting started","overview"],readTime:2,featured:!0},{id:"view-licenses",title:"Viewing Your Licenses",description:"How to find and understand your license details",category:"licenses",icon:Nt,content:`The My Licenses page shows all software licenses associated with your account.

**License Information**
Each license card displays:
- Product name and version
- License key (partially hidden for security)
- Activation status and limits
- Expiration date (if applicable)

**License Status**
- **Active**: License is valid and can be used
- **Expired**: License has passed its validity period
- **Suspended**: License has been temporarily disabled`,tags:["licenses","view","status"],readTime:2},{id:"activate-device",title:"Activating a New Device",description:"Step-by-step guide to activate your software",category:"devices",icon:Bs,content:`Follow these steps to activate your software on a new device.

**Before You Begin**
Make sure you have:
- An active license with available activation slots
- The software installed on your device
- Your license key ready

**Activation Process**
The activation typically happens automatically when you enter your license key in the software. The device will appear in your "My Devices" list once activated.`,tags:["activate","device","installation"],readTime:3,featured:!0,steps:[{title:"Install Software",description:"Download and install the software on your device"},{title:"Enter License Key",description:"Open the software and enter your license key when prompted",tip:"Copy the key from your email or the My Licenses page"},{title:"Verify Activation",description:"Check My Devices to confirm the activation was successful"}]},{id:"deactivate-device",title:"Deactivating a Device",description:"Free up an activation slot by removing a device",category:"devices",icon:Bs,content:`Need to move your license to a new device? Deactivate the old one first.

**When to Deactivate**
- Replacing an old computer
- Moving license to a different device
- Troubleshooting activation issues

**How to Deactivate**
Navigate to My Devices, find the device you want to remove, and click the deactivate button.`,tags:["deactivate","remove","device"],readTime:2,steps:[{title:"Go to My Devices",description:"Navigate to the My Devices section"},{title:"Find Device",description:"Locate the device you want to deactivate"},{title:"Click Deactivate",description:"Click the deactivate button and confirm",tip:"You can reactivate on a new device immediately"}]},{id:"create-support-ticket",title:"Creating a Support Ticket",description:"How to get help from our support team",category:"support",icon:rt,content:`When you need assistance, create a support ticket and our team will help you.

**Writing a Good Ticket**
Include these details for faster resolution:
- Clear description of the issue
- Steps to reproduce the problem
- Any error messages you see
- What you've already tried

**Priority Levels**
- **Critical**: System completely unusable
- **High**: Major feature not working
- **Medium**: Issue with workaround available
- **Low**: Questions or minor issues`,tags:["support","ticket","help"],readTime:3,featured:!0,steps:[{title:"Go to Support",description:"Click Support in the navigation menu"},{title:"Click New Ticket",description:'Click the "New Ticket" button'},{title:"Describe Issue",description:"Fill in the title and detailed description",tip:"Screenshots help us understand the issue faster"},{title:"Submit",description:"Choose priority and submit your ticket"}]},{id:"track-ticket",title:"Tracking Your Support Tickets",description:"View status and updates on your requests",category:"support",icon:rt,content:`Keep track of your support requests and their progress.

**Ticket Status**
- **Open**: We received your ticket
- **In Progress**: A team member is working on it
- **Waiting for You**: We need more information
- **Resolved**: Issue has been addressed

**Adding Comments**
You can add comments to provide additional information or ask questions about your ticket.`,tags:["ticket","status","track"],readTime:2},{id:"account-security",title:"Keeping Your Account Secure",description:"Best practices for account security",category:"security",icon:us,content:`Protect your account and licenses with these security tips.

**Password Best Practices**
- Use a strong, unique password
- Don't share your login credentials
- Change your password if you suspect unauthorized access

**Session Security**
- Log out when using shared computers
- The system automatically logs you out after inactivity

**License Key Protection**
- Keep your license keys private
- Don't share screenshots showing full keys`,tags:["security","password","account"],readTime:2}];function S1({article:e,onClick:s}){const r=e.icon;return t.jsx(P,{className:"group cursor-pointer hover:border-primary/50 hover:shadow-lg transition-all duration-300 hover:-translate-y-1",onClick:s,children:t.jsx(M,{className:"p-5",children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"h-12 w-12 rounded-xl bg-primary/10 flex items-center justify-center shrink-0 group-hover:bg-primary/20 transition-colors",children:t.jsx(r,{className:"h-6 w-6 text-primary"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("h3",{className:"font-semibold text-foreground group-hover:text-primary transition-colors truncate",children:e.title}),e.featured&&t.jsx(Cc,{className:"h-4 w-4 text-warning fill-warning shrink-0"})]}),t.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:e.description}),t.jsx("div",{className:"flex items-center gap-3",children:t.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[t.jsx(Oe,{className:"h-3 w-3"}),e.readTime," min read"]})})]}),t.jsx(ln,{className:"h-5 w-5 text-muted-foreground group-hover:text-primary group-hover:translate-x-1 transition-all shrink-0"})]})})})}function nZ({article:e,onBack:s}){const r=e.icon;return t.jsxs("div",{className:"space-y-6 animate-in fade-in-0 slide-in-from-right-5 duration-300",children:[t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx(T,{variant:"ghost",size:"icon",onClick:s,className:"shrink-0 mt-1",children:t.jsx(Ft,{className:"h-5 w-5"})}),t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"h-12 w-12 rounded-xl bg-primary/10 flex items-center justify-center",children:t.jsx(r,{className:"h-6 w-6 text-primary"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:e.title}),t.jsxs("span",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[t.jsx(Oe,{className:"h-3 w-3"}),e.readTime," min read"]})]})]})})]}),t.jsx(P,{className:"glass",children:t.jsx(M,{className:"p-6",children:t.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:e.content.split(`

`).map((n,a)=>{if(n.startsWith("**")&&n.includes(`
`)){const[i,...o]=n.split(`
`);return t.jsxs("div",{className:"mt-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-2 text-foreground",children:i.replace(/\*\*/g,"")}),o.map((l,c)=>l.startsWith("- ")?t.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[t.jsx(vt,{className:"h-4 w-4 text-success mt-0.5 shrink-0"}),t.jsx("span",{className:"text-muted-foreground",children:l.replace("- ","")})]},c):t.jsx("p",{className:"text-muted-foreground",children:l},c))]},a)}return t.jsx("p",{className:"text-muted-foreground mb-4 leading-relaxed",children:n},a)})})})}),e.steps&&e.steps.length>0&&t.jsxs(P,{className:"glass",children:[t.jsx(W,{children:t.jsxs(V,{className:"text-lg flex items-center gap-2",children:[t.jsx(Rn,{className:"h-5 w-5 text-primary"}),"Step-by-Step Guide"]})}),t.jsx(M,{className:"space-y-4",children:e.steps.map((n,a)=>t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("div",{className:"h-8 w-8 rounded-full bg-primary text-primary-foreground flex items-center justify-center font-semibold text-sm",children:a+1}),a<e.steps.length-1&&t.jsx("div",{className:"w-0.5 flex-1 bg-border mt-2"})]}),t.jsxs("div",{className:"pb-6",children:[t.jsx("h4",{className:"font-semibold text-foreground mb-1",children:n.title}),t.jsx("p",{className:"text-sm text-muted-foreground",children:n.description}),n.tip&&t.jsxs("div",{className:"mt-2 p-3 rounded-lg bg-info/10 border border-info/20 flex items-start gap-2",children:[t.jsx(Ud,{className:"h-4 w-4 text-info shrink-0 mt-0.5"}),t.jsx("span",{className:"text-sm text-info",children:n.tip})]})]})]},a))})]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map(n=>t.jsx($,{variant:"outline",className:"text-xs",children:n},n))})]})}function aZ(){var d;const e=Qe(),[s,r]=f.useState(""),[n,a]=f.useState(null),[i,o]=f.useState(null),l=f.useMemo(()=>{let u=rg;if(s){const m=s.toLowerCase();u=u.filter(h=>h.title.toLowerCase().includes(m)||h.description.toLowerCase().includes(m)||h.tags.some(p=>p.toLowerCase().includes(m)))}return n&&(u=u.filter(m=>m.category===n)),u},[s,n]),c=rg.filter(u=>u.featured);return t.jsx(Ui,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-primary/10 via-primary/5 to-transparent p-8 border border-primary/20",children:[t.jsx("div",{className:"absolute -right-20 -top-20 h-64 w-64 rounded-full bg-primary/10 blur-3xl"}),t.jsxs("div",{className:"relative z-10",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"h-14 w-14 rounded-2xl bg-primary/20 flex items-center justify-center",children:t.jsx(ir,{className:"h-7 w-7 text-primary"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Help Center"}),t.jsx("p",{className:"text-muted-foreground",children:"Find answers to your questions"})]})]}),t.jsxs("div",{className:"relative max-w-xl",children:[t.jsx(ns,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),t.jsx(se,{placeholder:"Search help articles...",value:s,onChange:u=>r(u.target.value),className:"pl-12 h-12 text-base bg-background/80"}),s&&t.jsx(T,{variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2 h-8 w-8",onClick:()=>r(""),children:t.jsx(Ct,{className:"h-4 w-4"})})]})]})]}),i?t.jsx(nZ,{article:i,onBack:()=>o(null)}):t.jsxs(t.Fragment,{children:[!s&&!n&&t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:_1.map(u=>{const m=u.icon,h=rg.filter(p=>p.category===u.id).length;return t.jsx(P,{className:"group cursor-pointer hover:border-primary/50 transition-all",onClick:()=>a(u.id),children:t.jsxs(M,{className:"p-4 flex items-center gap-3",children:[t.jsx("div",{className:"h-10 w-10 rounded-lg bg-muted flex items-center justify-center",children:t.jsx(m,{className:J("h-5 w-5",u.color)})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium",children:u.name}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[h," articles"]})]})]})},u.id)})}),!s&&!n&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[t.jsx(Cc,{className:"h-5 w-5 text-warning fill-warning"}),"Featured Guides"]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.map(u=>t.jsx(S1,{article:u,onClick:()=>o(u)},u.id))})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[n&&t.jsxs(T,{variant:"ghost",size:"sm",onClick:()=>a(null),className:"gap-1",children:[t.jsx(Ft,{className:"h-4 w-4"}),"Back"]}),t.jsx("h2",{className:"text-xl font-semibold",children:s?`Search Results (${l.length})`:n?(d=_1.find(u=>u.id===n))==null?void 0:d.name:"All Articles"})]}),l.length===0?t.jsxs(P,{className:"p-12 text-center",children:[t.jsx($d,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No articles found"}),t.jsx("p",{className:"text-muted-foreground mb-4",children:"Try different keywords or browse categories."}),t.jsx(T,{variant:"outline",onClick:()=>{r(""),a(null)},children:"Clear Filters"})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.map(u=>t.jsx(S1,{article:u,onClick:()=>o(u)},u.id))})]}),t.jsx(yr,{className:"my-8"}),t.jsx(P,{className:"bg-gradient-to-r from-muted/50 to-transparent",children:t.jsxs(M,{className:"p-6 flex flex-col sm:flex-row items-center gap-6",children:[t.jsx("div",{className:"h-16 w-16 rounded-2xl bg-primary/10 flex items-center justify-center shrink-0",children:t.jsx($d,{className:"h-8 w-8 text-primary"})}),t.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[t.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Need more help?"}),t.jsx("p",{className:"text-muted-foreground",children:"Create a support ticket and we'll get back to you as soon as possible."})]}),t.jsx(T,{className:"shrink-0",onClick:()=>e("/portal/tickets"),children:"Contact Support"})]})})]})]})})}const iZ=new mL;function oZ(){return t.jsx(u8,{children:t.jsx(I8,{children:t.jsxs(m8,{children:[t.jsx(C8,{}),t.jsx(_8,{timeoutMinutes:10,redirectPath:"/auth"}),t.jsxs(Dj,{children:[t.jsx(Re,{path:"/auth",element:t.jsx(Ox,{})}),t.jsx(Re,{path:"/admin/auth",element:t.jsx(Ox,{})}),t.jsx(Re,{path:"/login",element:t.jsx(Ox,{})}),t.jsx(Re,{path:"/reset-password",element:t.jsx(RQ,{})}),t.jsx(Re,{path:"/accept-invitation",element:t.jsx(IQ,{})}),t.jsx(Re,{path:"/",element:t.jsx(Xe,{children:t.jsx(e1,{})})}),t.jsx(Re,{path:"/dashboard",element:t.jsx(Xe,{children:t.jsx(e1,{})})}),t.jsx(Re,{path:"/admin",element:t.jsx(Xe,{children:t.jsx(is,{children:t.jsx(RA,{})})})}),t.jsx(Re,{path:"/admin/companies",element:t.jsx(Xe,{children:t.jsx(is,{children:t.jsx(qH,{})})})}),t.jsx(Re,{path:"/admin/companies/:id",element:t.jsx(Xe,{children:t.jsx(is,{children:t.jsx(wG,{})})})}),t.jsx(Re,{path:"/admin/projects",element:t.jsx(Xe,{children:t.jsx(is,{children:t.jsx(f1,{})})})}),t.jsx(Re,{path:"/admin/projects/:id",element:t.jsx(Xe,{children:t.jsx(is,{children:t.jsx(l1,{})})})}),t.jsx(Re,{path:"/admin/all-projects",element:t.jsx(Xe,{children:t.jsx(is,{children:t.jsx(f1,{})})})}),t.jsx(Re,{path:"/admin/tickets/:id",element:t.jsx(Xe,{children:t.jsx(is,{children:t.jsx(Kx,{})})})}),t.jsx(Re,{path:"/admin/all-tickets",element:t.jsx(Xe,{children:t.jsx(is,{children:t.jsx(IG,{})})})}),t.jsx(Re,{path:"/admin/employees",element:t.jsx(Xe,{children:t.jsx(is,{children:t.jsx(dG,{})})})}),t.jsx(Re,{path:"/admin/employees/:id",element:t.jsx(Xe,{children:t.jsx(is,{children:t.jsx(mG,{})})})}),t.jsx(Re,{path:"/admin/audit-logs",element:t.jsx(Xe,{children:t.jsx(is,{children:t.jsx(GK,{})})})}),t.jsx(Re,{path:"/admin/users",element:t.jsx(Xe,{children:t.jsx(is,{children:t.jsx(nG,{})})})}),t.jsx(Re,{path:"/admin/settings",element:t.jsx(Xe,{children:t.jsx(is,{children:t.jsx(aG,{})})})}),t.jsx(Re,{path:"/admin/reports",element:t.jsx(Xe,{children:t.jsx(is,{children:t.jsx(cG,{})})})}),t.jsx(Re,{path:"/admin/billing",element:t.jsx(Xe,{children:t.jsx(is,{children:t.jsx(RG,{})})})}),t.jsx(Re,{path:"/employee",element:t.jsx(Xe,{children:t.jsx(ty,{})})}),t.jsx(Re,{path:"/employee/tickets",element:t.jsx(Xe,{children:t.jsx(ty,{})})}),t.jsx(Re,{path:"/employee/tickets/:id",element:t.jsx(Xe,{children:t.jsx(Kx,{})})}),t.jsx(Re,{path:"/employee/profile",element:t.jsx(Xe,{children:t.jsx(t1,{})})}),t.jsx(Re,{path:"/billing",element:t.jsx(Xe,{children:t.jsx(co,{children:t.jsx(WG,{})})})}),t.jsx(Re,{path:"/team",element:t.jsx(Xe,{children:t.jsx(co,{children:t.jsx(gY,{})})})}),t.jsx(Re,{path:"/team/:id",element:t.jsx(Xe,{children:t.jsx(co,{children:t.jsx(OY,{})})})}),t.jsx(Re,{path:"/settings",element:t.jsx(Xe,{children:t.jsx(co,{children:t.jsx(LY,{})})})}),t.jsx(Re,{path:"/my-projects",element:t.jsx(Xe,{children:t.jsx(jY,{})})}),t.jsx(Re,{path:"/my-tickets",element:t.jsx(Xe,{children:t.jsx(NY,{})})}),t.jsx(Re,{path:"/knowledge-base",element:t.jsx(Xe,{children:t.jsx(WQ,{})})}),t.jsx(Re,{path:"/profile",element:t.jsx(Xe,{children:t.jsx(t1,{})})}),t.jsx(Re,{path:"/projects",element:t.jsx(Xe,{children:t.jsx(co,{children:t.jsx(DG,{})})})}),t.jsx(Re,{path:"/projects/:id",element:t.jsx(Xe,{children:t.jsx(l1,{})})}),t.jsx(Re,{path:"/projects/:id/billing",element:t.jsx(Xe,{children:t.jsx(co,{children:t.jsx(fY,{})})})}),t.jsx(Re,{path:"/tickets",element:t.jsx(Xe,{children:t.jsx(co,{children:t.jsx(FG,{})})})}),t.jsx(Re,{path:"/tickets/:id",element:t.jsx(Xe,{children:t.jsx(Kx,{})})}),t.jsx(Re,{path:"/products",element:t.jsx(Xe,{children:t.jsx(is,{children:t.jsx(WY,{})})})}),t.jsx(Re,{path:"/products/:id",element:t.jsx(Xe,{children:t.jsx(is,{children:t.jsx(VY,{})})})}),t.jsx(Re,{path:"/clients",element:t.jsx(Xe,{children:t.jsx(is,{children:t.jsx(GY,{})})})}),t.jsx(Re,{path:"/clients/:id",element:t.jsx(Xe,{children:t.jsx(is,{children:t.jsx(eQ,{})})})}),t.jsx(Re,{path:"/licenses",element:t.jsx(Xe,{children:t.jsx(is,{children:t.jsx(aQ,{})})})}),t.jsx(Re,{path:"/licenses/:id",element:t.jsx(Xe,{children:t.jsx(is,{children:t.jsx(iQ,{})})})}),t.jsx(Re,{path:"/notifications",element:t.jsx(Xe,{children:t.jsx(is,{children:t.jsx(TQ,{})})})}),t.jsx(Re,{path:"*",element:t.jsx(VQ,{})})]})]})})})}function lZ(){return t.jsxs(h8,{children:[t.jsx(S8,{timeoutMinutes:10}),t.jsxs(Dj,{children:[t.jsx(Re,{path:"/portal/auth",element:t.jsx(GQ,{})}),t.jsx(Re,{path:"/portal",element:t.jsx(gl,{children:t.jsx(XQ,{})})}),t.jsx(Re,{path:"/portal/licenses",element:t.jsx(gl,{children:t.jsx(eZ,{})})}),t.jsx(Re,{path:"/portal/devices",element:t.jsx(gl,{children:t.jsx(tZ,{})})}),t.jsx(Re,{path:"/portal/tickets",element:t.jsx(gl,{children:t.jsx(sZ,{})})}),t.jsx(Re,{path:"/portal/tickets/:id",element:t.jsx(gl,{children:t.jsx(rZ,{})})}),t.jsx(Re,{path:"/portal/help",element:t.jsx(gl,{children:t.jsx(aZ,{})})})]})]})}const cZ=()=>t.jsx(fL,{client:iZ,children:t.jsx(f8,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,children:t.jsxs(z3,{children:[t.jsx(NM,{}),t.jsx(n5,{}),t.jsx(NF,{children:t.jsxs(Dj,{children:[t.jsx(Re,{path:"/portal/*",element:t.jsx(lZ,{})}),t.jsx(Re,{path:"/*",element:t.jsx(oZ,{})})]})})]})})});J_(document.getElementById("root")).render(t.jsx(cZ,{}));
