import{j as s}from"./vendor-ui-DDe0YJcq.js";import{r as a,e as L,L as x}from"./vendor-react-Dm5yKVFn.js";import{B as f}from"./button-DbesmKjE.js";import{I as h}from"./input-CecEDlVO.js";import{e as A,u as n}from"./main-C0uu6PdK.js";import{N as w,F as j}from"./Footer-Cvsb3-Sv.js";import{S as b}from"./SEO-CdeZ9FJQ.js";import{L as g}from"./loader-circle-BzrDTreR.js";import{m as N}from"./vendor-motion-CV8qHFWj.js";import{C as B}from"./circle-check-big-KsWECfqS.js";import{L as y}from"./lock-BEDOAixf.js";import{E as W}from"./eye-off-Blzxmn3_.js";import{E as R}from"./eye-BRKtWptT.js";import{A as U}from"./arrow-left-CUQnsh3G.js";import{o as Y,s as v}from"./types-BnTeS-Hg.js";import"./vendor-query-H2NWpbgn.js";import"./linkedin-CIlyPGzz.js";const q=Y({password:v().min(6,"Password must be at least 6 characters"),confirmPassword:v()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),as=()=>{const[e,P]=a.useState(""),[c,S]=a.useState(""),[t,C]=a.useState(!1),[d,l]=a.useState(!1),[E,k]=a.useState(!1),{user:m,isLoading:i,updatePassword:F}=A(),u=L();a.useEffect(()=>{!i&&!m&&(n.error("Invalid or expired reset link"),u("/applicant/login"))},[m,i,u]);const I=async r=>{r.preventDefault();const p=q.safeParse({password:e,confirmPassword:c});if(!p.success){n.error(p.error.errors[0].message);return}l(!0);try{const{error:o}=await F(e);if(o)throw o;k(!0),n.success("Password updated successfully!")}catch(o){n.error(o.message||"Failed to update password")}finally{l(!1)}};return i?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsx(g,{className:"w-8 h-8 animate-spin text-primary"})}):E?s.jsxs(s.Fragment,{children:[s.jsx(b,{title:"Password Updated | InfraWeave Careers",description:"Your password has been successfully updated. You can now access your InfraWeave Careers account."}),s.jsx(w,{}),s.jsx("main",{className:"min-h-screen bg-gradient-to-b from-[#EEF4FA] to-background pt-24 pb-16",children:s.jsx("div",{className:"container mx-auto px-4 max-w-md",children:s.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-8 rounded-2xl bg-card border border-border shadow-lg text-center",children:[s.jsx(B,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-heading font-bold mb-4",children:"Password Updated!"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Your password has been updated successfully."}),s.jsx(x,{to:"/applicant/dashboard",children:s.jsx(f,{className:"w-full",children:"Go to Dashboard"})})]})})}),s.jsx(j,{})]}):s.jsxs(s.Fragment,{children:[s.jsx(b,{title:"Reset Password | InfraWeave Careers",description:"Set a new password for your InfraWeave Careers account to continue tracking your job applications."}),s.jsx(w,{}),s.jsx("main",{className:"min-h-screen bg-gradient-to-b from-[#EEF4FA] to-background pt-24 pb-16",children:s.jsxs("div",{className:"container mx-auto px-4 max-w-md",children:[s.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-8 rounded-2xl bg-card border border-border shadow-lg",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-2xl font-heading font-bold",children:"Set New Password"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Create a strong password for your account"})]}),s.jsxs("form",{onSubmit:I,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(y,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),s.jsx(h,{type:t?"text":"password",placeholder:"••••••••",value:e,onChange:r=>P(r.target.value),className:"pl-10 pr-10 h-12",required:!0}),s.jsx("button",{type:"button",onClick:()=>C(!t),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:t?s.jsx(W,{className:"w-5 h-5"}):s.jsx(R,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(y,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),s.jsx(h,{type:t?"text":"password",placeholder:"••••••••",value:c,onChange:r=>S(r.target.value),className:"pl-10 h-12",required:!0})]})]}),s.jsx(f,{type:"submit",className:"w-full h-12",disabled:d,children:d?s.jsx(g,{className:"w-5 h-5 animate-spin"}):"Update Password"})]})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs(x,{to:"/applicant/login",className:"text-sm text-muted-foreground hover:text-primary",children:[s.jsx(U,{className:"w-4 h-4 inline mr-1"}),"Back to Login"]})})]})}),s.jsx(j,{})]})};export{as as default};
