import{j as e}from"./vendor-ui-CpQN7H5M.js";import{r as i,c as T,L as Y}from"./vendor-react-CQIth8Kl.js";import{B as g}from"./button-DN9WMlhV.js";import{I as N}from"./input-3sGjNk2T.js";import{e as q,s as j,u as n}from"./main-DOuA4wCK.js";import{N as C,F as k}from"./Footer-BcNHKjd0.js";import{S}from"./SEO-Dzs1gqxY.js";import{L as E}from"./loader-circle-gm-OM9IX.js";import{m as F}from"./vendor-motion-BaiS5iA3.js";import{C as G}from"./circle-check-big-C0RdmDXd.js";import{A as P}from"./arrow-left-D7h5K2af.js";import{M as H}from"./mail-CnIzshDs.js";import{L as R}from"./lock-CAlp7rmO.js";import{E as U}from"./eye-off-DCUQejr9.js";import{E as D}from"./eye-BLGa8gir.js";import{o as A,s as b}from"./types-BnTeS-Hg.js";import"./vendor-query-CbH48mXO.js";import"./linkedin-C4Vw4HHZ.js";const _=A({email:b().email("Please enter a valid email"),password:b().min(6,"Password must be at least 6 characters")}),$=A({email:b().email("Please enter a valid email")}),xe=()=>{const[l,I]=i.useState(""),[c,w]=i.useState(""),[d,B]=i.useState(!1),[a,u]=i.useState(!1),[r,x]=i.useState(!1),[L,v]=i.useState(!1),[y,m]=i.useState(!1),{user:p,isLoading:h,signIn:W,signUp:M,resetPassword:J}=q(),f=T();i.useEffect(()=>{p&&!h&&j.from("admin_users").select("id").eq("user_id",p.id).maybeSingle().then(({data:s})=>{s?f("/admin"):(f("/applicant/dashboard"),n.success("Welcome! Explore opportunities and manage your profile."))})},[p,h,f]);const z=async s=>{s.preventDefault(),m(!0);try{if(r){const t=$.safeParse({email:l});if(!t.success){n.error(t.error.errors[0].message),m(!1);return}const{error:o}=await j.auth.resetPasswordForEmail(l,{redirectTo:`${window.location.origin}/applicant/reset-password`});if(o)throw o;v(!0),n.success("Password reset email sent!")}else{const t=_.safeParse({email:l,password:c});if(!t.success){n.error(t.error.errors[0].message),m(!1);return}if(a){const{error:o}=await M(l,c);if(o)throw o;n.success("Account created! You can now sign in."),u(!1),w("")}else{const{error:o}=await W(l,c);if(o)throw o;n.success("Welcome back!")}}}catch(t){console.error("Auth error:",t),n.error(t.message||"An error occurred")}finally{m(!1)}},O=async()=>{try{const{error:s}=await j.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/applicant/dashboard`}});if(s)throw s}catch(s){n.error(s.message||"Failed to sign in with Google")}};return h?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsx(E,{className:"w-8 h-8 animate-spin text-primary"})}):L?e.jsxs(e.Fragment,{children:[e.jsx(S,{title:"Check Your Email | InfraWeave Careers",description:"Check your email for the password reset link to access your InfraWeave Careers account."}),e.jsx(C,{}),e.jsx("main",{className:"min-h-screen bg-gradient-to-b from-[#EEF4FA] to-background pt-24 pb-16",children:e.jsx("div",{className:"container mx-auto px-4 max-w-md",children:e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-8 rounded-2xl bg-card border border-border shadow-lg text-center",children:[e.jsx(G,{className:"w-16 h-16 text-primary mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-heading font-bold mb-4",children:"Check Your Email"}),e.jsxs("p",{className:"text-muted-foreground mb-6",children:["We've sent a password reset link to ",e.jsx("strong",{children:l})]}),e.jsxs(g,{onClick:()=>{v(!1),x(!1)},variant:"outline",className:"w-full",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Back to Login"]})]})})}),e.jsx(k,{})]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{title:a?"Create Account | InfraWeave Careers":"Sign In | InfraWeave Careers",description:a?"Create your InfraWeave Careers account to apply for jobs and track your applications.":"Sign in to your InfraWeave Careers account to manage your profile and track job applications."}),e.jsx(C,{}),e.jsx("main",{className:"min-h-screen bg-gradient-to-b from-[#EEF4FA] to-background pt-24 pb-16",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-md",children:[e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-8 rounded-2xl bg-card border border-border shadow-lg",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-heading font-bold",children:r?"Reset Password":a?"Create Your Account":"Welcome Back"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:r?"Enter your email to receive a reset link":a?"Join our talent network and find your next opportunity":"Sign in to track your applications"})]}),!r&&e.jsxs(e.Fragment,{children:[e.jsxs(g,{type:"button",variant:"outline",className:"w-full mb-4 h-12",onClick:O,children:[e.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t border-border"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"Or continue with email"})})]})]}),e.jsxs("form",{onSubmit:z,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx(N,{type:"email",placeholder:"you@example.com",value:l,onChange:s=>I(s.target.value),className:"pl-10 h-12",required:!0})]})]}),!r&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx(N,{type:d?"text":"password",placeholder:"••••••••",value:c,onChange:s=>w(s.target.value),className:"pl-10 pr-10 h-12",required:!0}),e.jsx("button",{type:"button",onClick:()=>B(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:d?e.jsx(U,{className:"w-5 h-5"}):e.jsx(D,{className:"w-5 h-5"})})]})]}),!a&&!r&&e.jsx("div",{className:"text-right",children:e.jsx("button",{type:"button",onClick:()=>x(!0),className:"text-sm text-primary hover:underline",children:"Forgot password?"})}),e.jsx(g,{type:"submit",className:"w-full h-12",disabled:y,children:y?e.jsx(E,{className:"w-5 h-5 animate-spin"}):r?"Send Reset Link":a?"Create Account":"Sign In"})]}),e.jsx("div",{className:"mt-6 text-center text-sm",children:r?e.jsx("button",{onClick:()=>x(!1),className:"text-primary hover:underline",children:"Back to sign in"}):a?e.jsxs(e.Fragment,{children:["Already have an account?"," ",e.jsx("button",{onClick:()=>u(!1),className:"text-primary hover:underline font-medium",children:"Sign in"})]}):e.jsxs(e.Fragment,{children:["Don't have an account?"," ",e.jsx("button",{onClick:()=>u(!0),className:"text-primary hover:underline font-medium",children:"Create one"})]})}),a&&e.jsx("p",{className:"mt-4 text-xs text-center text-muted-foreground",children:"By creating an account, you agree to receive our newsletter and updates about job opportunities."})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(Y,{to:"/careers",className:"text-sm text-muted-foreground hover:text-primary",children:[e.jsx(P,{className:"w-4 h-4 inline mr-1"}),"Back to Careers"]})})]})}),e.jsx(k,{})]})};export{xe as default};
